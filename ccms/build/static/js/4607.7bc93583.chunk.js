"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{4607:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var r=a(9950),l=a(13564),n=a(79537),o=a(48089),s=a(68367),i=a(84142),c=a(12257),d=a(6368),u=a(82053),h=a(74745),p=a(1320),g=a(15769),f=a(34075),b=a(91434),m=a(16497),x=a(37324),w=a(29031),v=a(90260),S=a(46765),j=a(86608),A=a(38861),O=a(8279),y=a(22704),C=(a(66075),a(44185)),P=a(63358),D=a(72870),k=a(12480),T=a(32741),_=a(95074),R=(a(16099),a(44414));const E=["new","old"],F=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],L=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function B(){const{themeStretch:e}=(0,j.A)(),{enqueueSnackbar:t}=(0,w.dh)(),a=(0,l.Zp)(),{dense:B,page:I,order:N,orderBy:V,rowsPerPage:q,setPage:U,selected:z,onSort:M,onChangeDense:W,onChangePage:Y,onChangeRowsPerPage:H}=(0,A.Ay)({defaultOrderBy:"createDate"}),[Z,G]=(0,r.useState)([]),[J,K]=(0,r.useState)(""),[Q,X]=(0,r.useState)("new"),[$,ee]=(0,r.useState)(null),[te,ae]=(0,r.useState)(null),{currentTab:re,onChangeTab:le}=(0,S.A)("all"),[ne,oe]=(0,r.useState)("Title Insurance"),[se,ie]=(0,r.useState)(!1),ce=(0,r.useRef)(null),[de,ue]=(0,r.useState)(!1);(0,r.useEffect)((()=>{"Sightline\xae"!==ne&&"UCC"!==ne&&he(L.find((e=>e.label===ne)).api)}),[ne]);const he=e=>{ie(!0);try{T.A.get("employee/".concat(e)).then((e=>{ie(!1);const a=e.data;console.log(a,"Dataemployee"),200===e.status?G(a.orders):t(a.message)}))}catch(a){if(ie(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},pe=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:l,filterService:n,filterStartDate:o,filterEndDate:s}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=i.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==n&&(t=t.filter((e=>e.status===n)));o&&s&&(t=t.filter((e=>e.updated_at.getTime()>=o.getTime()&&e.updated_at.getTime()<=s.getTime())));return t}({tableData:Z,comparator:(0,A.hz)(N,V),filterName:J,filterService:Q,filterStatus:re,filterStartDate:$,filterEndDate:te}),ge=B?56:76,fe=!pe.length&&!!J||!pe.length&&!!re||!pe.length&&!!Q||!pe.length&&!!te||!pe.length&&!!$,be=e=>Z.filter((t=>t.status===e)).length,me=[{value:"all",label:"All",color:"info",count:Z.length},{value:"active",label:"Active",color:"info",count:be("active")},{value:"new",label:"New",color:"info",count:be("new")},{value:"placed",label:"Placed",color:"info",count:be("placed")},{value:"completed",label:"Completed",color:"success",count:be("completed")},{value:"on hold",label:"On Hold",color:"warning",count:be("on hold")},{value:"draft",label:"Draft",color:"default",count:be("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:be("cancelled")}];return(0,R.jsxs)(O.A,{title:"Order: Your Orders",children:[se&&(0,R.jsx)(_.A,{}),(0,R.jsx)("input",{type:"file",ref:ce,onChange:e=>{ie(!0);const a=new FormData;a.append("file",e.target.files[0]),a.append("order_id",de);try{T.A.post("employee/document",a).then((e=>{ie(!1);const a=e.data;200===e.status&&e.status,t(a.message)})).catch((()=>{ie(!1)}))}catch(r){if(ie(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},hidden:!0}),(0,R.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,R.jsx)(P.A,{heading:"Your Orders",links:[{name:"Dashboard",href:v.i8.root},{name:"Orders"}]}),(0,R.jsx)(o.A,{sx:{mb:5},children:(0,R.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ne,onChange:(e,t)=>oe(t),sx:{px:2,bgcolor:"background.neutral"},children:L.map((e=>(0,R.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,R.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,R.jsx)("div",{children:e.label})})},e.label)))})}),(0,R.jsx)(d.A,{sx:{p:2},children:(0,R.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:ne.label})}),(0,R.jsxs)(o.A,{children:[(0,R.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:re,onChange:le,sx:{px:2,bgcolor:"background.neutral"},children:me.map((e=>(0,R.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,R.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,R.jsx)("div",{children:e.label})," ",(0,R.jsxs)(y.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,R.jsx)(h.A,{}),(0,R.jsx)(k.F5,{filterName:J,filterService:Q,filterStartDate:$,filterEndDate:te,onFilterName:e=>{K(e),U(0)},onFilterService:e=>{X(e.target.value)},onFilterStartDate:e=>{ee(e)},onFilterEndDate:e=>{ae(e)},optionsService:E}),(0,R.jsx)(C.A,{children:(0,R.jsx)(p.A,{sx:{minWidth:800,position:"relative"},children:(0,R.jsxs)(g.A,{size:B?"small":"medium",children:[(0,R.jsx)(D.er,{order:N,orderBy:V,headLabel:F,rowCount:Z.length,numSelected:z.length,onSort:M}),(0,R.jsxs)(f.A,{children:[pe.slice(I*q,I*q+q).map((e=>(0,R.jsx)(k.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===ne&&a(v.i8.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ne&&a(v.i8.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ne&&a(v.i8.viewOrders.eagle9PolicyOrderView,{state:e}),"Offering Plans"===ne&&a(v.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ne&&a(v.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ne&&a(v.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>{return t=e.id,ue(t),void ce.current.click();var t},onStatusChange:a=>((e,a)=>{ie(!0);try{const r=new FormData;r.append("status",a),r.append("id",e),T.A.post("/employee/changeorderStatus",r).then((r=>{if(ie(!1),200===r.status||201===r.status){const l=r.data,n=Z.map((t=>t.id===e?{...t,status:a}:t));G(n),t(l.message)}}))}catch(r){ie(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}})(e.id,a)},e.id))),(0,R.jsx)(D.dO,{height:ge,emptyRows:(0,A.xl)(I,q,Z.length)}),(0,R.jsx)(D.Sm,{isNotFound:fe})]})]})})}),(0,R.jsxs)(d.A,{sx:{position:"relative"},children:[(0,R.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:pe.length,rowsPerPage:q,page:I,onPageChange:Y,onRowsPerPageChange:H}),(0,R.jsx)(m.A,{control:(0,R.jsx)(x.A,{checked:B,onChange:W}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})]})}}}]);