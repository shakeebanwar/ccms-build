(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{4607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var a=r(9950),o=r(13564),i=r(79537),s=r(12257),l=r(48089),n=r(68367),c=r(84142),d=r(1320),u=r(15769),p=r(34075),h=r(6368),f=r(91434),g=r(16497),m=r(37324),w=r(53984),v=r(73447),x=r(57191),b=r(60899),O=r(82053),y=r(29031),S=r(9449),A=r(55858),C=r(48711),_=r(90260),j=r(46765),P=r(86608),k=r(38861),R=r(8279),V=(r(22704),r(66075),r(44185)),T=r(63358),D=r(72870),E=r(12480),I=r(32741),L=r(95074),F=(r(95358),r(52401)),N=r(33507),q=r(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},B=[{id:"status",label:"Order Status",align:"left",width:700},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:600},{id:"county",label:"County",align:"left",width:600},{id:"file_pdf",label:"Contract Pdf",align:"left",width:500},{id:"status_change",label:"Change Status",align:"left",width:300},{id:"",label:(0,q.jsx)(A.A,{color:"#e9eff4"}),align:"center",width:50}],z=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function U(){var e;const{user:t}=(0,N.A)(),{themeStretch:r}=(0,P.A)(),{enqueueSnackbar:A}=(0,y.dh)(),U=(0,o.Zp)(),{state:G}=(0,o.zy)(),W=null===G||void 0===G?void 0:G.orderType;console.log(t,"user");const{dense:Y,page:H,order:Z,orderBy:J,rowsPerPage:K,setPage:Q,selected:X,onSort:$,onChangeDense:ee,onChangePage:te,onChangeRowsPerPage:re}=(0,k.Ay)({defaultOrderBy:"createDate"}),ae=(null===t||void 0===t?void 0:t.user_permissions)||{},oe=z.filter((e=>!0===(null===ae||void 0===ae?void 0:ae[e.permission])));console.log(oe,"filteredTabs");const[ie,se]=(0,a.useState)([]),[le,ne]=(0,a.useState)(""),[ce,de]=(0,a.useState)("new"),[ue,pe]=(0,a.useState)(null),[he,fe]=(0,a.useState)(null),{currentTab:ge,onChangeTab:me}=(0,j.A)("all"),[we,ve]=(0,a.useState)((null===oe||void 0===oe?void 0:oe.length)>0?null===(e=oe[0])||void 0===e?void 0:e.label:null),[xe,be]=(0,a.useState)(!1),Oe=(0,a.useRef)(null),[ye,Se]=(0,a.useState)(!1),[Ae,Ce]=(0,a.useState)(""),[_e,je]=(0,a.useState)(!1),[Pe,ke]=(0,a.useState)([]),[Re,Ve]=(0,a.useState)(),[Te,De]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{be(!0);try{var e;const t=await I.A.get("employee/users/list");console.log(t,"all user"),ke(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.files),console.log(t,"autofill")}catch(t){console.log(t,"autofill")}finally{be(!1)}})()}),[]);(0,a.useEffect)((()=>{var e;"Sightline\xae"!==we&&"UCC"!==we&&Ee(null===oe||void 0===oe||null===(e=oe.find((e=>e.label===we)))||void 0===e?void 0:e.api,"")}),[we]),(0,a.useEffect)((()=>{var e;W&&(Ee(null===(e=z.find((e=>e.label===W)))||void 0===e?void 0:e.api,""),ve(W))}),[W]);const Ee=(e,t)=>{be(!0);try{I.A.get("employee/".concat(e,"?user_id=").concat(t)).then((e=>{be(!1);const t=e.data;console.log(t,"Dataemployee"),200===e.status?se(t.orders):A(t.message)}))}catch(r){if(be(!1),r.errors){Object.keys(r.errors).map((e=>A(r.errors[e][0],{variant:"error"})))}}},Ie=(e,t)=>{je(!0),Se(e),Ce(t)},Le=e=>{be(!0),console.log(e,"files");const t=new FormData;t.append("file",e[0]);try{I.A.post("employee/complete/".concat(Ae,"/").concat(ye),t).then((e=>{if(console.log(e,"status api"),be(!1),200===e.status||201===e.status){const t=e.data,r=ie.map((e=>e.id===ye?{...e,status:Ae}:e));je(!1),console.log(r,"UpdatedOrders"),se(r),A(t.message)}})).catch((()=>{be(!1)}))}catch(r){if(be(!1),r.errors){Object.keys(r.errors).map((e=>A(r.errors[e][0],{variant:"error"})))}}},Fe=(0,S.mN)(),{control:Ne}=Fe,qe=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:o,filterService:i,filterStartDate:s,filterEndDate:l}=e;const n=t.map(((e,t)=>[e,t]));n.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=n.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==i&&(t=t.filter((e=>e.status===i)));s&&l&&(t=t.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=l.getTime())));return t}({tableData:ie,comparator:(0,k.hz)(Z,J),filterName:le,filterService:ce,filterStatus:ge,filterStartDate:ue,filterEndDate:he}),Me=Y?56:76,Be=!qe.length&&!!le||!qe.length&&!!ge||!qe.length&&!!ce||!qe.length&&!!he||!qe.length&&!!ue,[ze,Ue]=(0,a.useState)(ie),[Ge,We]=(0,a.useState)(ie);return(0,a.useEffect)((()=>{Ue(ie),We(ie)}),[ie]),(0,a.useEffect)((()=>{if("default"===J)We(ze);else{const e=[...ze].sort((0,k.hz)(Z,J));We(e)}}),[Z,J]),(0,q.jsxs)(R.A,{title:"Order: Your Orders",children:[xe&&(0,q.jsx)(L.A,{}),(0,q.jsx)("input",{type:"file",ref:Oe,onChange:Le,hidden:!0}),(0,q.jsxs)(i.A,{maxWidth:!r&&"xl",children:[(0,q.jsx)(s.A,{gap:1,sx:{width:"25%",marginBottom:"10px"},children:(0,q.jsx)(C.Ay,{options:null===Pe||void 0===Pe?void 0:Pe.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:Te,onChange:e=>{var t;console.log(e,"newFileId"),Ee(null===oe||void 0===oe||null===(t=oe.find((e=>e.label===we)))||void 0===t?void 0:t.api,e.value),Ve(e.value),De(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3 ",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,t)=>({...e,backgroundColor:t.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})}),(0,q.jsxs)(l.A,{sx:{borderRadius:"0px"},children:[(0,q.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:we,onChange:(e,t)=>{console.log(t,"value"),ve(t)},sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:oe.map((e=>(0,q.jsx)(c.A,{disableRipple:!0,value:e.label,label:(0,q.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,q.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,q.jsx)(T.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Orders",href:_.i8.root},{name:"All Orders"}]}),(0,q.jsx)(V.A,{children:(0,q.jsx)(d.A,{sx:{position:"relative"},children:(0,q.jsxs)(u.A,{size:Y?"small":"medium",children:[(0,q.jsx)(D.er,{order:Z,orderBy:J,headLabel:B,rowCount:ie.length,numSelected:X.length,onSort:$}),(0,q.jsxs)(p.A,{children:[Ge.slice(H*K,H*K+K).map((e=>(0,q.jsx)(E.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===we&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===we&&(null!==e&&void 0!==e&&e.updated_by_pdf?U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):U(_.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===we&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===we&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===we&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===we&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,U(_.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===we&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===we&&U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===we&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===we&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===we&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===we&&U(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===we&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===we&&U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===we&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===we&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===we&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===we&&U(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Ie(e.id,"file_completed"),onContainDocumentUpload:()=>Ie(e.id,"contin_completed"),onStatusChange:t=>((e,t)=>{be(!0);try{const r=new FormData;r.append("status",t),r.append("id",e),I.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),be(!1),200===r.status||201===r.status){const a=r.data,o=ie.map((r=>r.id===e?{...r,status:t}:r));se(o),A(a.message)}})).catch((e=>{be(!1),console.log(e,"catch errror")}))}catch(r){be(!1),r.errors&&Object.keys(r.errors).map((e=>A(r.errors[e][0],{variant:"error"})))}})(e.id,t)},e.id))),(0,q.jsx)(D.dO,{height:Me,emptyRows:(0,k.xl)(H,K,ie.length)}),(0,q.jsx)(D.Sm,{isNotFound:Be})]})]})})}),(0,q.jsxs)(h.A,{sx:{position:"relative"},children:[(0,q.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:qe.length,rowsPerPage:K,page:H,onPageChange:te,onRowsPerPageChange:re}),(0,q.jsx)(g.A,{control:(0,q.jsx)(m.A,{checked:Y,onChange:ee}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,q.jsx)(w.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:_e,onClose:()=>je(!1),closeAfterTransition:!0,slots:{backdrop:v.A},slotProps:{backdrop:{timeout:500}},children:(0,q.jsx)(x.A,{in:_e,children:(0,q.jsx)(h.A,{sx:M,children:(0,q.jsx)(F.Op,{methods:Fe,children:(0,q.jsxs)(b.Ay,{item:!0,xs:12,md:12,children:[(0,q.jsx)(O.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,q.jsxs)(h.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,q.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,q.jsx)(O.A,{variant:"h6",onClick:()=>{var e;return null===Oe||void 0===Oe||null===(e=Oe.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,q.jsx)(F.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:Le})]}),(0,q.jsx)(s.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},55858:(e,t,r)=>{"use strict";var a=r(24994);t.A=void 0;var o=a(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},79526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=r(92079)},92079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{capitalize:()=>o.A,createChainedFunction:()=>i.A,createSvgIcon:()=>s.A,debounce:()=>l.A,deprecatedPropType:()=>n,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>O,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>w.A,useEventCallback:()=>v.A,useForkRef:()=>x.A,useIsFocusVisible:()=>b.A});var a=r(66236),o=r(61676),i=r(25920),s=r(65471),l=r(21209);const n=function(e,t){return()=>null};var c=r(60096),d=r(27402),u=r(70827);r(58168);const p=function(e,t){return()=>null};const h=r(25679).A;var f=r(79044),g=r(31014);const m=function(e,t,r,a,o){return null};var w=r(48733),v=r(1976),x=r(31506),b=r(41573);const O={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.A.configure(e)}}},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);