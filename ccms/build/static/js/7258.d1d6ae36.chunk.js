"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[7258],{67258:(e,n,o)=>{o.r(n),o.d(n,{default:()=>T});var t=o(9950),l=o(79537),i=o(48089),a=o(12257),r=o(75165),s=o(6368),c=o(82053),d=o(1320),u=o(15769),h=o(34075),p=o(91434),x=o(29031),g=o(13564),f=o(26689),m=o(48711),v=o(90260),j=o(46765),A=o(86608),w=o(38861),C=o(30744),S=o(66075),b=o(44185),y=o(63358),_=o(72870),k=o(12480),D=o(6768),P=o(32741),F=o(95074),N=o(98594),B=o(44414);const E=[{id:"file_no",label:"File No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"updated_at",label:"Date",align:"left",width:600},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""},{id:""},{id:""}];function T(){const{themeStretch:e}=(0,A.A)(),n=(0,g.Zp)(),{enqueueSnackbar:o}=(0,x.dh)(),{dense:T,page:O,order:R,orderBy:L,rowsPerPage:I,setPage:W,selected:M,setSelected:z,onSort:U,onChangeDense:V,onChangePage:Z,onChangeRowsPerPage:q}=(0,w.Ay)({defaultOrderBy:"createDate"}),[J,G]=(0,t.useState)([]),[H,K]=(0,t.useState)(""),[Q,X]=(0,t.useState)("new"),[Y,$]=(0,t.useState)(null),[ee,ne]=(0,t.useState)(null),{currentTab:oe,onChangeTab:te}=(0,j.A)("all"),[le,ie]=(0,t.useState)("Title Insurance"),[ae,re]=(0,t.useState)(!1),[se,ce]=(0,t.useState)(""),[de,ue]=(0,t.useState)(),[he,pe]=(0,t.useState)(),[xe,ge]=(0,t.useState)([]),[fe,me]=(0,t.useState)(null);Boolean(fe);(0,t.useEffect)((()=>{(async()=>{re(!0);try{var e;const n=await P.A.get("employee/users/list");console.log(n,"all user"),ge(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.files),console.log(n,"autofill")}catch(n){console.log(n,"autofill")}finally{re(!1)}})()}),[]);const{Employeefile:ve}=(0,C.d4)((e=>e.EmployeeFile));console.log(ve,"file details"),(0,t.useEffect)((()=>{null!==ve&&void 0!==ve&&ve.length&&de&&G(ve)}),[ve]);const je=function(e){var n;let{tableData:o,comparator:t,filterName:l,filterStatus:i,filterService:a,filterStartDate:r,filterEndDate:s}=e;const c=null===(n=o)||void 0===n?void 0:n.map(((e,n)=>[e,n]));c.sort(((e,n)=>{const o=t(e[0],n[0]);return 0!==o?o:e[1]-n[1]})),o=c.map((e=>e[0])),l&&(o=o.filter((e=>-1!==e.file_name.toLowerCase().indexOf(l.toLowerCase())||-1!==e.file_no.toLowerCase().indexOf(l.toLowerCase()))));"all"!==i&&(o=o.filter((e=>e.status===i)));"new"!==a&&(o=o.filter((e=>e.status===a)));r&&s&&(o=o.filter((e=>e.updated_at.getTime()>=r.getTime()&&e.updated_at.getTime()<=s.getTime())));return o}({tableData:J,comparator:(0,w.hz)(R,L),filterName:H,filterService:Q,filterStatus:oe,filterStartDate:Y,filterEndDate:ee}),Ae=T?56:76,we=!je.length&&!!H||!je.length&&!!oe||!je.length&&!!Q||!je.length&&!!ee||!je.length&&!!Y;return(0,B.jsxs)(l.A,{maxWidth:!e&&"lg",children:[ae&&(0,B.jsx)(F.A,{}),(0,B.jsxs)(i.A,{sx:{p:3},children:[(0,B.jsx)(y.A,{heading:"Files",sx:{mb:0},links:[{name:"Dashboard",href:v.nB.root},{name:"Files"}],action:(0,B.jsx)(a.A,{gap:1,direction:"row",children:(0,B.jsx)(r.A,{variant:"contained",component:f.N_,to:v.i8.file.addfile,startIcon:(0,B.jsx)(S.A,{icon:"clarity:form-line"}),children:"New File"})})}),(0,B.jsx)(a.A,{gap:1,sx:{width:"50%"},children:(0,B.jsx)(m.Ay,{options:null===xe||void 0===xe?void 0:xe.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:he,onChange:e=>{console.log(e,"newFileId"),(0,C.JD)((0,N.oc)(e.value)),ue(e.value),pe(e)},isSearchable:"true",placeholder:"Select a User",className:"w-100 py-3"})}),(null===le||void 0===le?void 0:le.label)&&(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(s.A,{sx:{p:2},children:(0,B.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:le.label})})}),(0,B.jsx)(k.F5,{filterName:H,filterService:Q,filterStartDate:Y,filterEndDate:ee,onFilterName:e=>{K(e),W(0)},onFilterService:e=>{X(e.target.value)},onFilterStartDate:e=>{$(e)},onFilterEndDate:e=>{ne(e)}}),(0,B.jsx)(b.A,{children:(0,B.jsx)(d.A,{sx:{minWidth:800,position:"relative"},children:(0,B.jsxs)(u.A,{size:T?"small":"medium",children:[(0,B.jsx)(_.er,{order:R,orderBy:L,headLabel:E,rowCount:J.length,numSelected:M.length,onSort:U}),(0,B.jsxs)(h.A,{children:[je.slice(O*I,O*I+I).map((e=>(0,B.jsx)(D.A,{row:e,onEditRow:()=>(e=>{n(v.i8.file.editfile(null===e||void 0===e?void 0:e.id),{state:e})})(e),onViewRow:()=>(e=>{n(v.i8.file.filepreview(null===e||void 0===e?void 0:e.id),{state:e})})(e),onDeleteRow:()=>{return n=e.id,re(!0),void P.A.delete("user/user_file/".concat(n)).then((e=>{if(console.log("response",e),re(!1),200===e.status||201===e.status){const e=J.filter((e=>e.id!==n));z([]),G(e),o("Delete Successfully")}})).catch((e=>{re(!1),e.errors&&Object.keys(e.errors).map((n=>o(e.errors[n][0],{variant:"error"})))}));var n}},e.id))),(0,B.jsx)(_.dO,{height:Ae,emptyRows:(0,w.xl)(O,I,J.length)}),(0,B.jsx)(_.Sm,{isNotFound:we})]})]})})}),(0,B.jsx)(s.A,{sx:{position:"relative"},children:(0,B.jsx)(p.A,{rowsPerPageOptions:[5,10,25],component:"div",count:je.length,rowsPerPage:I,page:O,onPageChange:Z,onRowsPerPageChange:q})})]})]})}},6768:(e,n,o)=>{o.d(n,{A:()=>m});var t=o(9950),l=o(13564),i=o(26689),a=o(14857),r=o(9213),s=o(21671),c=o(93038),d=o(23266),u=o(75165),h=o(97591),p=o(90260),x=(o(22704),o(33949),o(66075)),g=o(72870),f=o(44414);function m(e){var n,o,m,v,j,A;let{row:w,selected:C,onSelectRow:S,onAssign:b,onViewRow:y,onDocumentUpload:_,onDownloadDocument:k,onDeleteRow:D,onShareRow:P,onEditRow:F,onOrderContin:N,onStatusChange:B}=e;(0,a.A)();const{pathname:E}=(0,l.zy)(),T=(E.includes("admin"),(0,l.Zp)());console.log(w,"row");const{updated_at:O,DummyData:R,transaction_type:L,purchase_price:I,file_no:W,file_name:M,id:z,_count:U,user:V}=w,[Z,q]=(0,t.useState)(null),J=Boolean(Z),[G,H]=(0,t.useState)(null),K=()=>{H(null)},Q=()=>{T("/dashboard/filepreview/".concat(null===w||void 0===w?void 0:w.id),{state:{row:w}})};return(0,f.jsxs)(r.A,{selected:C,sx:{transition:"background-color 0.3s ease, color 0.3s ease","&:hover":{backgroundColor:"#403390",color:"white","& .MuiTableCell-root":{color:"white"},"& .MuiButton-root":{backgroundColor:"#fff",color:"#403390"},"& .MuiMenuItem-root":{color:"white"}}},children:[(S||C)&&(0,f.jsx)(s.A,{padding:"checkbox",children:(0,f.jsx)(c.A,{checked:C,onClick:S})}),(0,f.jsx)(s.A,{sx:{color:"#DD9A19",textWrap:"nowrap",padding:"14px 2px"},align:"left",onClick:Q,children:W}),(0,f.jsx)(s.A,{align:"left",onClick:Q,sx:{textWrap:"nowrap",padding:"14px 2px"},children:M}),(0,f.jsx)(s.A,{align:"left",onClick:Q,sx:{textWrap:"nowrap",padding:"14px 2px"},children:null===R||void 0===R||null===(n=R.subject_premise)||void 0===n||null===(o=n.property_location)||void 0===o?void 0:o.slice(0,13)}),(0,f.jsx)(s.A,{align:"left",onClick:Q,sx:{textWrap:"nowrap",padding:"14px 2px"},children:(null===R||void 0===R||null===(m=R.buyers)||void 0===m?void 0:m.length)>0&&(null===R||void 0===R||null===(v=R.buyers[0])||void 0===v?void 0:v.first_name)}),(0,f.jsx)(s.A,{align:"left",sx:{padding:"14px 2px"},onClick:Q,children:(null===R||void 0===R||null===(j=R.sellers)||void 0===j?void 0:j.length)>0&&(null===R||void 0===R||null===(A=R.sellers[0])||void 0===A?void 0:A.first_name)}),(0,f.jsx)(s.A,{align:"left",sx:{padding:"14px 2px"},onClick:Q,children:L}),(0,f.jsx)(s.A,{align:"left",sx:{padding:"14px 2px"},children:(0,f.jsx)(d.A,{onClick:()=>{D(),K()},sx:{color:"error.main"},children:(0,f.jsx)(x.A,{icon:"eva:trash-2-outline"})})}),(0,f.jsx)(s.A,{align:"left",sx:{padding:"14px 2px"},children:N&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.A,{variant:"contained","aria-controls":J?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":J?"true":void 0,onClick:e=>{q(e.currentTarget)},sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:(null===U||void 0===U?void 0:U.orders)>0?"Ordered":"Order"}),(0,f.jsxs)(h.A,{id:"basic-menu",anchorEl:Z,open:J,onClose:()=>{q(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.titleInsurance,"/").concat(z),children:"Title Insurance"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.coopLienSearch,"/").concat(z),children:"Coop Lien Search"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.eagle9Policy,"/").concat(z),children:"Eagle 9 Policy"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.coopCondoOfferinPlans,"/").concat(z),children:"Coop/Condo Offering Plans"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.uccCreateFile,"/").concat(z),children:"UCC - Create/File"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.exchange1031,"/").concat(z),children:"1031 Exchange"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.acrisETax,"/").concat(z),children:"Acris E-Tax Forms"}),(0,f.jsx)(d.A,{component:i.N_,to:"".concat(p.nB.orders.otherSearches,"/").concat(z),children:"Other Searches"})]})]})}),(0,f.jsx)(s.A,{align:"right",sx:{padding:"14px 2px"},children:(0,f.jsx)(g.ZE,{open:G,onOpen:e=>{H(e.currentTarget)},onClose:K,actions:(0,f.jsxs)(f.Fragment,{children:[y&&(0,f.jsxs)(d.A,{onClick:()=>{y(),K()},children:[(0,f.jsx)(x.A,{icon:"tabler:eye-filled"}),"View"]}),P&&(0,f.jsxs)(d.A,{onClick:()=>{P(),K()},children:[(0,f.jsx)(x.A,{icon:"material-symbols:share"}),"Share"]})]})})})]})}}}]);