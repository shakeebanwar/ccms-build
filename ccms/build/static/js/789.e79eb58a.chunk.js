"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[789,676],{36571:(e,o,l)=>{l.d(o,{v:()=>n});const n=["Albany","Allegany","Bronx","Broome","Cattaraugus","Cayuga","Chautauqua","Chemung","Chenango","Clinton","Columbia","Cortland","Delaware","Dutchess","Erie","Essex","Franklin","Fulton","Genesee","Greene","Hamilton","Herkimer","Jefferson","Kings","Lewis","Livingston","Madison","Monroe","Montgomery","Nassau","New York","Niagara","Oneida","Onondaga","Ontario","Orange","Orleans","Oswego","Otsego","Putnam","Queens","Rensselaer","Richmond","Rockland","Saratoga","Schenectady","Schoharie","Schuyler","Seneca","St. Lawrence","Steuben","Suffolk","Sullivan","Tioga","Tompkins","Ulster","Warren","Washington","Wayne","Westchester","Wyoming","Yates"]},48330:(e,o,l)=>{l.r(o),l.d(o,{default:()=>Y});var n=l(60899),a=l(9950),i=l(8279),t=l(93591),d=l(86608),s=l(60666),r=l(29031),c=l(9449),u=l(68654),v=l(48711),h=l(28095),p=l(48089),x=l(45180),m=l(6368),g=l(12257),f=l(24516),b=l(25979),j=l(3788),y=l(93523),A=l(23266),C=l(82053),w=l(73878),S=l(41397),_=(l(90260),l(52401)),k=l(32741),F=l(30818),I=l(25333),O=l(8145),W=l(2599),N=l(53256),P=l(36571),T=l(53984),R=l(73447),q=l(57191),G=l(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},V={control:e=>({...e,background:"white",borderColor:"lightgray",boxShadow:"none","&:hover":{borderColor:"gray"}}),menu:e=>({...e,background:"white",zIndex:9999}),option:(e,o)=>({...e,background:o.isSelected?"#007bff":"white",color:o.isSelected?"white":"black","&:hover":{background:"#f0f0f0"}})},z=e=>{let{setOpen:o,open:l}=e;const{enqueueSnackbar:i}=(0,r.dh)(),[t,d]=(0,a.useState)(!1),[s,u]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[f,b]=(0,a.useState)({name:"",note:"",gov_fee:"",total_price:"",is_added:!1}),j=(e,o)=>{b((l=>({...l,[e]:o})))};console.log(f,"formValues");const y=(0,c.mN)(),{setValue:A,getValues:w}=y;return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(T.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:l,onClose:()=>o(!1),closeAfterTransition:!0,slots:{backdrop:R.A},slotProps:{backdrop:{timeout:500}},children:(0,G.jsx)(q.A,{in:l,children:(0,G.jsx)(m.A,{sx:M,children:(0,G.jsx)(_.Op,{methods:y,children:(0,G.jsxs)(n.Ay,{item:!0,xs:12,md:12,children:[(0,G.jsx)(C.A,{variant:"h5",sx:{mb:2},children:"Add New Additions"}),(0,G.jsx)(m.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,G.jsx)(v.Ay,{isMulti:!0,options:null===P.v||void 0===P.v?void 0:P.v.map((e=>({label:e,value:e}))),value:s,styles:V,onChange:e=>{u(e);const o=null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value));A("counies",o)},placeholder:"Select Counties"})}),(0,G.jsxs)(m.A,{sx:{maxWidth:"100%",margin:"auto",p:2},children:[(0,G.jsxs)(g.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,G.jsx)(O.A,{label:"Title",fullWidth:!0,value:f.title,onChange:e=>j("name",e.target.value)}),(0,G.jsx)(I.A,{onClick:()=>x(!p),color:"primary",children:p?(0,G.jsx)(W.A,{}):(0,G.jsx)(N.A,{})})]}),p&&(0,G.jsxs)(m.A,{sx:{mt:2,display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,G.jsx)(O.A,{label:"Notes",multiline:!0,fullWidth:!0,value:f.note,onChange:e=>j("note",e.target.value)}),(0,G.jsx)(O.A,{label:"Gov Fee(s)",fullWidth:!0,value:f.gov_fee,onChange:e=>j("gov_fee",e.target.value)}),(0,G.jsx)(O.A,{label:"Total Price",fullWidth:!0,value:f.total_price,onChange:e=>j("total_price",e.target.value)})]})]}),(0,G.jsxs)(g.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:[(0,G.jsx)(h.A,{type:"button",variant:"contained",loading:t,onClick:async()=>{try{d(!0);const e={county_names:w("counies"),additional_charges:[f]};await k.A.post("admin/additional_charges/add_to_prices",e).then((e=>{if(console.log(e,"Add new addtions"),d(!1),e.data.status){const l=e.data;i(l.message),o(!1)}}))}catch(e){d(!1),console.log(e,"file Upload error")}},children:"Save"}),(0,G.jsx)(h.A,{type:"button",variant:"contained",onClick:()=>o(!1),children:"Cancel"})]})]})})})})})})},D=()=>{const{enqueueSnackbar:e}=(0,r.dh)(),[o,l]=(0,a.useState)(!1),[i,t]=(0,a.useState)({additions:"",county:""}),[d,s]=(0,a.useState)([]),[u,v]=(0,a.useState)(!1),[f,b]=(0,a.useState)([]),j=(0,c.mN)(),{reset:y,handleSubmit:A,setValue:w,watch:S}=j,F=S();console.log(i,"values");const T=async o=>{try{l(!0),await k.A.get("admin/additional_charges/get_price/".concat(o)).then((o=>{if(console.log(o,"get County"),l(!1),o.data.status){var n,a;const e=o.data,l=null===e||void 0===e||null===(n=e.additional_prices)||void 0===n||null===(a=n.additional_charges)||void 0===a?void 0:a.map((e=>({...e,is_added:e.is_added||!1})));b(l),s(l)}else{var i;s([]),e(null===(i=o.data)||void 0===i?void 0:i.message)}}))}catch(n){l(!1),console.log(n,"get County error")}};(0,a.useEffect)((()=>{null!==F&&void 0!==F&&F.county&&t((e=>({...e,county:""}))),(null===d||void 0===d?void 0:d.length)>0&&t((e=>({...e,additions:""})))}),[null===F||void 0===F?void 0:F.county,d]);const R=(e,o,l)=>{s((n=>n.map((n=>n.name===e?{...n,[o]:l,is_added:!0}:n)))),b((n=>n.map((n=>n.name===e?{...n,[o]:l,is_added:!0}:n))))};console.log(d,"expanded");return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(_.Op,{methods:j,onSubmit:A((async()=>{l(!0);try{if(void 0===(null===F||void 0===F?void 0:F.county))return t((e=>({...e,county:"County is required"}))),null;if(t((e=>({...e,county:""}))),0===(null===d||void 0===d?void 0:d.length))return t((e=>({...e,additions:"Additions are required"}))),null;t((e=>({...e,additions:""})));const o={county_names:[null===F||void 0===F?void 0:F.county],additional_charges:d};await k.A.post("admin/additional_charges/add_price",o).then((o=>{if(l(!1),200===o.status||201===o.status){const l=o.data;console.log(l,"set additions"),e(null===l||void 0===l?void 0:l.message),y()}}))}catch(o){if(console.error(o),o.errors){Object.keys(o.errors).map((l=>e(o.errors[l][0],{variant:"error"})))}}finally{l(!1)}})),children:(0,G.jsx)(n.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"center",mt:2},children:(0,G.jsx)(n.Ay,{item:!0,xs:12,md:12,children:(0,G.jsxs)(p.A,{sx:{p:3},children:[(0,G.jsxs)(g.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",mb:2},children:[(0,G.jsx)(x.A,{sx:{p:0,mb:2},title:"Set Payment For Additions"}),(0,G.jsx)(h.A,{type:"button",variant:"contained",onClick:()=>{v(!0)},children:"Add Additions"})]}),(0,G.jsxs)(_.tX,{name:"county",label:"County",onChange:e=>{const{value:o}=e.target;w("county",o),T(o)},children:[(0,G.jsx)("option",{value:""}),P.v.map(((e,o)=>(0,G.jsx)("option",{value:e,children:e},o)))]}),(null===i||void 0===i?void 0:i.county)&&(0,G.jsx)(C.A,{variant:"p",sx:{mb:2,color:"red",textAlign:"center",width:"100%",display:"block"},children:null===i||void 0===i?void 0:i.county}),d.map((e=>(0,G.jsxs)(m.A,{children:[(0,G.jsxs)(g.A,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,sx:{border:"1px solid lightblue",padding:"10px",borderRadius:"10px",my:2},children:[(0,G.jsx)("span",{children:e.name}),(0,G.jsx)(I.A,{onClick:()=>{return o=e.name,void s((e=>e.map((e=>e.name===o?{...e,is_added:!e.is_added}:e))));var o},color:"primary",children:e.is_added?(0,G.jsx)(W.A,{}):(0,G.jsx)(N.A,{})})]}),e.is_added&&(0,G.jsxs)(m.A,{sx:{mt:2,pl:1,display:"grid",gap:2,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,G.jsx)(O.A,{id:"notes-".concat(e.name),label:"Notes",multiline:!0,fullWidth:!0,value:e.note||"",onChange:o=>R(e.name,"note",o.target.value)}),(0,G.jsx)(O.A,{id:"gov-fee-".concat(e.name),label:"Gov Fee(s)",fullWidth:!0,value:e.gov_fee||"",onChange:o=>R(e.name,"gov_fee",o.target.value)}),(0,G.jsx)(O.A,{id:"total-".concat(e.name),label:"Total Price",fullWidth:!0,value:e.total_price||"",onChange:o=>R(e.name,"total_price",o.target.value)})]})]},e.name))),(null===i||void 0===i?void 0:i.additions)&&(0,G.jsx)(C.A,{variant:"p",sx:{mb:2,color:"red",textAlign:"center",width:"100%",display:"block"},children:null===i||void 0===i?void 0:i.additions}),(0,G.jsx)(g.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,G.jsx)(h.A,{type:"submit",variant:"contained",loading:o,children:"Add"})})]})})})}),(0,G.jsx)(z,{setOpen:v,open:u})]})},H=()=>{var e,o;const l=(0,w.wA)(),{enqueueSnackbar:i}=(0,r.dh)(),{UserId:t}=(0,w.d4)((e=>e.File)),[d,I]=(0,a.useState)([]),[O,W]=(0,a.useState)(),[N,P]=(0,a.useState)([]),[T,R]=(0,a.useState)(),[q,M]=(0,a.useState)();console.log(d,"file details");const V=async(e,o)=>{try{const l=await k.A.get("admin/user_files/".concat(e,"/").concat(o));console.log(l.data.files,"response"),I(l.data.files)}catch(l){console.log(l,"error")}};(0,a.useEffect)((()=>{V()}),[]);(0,a.useEffect)((()=>{(async()=>{try{var e;const o=await k.A.get("admin/users");console.log(o,"all user"),P(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.user),console.log(o,"autofill")}catch(o){console.log(o,"autofill")}})()}),[]);const z=(0,S.debounce)((e=>{W(e)}),300),H=(0,a.useMemo)((()=>{if(null===O||void 0===O||!O.trim())return null===d||void 0===d?void 0:d.map((e=>{var o,l,n,a;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat((null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(l=e.orders[0])||void 0===l?void 0:l.order_no),")"),value:(null===e||void 0===e||null===(n=e.orders)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(a=e.orders[0])||void 0===a?void 0:a.id)}}));const e=null===O||void 0===O?void 0:O.toLowerCase(),o=null===d||void 0===d?void 0:d.filter((o=>{var l,n,a,i;const t=(null===o||void 0===o||null===(l=o.file_name)||void 0===l?void 0:l.toLowerCase())||"",d=(null===o||void 0===o||null===(n=o.orders)||void 0===n?void 0:n.length)>0&&(null===o||void 0===o||null===(a=o.orders[0])||void 0===a||null===(i=a.order_no)||void 0===i?void 0:i.toLowerCase())||"";return t.includes(e)||d.includes(e)}));return null===o||void 0===o?void 0:o.map((e=>{var o,l,n,a;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat((null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(l=e.orders[0])||void 0===l?void 0:l.order_no),")"),value:(null===e||void 0===e||null===(n=e.orders)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(a=e.orders[0])||void 0===a?void 0:a.id)}}))}),[O,d]),Y=s.Ik().shape({order:s.Yj().required("Select Order"),date:s.Yj().required("Date is required"),notes:s.Yj(),is_active:s.zM().oneOf([!0],"Status is required")}),L=(0,a.useMemo)((()=>({order:"",date:"",notes:"",is_active:!1,price:""})),[]),$=(0,c.mN)({resolver:(0,u.t)(Y),defaultValues:L}),{reset:E,watch:B,setValue:U,handleSubmit:J,formState:{isSubmitting:K,errors:Q}}=$,X=B();console.log(X,"error");return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(_.Op,{methods:$,onSubmit:J((async e=>{console.log(e,"data");try{const o=new FormData;o.append("payment_date",(null===e||void 0===e?void 0:e.date)+" 00:00:00"),o.append("payment_note",null===e||void 0===e?void 0:e.notes),o.append("is_paid",null!==e&&void 0!==e&&e.is_active?1:0),o.append("Total_Price",null===e||void 0===e?void 0:e.price),await k.A.post("/admin/change/payment_status/".concat(null===e||void 0===e?void 0:e.order),o).then((()=>{i("Status Paid Success"),U("order",""),E(),l((0,F.xg)("all",t))}))}catch(o){if(console.error(o,"error"),o.errors){Object.keys(o.errors).map((e=>i(o.errors[e][0],{variant:"error"})))}}})),children:(0,G.jsx)(n.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"center"},children:(0,G.jsx)(n.Ay,{item:!0,xs:12,md:12,children:(0,G.jsxs)(p.A,{sx:{p:3},children:[(0,G.jsx)(x.A,{title:"Add Payment Status"}),(0,G.jsxs)(m.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},mt:2},children:[(0,G.jsx)(g.A,{children:(0,G.jsx)(v.Ay,{options:[{label:"All",value:"all"},...(null===N||void 0===N?void 0:N.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))))||[]],value:T,onChange:e=>{console.log(e,"newFileId"),V("all",e.value),M(e.value),R(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,o)=>({...e,backgroundColor:o.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})}),(0,G.jsxs)(g.A,{children:[(0,G.jsx)(v.Ay,{options:H,onInputChange:z,onChange:e=>{var o,l,n,a,i;const t=e.value;U("order",t);const s=null===d||void 0===d?void 0:d.find((e=>{var o,l;return(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(l=e.orders[0])||void 0===l?void 0:l.id)==t}));U("is_active",(null===s||void 0===s||null===(o=s.orders)||void 0===o?void 0:o.length)>0&&(null===s||void 0===s||null===(l=s.orders[0])||void 0===l||null===(n=l.order_payment)||void 0===n?void 0:n.is_paid));const r=null===s||void 0===s||null===(a=s.orders[0])||void 0===a||null===(i=a.Total_Price)||void 0===i?void 0:i.split(".");U("price",(null===r||void 0===r?void 0:r.length)>0&&r[0]),console.log(s,"getPrice")},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-5",styles:{control:(e,o)=>({...e,backgroundColor:"white",borderRadius:"8px",border:o.isFocused?"2px solid #1976d2":"1px solid #ced4da",boxShadow:o.isFocused?"0 0 5px rgba(25, 118, 210, 0.5)":"none","&:hover":{borderColor:"#1976d2"},minHeight:"48px"}),menu:e=>({...e,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",zIndex:9999}),option:(e,o)=>({...e,backgroundColor:o.isFocused?"#f5f5f5":"white",color:"black",padding:"10px 15px","&:active":{backgroundColor:"#e0e0e0"}}),placeholder:e=>({...e,color:"#6c757d",fontSize:"16px"}),singleValue:e=>({...e,color:"#495057",fontSize:"16px"}),dropdownIndicator:(e,o)=>({...e,color:o.isFocused?"#1976d2":"#6c757d","&:hover":{color:"#1976d2"}}),indicatorSeparator:e=>({...e,display:"none"})}}),""===(null===X||void 0===X?void 0:X.order)&&(0,G.jsx)(f.A,{sx:{color:"red"},children:null===Q||void 0===Q||null===(e=Q.order)||void 0===e?void 0:e.message})]}),(0,G.jsxs)(b.A,{fullWidth:!0,children:[(0,G.jsx)(j.A,{id:"demo-simple-select-label",children:"Select price"}),(0,G.jsxs)(y.A,{labelId:"demo-simple-select-label",name:"price",id:"demo-simple-select",value:null===X||void 0===X?void 0:X.price,onChange:e=>{const{value:o}=e.target;U("price",o),console.log(o,"values")},label:"Select a price",children:[(0,G.jsx)(A.A,{value:"300",children:"$ 300.00"}),(0,G.jsx)(A.A,{value:"350",children:"$ 350.00"}),(0,G.jsx)(A.A,{value:"395",children:"$ 395.00"}),(0,G.jsx)(A.A,{value:"400",children:"$ 400.00"}),(0,G.jsx)(A.A,{value:"450",children:"$ 450.00"}),(0,G.jsx)(A.A,{value:"500",children:"$ 500.00"})]})]}),(0,G.jsx)(_.o3,{name:"date",type:"date"}),(0,G.jsx)(_.o3,{name:"notes",label:"Notes",multi:!0}),(0,G.jsx)(_.b8,{name:"is_active",labelPlacement:"start",label:(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(C.A,{variant:"h6",sx:{mb:.5},children:"Paid"})}),sx:{mx:0,width:1,justifyContent:"space-between"}}),(null===Q||void 0===Q?void 0:Q.is_active)&&(0,G.jsx)(f.A,{sx:{color:"red"},children:null===Q||void 0===Q||null===(o=Q.is_active)||void 0===o?void 0:o.message})]}),(0,G.jsx)(g.A,{alignItems:"flex-end",sx:{mt:3},children:(0,G.jsx)(h.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"submit",variant:"contained",loading:K,children:"Save Changes"})})]})})})}),(0,G.jsx)(D,{})]})},Y=()=>{const{themeStretch:e}=(0,d.A)();return(0,G.jsx)(i.A,{title:"All Files",children:(0,G.jsxs)(n.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"flex-start",height:"50vh"},children:[(0,G.jsx)(n.Ay,{item:!0,xs:12,md:8,sx:{position:"sticky",top:0,height:"80vh",overflowY:"auto"},children:(0,G.jsx)(t.default,{})}),(0,G.jsx)(n.Ay,{item:!0,xs:12,md:4,sx:{maxHeight:"80vh",overflowY:"auto"},children:(0,G.jsx)(H,{})})]})})}},53256:(e,o,l)=>{l.d(o,{A:()=>i});var n=l(65471),a=l(44414);const i=(0,n.A)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},2599:(e,o,l)=>{l.d(o,{A:()=>i});var n=l(65471),a=l(44414);const i=(0,n.A)((0,a.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")}}]);