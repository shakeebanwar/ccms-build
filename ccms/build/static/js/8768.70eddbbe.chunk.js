"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[8768],{88768:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var a=r(9950),l=r(13564),i=r(79537),s=r(48089),n=r(68367),o=r(84142),d=r(12257),c=r(6368),u=r(82053),h=r(74745),g=r(1320),p=r(15769),f=r(34075),x=r(91434),b=r(16497),m=r(37324),S=r(29031),v=r(90260),C=r(46765),j=r(86608),w=r(38861),A=r(8279),O=(r(22704),r(66075),r(44185)),E=r(63358),_=r(72870),P=r(12480),D=r(32741),R=r(95074),y=r(44414);const T=["new","old"],q=[{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_id",label:"Id",align:"left",width:500},{id:"file_no",label:"File No",align:"left",width:800},{id:"descriptions",label:"Request",align:"left",width:800},{id:"orders",label:"Form Name",align:"left",width:800},{id:""}],k=[{api:"title_insurance",label:"Title Insurance"},{api:"coop_lien_search",label:"Coop Lien Searches"},{api:"acris_e_tax_form",label:"ACRIS E-Tax Forms"},{api:"eagle_9_policy",label:"Eagle 9 Policy"},{api:"ucc_create_file",label:"UCC"},{api:"other_searches",label:"Other Search / Request"},{api:"coop_condo_offering_plans",label:"Offering Plans"},{api:"exchange",label:"1031 Exchanges"},{api:"Sightline_Report",label:"Sightline\xae"}];function F(){const{themeStretch:e}=(0,j.A)(),{enqueueSnackbar:t}=(0,S.dh)(),r=(0,l.Zp)(),{dense:F,page:I,order:L,orderBy:N,rowsPerPage:B,setPage:z,selected:M,onSort:U,onChangeDense:W,onChangePage:Y,onChangeRowsPerPage:Z}=(0,w.Ay)({defaultOrderBy:"createDate"}),[G,H]=(0,a.useState)([]),[J,K]=(0,a.useState)(""),[Q,V]=(0,a.useState)("new"),[X,$]=(0,a.useState)(null),[ee,te]=(0,a.useState)(null),{currentTab:re,onChangeTab:ae}=(0,C.A)("all"),[le,ie]=(0,a.useState)("Title Insurance"),[se,ne]=(0,a.useState)(!1),[oe,de]=(0,a.useState)(!1);(0,a.useEffect)((()=>{"Sightline\xae"!==le&&"UCC"!==le&&ce(k.find((e=>e.label===le)).api)}),[le]);const ce=e=>{ne(!0);try{D.A.get("employee/requests/get/".concat(e)).then((e=>{ne(!1);const r=e.data;console.log(e,"request"),200===e.status?H(r.requests):t(r.message)}))}catch(r){if(ne(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},ue=function(e){var t;let{tableData:r,comparator:a,filterName:l,filterStatus:i,filterService:s,filterStartDate:n,filterEndDate:o}=e;const d=null===(t=r)||void 0===t?void 0:t.map(((e,t)=>[e,t]));var c;null===d||void 0===d||d.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),r=null===d||void 0===d?void 0:d.map((e=>e[0])),l&&(r=null===(c=r)||void 0===c?void 0:c.filter((e=>-1!==e.orders.file_no.toLowerCase().indexOf(l.toLowerCase())||-1!==e.orders.type.toLowerCase().indexOf(l.toLowerCase()))));"all"!==i&&(r=r.filter((e=>e.status===i)));"new"!==s&&(r=r.filter((e=>e.status===s)));n&&o&&(r=r.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=o.getTime())));return r}({tableData:G,comparator:(0,w.hz)(L,N),filterName:J,filterService:Q,filterStatus:re,filterStartDate:X,filterEndDate:ee}),he=F?56:76,ge=!ue.length&&!!J||!ue.length&&!!re||!ue.length&&!!Q||!ue.length&&!!ee||!ue.length&&!!X;return(0,y.jsxs)(A.A,{title:"Requests: Your Request",children:[se&&(0,y.jsx)(R.A,{}),(0,y.jsx)(i.A,{maxWidth:!e&&"lg",children:(0,y.jsxs)(s.A,{sx:{p:3},children:[(0,y.jsx)(E.A,{heading:"Your Requests",links:[{name:"Dashboard",href:v.i8.root},{name:"Requests"}]}),(0,y.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:le,onChange:(e,t)=>{console.log(t,"value"),ie(t)},sx:{px:2,bgcolor:"background.neutral"},children:k.map((e=>(0,y.jsx)(o.A,{disableRipple:!0,value:e.label,label:(0,y.jsx)(d.A,{spacing:1,direction:"row",alignItems:"center",children:(0,y.jsx)("div",{children:e.label})}),sx:{color:le===e.label?"#22C55E":"black","&.Mui-selected":{color:"#22C55E"}}},e.label)))}),(0,y.jsx)(c.A,{sx:{p:2},children:(0,y.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:le.label})}),(0,y.jsx)(h.A,{}),(0,y.jsx)(P.F5,{filterName:J,filterService:Q,filterStartDate:X,filterEndDate:ee,onFilterName:e=>{K(e),z(0)},onFilterService:e=>{V(e.target.value)},onFilterStartDate:e=>{$(e)},onFilterEndDate:e=>{te(e)},optionsService:T}),(0,y.jsx)(O.A,{children:(0,y.jsx)(g.A,{sx:{minWidth:800,position:"relative"},children:(0,y.jsxs)(p.A,{size:F?"small":"medium",children:[(0,y.jsx)(_.er,{order:L,orderBy:N,headLabel:q,rowCount:G.length,numSelected:M.length,onSort:U}),(0,y.jsxs)(f.A,{children:[ue.slice(I*B,I*B+B).map((e=>(0,y.jsx)(P.eN,{row:e,onEditRow:()=>{return t=null===e||void 0===e?void 0:e.order_id,"Title Insurance"===le&&r(v.i8.editOrders.titleInsuranceOrderEdit(t)),"Coop Lien Searches"===le&&r(v.i8.editOrders.CoopLienSearchOrderEdit(t)),"Eagle 9 Policy"===le&&r(v.i8.editOrders.eagle9PolicyOrderEdit(t)),"Offering Plans"===le&&r(v.i8.editOrders.coopCondoOfferinPlansOrderEdit(t)),"1031 Exchanges"===le&&r(v.i8.editOrders.exchange1031OrderEdit(t)),"ACRIS E-Tax Forms"===le&&r(v.i8.editOrders.acrisETaxOrderEdit(t)),void("Other Search / Request"===le&&r(v.i8.editOrders.otherSearchesOrderEdit(t)));var t}},e.id))),(0,y.jsx)(_.dO,{height:he,emptyRows:(0,w.xl)(I,B,G.length)}),(0,y.jsx)(_.Sm,{isNotFound:ge})]})]})})}),(0,y.jsxs)(c.A,{sx:{position:"relative"},children:[(0,y.jsx)(x.A,{rowsPerPageOptions:[5,10,25],component:"div",count:ue.length,rowsPerPage:B,page:I,onPageChange:Y,onRowsPerPageChange:Z}),(0,y.jsx)(b.A,{control:(0,y.jsx)(m.A,{checked:F,onChange:W}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})})]})}}}]);