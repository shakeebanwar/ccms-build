"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[9271],{83752:(e,l,o)=>{o.d(l,{A:()=>R});var n=o(37088),t=o(60228),a=o(9950),i=o(7951),r=o(19657),s=o(73447),d=o(12257),c=o(82053),u=o(74745),p=o(86608),v=o(61770),m=o(16243),x=o(66075),h=o(44185),g=o(20131),f=o(53065),b=o(44414);const A=(0,i.Ay)("span")((e=>{let{theme:l}=e;return{...(0,v.A)(l).bgBlur({opacity:.64}),right:0,top:"50%",position:"fixed",marginTop:l.spacing(-3),padding:l.spacing(.5),zIndex:l.zIndex.drawer+2,borderRadius:"24px 0 20px 24px",boxShadow:"-12px 12px 32px -4px ".concat((0,r.X4)("light"===l.palette.mode?l.palette.grey[600]:l.palette.common.black,.36))}})),j=(0,i.Ay)("span")((e=>{let{theme:l}=e;return{top:8,width:8,height:8,right:10,borderRadius:"50%",position:"absolute",backgroundColor:l.palette.error.main}}));function y(e){let{notDefault:l,open:o,onToggle:n}=e;return(0,b.jsxs)(A,{children:[l&&!o&&(0,b.jsx)(j,{}),(0,b.jsx)(f.A,{title:"Filter",placement:"left",children:(0,b.jsx)(g.ji,{color:"inherit",onClick:n,sx:{p:1.25,transition:e=>e.transitions.create("all"),"&:hover":{color:"primary.main",bgcolor:e=>(0,r.X4)(e.palette.primary.main,e.palette.action.hoverOpacity)}},children:(0,b.jsx)(x.A,{icon:"material-symbols:filter-alt",width:20,height:20})})})]})}var w=o(60899),_=o(6368),C=o(8145),S=o(25979),D=o(3788),F=o(93523),T=o(23266),B=o(41205),k=o(43974),L=o(34117),P=o(30818),E=o(24642),I=o(32741);function N(e){let{files:l}=e;const o=(0,L.wA)();console.log(l,"files");const[n,t]=(0,a.useState)([]),[i,r]=(0,a.useState)([]),[s,d]=(0,a.useState)([]),[c,u]=(0,a.useState)({file_no:"",file_name:"",address:"",date:"",lender:"",transaction_type:"",buyers:"",sellers:""});(0,a.useEffect)((()=>{(async()=>{var e;const l=await I.A.get("user/file_buyers");console.log(l,"buyers"),t(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.buyers)})()}),[]);(0,a.useEffect)((()=>{(async()=>{var e;const l=await I.A.get("user/file_sellers");console.log(l,"sellers"),r(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.sellers)})()}),[]);const p=(e,l)=>{u((o=>({...o,[e]:l})))};return(0,a.useEffect)((()=>{const e=l.filter((e=>{var l,o,n,t,a,i;const r=null!==e&&void 0!==e&&e.updated_at?(0,k.A)(new Date(e.updated_at),"yyyy-MM-dd"):"",s=c.date?c.date:"",d=null!==e&&void 0!==e&&null!==(l=e.DummyData)&&void 0!==l&&l.buyers?e.DummyData.buyers.map((e=>"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||""))).join(" ").toLowerCase():"",u=null!==e&&void 0!==e&&null!==(o=e.DummyData)&&void 0!==o&&o.sellers?e.DummyData.sellers.map((e=>"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||""))).join(" ").toLowerCase():"";return(!c.file_no||e.file_no.toLowerCase().includes(c.file_no))&&(!c.file_name||e.file_name.toLowerCase().includes(c.file_name))&&(!c.address||(null===(n=e.DummyData)||void 0===n||null===(t=n.subject_premise)||void 0===t?void 0:t.property_location.toLowerCase().includes(c.address)))&&(!c.date||r===s)&&(!c.lender||(null===(a=e.DummyData)||void 0===a||null===(i=a.lender)||void 0===i?void 0:i.organization.toLowerCase().includes(c.lender)))&&(!c.transaction_type||e.transaction_type.toLowerCase().includes(c.transaction_type))&&(!c.buyers||d.includes(c.buyers.toLowerCase()))&&(!c.sellers||u.includes(c.sellers.toLowerCase()))}));d(e),console.log("Filtered Data:",e),o((0,P.AB)(e))}),[c,l]),console.log(c,"Filter"),(0,b.jsx)(w.Ay,{item:!0,xs:12,md:12,children:(0,b.jsxs)(_.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,b.jsx)(C.A,{name:"file_no",label:"File No #",value:c.file_no||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(C.A,{name:"file_name",label:"File Name",value:c.file_name||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(C.A,{name:"address",label:"Address",value:c.address||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(C.A,{name:"date",label:"Date",type:"date",value:c.date||"",onChange:e=>p(e.target.name,e.target.value),InputLabelProps:{shrink:!0}}),(0,b.jsx)(C.A,{name:"lender",label:"Lender",value:c.lender||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsxs)(S.A,{fullWidth:!0,children:[(0,b.jsx)(D.A,{id:"transaction-type-label",children:"Transaction Type"}),(0,b.jsx)(F.A,{name:"transaction_type",label:"Transaction Type",value:c.transaction_type||"",onChange:e=>p(e.target.name,e.target.value),labelId:"transaction-type-label",children:E.xW.map((e=>(0,b.jsx)(T.A,{value:e.value,children:e.label},e.value)))})]}),(0,b.jsx)(S.A,{fullWidth:!0,children:(0,b.jsx)(B.A,{name:"buyers",options:n,getOptionLabel:e=>"".concat(e.first_name," ").concat(e.last_name),renderInput:e=>(0,b.jsx)(C.A,{...e,label:"Search Buyer",variant:"outlined"}),value:n.find((e=>"".concat(e.first_name," ").concat(e.last_name)===c.buyers))||null,onChange:(e,l)=>{p("buyers","".concat(l.first_name," ").concat(l.last_name))},isOptionEqualToValue:(e,l)=>e.first_name===(null===l||void 0===l?void 0:l.first_name)&&e.last_name===(null===l||void 0===l?void 0:l.last_name)})}),(0,b.jsx)(S.A,{fullWidth:!0,children:(0,b.jsx)(B.A,{name:"sellers",options:i,getOptionLabel:e=>"".concat(e.first_name," ").concat(e.last_name),renderInput:e=>(0,b.jsx)(C.A,{...e,label:"Search Seller",variant:"outlined"}),value:i.find((e=>"".concat(e.first_name," ").concat(e.last_name)===c.sellers))||null,onChange:(e,l)=>{p("sellers","".concat(l.first_name," ").concat(l.last_name))},isOptionEqualToValue:(e,l)=>e.first_name===(null===l||void 0===l?void 0:l.first_name)&&e.last_name===(null===l||void 0===l?void 0:l.last_name)})})]})})}const O=(0,i.Ay)(n.m.div)((e=>{let{theme:l}=e;return{...(0,v.A)(l).bgBlur({color:l.palette.background.paper,opacity:.92}),top:0,right:0,bottom:0,display:"flex",position:"fixed",overflow:"hidden",width:m.LM.BASE_WIDTH,flexDirection:"column",margin:l.spacing(2),paddingBottom:l.spacing(3),zIndex:l.zIndex.drawer+3,borderRadius:1.5*Number(l.shape.borderRadius),boxShadow:"-24px 12px 32px -4px ".concat((0,r.X4)("light"===l.palette.mode?l.palette.grey[500]:l.palette.common.black,.16))}}));function R(e){let{files:l}=e;const{themeMode:o,themeDirection:n,themeColorPresets:i,themeStretch:r,themeLayout:v,onResetSetting:f}=(0,p.A)(),[A,j]=(0,a.useState)(!1),w=o!==m.L6.themeMode||n!==m.L6.themeDirection||i!==m.L6.themeColorPresets||v!==m.L6.themeLayout||r!==m.L6.themeStretch,_="rtl"!==n?(0,g.Sk)({distance:m.LM.BASE_WIDTH,durationIn:.32,durationOut:.32}).inRight:(0,g.Sk)({distance:m.LM.BASE_WIDTH,durationIn:.32,durationOut:.32}).inLeft;(0,a.useEffect)((()=>{document.body.style.overflow=A?"hidden":"unset"}),[A]);const C=()=>{j(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.A,{open:A,onClick:C,sx:{background:"transparent",zIndex:e=>e.zIndex.drawer+1}}),!A&&(0,b.jsx)(y,{open:A,notDefault:w,onToggle:()=>{j((e=>!e))}}),(0,b.jsx)(t.N,{children:A&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(O,{..._,children:[(0,b.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:2,pr:1,pl:2.5},children:[(0,b.jsx)(c.A,{variant:"subtitle1",children:"Filters"}),(0,b.jsx)("div",{children:(0,b.jsx)(g.ji,{onClick:C,children:(0,b.jsx)(x.A,{icon:"eva:close-fill",width:20,height:20})})})]}),(0,b.jsx)(u.A,{sx:{borderStyle:"dashed"}}),(0,b.jsx)(h.A,{sx:{flexGrow:1},children:(0,b.jsx)(d.A,{spacing:3,sx:{p:3},children:(0,b.jsx)(N,{files:l})})})]})})})]})}},93591:(e,l,o)=>{o.r(l),o.d(l,{default:()=>ve});var n=o(9950),t=o(60666),a=o(48089),i=o(14857),r=o(79537),s=o(12257),d=o(6368),c=o(68367),u=o(84142),p=o(1320),v=o(15769),m=o(34075),x=o(91434),h=o(53984),g=o(73447),f=o(57191),b=o(82053),A=o(60899),j=o(8145),y=o(74745),w=o(75165),_=o(29031),C=o(13564),S=o(28095),D=o(7951),F=o(68654),T=o(9449),B=o(73878),k=o(14650),L=(o(61310),o(99425),o(1041),o(48711)),P=o(90260),E=o(46765),I=o(86608),N=o(38861),O=o(34117),R=o(8279),W=o(66075),z=o(44185),M=o(63358),q=o(72870),V=o(12480),G=o(32741),Y=o(95074),U=o(30818),$=o(52401),H=(o(83752),o(22988),o(94906),o(24642),o(46631),o(64267),o(44414));P.nB.legalForms.acknowledgments,P.nB.legalForms.affidavitforCreditAgainst,P.nB.legalForms.affidavitinLieuofRegistration,P.nB.legalForms.affidavitinLieuofRegistration2009,P.nB.legalForms.carbonMonoxideDetectorAffidavit,P.nB.legalForms.certificationonNonForeignStatus,P.nB.legalForms.contractofSaleCondo,P.nB.legalForms.contractofSaleCoop,P.nB.legalForms.contractofSaleResidential,P.nB.legalForms.deedAdministrators,P.nB.legalForms.deedBargainandSalewithCovenants,P.nB.legalForms.deedBargainandSalewithoutCovenants,P.nB.legalForms.deedExecutors,P.nB.legalForms.deedQuitclaim,P.nB.legalForms.deedWarrantywithFullCovenants,P.nB.legalForms.it2663,P.nB.legalForms.it2664,P.nB.legalForms.nYStatutoryShortFormPOA,P.nB.legalForms.peconicBayRegionCommunityPreservationFund,P.nB.legalForms.RP5217,P.nB.legalForms.TP584;o(48812),o(29113);var X=o(33507),Z=o(9213),J=o(21671),Q=o(93038),K=o(23266),ee=o(34437);o(22704),o(33949);function le(e){var l,o,t,a,r,s,d,c,u,p,v,m,x,h,g,f,b,A,j,y,w,_,S,D,F,T,B,k;let{row:L,selected:P,onSelectRow:E,onAssign:I,onViewRow:N,onDocumentUpload:O,onDownloadDocument:R,onDeleteRow:z,onShareRow:M,onEditRow:V,onOrderContin:G,onStatusChange:Y,CreateOrderByPdf:U,onPaymentRow:$}=e;(0,i.A)();const{pathname:X}=(0,C.zy)();X.includes("admin"),(0,C.Zp)();console.log(L,"row");const{file_no:le,id:oe,User:ne,file_pdf:te}=L,ae=null===te||void 0===te?void 0:te.split("/");console.log(ae,"pdfName");const[ie,re]=(0,n.useState)(null),[se,de]=(Boolean(ie),(0,n.useState)(null)),ce=()=>{de(null)};return(0,H.jsxs)(Z.A,{hover:!0,selected:P,children:[(E||P)&&(0,H.jsx)(J.A,{padding:"checkbox",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(0,H.jsx)(Q.A,{checked:P,onClick:E})}),(0,H.jsx)(J.A,{sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},align:"left",children:null!==le?le:"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(l=L.orders)||void 0===l?void 0:l.length)>0&&(null!==(null===L||void 0===L||null===(o=L.orders[0])||void 0===o?void 0:o.subject_premise)||""!==(null===L||void 0===L||null===(t=L.orders[0])||void 0===t||null===(a=t.subject_premise)||void 0===a?void 0:a.property_location))?null===L||void 0===L||null===(r=L.orders[0])||void 0===r||null===(s=r.subject_premise)||void 0===s||null===(d=s.property_location)||void 0===d?void 0:d.slice(0,50):"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(c=L.orders)||void 0===c?void 0:c.length)>0&&null!==(null===L||void 0===L||null===(u=L.orders[0])||void 0===u?void 0:u.CONTIN_COMPLETED_DATE)?(0,ee.ts)(null===L||void 0===L||null===(p=L.orders[0])||void 0===p?void 0:p.CONTIN_COMPLETED_DATE):"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(v=L.orders)||void 0===v?void 0:v.length)>0&&null!==(null===L||void 0===L||null===(m=L.orders[0])||void 0===m?void 0:m.COMPLETED_DATE)?(0,ee.ts)(null===L||void 0===L||null===(x=L.orders[0])||void 0===x?void 0:x.COMPLETED_DATE):"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(h=L.orders)||void 0===h?void 0:h.length)>0&&null!==(null===L||void 0===L||null===(g=L.orders[0])||void 0===g?void 0:g.order_payment)?(0,ee.ts)(null===L||void 0===L||null===(f=L.orders[0])||void 0===f||null===(b=f.order_payment)||void 0===b?void 0:b.payment_date):"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(A=L.orders)||void 0===A?void 0:A.length)>0&&null!==(null===L||void 0===L||null===(j=L.orders[0])||void 0===j?void 0:j.order_payment)?null===L||void 0===L||null===(y=L.orders[0])||void 0===y||null===(w=y.order_payment)||void 0===w?void 0:w.payment_note:"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(_=L.orders)||void 0===_?void 0:_.length)>0&&null!==(null===L||void 0===L||null===(S=L.orders[0])||void 0===S?void 0:S.order_payment)?null!==L&&void 0!==L&&null!==(D=L.orders[0])&&void 0!==D&&null!==(F=D.order_payment)&&void 0!==F&&F.is_paid?"Paid":"false":"N/A"}),(0,H.jsx)(J.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===L||void 0===L||null===(T=L.orders)||void 0===T?void 0:T.length)>0&&null!==(null===L||void 0===L||null===(B=L.orders[0])||void 0===B?void 0:B.Total_Price)?null===L||void 0===L||null===(k=L.orders[0])||void 0===k?void 0:k.Total_Price:"N/A"}),(0,H.jsx)(J.A,{align:"right",sx:{padding:"14px 2px"},children:(0,H.jsx)(q.ZE,{open:se,onOpen:e=>{de(e.currentTarget)},onClose:ce,actions:(0,H.jsxs)(H.Fragment,{children:[N&&(0,H.jsxs)(K.A,{onClick:()=>{N(),ce()},children:[(0,H.jsx)(W.A,{icon:"tabler:eye-filled"}),"View"]}),M&&(0,H.jsxs)(K.A,{onClick:()=>{M(),ce()},children:[(0,H.jsx)(W.A,{icon:"material-symbols:share"}),"Share"]}),$&&(0,H.jsxs)(K.A,{onClick:()=>{$(),ce()},children:[(0,H.jsx)(W.A,{icon:"material-symbols:share"}),"Add Payment"]})]})})})]})}var oe=o(45180),ne=o(24516),te=o(25979),ae=o(3788),ie=o(93523),re=o(41397);const se={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},de=e=>{var l,o;let{Open:i,setOpen:r,OrderId:c}=e;const u=(0,B.wA)(),p=()=>{r(!1)},{enqueueSnackbar:v}=(0,_.dh)(),{file:m}=(0,B.d4)((e=>e.File)),[x,j]=(0,n.useState)(),[y,w]=(0,n.useState)(null);console.log(i,"file details"),(0,n.useEffect)((()=>{u((0,U.fl)())}),[]),(0,n.useEffect)((()=>{if(c&&(null===m||void 0===m?void 0:m.length)>0){const n=m.find((e=>{var l,o;return(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)==c}));if(n){var e,l,o;const t={label:"".concat(null===n||void 0===n?void 0:n.file_name," (").concat(null===n||void 0===n?void 0:n.file_no,")"),value:null===n||void 0===n||null===(e=n.orders[0])||void 0===e?void 0:e.id};w(t),O("order",t.value);const a=null===n||void 0===n||null===(l=n.orders[0])||void 0===l||null===(o=l.Total_Price)||void 0===o?void 0:o.split(".");O("price",(null===a||void 0===a?void 0:a.length)>0?a[0]:"")}}}),[c,m]);const C=(0,re.debounce)((e=>{j(e)}),300),D=(0,n.useMemo)((()=>{if(null===x||void 0===x||!x.trim())return m.map((e=>{var l,o;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)}}));const e=x.toLowerCase();return m.filter((l=>{var o,n,t,a;return null!==(o=null===l||void 0===l||null===(n=l.file_name)||void 0===n?void 0:n.toLowerCase().includes(e))&&void 0!==o&&o||null!==(t=null===l||void 0===l||null===(a=l.file_no)||void 0===a?void 0:a.toLowerCase().includes(e))&&void 0!==t&&t})).map((e=>{var l,o;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)}}))}),[x,m]),k=t.Ik().shape({order:t.Yj().required("Select Order"),date:t.Yj().required("Date is required"),notes:t.Yj(),is_active:t.zM().oneOf([!0],"Status is required")}),P=(0,n.useMemo)((()=>({order:"",date:"",notes:"",is_active:!1,price:""})),[]),E=(0,T.mN)({resolver:(0,F.t)(k),defaultValues:P}),{reset:I,watch:N,setValue:O,handleSubmit:R,formState:{isSubmitting:W,errors:z}}=E,M=N();console.log(M,"error");return(0,H.jsx)(h.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:p,closeAfterTransition:!0,slots:{backdrop:g.A},slotProps:{backdrop:{timeout:500}},children:(0,H.jsx)(f.A,{in:i,children:(0,H.jsx)(d.A,{sx:se,children:(0,H.jsx)($.Op,{methods:E,onSubmit:R((async e=>{console.log(e,"data");try{const l=new FormData;l.append("payment_date",(null===e||void 0===e?void 0:e.date)+" 00:00:00"),l.append("payment_note",null===e||void 0===e?void 0:e.notes),l.append("is_paid",null!==e&&void 0!==e&&e.is_active?1:0),l.append("Total_Price",null===e||void 0===e?void 0:e.price),await G.A.post("/admin/change/payment_status/".concat(null===e||void 0===e?void 0:e.order),l).then((()=>{v("Status Paid Success"),O("order",""),I(),p()}))}catch(l){if(console.error(l,"error"),l.errors){Object.keys(l.errors).map((e=>v(l.errors[e][0],{variant:"error"})))}}})),children:(0,H.jsx)(A.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,H.jsx)(A.Ay,{item:!0,xs:12,md:12,children:(0,H.jsxs)(a.A,{sx:{p:3},children:[(0,H.jsx)(oe.A,{title:"Add Payment Status"}),(0,H.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},mt:2},children:[(0,H.jsxs)(s.A,{children:[(0,H.jsx)(L.Ay,{options:D,value:y,onInputChange:C,onChange:e=>{var l,o;w(e);const n=e.value;O("order",n);const t=null===m||void 0===m?void 0:m.find((e=>{var l,o;return(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)==n})),a=null===t||void 0===t||null===(l=t.orders[0])||void 0===l||null===(o=l.Total_Price)||void 0===o?void 0:o.split(".");O("price",(null===a||void 0===a?void 0:a.length)>0&&a[0]),console.log(a,"getPrice")},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-5",styles:{control:(e,l)=>({...e,backgroundColor:"white",borderRadius:"8px",border:l.isFocused?"2px solid #1976d2":"1px solid #ced4da",boxShadow:l.isFocused?"0 0 5px rgba(25, 118, 210, 0.5)":"none","&:hover":{borderColor:"#1976d2"},minHeight:"48px"}),menu:e=>({...e,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",zIndex:9999}),option:(e,l)=>({...e,backgroundColor:l.isFocused?"#f5f5f5":"white",color:"black",padding:"10px 15px","&:active":{backgroundColor:"#e0e0e0"}}),placeholder:e=>({...e,color:"#6c757d",fontSize:"16px"}),singleValue:e=>({...e,color:"#495057",fontSize:"16px"}),dropdownIndicator:(e,l)=>({...e,color:l.isFocused?"#1976d2":"#6c757d","&:hover":{color:"#1976d2"}}),indicatorSeparator:e=>({...e,display:"none"})}}),""===(null===M||void 0===M?void 0:M.order)&&(0,H.jsx)(ne.A,{sx:{color:"red"},children:null===z||void 0===z||null===(l=z.order)||void 0===l?void 0:l.message})]}),(0,H.jsxs)(te.A,{fullWidth:!0,children:[(0,H.jsx)(ae.A,{id:"demo-simple-select-label",children:"Select price"}),(0,H.jsxs)(ie.A,{labelId:"demo-simple-select-label",name:"price",id:"demo-simple-select",value:null===M||void 0===M?void 0:M.price,onChange:e=>{const{value:l}=e.target;O("price",l),console.log(l,"values")},label:"Select a price",children:[(0,H.jsx)(K.A,{value:"300",children:"$ 300.00"}),(0,H.jsx)(K.A,{value:"350",children:"$ 350.00"}),(0,H.jsx)(K.A,{value:"395",children:"$ 395.00"}),(0,H.jsx)(K.A,{value:"400",children:"$ 400.00"}),(0,H.jsx)(K.A,{value:"450",children:"$ 450.00"}),(0,H.jsx)(K.A,{value:"500",children:"$ 500.00"})]})]}),(0,H.jsx)($.o3,{name:"date",type:"date"}),(0,H.jsx)($.o3,{name:"notes",label:"Notes",multi:!0}),(0,H.jsx)($.b8,{name:"is_active",labelPlacement:"start",label:(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(b.A,{variant:"h6",sx:{mb:.5},children:"Paid"})}),sx:{mx:0,width:1,justifyContent:"space-between"}}),(null===z||void 0===z?void 0:z.is_active)&&(0,H.jsx)(ne.A,{sx:{color:"red"},children:null===z||void 0===z||null===(o=z.is_active)||void 0===o?void 0:o.message})]}),(0,H.jsxs)(s.A,{justifyContent:"space-between",alignItems:"flex-end",sx:{mt:3},children:[(0,H.jsx)(S.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"submit",variant:"contained",loading:W,children:"Save Changes"}),(0,H.jsx)(S.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"button",variant:"contained",onClick:p,children:"Close"})]})]})})})})})})})},ce=[{id:"file_no",label:"File No",align:"left",width:200},{id:"address",label:"Address",align:"left",width:100},{id:"CONTIN_COMPLETED_DATE",label:"Contin Completed",align:"left",width:800},{id:"COMPLETED_DATE",label:"Completed Date",align:"left",width:800},{id:"payment_date",label:"Payment Date",align:"left",width:500},{id:"payment_date",label:"Notes",align:"left",width:500},{id:"is_paid",label:"Status",align:"left",width:500},{id:"Total_Price",label:"Invoice Price",align:"left",width:500}],ue=[{api:"all",label:"All"},{api:"title_insurance",label:"Title Insurance"},{api:"coop_lien_search",label:"Coop Lien Searches"},{api:"eagle_9_policy",label:"Eagle 9 Policy"},{api:"coop_condo_offering_plans",label:"Coop/Condo offering plans"},{api:"ucc_create_file",label:"UCC"},{api:"exchange",label:"1031 Exchanges"},{api:"acris_e_tax_form",label:"Acris E-Tax forms"},{api:"other_searches",label:"Other Search / Request"},{api:"Sightline_Report",label:"Sightline\xae"}],pe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4};(0,D.Ay)(a.A)((e=>{let{theme:l}=e;return{boxShadow:"none",textAlign:"center",backgroundColor:l.palette.primary.lighter,[l.breakpoints.up("md")]:{display:"flex",textAlign:"left",alignItems:"center",justifyContent:"space-between",height:"100%"}}}));function ve(e){var l;let{viewTabsRef:o}=e;(0,i.A)();const{user:D}=(0,X.A)(),{themeStretch:Z}=(0,I.A)(),J=(0,B.wA)(),{enqueueSnackbar:Q}=((0,C.Zp)(),(0,_.dh)()),{dense:K,page:ee,order:oe,orderBy:ne,rowsPerPage:te,setPage:ae,selected:ie,setSelected:re,onSort:se,onChangeDense:ve,onChangePage:me,onChangeRowsPerPage:xe}=(0,N.Ay)({defaultOrderBy:"createDate"}),[he,ge]=(0,n.useState)([]),[fe,be]=(0,n.useState)(""),[Ae,je]=(0,n.useState)("new"),[ye,we]=(0,n.useState)(null),[_e,Ce]=(0,n.useState)([]),[Se,De]=(0,n.useState)(null),{currentTab:Fe,onChangeTab:Te}=(0,E.A)("all"),[Be,ke]=(0,n.useState)(),[Le,Pe]=(0,n.useState)(!1),[Ee,Ie]=(0,n.useState)(""),[Ne,Oe]=(0,n.useState)(!1),[Re,We]=(0,n.useState)(!1),[ze,Me]=(0,n.useState)(!1),[qe,Ve]=(0,n.useState)(),[Ge,Ye]=(0,n.useState)(),[Ue,$e]=(0,n.useState)(),[He,Xe]=(0,n.useState)(),[Ze,Je]=(0,n.useState)([]),[Qe,Ke]=(0,n.useState)([]),[el,ll]=(0,n.useState)(!1),[ol,nl]=(0,n.useState)(null),{file:tl,filterData:al}=(Boolean(ol),(0,O.d4)((e=>e.File)));console.log(tl,"file details");(0,n.useEffect)((()=>{var e;"Sightline\xae"!==Be&&J((0,U.xg)(null===(e=ue.find((e=>e.label===Be)))||void 0===e?void 0:e.api,Ue))}),[Be]),(0,n.useEffect)((()=>{if((null===tl||void 0===tl?void 0:tl.length)>0){const e=tl.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.User)||void 0===l?void 0:l.id)===Ue}));ge(e)}else ge([])}),[tl,Ue]);(0,n.useEffect)((()=>{(async()=>{Pe(!0);try{var e;const l=await G.A.get("admin/users");console.log(l,"all user"),Je(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user),console.log(l,"autofill")}catch(l){console.log(l,"autofill")}finally{Pe(!1)}})()}),[]);const il=function(e){var l;let{tableData:o,comparator:n,filterName:t,filterStatus:a,filterService:i,filterStartDate:r,filterEndDate:s}=e;const d=null===(l=o)||void 0===l?void 0:l.map(((e,l)=>[e,l]));d.sort(((e,l)=>{const o=n(e[0],l[0]);return 0!==o?o:e[1]-l[1]})),o=d.map((e=>e[0])),t&&(o=o.filter((e=>{var l,o,n;return-1!==e.file_no.toLowerCase().indexOf(t.toLowerCase())||-1!==(null===e||void 0===e||null===(l=e.orders[0])||void 0===l||null===(o=l.subject_premise)||void 0===o||null===(n=o.property_location)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))})));"all"!==a&&(o=o.filter((e=>e.status===a)));"new"!==i&&(o=o.filter((e=>e.status===i)));r&&s&&(o=o.filter((e=>e.updated_at.getTime()>=r.getTime()&&e.updated_at.getTime()<=s.getTime())));return o}({tableData:he,comparator:(0,N.hz)(oe,ne),filterName:fe,filterService:Ae,filterStatus:Fe,filterStartDate:ye,filterEndDate:Se}),rl=K?56:76,sl=!il.length&&!!fe||!il.length&&!!Fe||!il.length&&!!Ae||!il.length&&!!Se||!il.length&&!!ye,dl=async e=>{ll(!0);try{await G.A.post("user/share/".concat(e,"/").concat(qe)).then((e=>{if(ll(!1),200===e.status||201===e.status){const l=e.data;console.log(l,"share file"),Q(l.message),Oe(!1),Ce()}}))}catch(l){if(console.error(l),l.errors){Object.keys(l.errors).map((e=>Q(l.errors[e][0],{variant:"error"})))}}finally{ll(!1)}},cl=(0,n.useRef)(""),ul=t.Ik().shape({fname:t.Yj().required("First Name is required"),lname:t.Yj().required("Last Name is required"),email:t.Yj().required("Email is required")}),pl=(0,n.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),vl=(0,T.mN)({resolver:(0,F.t)(ul),defaultValues:pl}),{reset:ml,watch:xl,setValue:hl,handleSubmit:gl,formState:{isSubmitting:fl,errors:bl}}=vl,Al=(xl(),async(e,l,o)=>{try{var n;const i=new FormData;i.append("name","".concat(l," ").concat(o));const r=await G.A.post("user/contact/add/".concat(e),i);var t,a;if(console.log(r,"add user in list api"),null!==r&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.status)Q("User Add In Your List",{variant:"success"}),dl(null===r||void 0===r||null===(t=r.data)||void 0===t||null===(a=t.contact)||void 0===a?void 0:a.id);else console.log("Status False in API")}catch(i){console.log(i,"add user in list api error")}});return(0,H.jsx)(R.A,{title:"All Files",children:(0,H.jsxs)(r.A,{maxWidth:!Z&&"xl",children:[Le&&(0,H.jsx)(Y.A,{}),(0,H.jsxs)(a.A,{sx:{borderRadius:"0px"},children:[(0,H.jsx)(s.A,{gap:1,sx:{width:"25%",float:"right"},children:(0,H.jsx)(L.Ay,{options:null===Ze||void 0===Ze?void 0:Ze.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:He,onChange:e=>{console.log(e,"newFileId"),J((0,U.xg)("all",e.value)),$e(e.value),Xe(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,l)=>({...e,backgroundColor:l.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})}),(0,H.jsxs)(d.A,{sx:{width:"100%"},children:[(0,H.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Be,onChange:(e,l)=>ke(l),sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:ue.map((e=>(0,H.jsx)(u.A,{disableRipple:!0,value:e.label,label:(0,H.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,H.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,H.jsx)(V.F5,{filterName:fe,filterService:Ae,filterStartDate:ye,filterEndDate:Se,onFilterName:e=>{be(e),ae(0)},onFilterService:e=>{je(e.target.value)},onFilterStartDate:e=>{we(e)},onFilterEndDate:e=>{De(e)}})]}),(0,H.jsx)(M.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:P.nB.root},{name:"All Files"}]}),(0,H.jsx)(z.A,{children:(0,H.jsx)(p.A,{sx:{minWidth:800,position:"relative"},children:(0,H.jsxs)(v.A,{size:K?"small":"medium",sx:{overflowX:"hidden"},children:[(0,H.jsx)(q.er,{order:oe,orderBy:ne,headLabel:ce,rowCount:he.length,numSelected:ie.length,onSort:se}),(0,H.jsxs)(m.A,{children:[il.slice(ee*te,ee*te+te).map((e=>(0,H.jsx)(le,{row:e,onPaymentRow:()=>(e=>{var l,o;We(!0);const n=(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id);Ye(n)})(e)},e.id))),(0,H.jsx)(q.dO,{height:rl,emptyRows:(0,N.xl)(ee,te,he.length)}),(0,H.jsx)(q.Sm,{isNotFound:sl})]})]})})}),(0,H.jsx)(d.A,{sx:{position:"relative"},children:(0,H.jsx)(x.A,{rowsPerPageOptions:[5,10,25],component:"div",count:il.length,rowsPerPage:te,page:ee,onPageChange:me,onRowsPerPageChange:xe})})]}),(0,H.jsx)(h.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Ne,onClose:()=>Oe(!1),closeAfterTransition:!0,slots:{backdrop:g.A},slotProps:{backdrop:{timeout:500}},children:(0,H.jsx)(f.A,{in:Ne,children:(0,H.jsxs)(d.A,{sx:pe,children:[(0,H.jsx)(b.A,{variant:"h5",sx:{mb:2},onClick:()=>Me(!1),children:ze&&(0,H.jsx)(k.In,{icon:"material-symbols:arrow-left-alt",width:"1.2em",height:"1.2em"})}),(0,H.jsxs)(A.Ay,{item:!0,xs:12,md:12,children:[(0,H.jsx)(b.A,{variant:"h5",sx:{mb:2},children:ze?"Add Contact":"Select User Into Your List"}),ze?(0,H.jsxs)($.Op,{methods:vl,onSubmit:gl((async e=>{console.log(e.request,"request"),ll(!0);try{const l=new FormData;l.append("first_name",e.fname),l.append("last_name",e.lname),l.append("email",e.email),l.append("phone",e.phone),l.append("address",e.address),l.append("company_name",e.company),l.append("job_title",e.job),l.append("is_file_shared",!0),await G.A.post("user/contact/user/add",l).then((e=>{if(ll(!1),200===e.status||201===e.status){var l,o,n;const t=e.data;console.log(t,"add user new"),Q("successfully add new user"),Oe(!1),ml(),Al(null===t||void 0===t||null===(l=t.user)||void 0===l?void 0:l.id,null===t||void 0===t||null===(o=t.user)||void 0===o?void 0:o.first_name,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.last_name)}}))}catch(l){if(console.error(l),l.errors){Object.keys(l.errors).map((e=>Q(l.errors[e][0],{variant:"error"})))}}finally{ll(!1)}})),children:[(0,H.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,H.jsx)($.o3,{name:"fname",label:"First Name"}),(0,H.jsx)($.o3,{name:"lname",label:"Last Name"}),(0,H.jsx)($.o3,{name:"email",label:"Email"}),(0,H.jsx)($.o3,{name:"phone",label:"Phone Nunber"}),(0,H.jsx)($.o3,{name:"address",label:"Address"}),(0,H.jsx)($.o3,{name:"company",label:"Company Name"}),(0,H.jsx)($.o3,{name:"job",label:"Job title"})]}),(0,H.jsx)(s.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,H.jsx)(S.A,{type:"submit",variant:"contained",loading:el,children:"Add Contact"})})]}):(0,H.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,H.jsx)(s.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,H.jsx)(j.A,{sx:{my:1,width:1},ref:cl,label:"Search by first Name, Last Name & Email",value:(null===cl||void 0===cl||null===(l=cl.current)||void 0===l?void 0:l.value)||"",onChange:e=>{const l=e.target.value.toLowerCase();if(cl.current.value=l,""===cl.current.value)Ce([]);else{const e=Qe.filter((e=>{var o,n,t;return(null===e||void 0===e||null===(o=e.Contact)||void 0===o?void 0:o.first_name.toLowerCase().includes(l))||(null===e||void 0===e||null===(n=e.Contact)||void 0===n?void 0:n.last_name.toLowerCase().includes(l))||(null===e||void 0===e||null===(t=e.Contact)||void 0===t?void 0:t.email.toLowerCase().includes(l))}));console.log(e,"filteredData"),Ce(e)}},size:"small"})}),(0,H.jsx)(y.A,{}),(null===_e||void 0===_e?void 0:_e.length)>0?_e.map(((e,l)=>{var o,n;return(0,H.jsxs)(s.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,H.jsxs)(b.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,H.jsx)(W.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(null===(o=e.Contact)||void 0===o?void 0:o.first_name," ").concat(null===e||void 0===e||null===(n=e.Contact)||void 0===n?void 0:n.last_name)]}),(0,H.jsx)(s.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,H.jsx)(S.A,{type:"submit",variant:"contained",loading:el,onClick:()=>dl(null===e||void 0===e?void 0:e.id),children:"Share"})})]},l)})):(0,H.jsx)(s.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,H.jsx)(w.A,{variant:"contained",onClick:()=>Me(!0),startIcon:(0,H.jsx)(W.A,{icon:"material-symbols:contact-page-rounded"}),sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:"Add Contact"})})]})]})]})})}),(0,H.jsx)(de,{Open:Re,setOpen:We,OrderId:Ge})]})})}}}]);