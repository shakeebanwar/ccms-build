"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4590],{24590:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r(9950),o=r(13564),i=r(79537),s=r(48089),n=r(12257),l=r(68367),d=r(84142),c=r(1320),p=r(15769),u=r(34075),h=r(6368),g=r(91434),f=r(16497),x=r(37324),m=r(40033),v=r(28170),w=r(82053),A=r(75165),b=r(29031),y=r(48711),C=r(20131),S=r(90260),j=r(46765),O=r(86608),R=r(38861),D=r(8279),P=(r(22704),r(66075)),T=r(44185),k=r(63358),_=r(72870),M=r(12480),N=r(32741),L=r(95074),E=r(44414);const I=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"county",label:"County",align:"left",width:800},{id:"employee",label:"Assign Employee",align:"left",width:1e3},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],V=[{api:"all",label:"All"},{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function B(){const{themeStretch:e}=(0,O.A)(),{enqueueSnackbar:t}=(0,b.dh)(),r=(0,o.Zp)(),{dense:B,page:F,order:W,orderBy:q,rowsPerPage:z,setPage:H,selected:U,onSort:Y,onChangeDense:Z,onChangePage:G,onChangeRowsPerPage:J}=(0,R.Ay)({defaultOrderBy:"createDate"}),[K,Q]=(0,a.useState)([]),[X,$]=(0,a.useState)(""),[ee,te]=(0,a.useState)("new"),[re,ae]=(0,a.useState)(null),[oe,ie]=(0,a.useState)(null),{currentTab:se,onChangeTab:ne}=(0,j.A)("all"),[le,de]=(0,a.useState)("All"),[ce,pe]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[ge,fe]=(0,a.useState)([]),[xe,me]=(0,a.useState)([]),[ve,we]=(0,a.useState)([]),[Ae,be]=(0,a.useState)(),[ye,Ce]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{pe(!0);try{var e;const t=await N.A.get("/admin/users");console.log(t,"all user"),we(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.user)}catch(t){console.log(t,"autofill")}finally{pe(!1)}})()}),[]);(0,a.useEffect)((()=>{"Sightline\xae"!==le&&"UCC"!==le&&Se(V.find((e=>e.label===le)).api)}),[le]);const Se=(e,r)=>{pe(!0);try{N.A.get("admin/".concat(e,"?user_id=").concat(r)).then((e=>{pe(!1);const r=e.data;200===e.status?Q(r.orders):t(r.message)}))}catch(a){if(pe(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},je=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:o,filterService:i,filterStartDate:s,filterEndDate:n}=e;const l=t.map(((e,t)=>[e,t]));l.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=l.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==i&&(t=t.filter((e=>e.status===i)));s&&n&&(t=t.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=n.getTime())));return t}({tableData:K,comparator:(0,R.hz)(W,q),filterName:X,filterService:ee,filterStatus:se,filterStartDate:re,filterEndDate:oe}),Oe=B?56:76,Re=!je.length&&!!X||!je.length&&!!se||!je.length&&!!ee||!je.length&&!!oe||!je.length&&!!re,De=e=>K.filter((t=>t.status===e)).length;K.length,De("active"),De("new"),De("placed"),De("completed"),De("on hold"),De("draft"),De("cancelled");return(0,E.jsxs)(D.A,{title:"Order: Your Orders",children:[ce&&(0,E.jsx)(L.A,{}),(0,E.jsxs)(i.A,{maxWidth:!e&&"xl",children:[(0,E.jsxs)(s.A,{sx:{borderRadius:"0px"},children:[(0,E.jsxs)(n.A,{sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",minHeight:"50px"},children:[(0,E.jsx)(l.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:le,onChange:(e,t)=>de(t),sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:V.map((e=>(0,E.jsx)(d.A,{disableRipple:!0,value:e.label,label:(0,E.jsx)(n.A,{spacing:1,direction:"row",alignItems:"center",children:(0,E.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,E.jsx)(n.A,{gap:1,sx:{width:"25%"},children:(0,E.jsx)(y.Ay,{options:[{label:"All",value:"all"},...(null===ve||void 0===ve?void 0:ve.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))))||[]],value:ye,onChange:e=>{var t;console.log(e,"newFileId"),Se(null===V||void 0===V||null===(t=V.find((e=>e.label===le)))||void 0===t?void 0:t.api,e.value),be(e.value),Ce(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3 ",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,t)=>({...e,backgroundColor:t.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})})]}),(0,E.jsx)(k.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:S.RO.root},{name:"Orders"}]}),(0,E.jsx)(T.A,{children:(0,E.jsx)(c.A,{sx:{minWidth:800,position:"relative"},children:(0,E.jsxs)(p.A,{size:B?"small":"medium",children:[(0,E.jsx)(_.er,{order:W,orderBy:q,headLabel:I,rowCount:K.length,numSelected:U.length,onSort:Y}),(0,E.jsxs)(u.A,{children:[je.slice(F*z,F*z+z).map((e=>(0,E.jsx)(M.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===le&&r(S.RO.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===le&&r(S.RO.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}),"Eagle 9 Policy"===le&&r(S.RO.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Coop/Condo offering plans"===le&&r(S.RO.viewOrders.coopCondoOfferinPlansOrderView,{state:{row:e,type:"view"}}),"1031 Exchanges"===le&&r(S.RO.viewOrders.exchange1031OrderView,{state:{row:e,type:"view"}}),"Other Search / Request"===le&&r(S.RO.viewOrders.otherSearchesOrderView,{state:{row:e,type:"view"}})})(e),onAssign:()=>(async e=>{if(me(e),!ge.length>0){pe(!0);try{await N.A.get("/admin/employees").then((e=>{pe(!1);const t=e.data;fe(t.user)}))}catch(r){pe(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}he(!0)})(e.id),onStatusChange:r=>((e,r)=>{pe(!0);try{const a=new FormData;a.append("status",r),a.append("id",e),N.A.post("/admin/changeorderStatus",a).then((a=>{if(pe(!1),200===a.status||201===a.status){const o=a.data,i=K.map((t=>t.id===e?{...t,status:r}:t));Q(i),t(o.message)}}))}catch(a){pe(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,E.jsx)(_.dO,{height:Oe,emptyRows:(0,R.xl)(F,z,K.length)}),(0,E.jsx)(_.Sm,{isNotFound:Re})]})]})})}),(0,E.jsxs)(h.A,{sx:{position:"relative"},children:[(0,E.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:je.length,rowsPerPage:z,page:F,onPageChange:G,onRowsPerPageChange:J}),(0,E.jsx)(f.A,{control:(0,E.jsx)(x.A,{checked:B,onChange:Z}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,E.jsxs)(C.ys,{fullWidth:!0,maxWidth:"sm",open:ue,onClose:()=>{he(!1)},children:[(0,E.jsx)(m.A,{children:"Employees"}),(0,E.jsxs)(v.A,{sx:{pb:3,mt:2,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[ge.map(((e,r)=>(0,E.jsxs)(n.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,E.jsxs)(w.A,{variant:"subtitle1",children:[(0,E.jsx)(P.A,{icon:"raphael:employee"})," ",e.first_name]}),(0,E.jsx)(A.A,{variant:"text",onClick:()=>(async e=>{pe(!0);try{const r=new FormData;r.append("user_id",e.id),r.append("order_id",xe),await N.A.post("/admin/assignOrder",r).then((r=>{if(pe(!1),200===r.status||201===r.status){const a=r.data,o=K.map((t=>t.id===xe?{...t,employee:[e]}:t));Q(o),t(a.message)}}))}catch(r){pe(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}he(!1)})(e),children:"Assign"})]},r))),(0,E.jsx)(n.A,{flexDirection:"row",justifyContent:"end",gap:1,children:(0,E.jsx)(A.A,{variant:"outlined",color:"inherit",onClick:()=>{he(!1)},children:"Close"})})]})]})]})]})}},48089:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(58168),o=r(98587),i=r(9950),s=r(2803),n=r(5747),l=r(7951),d=r(79859),c=r(70693),p=r(37665);function u(e){return(0,p.A)("MuiCard",e)}(0,r(44245).A)("MuiCard",["root"]);var h=r(44414);const g=["className","raised"],f=(0,l.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),x=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiCard"}),{className:i,raised:l=!1}=r,c=(0,o.A)(r,g),p=(0,a.A)({},r,{raised:l}),x=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},u,t)})(p);return(0,h.jsx)(f,(0,a.A)({className:(0,s.A)(x.root,i),elevation:l?8:void 0,ref:t,ownerState:p},c))}))},28170:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(98587),o=r(58168),i=r(9950),s=r(2803),n=r(5747),l=r(7951),d=r(79859),c=r(37665);function p(e){return(0,c.A)("MuiDialogContent",e)}(0,r(44245).A)("MuiDialogContent",["root","dividers"]);var u=r(23025),h=r(44414);const g=["className","dividers"],f=(0,l.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},r.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(u.A.root," + &")]:{paddingTop:0}})})),x=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogContent"}),{className:i,dividers:l=!1}=r,c=(0,a.A)(r,g),u=(0,o.A)({},r,{dividers:l}),x=(e=>{const{classes:t,dividers:r}=e,a={root:["root",r&&"dividers"]};return(0,n.A)(a,p,t)})(u);return(0,h.jsx)(f,(0,o.A)({className:(0,s.A)(x.root,i),ownerState:u,ref:t},c))}))},40033:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(58168),o=r(98587),i=r(9950),s=r(2803),n=r(5747),l=r(82053),d=r(7951),c=r(79859),p=r(23025),u=r(5536),h=r(44414);const g=["className","id"],f=(0,d.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=i.forwardRef((function(e,t){const r=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:d}=r,x=(0,o.A)(r,g),m=r,v=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},p.t,t)})(m),{titleId:w=d}=i.useContext(u.A);return(0,h.jsx)(f,(0,a.A)({component:"h2",className:(0,s.A)(v.root,l),ownerState:m,ref:t,variant:"h6",id:w},x))}))},23025:(e,t,r)=>{r.d(t,{A:()=>i,t:()=>o});var a=r(37665);function o(e){return(0,a.A)("MuiDialogTitle",e)}const i=(0,r(44245).A)("MuiDialogTitle",["root"])}}]);