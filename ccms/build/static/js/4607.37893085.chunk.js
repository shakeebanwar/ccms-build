"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{16099:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(90706),l=a(79947),n=a(28339),o=a(6978),s=a(60820),i=a(36404),c=a(9950),d=a(79537),u=a(48089),h=a(40033),p=a(42686),g=a(62740),f=a(30744),b=a(90260),m=a(98091),x=a(86608),w=a(63358),v=a(20131),A=a(44414);const S=e=>{const{events:t,selectedEventId:a}=e.calendar;return a?t.find((e=>Number(e.id)===Number(a))):null};function y(){const{themeStretch:e}=(0,x.A)(),t=(0,f.wA)(),a=(0,m.A)("up","sm"),y=(0,c.useRef)(null),[j,C]=(0,c.useState)(new Date),[O,D]=(0,c.useState)(a?"dayGridMonth":"listWeek"),P=(0,f.d4)(S),{events:k,isOpenModal:E,selectedRange:R}=(0,f.d4)((e=>e.calendar));(0,c.useEffect)((()=>{t((0,p.Wb)())}),[t]),(0,c.useEffect)((()=>{const e=y.current;if(e){const t=e.getApi(),r=a?"dayGridMonth":"listWeek";t.changeView(r),D(r)}}),[a]);const T=()=>{t((0,p.Oo)())};return(0,A.jsxs)(d.A,{maxWidth:!e&&"xl",children:[(0,A.jsx)(w.A,{heading:"Order Continuation",links:[{name:"Dashboard",href:b.i8.root},{name:"Order Continuation"}]}),(0,A.jsx)(u.A,{children:(0,A.jsxs)(g.mg,{children:[(0,A.jsx)(g.a7,{date:j,view:O,onNextDate:()=>{const e=y.current;if(e){const t=e.getApi();t.next(),C(t.getDate())}},onPrevDate:()=>{const e=y.current;if(e){const t=e.getApi();t.prev(),C(t.getDate())}},onToday:()=>{const e=y.current;if(e){const t=e.getApi();t.today(),C(t.getDate())}},onChangeView:e=>{const t=y.current;if(t){t.getApi().changeView(e),D(e)}}}),(0,A.jsx)(r.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:k,ref:y,rerenderDelay:10,initialDate:j,initialView:O,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{t((0,p.PY)(e.event.id))},height:a?720:"auto",plugins:[l.A,n.Ay,s.Ay,o.Ay,i.Ay]})]})}),(0,A.jsxs)(v.ys,{open:E,onClose:T,children:[(0,A.jsx)(h.A,{children:P?"Edit Order Contin":"Add Order Contin"}),(0,A.jsx)(g.lM,{event:P||{},range:R,onCancel:T})]})]})}},4607:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(9950),l=a(13564),n=a(79537),o=a(48089),s=a(68367),i=a(84142),c=a(12257),d=a(6368),u=a(82053),h=a(74745),p=a(1320),g=a(15769),f=a(34075),b=a(91434),m=a(16497),x=a(37324),w=a(29031),v=a(90260),A=a(46765),S=a(86608),y=a(38861),j=a(8279),C=a(22704),O=(a(66075),a(44185)),D=a(63358),P=a(72870),k=a(12480),E=a(32741),R=a(95074),T=(a(16099),a(44414));const _=["new","old"],F=[{id:"status",label:"Order Status",align:"left",width:500},{id:"user",label:"ordered by",align:"left",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],V=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function N(){const{themeStretch:e}=(0,S.A)(),{enqueueSnackbar:t}=(0,w.dh)(),a=(0,l.Zp)(),{dense:N,page:I,order:L,orderBy:M,rowsPerPage:B,setPage:W,selected:U,onSort:q,onChangeDense:z,onChangePage:Y,onChangeRowsPerPage:G}=(0,y.Ay)({defaultOrderBy:"createDate"}),[H,Z]=(0,r.useState)([]),[$,J]=(0,r.useState)(""),[K,Q]=(0,r.useState)("new"),[X,ee]=(0,r.useState)(null),[te,ae]=(0,r.useState)(null),{currentTab:re,onChangeTab:le}=(0,A.A)("all"),[ne,oe]=(0,r.useState)("Title Insurance"),[se,ie]=(0,r.useState)(!1),ce=(0,r.useRef)(null),[de,ue]=(0,r.useState)(!1),[he,pe]=(0,r.useState)("");(0,r.useEffect)((()=>{"Sightline\xae"!==ne&&"UCC"!==ne&&ge(V.find((e=>e.label===ne)).api)}),[ne]);const ge=e=>{ie(!0);try{E.A.get("employee/".concat(e)).then((e=>{ie(!1);const a=e.data;console.log(a,"Dataemployee"),200===e.status?Z(a.orders):t(a.message)}))}catch(a){if(ie(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},fe=(e,t)=>{ue(e),pe(t),ce.current.click()},be=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:l,filterService:n,filterStartDate:o,filterEndDate:s}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=i.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==n&&(t=t.filter((e=>e.status===n)));o&&s&&(t=t.filter((e=>e.updated_at.getTime()>=o.getTime()&&e.updated_at.getTime()<=s.getTime())));return t}({tableData:H,comparator:(0,y.hz)(L,M),filterName:$,filterService:K,filterStatus:re,filterStartDate:X,filterEndDate:te}),me=N?56:76,xe=!be.length&&!!$||!be.length&&!!re||!be.length&&!!K||!be.length&&!!te||!be.length&&!!X,we=e=>H.filter((t=>t.status===e)).length,ve=[{value:"all",label:"All",color:"info",count:H.length},{value:"active",label:"Active",color:"info",count:we("active")},{value:"new",label:"New",color:"info",count:we("new")},{value:"placed",label:"Placed",color:"info",count:we("placed")},{value:"completed",label:"Completed",color:"success",count:we("completed")},{value:"on hold",label:"On Hold",color:"warning",count:we("on hold")},{value:"draft",label:"Draft",color:"default",count:we("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:we("cancelled")}];return(0,T.jsxs)(j.A,{title:"Order: Your Orders",children:[se&&(0,T.jsx)(R.A,{}),(0,T.jsx)("input",{type:"file",ref:ce,onChange:e=>{ie(!0);const a=new FormData;a.append("status","completed"),a.append("file",e.target.files[0]),a.append("id",de),a.append("complete_type",he);try{E.A.post("employee/changeorderStatus",a).then((e=>{if(console.log(e,"status api"),ie(!1),200===e.status||201===e.status){const a=e.data,r=H.map((e=>e.id===de?{...e,status:"completed"}:e));console.log(r,"UpdatedOrders"),Z(r),t(a.message)}})).catch((()=>{ie(!1)}))}catch(r){if(ie(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},hidden:!0}),(0,T.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,T.jsx)(D.A,{heading:"Your Orders",links:[{name:"Dashboard",href:v.i8.root},{name:"Orders"}]}),(0,T.jsx)(o.A,{sx:{mb:5},children:(0,T.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ne,onChange:(e,t)=>oe(t),sx:{px:2,bgcolor:"#403390",color:"#fff"},children:V.map((e=>(0,T.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,T.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,T.jsx)("div",{children:e.label})}),sx:{color:ne===e.label?"black":"white","&.Mui-selected":{color:"black"}}},e.label)))})}),(0,T.jsx)(d.A,{sx:{p:2},children:(0,T.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:ne.label})}),(0,T.jsxs)(o.A,{children:[(0,T.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:re,onChange:le,sx:{px:2,bgcolor:"background.neutral"},children:ve.map((e=>(0,T.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,T.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,T.jsx)("div",{children:e.label})," ",(0,T.jsxs)(C.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,T.jsx)(h.A,{}),(0,T.jsx)(k.F5,{filterName:$,filterService:K,filterStartDate:X,filterEndDate:te,onFilterName:e=>{J(e),W(0)},onFilterService:e=>{Q(e.target.value)},onFilterStartDate:e=>{ee(e)},onFilterEndDate:e=>{ae(e)},optionsService:_}),(0,T.jsx)(O.A,{children:(0,T.jsx)(p.A,{sx:{minWidth:800,position:"relative"},children:(0,T.jsxs)(g.A,{size:N?"small":"medium",children:[(0,T.jsx)(P.er,{order:L,orderBy:M,headLabel:F,rowCount:H.length,numSelected:U.length,onSort:q}),(0,T.jsxs)(f.A,{children:[be.slice(I*B,I*B+B).map((e=>(0,T.jsx)(k.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===ne&&a(v.i8.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ne&&a(v.i8.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ne&&a(v.i8.viewOrders.eagle9PolicyOrderView,{state:e}),"Offering Plans"===ne&&a(v.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ne&&a(v.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ne&&a(v.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>fe(e.id,"file"),onContainDocumentUpload:()=>fe(e.id,"contain"),onStatusChange:a=>((e,a)=>{ie(!0);try{const r=new FormData;r.append("status",a),r.append("id",e),E.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),ie(!1),200===r.status||201===r.status){const l=r.data,n=H.map((t=>t.id===e?{...t,status:a}:t));Z(n),t(l.message)}})).catch((e=>{ie(!1),console.log(e,"catch errror")}))}catch(r){ie(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}})(e.id,a)},e.id))),(0,T.jsx)(P.dO,{height:me,emptyRows:(0,y.xl)(I,B,H.length)}),(0,T.jsx)(P.Sm,{isNotFound:xe})]})]})})}),(0,T.jsxs)(d.A,{sx:{position:"relative"},children:[(0,T.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:be.length,rowsPerPage:B,page:I,onPageChange:Y,onRowsPerPageChange:G}),(0,T.jsx)(m.A,{control:(0,T.jsx)(x.A,{checked:N,onChange:z}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})]})}}}]);