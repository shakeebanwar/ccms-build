"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3653],{91745:(e,t,r)=>{r.d(t,{b9:()=>h,qU:()=>d,yR:()=>g});var o=r(7951),a=r(19657),n=r(6368),l=r(82053),i=r(44414);const s=(0,o.Ay)(n.A)((()=>({display:"flex",alignItems:"center",justifyContent:"flex-end"}))),c=(0,o.Ay)("div")((e=>{let{theme:t}=e;return{marginLeft:-4,borderRadius:"50%",width:t.spacing(2),height:t.spacing(2),border:"solid 2px ".concat(t.palette.background.paper),boxShadow:"inset -1px 1px 2px ".concat((0,a.X4)(t.palette.common.black,.24))}}));function d(e){let{colors:t,limit:r=3,sx:o}=e;const a=t.slice(0,r),n=t.length-r;return(0,i.jsxs)(s,{component:"span",sx:o,children:[a.map(((e,t)=>(0,i.jsx)(c,{sx:{bgcolor:e}},e+t))),t.length>r&&(0,i.jsx)(l.A,{variant:"subtitle2",children:"+".concat(n)})]})}var u=r(93038),p=r(66075);function h(e){let{colors:t,onChangeColor:r,sx:o,...a}=e;return(0,i.jsx)(n.A,{sx:o,children:t.map((e=>{const t="#FFFFFF"===e||"white"===e;return(0,i.jsx)(u.A,{size:"small",value:e,color:"default",onChange:()=>r(e),icon:(0,i.jsx)(f,{sx:{...t&&{border:e=>"solid 1px ".concat(e.palette.divider)}}}),checkedIcon:(0,i.jsx)(f,{sx:{transform:"scale(1.4)","&:before":{opacity:.48,width:"100%",content:"''",height:"100%",borderRadius:"50%",position:"absolute",boxShadow:"4px 4px 8px 0 currentColor"},"& svg":{width:12,height:12,color:"common.white"},...t&&{border:e=>"solid 1px ".concat(e.palette.divider),boxShadow:e=>"4px 4px 8px 0 ".concat(e.palette.grey[50024]),"& svg":{width:12,height:12,color:"common.black"}}}}),sx:{color:e,"&:hover":{opacity:.72}},...a},e)}))})}function f(e){let{sx:t,...r}=e;return(0,i.jsx)(n.A,{sx:{width:20,height:20,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",bgcolor:"currentColor",transition:e=>e.transitions.create("all",{duration:e.transitions.duration.shortest}),...t},...r,children:(0,i.jsx)(p.A,{icon:"eva:checkmark-fill"})})}var x=r(49535),m=r(77966);function g(e){let{colors:t,...r}=e;return(0,i.jsx)(x.A,{row:!0,...r,children:t.map((e=>{const t="#FFFFFF"===e||"white"===e;return(0,i.jsx)(m.A,{value:e,color:"default",icon:(0,i.jsx)(v,{sx:{...t&&{border:e=>"solid 1px ".concat(e.palette.divider)}}}),checkedIcon:(0,i.jsx)(v,{sx:{transform:"scale(1.4)","&:before":{opacity:.48,width:"100%",content:"''",height:"100%",borderRadius:"50%",position:"absolute",boxShadow:"4px 4px 8px 0 currentColor"},"& svg":{width:12,height:12,color:"common.white"},...t&&{border:e=>"solid 1px ".concat(e.palette.divider),boxShadow:e=>"4px 4px 8px 0 ".concat(e.palette.grey[50024]),"& svg":{width:12,height:12,color:"common.black"}}}}),sx:{color:e,"&:hover":{opacity:.72}}},e)}))})}function v(e){let{sx:t}=e;return(0,i.jsx)(n.A,{sx:{width:20,height:20,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",bgcolor:"currentColor",transition:e=>e.transitions.create("all",{duration:e.transitions.duration.shortest}),...t},children:(0,i.jsx)(p.A,{icon:"eva:checkmark-fill"})})}},83653:(e,t,r)=>{r.r(t),r.d(t,{default:()=>K});var o=r(9950),a=r(60666),n=r(79537),l=r(48089),i=r(68367),s=r(84142),c=r(12257),d=r(6368),u=r(82053),p=r(74745),h=r(1320),f=r(15769),x=r(34075),m=r(91434),g=r(16497),v=r(37324),b=r(53984),y=r(73447),j=r(57191),w=r(60899),A=r(40033),C=r(29031),S=r(73878),k=r(13564),O=r(9449),D=r(68654),_=r(28095),q=r(90260),R=r(46765),I=r(86608),F=r(38861),P=r(22704),T=(r(66075),r(44185)),L=r(63358),N=r(72870),B=r(12480),E=r(32741),M=r(95074),V=r(42686),z=r(73561),U=r(93076),G=r(20131),Y=r(62740),W=r(44414);const H={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},X=["new","old"],J=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"id",label:"Order No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],Z=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function K(){const{isOpenModal:e,selectedRange:t}=(0,S.d4)((e=>e.calendar)),[r,K]=(0,o.useState)(!1),[Q,$]=(0,o.useState)(),[ee,te]=(0,o.useState)(!1),[re,oe]=(0,o.useState)(),[ae,ne]=(0,o.useState)(!1),le=()=>{se((0,V.Oo)())},{themeStretch:ie}=(0,I.A)(),se=(0,S.wA)(),ce=(0,k.Zp)(),{enqueueSnackbar:de}=(0,C.dh)(),{dense:ue,page:pe,order:he,orderBy:fe,rowsPerPage:xe,setPage:me,selected:ge,setSelected:ve,onSort:be,onChangeDense:ye,onChangePage:je,onChangeRowsPerPage:we}=(0,F.Ay)({defaultOrderBy:"createDate"}),[Ae,Ce]=(0,o.useState)([]),[Se,ke]=(0,o.useState)(""),[Oe,De]=(0,o.useState)("new"),[_e,qe]=(0,o.useState)(null),[Re,Ie]=(0,o.useState)(null),{currentTab:Fe,onChangeTab:Pe}=(0,R.A)("all"),[Te,Le]=(0,o.useState)("Title Insurance"),[Ne,Be]=(0,o.useState)(!1),[Ee,Me]=(0,o.useState)(""),[Ve,ze]=(0,o.useState)(null),[Ue,Ge]=(0,o.useState)(""),{id:Ye}=(0,k.g)();(0,o.useEffect)((()=>{"Sightline\xae"!==Te&&We(Z.find((e=>e.label===Te)).api)}),[Te]);const We=e=>{Be(!0);try{E.A.get("user/all/".concat(e)).then((e=>{Be(!1);const t=e.data;console.log(t,"Data"),200===e.status?(Me(t.filePath),Ce(t.orders)):de(t.message)}))}catch(t){if(Be(!1),t.errors){Object.keys(t.errors).map((e=>de(t.errors[e][0],{variant:"error"})))}}},He=function(e){let{tableData:t,comparator:r,filterName:o,filterStatus:a,filterService:n,filterStartDate:l,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const o=r(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=s.map((e=>e[0])),o&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(o.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(o.toLowerCase()))));"all"!==a&&(t=t.filter((e=>e.status===a)));"new"!==n&&(t=t.filter((e=>e.status===n)));l&&i&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:Ae,comparator:(0,F.hz)(he,fe),filterName:Se,filterService:Oe,filterStatus:Fe,filterStartDate:_e,filterEndDate:Re}),Xe=ue?56:76,Je=!He.length&&!!Se||!He.length&&!!Fe||!He.length&&!!Oe||!He.length&&!!Re||!He.length&&!!_e,Ze=e=>Ae.filter((t=>t.status===e)).length,Ke=[{value:"all",label:"All",color:"info",count:Ae.length},{value:"active",label:"Active",color:"info",count:Ze("active")},{value:"new",label:"New",color:"info",count:Ze("new")},{value:"placed",label:"Placed",color:"info",count:Ze("placed")},{value:"completed",label:"Completed",color:"success",count:Ze("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ze("on hold")},{value:"draft",label:"Draft",color:"default",count:Ze("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ze("cancelled")}],Qe=a.Ik().shape({request:a.Yj().required("Request Description is required"),Request_type:a.Yj().required("Request Type is required")}),$e=(0,o.useMemo)((()=>({request:"",Request_type:""})),[]),et=(0,O.mN)({resolver:(0,D.t)(Qe),defaultValues:$e}),{reset:tt,watch:rt,setValue:ot,handleSubmit:at,formState:{isSubmitting:nt,errors:lt}}=et;rt();return(0,W.jsxs)(n.A,{maxWidth:!ie&&"lg",children:[Ne&&(0,W.jsx)(M.A,{}),(0,W.jsx)(L.A,{heading:"All Orders",links:[{name:"Dashboard",href:q.nB.root},{name:"All Orders"}]}),(0,W.jsx)(l.A,{sx:{mb:5},children:(0,W.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Te,onChange:(e,t)=>Le(t),sx:{px:2,bgcolor:"#403390",color:"#fff"},children:Z.map((e=>(0,W.jsx)(s.A,{disableRipple:!0,value:e.label,label:(0,W.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,W.jsx)("div",{children:e.label})}),sx:{color:Te===e.label?"black":"white","&.Mui-selected":{color:"black"}}},e.label)))})}),(0,W.jsx)(d.A,{sx:{p:2},children:(0,W.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:Te.label})}),(0,W.jsxs)(l.A,{children:[(0,W.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Fe,onChange:Pe,sx:{px:2,bgcolor:"background.neutral"},children:Ke.map((e=>(0,W.jsx)(s.A,{disableRipple:!0,value:e.value,label:(0,W.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,W.jsx)("div",{children:e.label})," ",(0,W.jsxs)(P.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,W.jsx)(p.A,{}),(0,W.jsx)(B.F5,{filterName:Se,filterService:Oe,filterStartDate:_e,filterEndDate:Re,onFilterName:e=>{ke(e),me(0)},onFilterService:e=>{De(e.target.value)},onFilterStartDate:e=>{qe(e)},onFilterEndDate:e=>{Ie(e)},optionsService:X}),(0,W.jsx)(T.A,{children:(0,W.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,W.jsxs)(f.A,{size:ue?"small":"medium",children:[(0,W.jsx)(N.er,{order:he,orderBy:fe,headLabel:J,rowCount:Ae.length,numSelected:ge.length,onSort:be}),(0,W.jsxs)(x.A,{children:[He.slice(pe*xe,pe*xe+xe).map((e=>(0,W.jsx)(B.oR,{row:e,onEditRow:()=>(e=>{K(!0),$(e)})(e.id),onShareRow:()=>(e=>{ne(!0),oe(e)})(null===e||void 0===e?void 0:e.id),onViewRow:()=>(e=>{"Title Insurance"===Te&&ce(q.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===Te&&ce(q.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===Te&&ce(q.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===Te&&ce(q.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===Te&&ce(q.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===Te&&ce(q.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=Ee+e.name;E.A.get(t,{responseType:"blob"}).then((t=>{const r=URL.createObjectURL(t.data),o=document.createElement("a");o.download=e.name,o.href=r,o.click()})).catch((e=>de(e,{variant:"error"})))}else de("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return t=e.file_no,void se((0,V.qO)(t));var t},onDeleteRow:()=>(e=>{Be(!0);const t=Z.find((e=>e.label===Te)).api;E.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),Be(!1),200===t.status||201===t.status){const t=Ae.filter((t=>t.id!==e));ve([]),Ce(t),de("Delete Successfully")}})).catch((e=>{Be(!1),e.errors&&Object.keys(e.errors).map((t=>de(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,W.jsx)(N.dO,{height:Xe,emptyRows:(0,F.xl)(pe,xe,Ae.length)}),(0,W.jsx)(N.Sm,{isNotFound:Je})]})]})})}),(0,W.jsxs)(d.A,{sx:{position:"relative"},children:[(0,W.jsx)(m.A,{rowsPerPageOptions:[5,10,25],component:"div",count:He.length,rowsPerPage:xe,page:pe,onPageChange:je,onRowsPerPageChange:we}),(0,W.jsx)(g.A,{control:(0,W.jsx)(v.A,{checked:ue,onChange:ye}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,W.jsx)(b.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:r,onClose:()=>K(!1),closeAfterTransition:!0,slots:{backdrop:y.A},slotProps:{backdrop:{timeout:500}},children:(0,W.jsx)(j.A,{in:r,children:(0,W.jsx)(d.A,{sx:H,children:(0,W.jsx)(z.Op,{methods:et,onSubmit:at((async e=>{console.log(e.request,"request"),te(!0);try{const t=new FormData;t.append("descriptions",e.request),t.append("request_type",e.Request_type),await E.A.post("user/requests/create/".concat(Q),t).then((e=>{if(te(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"sent request"),de(t.message),ce(q.nB.root)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>de(t.errors[e][0],{variant:"error"})))}}finally{te(!1)}})),children:(0,W.jsxs)(w.Ay,{item:!0,xs:12,md:12,children:[(0,W.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Sent Request for edit your order"}),(0,W.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,W.jsxs)(z.tX,{name:"Request_type",label:"Select Request Type",children:[(0,W.jsx)("option",{value:""}),(0,W.jsx)("option",{value:"certification",children:"CERTIFICATION"}),(0,W.jsx)("option",{value:"name_change",children:"Name change"}),(0,W.jsx)("option",{value:"ppdate_effective_date",children:"Update effective date"}),(0,W.jsx)("option",{value:"other",children:"other"})]}),(0,W.jsx)(z.o3,{name:"request",label:"Please enter Desciption",multiline:!0,rows:3})]}),(0,W.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,W.jsx)(_.A,{type:"submit",variant:"contained",loading:ee,children:"Send Request"})})]})})})})}),(0,W.jsx)(U.A,{setShareOpen:ne,open:ae,FileId:re}),(0,W.jsxs)(G.ys,{open:e,onClose:le,children:[(0,W.jsx)(A.A,{children:"Add Order Contin"}),(0,W.jsx)(Y.lM,{event:{},range:t,onCancel:le,getDate:""})]})]})}},93076:(e,t,r)=>{r.d(t,{A:()=>S});var o=r(53984),a=r(73447),n=r(57191),l=r(6368),i=r(82053),s=r(60899),c=r(12257),d=r(8145),u=r(74745),p=r(75165),h=r(60666),f=r(9950),x=r(9449),m=r(68654),g=r(29031),v=r(28095),b=r(14650),y=r(66075),j=r(32741),w=r(73561),A=r(44414);const C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},S=e=>{var t;let{setShareOpen:r,open:S,FileId:k}=e;const{enqueueSnackbar:O}=(0,g.dh)(),[D,_]=(0,f.useState)(),[q,R]=(0,f.useState)([]),[I,F]=(0,f.useState)(!1),[P,T]=(0,f.useState)([]),[L,N]=(0,f.useState)(!1);(0,f.useEffect)((()=>{(async()=>{try{var e;const r=await j.A.get("user/added/contacts");var t;console.log(r,"all your user api"),null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e.status?R(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.currentUser):console.log("Status False in API")}catch(r){console.log(r,"all your user api error")}})()}),[]);const B=(0,f.useRef)(null);console.log(P,"filterUser");const E=async e=>{N(!0);try{await j.A.post("user/share/order/".concat(e,"/").concat(k)).then((e=>{if(N(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"share file"),O(t.message),r(!1),T()}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>O(t.errors[e][0],{variant:"error"})))}}finally{N(!1)}},M=h.Ik().shape({fname:h.Yj().required("First Name is required"),lname:h.Yj().required("Last Name is required"),email:h.Yj().required("Email is required")}),V=(0,f.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),z=(0,x.mN)({resolver:(0,m.t)(M),defaultValues:V}),{reset:U,watch:G,setValue:Y,handleSubmit:W,formState:{isSubmitting:H,errors:X}}=z,J=(G(),async(e,t,r)=>{try{var o;const l=new FormData;l.append("name","".concat(t," ").concat(r));const i=await j.A.post("user/contact/add/".concat(e),l);var a,n;if(console.log(i,"add user in list api"),null!==i&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.status)O("User Add In Your List",{variant:"success"}),E(null===i||void 0===i||null===(a=i.data)||void 0===a||null===(n=a.contact)||void 0===n?void 0:n.id);else console.log("Status False in API")}catch(l){console.log(l,"add user in list api error")}});return(0,A.jsx)(o.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:S,onClose:()=>r(!1),closeAfterTransition:!0,slots:{backdrop:a.A},slotProps:{backdrop:{timeout:500}},children:(0,A.jsx)(n.A,{in:S,children:(0,A.jsxs)(l.A,{sx:C,children:[(0,A.jsx)(i.A,{variant:"h5",sx:{mb:2},onClick:()=>F(!1),children:I&&(0,A.jsx)(b.In,{icon:"material-symbols:arrow-left-alt",width:"1.2em",height:"1.2em"})}),(0,A.jsxs)(s.Ay,{item:!0,xs:12,md:12,children:[(0,A.jsx)(i.A,{variant:"h5",sx:{mb:2},children:I?"Add Contact":"Select User Into Your List"}),I?(0,A.jsxs)(w.Op,{methods:z,onSubmit:W((async e=>{console.log(e.request,"request"),N(!0);try{const t=new FormData;t.append("first_name",e.fname),t.append("last_name",e.lname),t.append("email",e.email),t.append("phone",e.phone),t.append("address",e.address),t.append("company_name",e.company),t.append("job_title",e.job),t.append("is_file_shared",!0),await j.A.post("user/contact/user/add",t).then((e=>{if(N(!1),200===e.status||201===e.status){var t,o,a;const n=e.data;console.log(n,"add user new"),O("successfully add new user"),r(!1),U(),J(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.id,null===n||void 0===n||null===(o=n.user)||void 0===o?void 0:o.first_name,null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.last_name)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>O(t.errors[e][0],{variant:"error"})))}}finally{N(!1)}})),children:[(0,A.jsxs)(l.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,A.jsx)(w.o3,{name:"fname",label:"First Name"}),(0,A.jsx)(w.o3,{name:"lname",label:"Last Name"}),(0,A.jsx)(w.o3,{name:"email",label:"Email"}),(0,A.jsx)(w.o3,{name:"phone",label:"Phone Nunber"}),(0,A.jsx)(w.o3,{name:"address",label:"Address"}),(0,A.jsx)(w.o3,{name:"company",label:"Company Name"}),(0,A.jsx)(w.o3,{name:"job",label:"Job title"})]}),(0,A.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,A.jsx)(v.A,{type:"submit",variant:"contained",loading:L,children:"Add Contact"})})]}):(0,A.jsxs)(l.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,A.jsx)(c.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,A.jsx)(d.A,{sx:{my:1,width:1},ref:B,label:"Search by first Name, Last Name & Email",value:(null===B||void 0===B||null===(t=B.current)||void 0===t?void 0:t.value)||"",onChange:e=>{const t=e.target.value.toLowerCase();if(B.current.value=t,console.log(B.current.value,"filterValue"),""===B.current.value)T([]);else{const e=q.filter((e=>{var r,o,a;return(null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.first_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(o=e.Contact)||void 0===o?void 0:o.last_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(a=e.Contact)||void 0===a?void 0:a.email.toLowerCase().includes(t))}));console.log(e,"filteredData"),T(e)}},size:"small"})}),(0,A.jsx)(u.A,{}),(null===P||void 0===P?void 0:P.length)>0?P.map(((e,t)=>{var r,o;return(0,A.jsxs)(c.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,A.jsxs)(i.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,A.jsx)(y.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(null===(r=e.Contact)||void 0===r?void 0:r.first_name," ").concat(null===e||void 0===e||null===(o=e.Contact)||void 0===o?void 0:o.last_name)]}),(0,A.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,A.jsx)(v.A,{type:"submit",variant:"contained",loading:L,onClick:()=>E(null===e||void 0===e?void 0:e.id),children:"Share"})})]},t)})):(0,A.jsx)(c.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,A.jsx)(p.A,{variant:"contained",onClick:()=>F(!0),startIcon:(0,A.jsx)(y.A,{icon:"material-symbols:contact-page-rounded"}),sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:"Add Contact"})})]})]})]})})})}},62740:(e,t,r)=>{r.d(t,{lM:()=>I,mg:()=>T,a7:()=>z});var o=r(9950),a=r(13564),n=r(60666),l=r(23334),i=r.n(l),s=r(43974),c=r(29031),d=r(9449),u=r(68654),p=r(12257),h=r(41205),f=r(8145),x=r(23266),m=r(79739),g=r(53065),v=r(25333),b=r(6368),y=r(75165),j=r(21410),w=r(28095),A=r(30744),C=r(42686),S=r(66075),k=r(91745),O=r(73561),D=r(32741),_=r(10608),q=r(44414);const R=["#00AB55","#1890FF","#54D62C","#FFC107","#FF4842","#04297A","#7A0C2E"];function I(e){let{event:t,range:r,onCancel:l,getDate:I}=e;console.log(t,"event");const{enqueueSnackbar:F}=(0,c.dh)(),P=(0,A.wA)(),{pathname:T}=(0,a.zy)(),{selectedFileNumber:L}=(0,A.d4)((e=>e.calendar)),[N,B]=(0,o.useState)([]),[E,M]=(0,o.useState)([]),[V,z]=(0,o.useState)([]),U=0===Object.keys(t).length,G=T.includes("employee"),Y=n.Ik().shape({title:n.Yj().max(255).required("Title is required"),description:n.Yj().max(5e3),order_id:n.Yj().max(5e3).required("File is Required")}),W=(0,d.mN)({resolver:(0,u.t)(Y),defaultValues:((e,t)=>{const r={address:(null===e||void 0===e?void 0:e.address)||"",title:"",order_id:e.order_id||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:I?new Date(I):new Date};return e||t?i()({},r,e):r})(t,r)}),{reset:H,watch:X,control:J,setValue:Z,handleSubmit:K,formState:{isSubmitting:Q,errors:$}}=W,ee=X();console.log("values",ee),(0,o.useEffect)((()=>{L&&Z("title",L),G||te()}),[]);const te=()=>{try{D.A.get("user/orders").then((e=>{const t=e.data;if(console.log(t,"Data"),200===e.status){var r,o;B(t.orders);const e=null===t||void 0===t||null===(r=t.orders)||void 0===r?void 0:r.map((e=>"O2024-"+(null===e||void 0===e?void 0:e.id))),a=null===t||void 0===t||null===(o=t.orders)||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.files.file_name));M(e),z(a)}else F(t.message)}))}catch(e){if(e.errors){Object.keys(e.errors).map((t=>F(e.errors[t][0],{variant:"error"})))}}};return(0,q.jsxs)(O.Op,{methods:W,onSubmit:K((async e=>{try{const r=!G&&{order_id:N.find((t=>"O2024-"+t.id===e.order_id)).id,title:e.title,address:e.address,description:e.description,textColor:e.textColor,end:(0,s.A)(e.end,"yyyy-MM-dd HH:mm:ss")},o=G&&{status:e.status};t.id?(P(G?(0,C.wL)(t.id,o):(0,C.qM)(t.id,r)),setTimeout((()=>{F("Update success!")}),2e3)):(P((0,C.lh)(r)),setTimeout((()=>{F("Create success!")}),2e3)),l(),H()}catch(r){console.error(r)}})),children:[(0,q.jsxs)(p.A,{spacing:3,sx:{p:3},children:[(0,q.jsx)(O.o3,{name:"title",label:"title",disabled:G}),!G&&(0,q.jsx)(d.xI,{name:"address",control:J,render:e=>{let{field:t}=e;return(0,q.jsx)(h.A,{disabled:G,value:t.value||"",options:N.map((e=>({label:e.subject_premise.property_location,id:e.id}))),onChange:(e,r)=>{t.onChange(r.label||null);const o=N.find((e=>e.subject_premise.property_location===(null===r||void 0===r?void 0:r.label)));o&&Z("order_id","O2024-".concat(o.id))},renderInput:e=>(0,q.jsx)(f.A,{...e,label:"Address",placeholder:"Search Address"})})}}),(0,q.jsx)(d.xI,{name:"order_id",control:J,render:e=>{let{field:t}=e;return(0,q.jsx)(h.A,{value:t.value||"",freeSolo:!0,disabled:G,options:N.map((e=>({label:"O2024-"+e.id,id:"O2024-"+e.id}))),onChange:(e,r)=>{t.onChange(r.label||null);const o=N.find((e=>"O2024-"+e.id===(null===r||void 0===r?void 0:r.id)));o&&Z("address",o.subject_premise.property_location)},renderInput:e=>(0,q.jsx)(f.A,{label:"Order NO",...e})})}}),(0,q.jsx)(O.o3,{name:"description",label:"Description",multiline:!0,rows:4,disabled:G}),G&&(0,q.jsx)(d.xI,{name:"status",control:J,render:e=>{let{field:t}=e;return(0,q.jsx)(f.A,{...t,fullWidth:!0,select:!0,label:"Status",SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{textTransform:"capitalize"},children:_.X.map((e=>(0,q.jsx)(x.A,{value:e,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e},e)))})}}),(0,q.jsx)(d.xI,{name:"end",control:J,render:e=>{let{field:t}=e;return(0,q.jsx)(j.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy hh:mm a",renderInput:e=>(0,q.jsx)(f.A,{...e,fullWidth:!0,disabled:G,value:I})})}}),!G&&(0,q.jsx)(d.xI,{name:"textColor",control:J,render:e=>{let{field:t}=e;return(0,q.jsx)(k.yR,{value:t.value,onChange:t.onChange,colors:R})}})]}),(0,q.jsxs)(m.A,{children:[!U&&(0,q.jsx)(g.A,{title:"Delete Event",children:(0,q.jsx)(v.A,{onClick:async()=>{if(t.id)try{l(),P((0,C.SX)(t.id)),F("Delete success!")}catch(e){console.error(e)}},children:(0,q.jsx)(S.A,{icon:"eva:trash-2-outline",width:20,height:20})})}),(0,q.jsx)(b.A,{sx:{flexGrow:1}}),(0,q.jsx)(y.A,{variant:"outlined",color:"inherit",onClick:l,children:"Cancel"}),(0,q.jsx)(w.A,{type:"submit",variant:"contained",loading:Q,children:U?"Add":"Update"})]})]})}var F=r(7951),P=r(19657);const T=(0,F.Ay)("div")((e=>{let{theme:t}=e;return{width:"calc(100% + 2px)",marginLeft:-1,marginBottom:-1,"& .fc":{"--fc-list-event-dot-width":"8px","--fc-border-color":t.palette.divider,"--fc-event-border-color":t.palette.info.light,"--fc-now-indicator-color":t.palette.error.main,"--fc-today-bg-color":t.palette.action.selected,"--fc-page-bg-color":t.palette.background.default,"--fc-neutral-bg-color":t.palette.background.neutral,"--fc-list-event-hover-bg-color":t.palette.action.hover,"--fc-highlight-color":(0,P.X4)(t.palette.primary.main,.08)},"& .fc .fc-license-message":{display:"none"},"& .fc a":{color:t.palette.text.primary},"& .fc .fc-col-header ":{boxShadow:"inset 0 -1px 0 ".concat(t.palette.divider),"& th":{borderColor:"transparent"},"& .fc-col-header-cell-cushion":{...t.typography.subtitle2,padding:"13px 0"}},"& .fc .fc-event":{borderColor:"transparent",backgroundColor:"transparent"},"& .fc .fc-event .fc-event-main":{padding:"2px 4px",borderRadius:4,backgroundColor:t.palette.common.white,transition:t.transitions.create("filter"),"&:hover":{filter:"brightness(0.92)"},"&:before,&:after":{top:0,left:0,width:"100%",height:"100%",content:"''",borderRadius:4,position:"absolute",boxSizing:"border-box"},"&:before":{zIndex:8,opacity:.32,border:"solid 1px currentColor"},"&:after":{zIndex:7,opacity:.24,backgroundColor:"currentColor"}},"& .fc .fc-event .fc-event-main-frame":{fontSize:13,lineHeight:"20px",filter:"brightness(0.24)"},"& .fc .fc-daygrid-event .fc-event-title":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& .fc .fc-event .fc-event-time":{padding:0,overflow:"unset",fontWeight:t.typography.fontWeightBold},"& .fc .fc-popover":{border:0,overflow:"hidden",boxShadow:t.customShadows.z20,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper},"& .fc .fc-popover-header":{...t.typography.subtitle2,padding:t.spacing(1),backgroundColor:t.palette.grey[50012],borderBottom:"solid 1px ".concat(t.palette.divider)},"& .fc .fc-popover-close":{opacity:.48,transition:t.transitions.create("opacity"),"&:hover":{opacity:1}},"& .fc .fc-more-popover .fc-popover-body":{padding:t.spacing(1.5)},"& .fc .fc-popover-body":{"& .fc-daygrid-event.fc-event-start, & .fc-daygrid-event.fc-event-end":{margin:"2px 0"}},"& .fc .fc-day-other .fc-daygrid-day-top":{opacity:1,"& .fc-daygrid-day-number":{color:t.palette.text.disabled}},"& .fc .fc-daygrid-day-number":{...t.typography.body2,padding:t.spacing(1,1,0)},"& .fc .fc-daygrid-event":{marginTop:4},"& .fc .fc-daygrid-event.fc-event-start, & .fc .fc-daygrid-event.fc-event-end":{marginLeft:4,marginRight:4},"& .fc .fc-daygrid-more-link":{...t.typography.caption,color:t.palette.text.secondary},"& .fc .fc-timegrid-axis-cushion":{...t.typography.body2,color:t.palette.text.secondary},"& .fc .fc-timegrid-slot-label-cushion":{...t.typography.body2},"& .fc-direction-ltr .fc-list-day-text, .fc-direction-rtl .fc-list-day-side-text, .fc-direction-ltr .fc-list-day-side-text, .fc-direction-rtl .fc-list-day-text":{...t.typography.subtitle2},"& .fc .fc-list-event":{...t.typography.body2,"& .fc-list-event-time":{color:t.palette.text.secondary}},"& .fc .fc-list-table":{"& th, td":{borderColor:"transparent"}}}}));var L=r(53924),N=r(82053),B=r(34437),E=r(98091);const M=[{value:"dayGridMonth",label:"Month",icon:"ic:round-view-module"},{value:"timeGridWeek",label:"Week",icon:"ic:round-view-week"},{value:"timeGridDay",label:"Day",icon:"ic:round-view-day"},{value:"listWeek",label:"Agenda",icon:"ic:round-view-agenda"}],V=(0,F.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",flexDirection:"column",padding:t.spacing(2.5),[t.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between"}}}));function z(e){let{date:t,view:r,onToday:o,onNextDate:a,onPrevDate:n,onChangeView:l}=e;const i=(0,E.A)("up","sm");return(0,q.jsxs)(V,{children:[i&&(0,q.jsx)(p.A,{direction:"row",spacing:.5,children:M.map((e=>(0,q.jsx)(g.A,{title:e.label,children:(0,q.jsx)(L.A,{value:r,selected:e.value===r,onChange:()=>l(e.value),sx:{width:32,height:32,padding:0,border:0},children:(0,q.jsx)(S.A,{icon:e.icon,width:20,height:20})})},e.value)))}),(0,q.jsxs)(p.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,q.jsx)(v.A,{onClick:n,children:(0,q.jsx)(S.A,{icon:"eva:arrow-ios-back-fill",width:20,height:20})}),(0,q.jsx)(N.A,{variant:"h5",children:(0,B.ts)(t)}),(0,q.jsx)(v.A,{onClick:a,children:(0,q.jsx)(S.A,{icon:"eva:arrow-ios-forward-fill",width:20,height:20})})]}),i&&(0,q.jsx)(y.A,{size:"small",color:"error",variant:"contained",onClick:o,children:"Today"})]})}}}]);