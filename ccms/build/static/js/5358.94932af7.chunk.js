"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[5358],{95358:(e,n,o)=>{o.r(n),o.d(n,{default:()=>K});var r=o(90706),t=o(79947),i=o(28339),l=o(6978),s=o(60820),a=o(36404),d=o(9950),c=o(14857),u=o(79537),p=o(6368),v=o(75165),m=o(48089),h=o(40033),x=o(42686),f=o(62740),A=o(34117),g=o(90260),b=o(98091),j=o(86608),y=o(63358),C=o(20131),_=o(66075),w=o(13564),S=o(60666),D=o(23334),k=o.n(D),M=o(43974),I=o(29031),E=o(9449),R=o(68654),N=o(12257),F=o(41205),O=o(8145),T=o(23266),q=o(79739),P=o(53065),z=o(25333),V=o(21410),W=o(28095),H=o(91745),L=o(52401),Y=o(32741),G=o(10608),U=o(33507),B=o(44414);const X=["#00AB55","#1890FF","#54D62C","#FFC107","#FF4842","#04297A","#7A0C2E"],Q=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function $(e){let{event:n,range:o,onCancel:r,getDate:t}=e;console.log(n,"event");const{enqueueSnackbar:i}=(0,I.dh)(),l=(0,A.wA)(),{user:s}=(0,U.A)();console.log(s,"user");const a=(null===s||void 0===s?void 0:s.user_permissions)||{},c=Q.find((e=>!0===(null===a||void 0===a?void 0:a[e.permission])));console.log(c,"filteredTabs");const{pathname:u}=(0,w.zy)(),{selectedFileNumber:m}=(0,A.d4)((e=>e.calendar)),[h,f]=(0,d.useState)([]),[g,b]=(0,d.useState)({}),j=0===Object.keys(n).length,y=u.includes("employee"),C=S.Ik().shape({title:S.Yj().max(255).required("Title is required"),description:S.Yj().max(5e3),order_no:S.Yj().max(5e3).required("File is Required")}),D=(0,E.mN)({resolver:(0,R.t)(C),defaultValues:((e,n)=>{var o;const r={address:(null===e||void 0===e?void 0:e.address)||"",name:e.name||"",title:"",order_no:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.order_no)||"",description:"",textColor:"#1890FF",start:n?new Date(n.start):new Date,end:t?new Date(t):new Date};return e||n?k()({},r,e):r})(n,o)}),{reset:$,watch:J,control:K,setValue:Z,handleSubmit:ee,formState:{isSubmitting:ne,errors:oe}}=D,re=J();console.log("values",re),(0,d.useEffect)((()=>{m&&Z("title",m),te()}),[m]);const te=()=>{try{Y.A.get("employee/".concat(null===c||void 0===c?void 0:c.api)).then((e=>{const n=e.data;if(console.log(n,"Data"),200===e.status){if(f(n.orders),m){var o,r,t;const e=null===n||void 0===n||null===(o=n.orders)||void 0===o?void 0:o.find((e=>(null===e||void 0===e?void 0:e.file_no)===m));Z("name",null===(r=e.files)||void 0===r?void 0:r.file_name),Z("address",(null===(t=e.subject_premise)||void 0===t?void 0:t.property_location)||""),Z("order_no",e.order_no||"")}}else i(n.message)}))}catch(e){if(e.errors){Object.keys(e.errors).map((n=>i(e.errors[n][0],{variant:"error"})))}}};return(0,B.jsxs)(L.Op,{methods:D,onSubmit:ee((async e=>{try{const o=!n&&{order_id:h.find((n=>(null===n||void 0===n?void 0:n.order_no)===e.order_no)).id,title:e.title,address:e.address,description:e.description,textColor:e.textColor,end:(0,M.A)(e.end,"yyyy-MM-dd HH:mm:ss")},t=y&&{status:e.status,end:(0,M.A)(e.end,"yyyy-MM-dd HH:mm:ss")};n.id?(l((0,x.wL)(n.id,t)),setTimeout((()=>{i("Update success!")}),2e3)):(l((0,x.NB)(o)),setTimeout((()=>{i("Create success!")}),2e3)),r(),$()}catch(o){console.error(o)}})),children:[(0,B.jsxs)(N.A,{spacing:3,sx:{p:3},children:[(0,B.jsx)(L.o3,{name:"title",label:"title"}),(0,B.jsx)(E.xI,{name:"name",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(F.A,{value:n.value||"",options:h.map((e=>({label:e.files.file_name,id:e.id}))),onChange:(e,o)=>{n.onChange((null===o||void 0===o?void 0:o.label)||"");const r=h.find((e=>e.files.file_name===(null===o||void 0===o?void 0:o.label)));r&&(Z("order_no",null===r||void 0===r?void 0:r.order_no),Z("address",r.subject_premise.property_location))},renderInput:e=>(0,B.jsx)(O.A,{...e,label:"Name",placeholder:"Search Name"})})}}),(0,B.jsx)(E.xI,{name:"address",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(F.A,{value:n.value||"",options:h.map((e=>{var n;return{label:(null===e||void 0===e||null===(n=e.subject_premise)||void 0===n?void 0:n.property_location)||"",id:e.id}})),onChange:(e,o)=>{n.onChange(o.label||null);const r=h.find((e=>e.subject_premise.property_location===(null===o||void 0===o?void 0:o.label)));r&&(Z("order_no",null===r||void 0===r?void 0:r.order_no),Z("name",null===r||void 0===r?void 0:r.files.file_name))},renderInput:e=>(0,B.jsx)(O.A,{...e,label:"Address",placeholder:"Search Address"})})}}),(0,B.jsx)(E.xI,{name:"order_no",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(F.A,{value:n.value||"",freeSolo:!0,options:h.map((e=>({label:null===e||void 0===e?void 0:e.order_no,id:null===e||void 0===e?void 0:e.order_no}))),getOptionLabel:e=>"string"===typeof e?e:e.label||"",onChange:(e,o)=>{n.onChange(o.label||null);const r=h.find((e=>(null===e||void 0===e?void 0:e.order_no)===(null===o||void 0===o?void 0:o.id)));r&&(Z("address",r.subject_premise.property_location),Z("name",null===r||void 0===r?void 0:r.files.file_name))},renderInput:e=>(0,B.jsx)(O.A,{label:"Order NO",...e})})}}),(0,B.jsx)(L.o3,{name:"description",label:"Description",multiline:!0,rows:4}),y&&(0,B.jsx)(E.xI,{name:"status",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(O.A,{...n,fullWidth:!0,select:!0,label:"Status",SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{textTransform:"capitalize"},children:G.XQ.map((e=>(0,B.jsx)(T.A,{value:e,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e},e)))})}}),(0,B.jsx)(E.xI,{name:"end",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(V.A,{...n,label:"Date",inputFormat:"dd/MM/yyyy hh:mm a",renderInput:e=>(0,B.jsx)(O.A,{...e,fullWidth:!0,value:t})})}}),!y&&(0,B.jsx)(E.xI,{name:"textColor",control:K,render:e=>{let{field:n}=e;return(0,B.jsx)(H.yR,{value:n.value,onChange:n.onChange,colors:X})}})]}),(0,B.jsxs)(q.A,{children:[!j&&(0,B.jsx)(P.A,{title:"Delete Event",children:(0,B.jsx)(z.A,{onClick:async()=>{if(n.id)try{r(),l((0,x.SX)(n.id)),i("Delete success!")}catch(e){console.error(e)}},children:(0,B.jsx)(_.A,{icon:"eva:trash-2-outline",width:20,height:20})})}),(0,B.jsx)(p.A,{sx:{flexGrow:1}}),(0,B.jsx)(v.A,{variant:"outlined",color:"inherit",onClick:r,children:"Cancel"}),(0,B.jsx)(W.A,{sx:{bgcolor:"#00ab55","&:hover":{bgcolor:"#0aaa57"}},type:"submit",variant:"contained",loading:ne,children:j?"Add":"Update"})]})]})}const J=e=>{const{events:n,selectedEventId:o}=e.calendar;return o?n.find((e=>Number(e.id)===Number(o))):null};function K(){const{themeStretch:e}=(0,j.A)(),n=((0,c.A)(),(0,A.wA)()),o=(0,b.A)("up","sm"),w=(0,d.useRef)(null),[S,D]=(0,d.useState)(new Date),[k,M]=(0,d.useState)(o?"dayGridMonth":"listWeek"),I=(0,A.d4)(J),{events:E,isOpenModal:R,selectedRange:N}=(0,A.d4)((e=>e.calendar));(0,d.useEffect)((()=>{n((0,x.Wb)())}),[n]),(0,d.useEffect)((()=>{const e=w.current;if(e){const n=e.getApi(),r=o?"dayGridMonth":"listWeek";n.changeView(r),M(r)}}),[o]);const F=()=>{n((0,x.Oo)())};return(0,B.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,B.jsx)(p.A,{sx:{display:"flex",justifyContent:"flex-end",bgcolor:"#2E3C56",p:1},children:(0,B.jsxs)(p.A,{children:[(0,B.jsx)(v.A,{variant:"contained",startIcon:(0,B.jsx)(_.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:()=>{n((0,x.qf)())},sx:{fontSize:"12px",mr:2,backgroundColor:"#2E3C56","&:hover":{backgroundColor:"#2E3C56"}},children:"Order Contin"}),(0,B.jsx)(v.A,{variant:"contained",startIcon:(0,B.jsx)(_.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:()=>{n((0,x.kd)())},sx:{fontSize:"12px",backgroundColor:"#2E3C56","&:hover":{backgroundColor:"#2E3C56",color:"#fff"}},children:"Add Reminder"})]})}),(0,B.jsx)(y.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:g.i8.root},{name:"Calender"}]}),(0,B.jsx)(m.A,{children:(0,B.jsxs)(f.mg,{children:[(0,B.jsx)(f.a7,{date:S,view:k,onNextDate:()=>{const e=w.current;if(e){const n=e.getApi();n.next(),D(n.getDate())}},onPrevDate:()=>{const e=w.current;if(e){const n=e.getApi();n.prev(),D(n.getDate())}},onToday:()=>{const e=w.current;if(e){const n=e.getApi();n.today(),D(n.getDate())}},onChangeView:e=>{const n=w.current;if(n){n.getApi().changeView(e),M(e)}}}),(0,B.jsx)(r.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:E,ref:w,rerenderDelay:10,initialDate:S,initialView:k,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{n((0,x.PY)(e.event.id))},height:o?720:"auto",plugins:[t.A,i.Ay,s.Ay,l.Ay,a.Ay]})]})}),(0,B.jsxs)(C.ys,{open:R,onClose:F,children:[(0,B.jsx)(h.A,{children:I?"Edit Order Contin":"Add Order Contin"}),(0,B.jsx)($,{event:I||{},range:N,onCancel:F})]})]})}},48089:(e,n,o)=>{o.d(n,{A:()=>x});var r=o(58168),t=o(98587),i=o(9950),l=o(2803),s=o(5747),a=o(7951),d=o(79859),c=o(70693),u=o(37665);function p(e){return(0,u.A)("MuiCard",e)}(0,o(44245).A)("MuiCard",["root"]);var v=o(44414);const m=["className","raised"],h=(0,a.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({overflow:"hidden"}))),x=i.forwardRef((function(e,n){const o=(0,d.A)({props:e,name:"MuiCard"}),{className:i,raised:a=!1}=o,c=(0,t.A)(o,m),u=(0,r.A)({},o,{raised:a}),x=(e=>{const{classes:n}=e;return(0,s.A)({root:["root"]},p,n)})(u);return(0,v.jsx)(h,(0,r.A)({className:(0,l.A)(x.root,i),elevation:a?8:void 0,ref:n,ownerState:u},c))}))},40033:(e,n,o)=>{o.d(n,{A:()=>x});var r=o(58168),t=o(98587),i=o(9950),l=o(2803),s=o(5747),a=o(82053),d=o(7951),c=o(79859),u=o(23025),p=o(5536),v=o(44414);const m=["className","id"],h=(0,d.Ay)(a.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),x=i.forwardRef((function(e,n){const o=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:a,id:d}=o,x=(0,t.A)(o,m),f=o,A=(e=>{const{classes:n}=e;return(0,s.A)({root:["root"]},u.t,n)})(f),{titleId:g=d}=i.useContext(p.A);return(0,v.jsx)(h,(0,r.A)({component:"h2",className:(0,l.A)(A.root,a),ownerState:f,ref:n,variant:"h6",id:g},x))}))}}]);