(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{4607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var o=r(9950),a=r(13564),i=r(79537),s=r(12257),l=r(75165),n=r(48089),c=r(68367),d=r(84142),u=r(1320),p=r(15769),h=r(34075),f=r(6368),g=r(91434),m=r(16497),x=r(37324),w=r(53984),v=r(73447),b=r(57191),y=r(60899),O=r(82053),A=r(29031),S=r(9449),C=r(55858),j=r(48711),_=r(90260),P=r(46765),k=r(86608),R=r(38861),D=r(8279),V=(r(22704),r(66075)),I=r(44185),T=r(63358),E=r(72870),L=r(12480),F=r(32741),N=r(95074),q=(r(96004),r(52401)),M=r(33507),B=r(44414);const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},U=[{id:"status",label:"Order Status",align:"left",width:700},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:600},{id:"county",label:"County",align:"left",width:600},{id:"file_pdf",label:"Contract Pdf",align:"left",width:500},{id:"status_change",label:"Change Status",align:"left",width:300},{id:"",label:(0,B.jsx)(C.A,{color:"#e9eff4"}),align:"center",width:50}],G=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function H(){var e;const{user:t}=(0,M.A)(),{themeStretch:r}=(0,k.A)(),{enqueueSnackbar:C}=(0,A.dh)(),H=(0,a.Zp)(),{state:W}=(0,a.zy)(),Y=null===W||void 0===W?void 0:W.orderType;console.log(t,"user");const{dense:Z,page:J,order:K,orderBy:Q,rowsPerPage:X,setPage:$,selected:ee,onSort:te,onChangeDense:re,onChangePage:oe,onChangeRowsPerPage:ae}=(0,R.Ay)({defaultOrderBy:"createDate"}),ie=(null===t||void 0===t?void 0:t.user_permissions)||{},se=G.filter((e=>!0===(null===ie||void 0===ie?void 0:ie[e.permission])));console.log(se,"filteredTabs");const[le,ne]=(0,o.useState)([]),[ce,de]=(0,o.useState)(""),[ue,pe]=(0,o.useState)("new"),[he,fe]=(0,o.useState)(null),[ge,me]=(0,o.useState)(null),{currentTab:xe,onChangeTab:we}=(0,P.A)("all"),[ve,be]=(0,o.useState)((null===se||void 0===se?void 0:se.length)>0?null===(e=se[0])||void 0===e?void 0:e.label:null),[ye,Oe]=(0,o.useState)(!1),Ae=(0,o.useRef)(null),[Se,Ce]=(0,o.useState)(!1),[je,_e]=(0,o.useState)(""),[Pe,ke]=(0,o.useState)(!1),[Re,De]=(0,o.useState)([]),[Ve,Ie]=(0,o.useState)(),[Te,Ee]=(0,o.useState)();(0,o.useEffect)((()=>{(async()=>{Oe(!0);try{var e;const t=await F.A.get("employee/users/list");console.log(t,"all user"),De(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.files),console.log(t,"autofill")}catch(t){console.log(t,"autofill")}finally{Oe(!1)}})()}),[]);(0,o.useEffect)((()=>{var e;"Sightline\xae"!==ve&&"UCC"!==ve&&Le(null===se||void 0===se||null===(e=se.find((e=>e.label===ve)))||void 0===e?void 0:e.api,"")}),[ve]),(0,o.useEffect)((()=>{var e;Y&&(Le(null===(e=G.find((e=>e.label===Y)))||void 0===e?void 0:e.api,""),be(Y))}),[Y]);const Le=(e,t)=>{Oe(!0);try{F.A.get("employee/".concat(e,"?user_id=").concat(t)).then((e=>{Oe(!1);const t=e.data;console.log(t,"Dataemployee"),200===e.status?ne(t.orders):C(t.message)}))}catch(r){if(Oe(!1),r.errors){Object.keys(r.errors).map((e=>C(r.errors[e][0],{variant:"error"})))}}},Fe=(e,t)=>{ke(!0),Ce(e),_e(t)},Ne=e=>{Oe(!0),console.log(e,"files");const t=new FormData;t.append("file",e[0]);try{F.A.post("employee/complete/".concat(je,"/").concat(Se),t).then((e=>{if(console.log(e,"status api"),Oe(!1),200===e.status||201===e.status){const t=e.data,r=le.map((e=>e.id===Se?{...e,status:je}:e));ke(!1),console.log(r,"UpdatedOrders"),ne(r),C(t.message)}})).catch((()=>{Oe(!1)}))}catch(r){if(Oe(!1),r.errors){Object.keys(r.errors).map((e=>C(r.errors[e][0],{variant:"error"})))}}},qe=(0,S.mN)(),{control:Me}=qe,Be=function(e){let{tableData:t,comparator:r,filterName:o,filterStatus:a,filterService:i,filterStartDate:s,filterEndDate:l}=e;const n=t.map(((e,t)=>[e,t]));n.sort(((e,t)=>{const o=r(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=n.map((e=>e[0])),o&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(o.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(o.toLowerCase()))));"all"!==a&&(t=t.filter((e=>e.status===a)));"new"!==i&&(t=t.filter((e=>e.status===i)));s&&l&&(t=t.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=l.getTime())));return t}({tableData:le,comparator:(0,R.hz)(K,Q),filterName:ce,filterService:ue,filterStatus:xe,filterStartDate:he,filterEndDate:ge}),ze=Z?56:76,Ue=!Be.length&&!!ce||!Be.length&&!!xe||!Be.length&&!!ue||!Be.length&&!!ge||!Be.length&&!!he,[Ge,He]=(0,o.useState)(le),[We,Ye]=(0,o.useState)(le);(0,o.useEffect)((()=>{He(le),Ye(le)}),[le]),(0,o.useEffect)((()=>{if("default"===Q)Ye(Ge);else{const e=[...Ge].sort((0,R.hz)(K,Q));Ye(e)}}),[K,Q]);return(0,B.jsxs)(D.A,{title:"Order: Your Orders",children:[ye&&(0,B.jsx)(N.A,{}),(0,B.jsx)("input",{type:"file",ref:Ae,onChange:Ne,hidden:!0}),(0,B.jsxs)(i.A,{maxWidth:!r&&"xl",children:[(0,B.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"},children:(0,B.jsx)(l.A,{variant:"contained",onClick:()=>{H(_.i8.createorders.allForms)},startIcon:(0,B.jsx)(V.A,{icon:"clarity:form-line"}),sx:{backgroundColor:"#313131","&:hover":{backgroundColor:"#313131"},borderRadious:"0px",marginBottom:"10px"},children:"New Order"})}),(0,B.jsxs)(n.A,{sx:{borderRadius:"0px"},children:[(0,B.jsxs)(s.A,{sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",minHeight:"50px"},children:[(0,B.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ve,onChange:(e,t)=>{console.log(t,"value"),be(t)},children:se.map((e=>(0,B.jsx)(d.A,{disableRipple:!0,value:e.label,label:(0,B.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,B.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,B.jsx)(s.A,{gap:1,sx:{width:"25%"},children:(0,B.jsx)(j.Ay,{options:null===Re||void 0===Re?void 0:Re.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:Te,onChange:e=>{var t;console.log(e,"newFileId"),Le(null===se||void 0===se||null===(t=se.find((e=>e.label===ve)))||void 0===t?void 0:t.api,e.value),Ie(e.value),Ee(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3 ",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,t)=>({...e,backgroundColor:t.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})})]}),(0,B.jsx)(T.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Orders",href:_.i8.root},{name:"All Orders"}]}),(0,B.jsx)(I.A,{children:(0,B.jsx)(u.A,{sx:{position:"relative"},children:(0,B.jsxs)(p.A,{size:Z?"small":"medium",children:[(0,B.jsx)(E.er,{order:K,orderBy:Q,headLabel:U,rowCount:le.length,numSelected:ee.length,onSort:te}),(0,B.jsxs)(h.A,{children:[We.slice(J*X,J*X+X).map((e=>(0,B.jsx)(L.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===ve&&(null!==e&&void 0!==e&&e.updated_by_pdf?H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):H(_.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,H(_.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===ve&&H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&H(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===ve&&H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&H(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Fe(e.id,"file_completed"),onContainDocumentUpload:()=>Fe(e.id,"contin_completed"),onStatusChange:t=>((e,t)=>{Oe(!0);try{const r=new FormData;r.append("status",t),r.append("id",e),F.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),Oe(!1),200===r.status||201===r.status){const o=r.data,a=le.map((r=>r.id===e?{...r,status:t}:r));ne(a),C(o.message)}})).catch((e=>{Oe(!1),console.log(e,"catch errror")}))}catch(r){Oe(!1),r.errors&&Object.keys(r.errors).map((e=>C(r.errors[e][0],{variant:"error"})))}})(e.id,t)},e.id))),(0,B.jsx)(E.dO,{height:ze,emptyRows:(0,R.xl)(J,X,le.length)}),(0,B.jsx)(E.Sm,{isNotFound:Ue})]})]})})}),(0,B.jsxs)(f.A,{sx:{position:"relative"},children:[(0,B.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Be.length,rowsPerPage:X,page:J,onPageChange:oe,onRowsPerPageChange:ae}),(0,B.jsx)(m.A,{control:(0,B.jsx)(x.A,{checked:Z,onChange:re}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,B.jsx)(w.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Pe,onClose:()=>ke(!1),closeAfterTransition:!0,slots:{backdrop:v.A},slotProps:{backdrop:{timeout:500}},children:(0,B.jsx)(b.A,{in:Pe,children:(0,B.jsx)(f.A,{sx:z,children:(0,B.jsx)(q.Op,{methods:qe,children:(0,B.jsxs)(y.Ay,{item:!0,xs:12,md:12,children:[(0,B.jsx)(O.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,B.jsxs)(f.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,B.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,B.jsx)(O.A,{variant:"h6",onClick:()=>{var e;return null===Ae||void 0===Ae||null===(e=Ae.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,B.jsx)(q.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:Ne})]}),(0,B.jsx)(s.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},55858:(e,t,r)=>{"use strict";var o=r(24994);t.A=void 0;var a=o(r(79526)),i=r(44414);t.A=(0,a.default)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},79526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=r(92079)},92079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{capitalize:()=>a.A,createChainedFunction:()=>i.A,createSvgIcon:()=>s.A,debounce:()=>l.A,deprecatedPropType:()=>n,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>x.A,useEventCallback:()=>w.A,useForkRef:()=>v.A,useIsFocusVisible:()=>b.A});var o=r(66236),a=r(61676),i=r(25920),s=r(65471),l=r(21209);const n=function(e,t){return()=>null};var c=r(60096),d=r(27402),u=r(70827);r(58168);const p=function(e,t){return()=>null};const h=r(25679).A;var f=r(79044),g=r(31014);const m=function(e,t,r,o,a){return null};var x=r(48733),w=r(1976),v=r(31506),b=r(41573);const y={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),o.A.configure(e)}}},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);