"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3653],{46765:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(9950);function l(e){const[t,a]=(0,r.useState)(e||"");return{currentTab:t,onChangeTab:(e,t)=>{a(t)},setCurrentTab:a}}},83653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var r=a(9950),l=a(60666),o=a(79537),n=a(48089),s=a(68367),i=a(84142),c=a(12257),d=a(6368),u=a(82053),p=a(74745),h=a(1320),m=a(15769),f=a(34075),x=a(91434),b=a(16497),v=a(37324),g=a(53984),j=a(73447),w=a(57191),A=a(60899),y=a(29031),S=a(73878),C=a(13564),O=a(9449),q=a(68654),D=a(28095),k=a(90260),_=a(46765),P=a(86608),R=a(38861),T=a(22704),I=(a(66075),a(44185)),L=a(63358),N=a(72870),E=a(12480),F=a(32741),B=a(95074),V=a(42686),U=a(73561),Y=a(93076),G=a(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},z=["new","old"],W=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"id",label:"Order No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],H=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function J(){const[e,t]=(0,r.useState)(!1),[a,J]=(0,r.useState)(),[X,Z]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(),[$,ee]=(0,r.useState)(!1),{themeStretch:te}=(0,P.A)(),ae=(0,S.wA)(),re=(0,C.Zp)(),{enqueueSnackbar:le}=(0,y.dh)(),{dense:oe,page:ne,order:se,orderBy:ie,rowsPerPage:ce,setPage:de,selected:ue,setSelected:pe,onSort:he,onChangeDense:me,onChangePage:fe,onChangeRowsPerPage:xe}=(0,R.Ay)({defaultOrderBy:"createDate"}),[be,ve]=(0,r.useState)([]),[ge,je]=(0,r.useState)(""),[we,Ae]=(0,r.useState)("new"),[ye,Se]=(0,r.useState)(null),[Ce,Oe]=(0,r.useState)(null),{currentTab:qe,onChangeTab:De}=(0,_.A)("all"),[ke,_e]=(0,r.useState)("Title Insurance"),[Pe,Re]=(0,r.useState)(!1),[Te,Ie]=(0,r.useState)(""),[Le,Ne]=(0,r.useState)(null),[Ee,Fe]=(0,r.useState)(""),{id:Be}=(0,C.g)();(0,r.useEffect)((()=>{"Sightline\xae"!==ke&&Ve(H.find((e=>e.label===ke)).api)}),[ke]);const Ve=e=>{Re(!0);try{F.A.get("user/all/".concat(e)).then((e=>{Re(!1);const t=e.data;console.log(t,"Data"),200===e.status?(Ie(t.filePath),ve(t.orders)):le(t.message)}))}catch(t){if(Re(!1),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}},Ue=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:l,filterService:o,filterStartDate:n,filterEndDate:s}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=i.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));n&&s&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=s.getTime())));return t}({tableData:be,comparator:(0,R.hz)(se,ie),filterName:ge,filterService:we,filterStatus:qe,filterStartDate:ye,filterEndDate:Ce}),Ye=oe?56:76,Ge=!Ue.length&&!!ge||!Ue.length&&!!qe||!Ue.length&&!!we||!Ue.length&&!!Ce||!Ue.length&&!!ye,Me=e=>be.filter((t=>t.status===e)).length,ze=[{value:"all",label:"All",color:"info",count:be.length},{value:"active",label:"Active",color:"info",count:Me("active")},{value:"new",label:"New",color:"info",count:Me("new")},{value:"placed",label:"Placed",color:"info",count:Me("placed")},{value:"completed",label:"Completed",color:"success",count:Me("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Me("on hold")},{value:"draft",label:"Draft",color:"default",count:Me("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Me("cancelled")}],We=l.Ik().shape({request:l.Yj().required("Request Description is required"),Request_type:l.Yj().required("Request Type is required")}),He=(0,r.useMemo)((()=>({request:"",Request_type:""})),[]),Je=(0,O.mN)({resolver:(0,q.t)(We),defaultValues:He}),{reset:Xe,watch:Ze,setValue:Ke,handleSubmit:Qe,formState:{isSubmitting:$e,errors:et}}=Je;Ze();return(0,G.jsxs)(o.A,{maxWidth:!te&&"lg",children:[Pe&&(0,G.jsx)(B.A,{}),(0,G.jsx)(L.A,{heading:"All Orders",links:[{name:"Dashboard",href:k.nB.root},{name:"All Orders"}]}),(0,G.jsx)(n.A,{sx:{mb:5},children:(0,G.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ke,onChange:(e,t)=>_e(t),sx:{px:2,bgcolor:"#403390",color:"#fff"},children:H.map((e=>(0,G.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,G.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,G.jsx)("div",{children:e.label})}),sx:{color:ke===e.label?"black":"white","&.Mui-selected":{color:"black"}}},e.label)))})}),(0,G.jsx)(d.A,{sx:{p:2},children:(0,G.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:ke.label})}),(0,G.jsxs)(n.A,{children:[(0,G.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:qe,onChange:De,sx:{px:2,bgcolor:"background.neutral"},children:ze.map((e=>(0,G.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,G.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,G.jsx)("div",{children:e.label})," ",(0,G.jsxs)(T.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,G.jsx)(p.A,{}),(0,G.jsx)(E.F5,{filterName:ge,filterService:we,filterStartDate:ye,filterEndDate:Ce,onFilterName:e=>{je(e),de(0)},onFilterService:e=>{Ae(e.target.value)},onFilterStartDate:e=>{Se(e)},onFilterEndDate:e=>{Oe(e)},optionsService:z}),(0,G.jsx)(I.A,{children:(0,G.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,G.jsxs)(m.A,{size:oe?"small":"medium",children:[(0,G.jsx)(N.er,{order:se,orderBy:ie,headLabel:W,rowCount:be.length,numSelected:ue.length,onSort:he}),(0,G.jsxs)(f.A,{children:[Ue.slice(ne*ce,ne*ce+ce).map((e=>(0,G.jsx)(E.oR,{row:e,onEditRow:()=>(e=>{t(!0),J(e)})(e.id),onShareRow:()=>(e=>{ee(!0),Q(e)})(null===e||void 0===e?void 0:e.id),onViewRow:()=>(e=>{"Title Insurance"===ke&&re(k.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ke&&re(k.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ke&&re(k.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===ke&&re(k.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ke&&re(k.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ke&&re(k.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=Te+e.name;F.A.get(t,{responseType:"blob"}).then((t=>{const a=URL.createObjectURL(t.data),r=document.createElement("a");r.download=e.name,r.href=a,r.click()})).catch((e=>le(e,{variant:"error"})))}else le("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return t=e.file_no,void ae((0,V.qO)(t));var t},onDeleteRow:()=>(e=>{Re(!0);const t=H.find((e=>e.label===ke)).api;F.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),Re(!1),200===t.status||201===t.status){const t=be.filter((t=>t.id!==e));pe([]),ve(t),le("Delete Successfully")}})).catch((e=>{Re(!1),e.errors&&Object.keys(e.errors).map((t=>le(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,G.jsx)(N.dO,{height:Ye,emptyRows:(0,R.xl)(ne,ce,be.length)}),(0,G.jsx)(N.Sm,{isNotFound:Ge})]})]})})}),(0,G.jsxs)(d.A,{sx:{position:"relative"},children:[(0,G.jsx)(x.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ue.length,rowsPerPage:ce,page:ne,onPageChange:fe,onRowsPerPageChange:xe}),(0,G.jsx)(b.A,{control:(0,G.jsx)(v.A,{checked:oe,onChange:me}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,G.jsx)(g.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:()=>t(!1),closeAfterTransition:!0,slots:{backdrop:j.A},slotProps:{backdrop:{timeout:500}},children:(0,G.jsx)(w.A,{in:e,children:(0,G.jsx)(d.A,{sx:M,children:(0,G.jsx)(U.Op,{methods:Je,onSubmit:Qe((async e=>{console.log(e.request,"request"),Z(!0);try{const t=new FormData;t.append("descriptions",e.request),t.append("request_type",e.Request_type),await F.A.post("user/requests/create/".concat(a),t).then((e=>{if(Z(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"sent request"),le(t.message),re(k.nB.root)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}finally{Z(!1)}})),children:(0,G.jsxs)(A.Ay,{item:!0,xs:12,md:12,children:[(0,G.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Sent Request for edit your order"}),(0,G.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,G.jsxs)(U.tX,{name:"Request_type",label:"Select Request Type",children:[(0,G.jsx)("option",{value:""}),(0,G.jsx)("option",{value:"certification",children:"CERTIFICATION"}),(0,G.jsx)("option",{value:"name_change",children:"Name change"}),(0,G.jsx)("option",{value:"ppdate_effective_date",children:"Update effective date"}),(0,G.jsx)("option",{value:"other",children:"other"})]}),(0,G.jsx)(U.o3,{name:"request",label:"Please enter Desciption",multiline:!0,rows:3})]}),(0,G.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,G.jsx)(D.A,{type:"submit",variant:"contained",loading:X,children:"Send Request"})})]})})})})}),(0,G.jsx)(Y.A,{setShareOpen:ee,open:$,FileId:K})]})}},93076:(e,t,a)=>{a.d(t,{A:()=>C});var r=a(53984),l=a(73447),o=a(57191),n=a(6368),s=a(82053),i=a(60899),c=a(12257),d=a(8145),u=a(74745),p=a(75165),h=a(60666),m=a(9950),f=a(9449),x=a(68654),b=a(29031),v=a(28095),g=a(14650),j=a(66075),w=a(32741),A=a(73561),y=a(44414);const S={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},C=e=>{var t;let{setShareOpen:a,open:C,FileId:O}=e;const{enqueueSnackbar:q}=(0,b.dh)(),[D,k]=(0,m.useState)(),[_,P]=(0,m.useState)([]),[R,T]=(0,m.useState)(!1),[I,L]=(0,m.useState)([]),[N,E]=(0,m.useState)(!1);(0,m.useEffect)((()=>{(async()=>{try{var e;const a=await w.A.get("user/added/contacts");var t;console.log(a,"all your user api"),null!==a&&void 0!==a&&null!==(e=a.data)&&void 0!==e&&e.status?P(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.currentUser):console.log("Status False in API")}catch(a){console.log(a,"all your user api error")}})()}),[]);const F=(0,m.useRef)(null);console.log(I,"filterUser");const B=async e=>{E(!0);try{await w.A.post("user/share/order/".concat(e,"/").concat(O)).then((e=>{if(E(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"share file"),q(t.message),a(!1),L()}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>q(t.errors[e][0],{variant:"error"})))}}finally{E(!1)}},V=h.Ik().shape({fname:h.Yj().required("First Name is required"),lname:h.Yj().required("Last Name is required"),email:h.Yj().required("Email is required")}),U=(0,m.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),Y=(0,f.mN)({resolver:(0,x.t)(V),defaultValues:U}),{reset:G,watch:M,setValue:z,handleSubmit:W,formState:{isSubmitting:H,errors:J}}=Y,X=(M(),async(e,t,a)=>{try{var r;const n=new FormData;n.append("name","".concat(t," ").concat(a));const s=await w.A.post("user/contact/add/".concat(e),n);var l,o;if(console.log(s,"add user in list api"),null!==s&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&r.status)q("User Add In Your List",{variant:"success"}),B(null===s||void 0===s||null===(l=s.data)||void 0===l||null===(o=l.contact)||void 0===o?void 0:o.id);else console.log("Status False in API")}catch(n){console.log(n,"add user in list api error")}});return(0,y.jsx)(r.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:C,onClose:()=>a(!1),closeAfterTransition:!0,slots:{backdrop:l.A},slotProps:{backdrop:{timeout:500}},children:(0,y.jsx)(o.A,{in:C,children:(0,y.jsxs)(n.A,{sx:S,children:[(0,y.jsx)(s.A,{variant:"h5",sx:{mb:2},onClick:()=>T(!1),children:R&&(0,y.jsx)(g.In,{icon:"material-symbols:arrow-left-alt",width:"1.2em",height:"1.2em"})}),(0,y.jsxs)(i.Ay,{item:!0,xs:12,md:12,children:[(0,y.jsx)(s.A,{variant:"h5",sx:{mb:2},children:R?"Add Contact":"Select User Into Your List"}),R?(0,y.jsxs)(A.Op,{methods:Y,onSubmit:W((async e=>{console.log(e.request,"request"),E(!0);try{const t=new FormData;t.append("first_name",e.fname),t.append("last_name",e.lname),t.append("email",e.email),t.append("phone",e.phone),t.append("address",e.address),t.append("company_name",e.company),t.append("job_title",e.job),t.append("is_file_shared",!0),await w.A.post("user/contact/user/add",t).then((e=>{if(E(!1),200===e.status||201===e.status){var t,r,l;const o=e.data;console.log(o,"add user new"),q("successfully add new user"),a(!1),G(),X(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.id,null===o||void 0===o||null===(r=o.user)||void 0===r?void 0:r.first_name,null===o||void 0===o||null===(l=o.user)||void 0===l?void 0:l.last_name)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>q(t.errors[e][0],{variant:"error"})))}}finally{E(!1)}})),children:[(0,y.jsxs)(n.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,y.jsx)(A.o3,{name:"fname",label:"First Name"}),(0,y.jsx)(A.o3,{name:"lname",label:"Last Name"}),(0,y.jsx)(A.o3,{name:"email",label:"Email"}),(0,y.jsx)(A.o3,{name:"phone",label:"Phone Nunber"}),(0,y.jsx)(A.o3,{name:"address",label:"Address"}),(0,y.jsx)(A.o3,{name:"company",label:"Company Name"}),(0,y.jsx)(A.o3,{name:"job",label:"Job title"})]}),(0,y.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,y.jsx)(v.A,{type:"submit",variant:"contained",loading:N,children:"Add Contact"})})]}):(0,y.jsxs)(n.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,y.jsx)(c.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,y.jsx)(d.A,{sx:{my:1,width:1},ref:F,label:"Search by first Name, Last Name & Email",value:(null===F||void 0===F||null===(t=F.current)||void 0===t?void 0:t.value)||"",onChange:e=>{const t=e.target.value.toLowerCase();if(F.current.value=t,console.log(F.current.value,"filterValue"),""===F.current.value)L([]);else{const e=_.filter((e=>{var a,r,l;return(null===e||void 0===e||null===(a=e.Contact)||void 0===a?void 0:a.first_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.last_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(l=e.Contact)||void 0===l?void 0:l.email.toLowerCase().includes(t))}));console.log(e,"filteredData"),L(e)}},size:"small"})}),(0,y.jsx)(u.A,{}),(null===I||void 0===I?void 0:I.length)>0?I.map(((e,t)=>{var a,r;return(0,y.jsxs)(c.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(s.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,y.jsx)(j.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(null===(a=e.Contact)||void 0===a?void 0:a.first_name," ").concat(null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.last_name)]}),(0,y.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,y.jsx)(v.A,{type:"submit",variant:"contained",loading:N,onClick:()=>B(null===e||void 0===e?void 0:e.id),children:"Share"})})]},t)})):(0,y.jsx)(c.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,y.jsx)(p.A,{variant:"contained",onClick:()=>T(!0),startIcon:(0,y.jsx)(j.A,{icon:"material-symbols:contact-page-rounded"}),sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:"Add Contact"})})]})]})]})})})}}}]);