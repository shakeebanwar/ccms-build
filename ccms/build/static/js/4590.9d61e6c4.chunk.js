"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4590],{24590:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var a=r(9950),o=r(13564),l=r(26689),n=r(79537),i=r(48089),s=r(75165),c=r(68367),d=r(84142),u=r(12257),p=r(6368),h=r(82053),g=r(74745),f=r(1320),m=r(15769),x=r(34075),v=r(91434),w=r(16497),A=r(37324),b=r(40033),j=r(28170),y=r(29031),S=r(20131),C=r(90260),O=r(46765),D=r(86608),R=r(38861),P=r(8279),k=r(22704),T=r(66075),_=r(44185),E=r(63358),N=r(72870),F=r(12480),B=r(32741),I=r(95074),M=r(44414);const L=["new","old"],V=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"employee",label:"Assign Employee",align:"left",width:1e3},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],W=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function q(){const{themeStretch:e}=(0,D.A)(),{enqueueSnackbar:t}=(0,y.dh)(),r=(0,o.Zp)(),{dense:q,page:Y,order:z,orderBy:U,rowsPerPage:H,setPage:Z,selected:G,onSort:J,onChangeDense:K,onChangePage:Q,onChangeRowsPerPage:X}=(0,R.Ay)({defaultOrderBy:"createDate"}),[$,ee]=(0,a.useState)([]),[te,re]=(0,a.useState)(""),[ae,oe]=(0,a.useState)("new"),[le,ne]=(0,a.useState)(null),[ie,se]=(0,a.useState)(null),{currentTab:ce,onChangeTab:de}=(0,O.A)("all"),[ue,pe]=(0,a.useState)("Title Insurance"),[he,ge]=(0,a.useState)(!1),[fe,me]=(0,a.useState)(!1),[xe,ve]=(0,a.useState)([]),[we,Ae]=(0,a.useState)([]);(0,a.useEffect)((()=>{"Sightline\xae"!==ue&&"UCC"!==ue&&be(W.find((e=>e.label===ue)).api)}),[ue]);const be=e=>{ge(!0);try{B.A.get("admin/".concat(e)).then((e=>{ge(!1);const r=e.data;200===e.status?ee(r.orders):t(r.message)}))}catch(r){if(ge(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},je=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:o,filterService:l,filterStartDate:n,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=s.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==l&&(t=t.filter((e=>e.status===l)));n&&i&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:$,comparator:(0,R.hz)(z,U),filterName:te,filterService:ae,filterStatus:ce,filterStartDate:le,filterEndDate:ie}),ye=q?56:76,Se=!je.length&&!!te||!je.length&&!!ce||!je.length&&!!ae||!je.length&&!!ie||!je.length&&!!le,Ce=e=>$.filter((t=>t.status===e)).length,Oe=[{value:"all",label:"All",color:"info",count:$.length},{value:"active",label:"Active",color:"info",count:Ce("active")},{value:"new",label:"New",color:"info",count:Ce("new")},{value:"placed",label:"Placed",color:"info",count:Ce("placed")},{value:"completed",label:"Completed",color:"success",count:Ce("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ce("on hold")},{value:"draft",label:"Draft",color:"default",count:Ce("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ce("cancelled")}];return(0,M.jsxs)(P.A,{title:"Order: Your Orders",children:[he&&(0,M.jsx)(I.A,{}),(0,M.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,M.jsxs)(i.A,{sx:{p:3},children:[(0,M.jsx)(E.A,{heading:"Your Orders",links:[{name:"Dashboard",href:C.RO.root},{name:"Orders"}],action:(0,M.jsx)(s.A,{variant:"contained",component:l.N_,to:C.RO.legalForm,startIcon:(0,M.jsx)(T.A,{icon:"clarity:form-line"}),sx:{backgroundColor:"#00AB55","&:hover":{backgroundColor:"#00AB55"}},children:"Legal Forms"})}),(0,M.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ue,onChange:(e,t)=>pe(t),sx:{px:2,bgcolor:"background.neutral"},children:W.map((e=>(0,M.jsx)(d.A,{disableRipple:!0,value:e.label,label:(0,M.jsx)(u.A,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:e.label})}),sx:{color:ue===e.label?"#22C55E":"black","&.Mui-selected":{color:"#22C55E"}}},e.label)))}),(0,M.jsx)(p.A,{sx:{p:2},children:(0,M.jsx)(h.A,{variant:"h4",gutterBottom:!0,children:ue.label})}),(0,M.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ce,onChange:de,sx:{px:2,bgcolor:"background.neutral"},children:Oe.map((e=>(0,M.jsx)(d.A,{disableRipple:!0,value:e.value,label:(0,M.jsxs)(u.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,M.jsx)("div",{children:e.label})," ",(0,M.jsxs)(k.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,M.jsx)(g.A,{}),(0,M.jsx)(F.F5,{filterName:te,filterService:ae,filterStartDate:le,filterEndDate:ie,onFilterName:e=>{re(e),Z(0)},onFilterService:e=>{oe(e.target.value)},onFilterStartDate:e=>{ne(e)},onFilterEndDate:e=>{se(e)},optionsService:L}),(0,M.jsx)(_.A,{children:(0,M.jsx)(f.A,{sx:{minWidth:800,position:"relative"},children:(0,M.jsxs)(m.A,{size:q?"small":"medium",children:[(0,M.jsx)(N.er,{order:z,orderBy:U,headLabel:V,rowCount:$.length,numSelected:G.length,onSort:J}),(0,M.jsxs)(x.A,{children:[je.slice(Y*H,Y*H+H).map((e=>(0,M.jsx)(F.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===ue&&r(C.RO.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===ue&&r(C.RO.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}),"Eagle 9 Policy"===ue&&r(C.RO.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Coop/Condo offering plans"===ue&&r(C.RO.viewOrders.coopCondoOfferinPlansOrderView,{state:{row:e,type:"view"}}),"1031 Exchanges"===ue&&r(C.RO.viewOrders.exchange1031OrderView,{state:{row:e,type:"view"}}),"Other Search / Request"===ue&&r(C.RO.viewOrders.otherSearchesOrderView,{state:{row:e,type:"view"}})})(e),onAssign:()=>(async e=>{if(Ae(e),!xe.length>0){ge(!0);try{await B.A.get("/admin/employees").then((e=>{ge(!1);const t=e.data;ve(t.user)}))}catch(r){ge(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}me(!0)})(e.id),onStatusChange:r=>((e,r)=>{ge(!0);try{const a=new FormData;a.append("status",r),a.append("id",e),B.A.post("/admin/changeorderStatus",a).then((a=>{if(ge(!1),200===a.status||201===a.status){const o=a.data,l=$.map((t=>t.id===e?{...t,status:r}:t));ee(l),t(o.message)}}))}catch(a){ge(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,M.jsx)(N.dO,{height:ye,emptyRows:(0,R.xl)(Y,H,$.length)}),(0,M.jsx)(N.Sm,{isNotFound:Se})]})]})})}),(0,M.jsxs)(p.A,{sx:{position:"relative"},children:[(0,M.jsx)(v.A,{rowsPerPageOptions:[5,10,25],component:"div",count:je.length,rowsPerPage:H,page:Y,onPageChange:Q,onRowsPerPageChange:X}),(0,M.jsx)(w.A,{control:(0,M.jsx)(A.A,{checked:q,onChange:K}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,M.jsxs)(S.ys,{fullWidth:!0,maxWidth:"sm",open:fe,onClose:()=>{me(!1)},children:[(0,M.jsx)(b.A,{children:"Employees"}),(0,M.jsxs)(j.A,{sx:{pb:3,mt:2,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[xe.map(((e,r)=>(0,M.jsxs)(u.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsxs)(h.A,{variant:"subtitle1",children:[(0,M.jsx)(T.A,{icon:"raphael:employee"})," ",e.first_name]}),(0,M.jsx)(s.A,{variant:"text",onClick:()=>(async e=>{ge(!0);try{const r=new FormData;r.append("user_id",e.id),r.append("order_id",we),await B.A.post("/admin/assignOrder",r).then((r=>{if(ge(!1),200===r.status||201===r.status){const a=r.data,o=$.map((t=>t.id===we?{...t,employee:[e]}:t));ee(o),t(a.message)}}))}catch(r){ge(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}me(!1)})(e),children:"Assign"})]},r))),(0,M.jsx)(u.A,{flexDirection:"row",justifyContent:"end",gap:1,children:(0,M.jsx)(s.A,{variant:"outlined",color:"inherit",onClick:()=>{me(!1)},children:"Close"})})]})]})]})]})}},28170:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(98587),o=r(58168),l=r(9950),n=r(2803),i=r(5747),s=r(7951),c=r(79859),d=r(37665);function u(e){return(0,d.A)("MuiDialogContent",e)}(0,r(44245).A)("MuiDialogContent",["root","dividers"]);var p=r(23025),h=r(44414);const g=["className","dividers"],f=(0,s.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},r.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(p.A.root," + &")]:{paddingTop:0}})})),m=l.forwardRef((function(e,t){const r=(0,c.A)({props:e,name:"MuiDialogContent"}),{className:l,dividers:s=!1}=r,d=(0,a.A)(r,g),p=(0,o.A)({},r,{dividers:s}),m=(e=>{const{classes:t,dividers:r}=e,a={root:["root",r&&"dividers"]};return(0,i.A)(a,u,t)})(p);return(0,h.jsx)(f,(0,o.A)({className:(0,n.A)(m.root,l),ownerState:p,ref:t},d))}))},40033:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(58168),o=r(98587),l=r(9950),n=r(2803),i=r(5747),s=r(82053),c=r(7951),d=r(79859),u=r(23025),p=r(5536),h=r(44414);const g=["className","id"],f=(0,c.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),m=l.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:c}=r,m=(0,o.A)(r,g),x=r,v=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},u.t,t)})(x),{titleId:w=c}=l.useContext(p.A);return(0,h.jsx)(f,(0,a.A)({component:"h2",className:(0,n.A)(v.root,s),ownerState:x,ref:t,variant:"h6",id:w},m))}))},23025:(e,t,r)=>{r.d(t,{A:()=>l,t:()=>o});var a=r(37665);function o(e){return(0,a.A)("MuiDialogTitle",e)}const l=(0,r(44245).A)("MuiDialogTitle",["root"])}}]);