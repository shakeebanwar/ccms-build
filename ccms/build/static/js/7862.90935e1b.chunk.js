"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[7862],{22504:(e,t,a)=>{a.r(t),a.d(t,{default:()=>te});var r=a(9950),n=a(60666),l=a(48089),o=a(14857),s=a(79537),i=a(60899),d=a(50704),c=a(82053),u=a(6368),m=a(62854),h=a(12257),p=a(75165),x=a(1320),f=a(15769),v=a(34075),g=a(91434),j=a(53984),b=a(73447),A=a(57191),y=a(8145),w=a(74745),C=a(29031),S=a(13564),D=a(26689),k=a(66699),F=a(28095),_=a(7951),P=a(68654),I=a(9449),N=a(73878),L=a(14650),T=(a(61310),a(99425),a(1041),a(90260)),E=a(46765),O=a(86608),B=a(38861),R=a(30744),q=a(66075),G=a(44185),Y=(a(63358),a(72870)),W=a(12480),z=a(6768),U=a(32741),V=a(95074),M=a(30818),J=a(73561),X=a(83752),Z=(a(22988),a(71675),a(48812),a(29113)),H=a(33507),K=a(44414);const Q=[{id:"file_no",label:"File No",align:"left",width:100},{id:"file_name",label:"File Name",align:"left",width:800},{id:"address",label:"Address",align:"left",width:1e3},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"file_pdf",label:"Contract",align:"left",width:500},{id:"Delete",label:"Delete",align:"left",width:500},{id:"",label:"",align:"left",width:500},{id:"",label:"",align:"left",width:500}],$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},ee=(0,_.Ay)(l.A)((e=>{let{theme:t}=e;return{boxShadow:"none",textAlign:"center",backgroundColor:t.palette.primary.lighter,[t.breakpoints.up("md")]:{display:"flex",textAlign:"left",alignItems:"center",justifyContent:"space-between",height:"100%"}}}));function te(e){var t;let{viewTabsRef:a}=e;const _=(0,o.A)(),{user:te}=(0,H.A)(),{themeStretch:ae}=(0,O.A)(),re=(0,N.wA)(),ne=(0,S.Zp)(),{enqueueSnackbar:le}=(0,C.dh)(),{dense:oe,page:se,order:ie,orderBy:de,rowsPerPage:ce,setPage:ue,selected:me,setSelected:he,onSort:pe,onChangeDense:xe,onChangePage:fe,onChangeRowsPerPage:ve}=(0,B.Ay)({defaultOrderBy:"createDate"}),[ge,je]=(0,r.useState)([]),[be,Ae]=(0,r.useState)(""),[ye,we]=(0,r.useState)("new"),[Ce,Se]=(0,r.useState)(null),[De,ke]=(0,r.useState)([]),[Fe,_e]=(0,r.useState)(null),{currentTab:Pe,onChangeTab:Ie}=(0,E.A)("all"),[Ne,Le]=(0,r.useState)("Title Insurance"),[Te,Ee]=(0,r.useState)(!1),[Oe,Be]=(0,r.useState)(""),[Re,qe]=(0,r.useState)(!1),[Ge,Ye]=(0,r.useState)(!1),[We,ze]=(0,r.useState)(),[Ue,Ve]=(0,r.useState)(),[Me,Je]=(0,r.useState)([]),[Xe,Ze]=(0,r.useState)(!1),[He,Ke]=(0,r.useState)(null),{file:Qe,filterData:$e}=(Boolean(He),(0,R.d4)((e=>e.File)));console.log($e,"file details"),(0,r.useEffect)((()=>{re((0,M.oc)())}),[]),(0,r.useEffect)((()=>{null!==Qe&&void 0!==Qe&&Qe.length&&je((null===$e||void 0===$e?void 0:$e.length)>0?$e:Qe)}),[Qe,$e]);const et=e=>{qe(!0),ze(e),(async()=>{try{var e;const a=await U.A.get("user/added/contacts");var t;console.log(a,"all your user api"),null!==a&&void 0!==a&&null!==(e=a.data)&&void 0!==e&&e.status?Je(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.currentUser):console.log("Status False in API")}catch(a){console.log(a,"all your user api error")}})()},tt=function(e){var t;let{tableData:a,comparator:r,filterName:n,filterStatus:l,filterService:o,filterStartDate:s,filterEndDate:i}=e;const d=null===(t=a)||void 0===t?void 0:t.map(((e,t)=>[e,t]));d.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),a=d.map((e=>e[0])),n&&(a=a.filter((e=>-1!==e.file_name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.DummyData.subject_premise.property_location.toLowerCase().indexOf(n.toLowerCase()))));"all"!==l&&(a=a.filter((e=>e.status===l)));"new"!==o&&(a=a.filter((e=>e.status===o)));s&&i&&(a=a.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=i.getTime())));return a}({tableData:ge,comparator:(0,B.hz)(ie,de),filterName:be,filterService:ye,filterStatus:Pe,filterStartDate:Ce,filterEndDate:Fe}),at=oe?56:76,rt=!tt.length&&!!be||!tt.length&&!!Pe||!tt.length&&!!ye||!tt.length&&!!Fe||!tt.length&&!!Ce,nt=async e=>{Ze(!0);try{await U.A.post("user/share/".concat(e,"/").concat(We)).then((e=>{if(Ze(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"share file"),le(t.message),qe(!1),ke()}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}finally{Ze(!1)}},lt=(0,r.useRef)(""),ot=n.Ik().shape({fname:n.Yj().required("First Name is required"),lname:n.Yj().required("Last Name is required"),email:n.Yj().required("Email is required")}),st=(0,r.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),it=(0,I.mN)({resolver:(0,P.t)(ot),defaultValues:st}),{reset:dt,watch:ct,setValue:ut,handleSubmit:mt,formState:{isSubmitting:ht,errors:pt}}=it,xt=(ct(),async(e,t,a)=>{try{var r;const o=new FormData;o.append("name","".concat(t," ").concat(a));const s=await U.A.post("user/contact/add/".concat(e),o);var n,l;if(console.log(s,"add user in list api"),null!==s&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&r.status)le("User Add In Your List",{variant:"success"}),nt(null===s||void 0===s||null===(n=s.data)||void 0===n||null===(l=n.contact)||void 0===l?void 0:l.id);else console.log("Status False in API")}catch(o){console.log(o,"add user in list api error")}}),ft=[{price:"200",progressPercent:80,color:"#FFA63C"},{price:"400",progressPercent:80,color:"#FF562F"}];return(0,K.jsx)(K.Fragment,{children:(0,K.jsxs)(s.A,{maxWidth:!ae&&"xl",children:[(0,K.jsx)(X.A,{files:Qe}),Te&&(0,K.jsx)(V.A,{}),(0,K.jsxs)(i.Ay,{container:!0,mt:5,children:[(0,K.jsx)(i.Ay,{sm:12,md:3,children:(0,K.jsx)(ee,{children:(0,K.jsxs)(d.A,{children:[(0,K.jsxs)(c.A,{gutterBottom:!0,variant:"h4",children:["Welcome back, ",null!==te&&void 0!==te&&te.first_name?null===te||void 0===te?void 0:te.first_name:"..."," \ud83d\udc4f"]}),(0,K.jsx)(c.A,{variant:"body2",sx:{pb:{xs:3,xl:5},maxWidth:480,mx:"auto"},children:"If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything"})]})})}),(0,K.jsx)(i.Ay,{sm:12,md:3,px:2,children:null===ft||void 0===ft?void 0:ft.map(((e,t)=>(0,K.jsxs)(l.A,{sx:{p:2,boxShadow:3,mb:2,height:"46%"},children:[(0,K.jsxs)(u.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,K.jsxs)(u.A,{display:"flex",alignItems:"center",gap:1,children:[(0,K.jsx)(m.A,{src:"/images/document.png"}),(0,K.jsx)(c.A,{variant:"subtitle2",children:"Active"})]}),(0,K.jsx)(u.A,{display:"flex",alignItems:"center",children:(0,K.jsx)(c.A,{variant:"h6",sx:{color:_.palette.primary.main},children:e.price})})]}),(0,K.jsx)(u.A,{sx:{mt:2},children:(0,K.jsxs)(u.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(u.A,{sx:{flexGrow:1},children:(0,K.jsx)(k.A,{variant:"determinate",value:null===e||void 0===e?void 0:e.progressPercent,sx:{height:10,borderRadius:5,backgroundColor:"#E1EAF9","& .MuiLinearProgress-bar":{backgroundColor:null===e||void 0===e?void 0:e.color}}})}),(0,K.jsxs)(c.A,{variant:"subtitle2",children:[e.progressPercent,"%"]})]})})]},t)))}),(0,K.jsx)(i.Ay,{sm:12,md:6,children:(0,K.jsx)(Z.Fu,{})})]}),(0,K.jsxs)(l.A,{sx:{mt:5},children:[(0,K.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[(0,K.jsx)(W.F5,{filterName:be,filterService:ye,filterStartDate:Ce,filterEndDate:Fe,onFilterName:e=>{Ae(e),ue(0)},onFilterService:e=>{we(e.target.value)},onFilterStartDate:e=>{Se(e)},onFilterEndDate:e=>{_e(e)}}),(0,K.jsxs)(h.A,{gap:1,direction:"row",children:[(0,K.jsx)(p.A,{variant:"contained",component:D.N_,to:"/dashboard/addfile",startIcon:(0,K.jsx)(q.A,{icon:"clarity:form-line"}),sx:{backgroundColor:"#313131","&:hover":{backgroundColor:"#313131"}},children:"New File"}),(0,K.jsx)(p.A,{variant:"contained",component:D.N_,to:T.nB.legalForm,startIcon:(0,K.jsx)(q.A,{icon:"clarity:form-line"}),sx:{backgroundColor:"#00AB55","&:hover":{backgroundColor:"#00AB55"}},children:"Documents"}),(0,K.jsx)(u.A,{sx:{p:2},children:(0,K.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:Ne.label})})]})]}),(0,K.jsx)(G.A,{children:(0,K.jsx)(x.A,{sx:{minWidth:800,position:"relative"},children:(0,K.jsxs)(f.A,{size:oe?"small":"medium",sx:{overflowX:"hidden"},children:[(0,K.jsx)(Y.er,{order:ie,orderBy:de,headLabel:Q,rowCount:ge.length,numSelected:me.length,onSort:pe}),(0,K.jsxs)(v.A,{children:[tt.slice(se*ce,se*ce+ce).map((e=>(0,K.jsx)(z.A,{row:e,onViewRow:()=>(e=>{ne("/dashboard/filepreview/".concat(null===e||void 0===e?void 0:e.id),{state:{row:e}})})(e),onShareRow:()=>et(null===e||void 0===e?void 0:e.id),onOrderContin:()=>{return t=e.id,void ne("/dashboard/order/".concat(t));var t},onDeleteRow:()=>{return t=e.id,Ee(!0),void U.A.delete("user/user_file/".concat(t)).then((e=>{if(console.log("response",e),Ee(!1),200===e.status||201===e.status){const e=ge.filter((e=>e.id!==t));he([]),je(e),le("Delete Successfully")}})).catch((e=>{Ee(!1),e.errors&&Object.keys(e.errors).map((t=>le(e.errors[t][0],{variant:"error"})))}));var t},CreateOrderByPdf:()=>(async e=>{try{var t;const a=new FormData;a.append("file_id",e);const r=await U.A.post("user/corpLienSearch",a);console.log(r,"create order by pdf"),null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.status?le("Succesfully order created",{variant:"success"}):console.log("Status False API create order by pdf")}catch(a){console.log(a,"create order by pdf api error")}})(e.id)},e.id))),(0,K.jsx)(Y.dO,{height:at,emptyRows:(0,B.xl)(se,ce,ge.length)}),(0,K.jsx)(Y.Sm,{isNotFound:rt})]})]})})}),(0,K.jsx)(u.A,{sx:{position:"relative"},children:(0,K.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:tt.length,rowsPerPage:ce,page:se,onPageChange:fe,onRowsPerPageChange:ve})})]}),(0,K.jsx)(j.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Re,onClose:()=>qe(!1),closeAfterTransition:!0,slots:{backdrop:b.A},slotProps:{backdrop:{timeout:500}},children:(0,K.jsx)(A.A,{in:Re,children:(0,K.jsxs)(u.A,{sx:$,children:[(0,K.jsx)(c.A,{variant:"h5",sx:{mb:2},onClick:()=>Ye(!1),children:Ge&&(0,K.jsx)(L.In,{icon:"material-symbols:arrow-left-alt",width:"1.2em",height:"1.2em"})}),(0,K.jsxs)(i.Ay,{item:!0,xs:12,md:12,children:[(0,K.jsx)(c.A,{variant:"h5",sx:{mb:2},children:Ge?"Add Contact":"Select User Into Your List"}),Ge?(0,K.jsxs)(J.Op,{methods:it,onSubmit:mt((async e=>{console.log(e.request,"request"),Ze(!0);try{const t=new FormData;t.append("first_name",e.fname),t.append("last_name",e.lname),t.append("email",e.email),t.append("phone",e.phone),t.append("address",e.address),t.append("company_name",e.company),t.append("job_title",e.job),t.append("is_file_shared",!0),await U.A.post("user/contact/user/add",t).then((e=>{if(Ze(!1),200===e.status||201===e.status){var t,a,r;const n=e.data;console.log(n,"add user new"),le("successfully add new user"),qe(!1),dt(),xt(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.id,null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.first_name,null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.last_name)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}finally{Ze(!1)}})),children:[(0,K.jsxs)(u.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,K.jsx)(J.o3,{name:"fname",label:"First Name"}),(0,K.jsx)(J.o3,{name:"lname",label:"Last Name"}),(0,K.jsx)(J.o3,{name:"email",label:"Email"}),(0,K.jsx)(J.o3,{name:"phone",label:"Phone Nunber"}),(0,K.jsx)(J.o3,{name:"address",label:"Address"}),(0,K.jsx)(J.o3,{name:"company",label:"Company Name"}),(0,K.jsx)(J.o3,{name:"job",label:"Job title"})]}),(0,K.jsx)(h.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,K.jsx)(F.A,{type:"submit",variant:"contained",loading:Xe,children:"Add Contact"})})]}):(0,K.jsxs)(u.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,K.jsx)(h.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,K.jsx)(y.A,{sx:{my:1,width:1},ref:lt,label:"Search by first Name, Last Name & Email",value:(null===lt||void 0===lt||null===(t=lt.current)||void 0===t?void 0:t.value)||"",onChange:e=>{const t=e.target.value.toLowerCase();if(lt.current.value=t,""===lt.current.value)ke([]);else{const e=Me.filter((e=>{var a,r,n;return(null===e||void 0===e||null===(a=e.Contact)||void 0===a?void 0:a.first_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.last_name.toLowerCase().includes(t))||(null===e||void 0===e||null===(n=e.Contact)||void 0===n?void 0:n.email.toLowerCase().includes(t))}));console.log(e,"filteredData"),ke(e)}},size:"small"})}),(0,K.jsx)(w.A,{}),(null===De||void 0===De?void 0:De.length)>0?De.map(((e,t)=>{var a,r;return(0,K.jsxs)(h.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,K.jsxs)(c.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,K.jsx)(q.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(null===(a=e.Contact)||void 0===a?void 0:a.first_name," ").concat(null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.last_name)]}),(0,K.jsx)(h.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,K.jsx)(F.A,{type:"submit",variant:"contained",loading:Xe,onClick:()=>nt(null===e||void 0===e?void 0:e.id),children:"Share"})})]},t)})):(0,K.jsx)(h.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,K.jsx)(p.A,{variant:"contained",onClick:()=>Ye(!0),startIcon:(0,K.jsx)(q.A,{icon:"material-symbols:contact-page-rounded"}),sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:"Add Contact"})})]})]})]})})})]})})}}}]);