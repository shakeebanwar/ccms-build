(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{16099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(90706),s=r(79947),o=r(28339),n=r(6978),i=r(60820),l=r(36404),d=r(9950),c=r(14857),u=r(79537),p=r(48089),h=r(40033),f=r(42686),g=r(62740),m=r(30744),w=r(90260),x=r(98091),v=r(86608),A=r(63358),b=r(20131),O=r(44414);const y=e=>{const{events:t,selectedEventId:r}=e.calendar;return r?t.find((e=>Number(e.id)===Number(r))):null};function C(){const{themeStretch:e}=(0,v.A)(),t=((0,c.A)(),(0,m.wA)()),r=(0,x.A)("up","sm"),C=(0,d.useRef)(null),[S,j]=(0,d.useState)(new Date),[_,P]=(0,d.useState)(r?"dayGridMonth":"listWeek"),D=(0,m.d4)(y),{events:R,isOpenModal:T,selectedRange:V}=(0,m.d4)((e=>e.calendar));(0,d.useEffect)((()=>{t((0,f.Wb)())}),[t]),(0,d.useEffect)((()=>{const e=C.current;if(e){const t=e.getApi(),a=r?"dayGridMonth":"listWeek";t.changeView(a),P(a)}}),[r]);const k=()=>{t((0,f.Oo)())};return(0,O.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,O.jsx)(A.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:w.i8.root},{name:"Calender"}]}),(0,O.jsx)(p.A,{children:(0,O.jsxs)(g.mg,{children:[(0,O.jsx)(g.a7,{date:S,view:_,onNextDate:()=>{const e=C.current;if(e){const t=e.getApi();t.next(),j(t.getDate())}},onPrevDate:()=>{const e=C.current;if(e){const t=e.getApi();t.prev(),j(t.getDate())}},onToday:()=>{const e=C.current;if(e){const t=e.getApi();t.today(),j(t.getDate())}},onChangeView:e=>{const t=C.current;if(t){t.getApi().changeView(e),P(e)}}}),(0,O.jsx)(a.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:R,ref:C,rerenderDelay:10,initialDate:S,initialView:_,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{t((0,f.PY)(e.event.id))},height:r?720:"auto",plugins:[s.A,o.Ay,i.Ay,n.Ay,l.Ay]})]})}),(0,O.jsxs)(b.ys,{open:T,onClose:k,children:[(0,O.jsx)(h.A,{children:D?"Edit Order Contin":"Add Order Contin"}),(0,O.jsx)(g.lM,{event:D||{},range:V,onCancel:k})]})]})}},4607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(9950),s=r(13564),o=r(79537),n=r(48089),i=r(68367),l=r(84142),d=r(12257),c=r(1320),u=r(15769),p=r(34075),h=r(6368),f=r(91434),g=r(16497),m=r(37324),w=r(53984),x=r(73447),v=r(57191),A=r(60899),b=r(82053),O=r(29031),y=r(9449),C=r(55858),S=r(90260),j=r(46765),_=r(86608),P=r(38861),D=r(8279),R=(r(22704),r(66075),r(44185)),T=r(63358),V=r(72870),k=r(12480),E=r(32741),M=r(95074),N=(r(16099),r(52401)),I=r(33507),L=r(44414);const F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},q=[{id:"status",label:"Order Status",align:"left",width:700},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:600},{id:"file_pdf",label:"Contract Pdf",align:"left",width:500},{id:"status_change",label:"Change Status",align:"left",width:300},{id:"",label:(0,L.jsx)(C.A,{color:"#e9eff4"}),align:"center",width:50}],z=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function B(){var e;const{user:t}=(0,I.A)(),{themeStretch:r}=(0,_.A)(),{enqueueSnackbar:C}=(0,O.dh)(),B=(0,s.Zp)(),{state:G}=(0,s.zy)(),U=null===G||void 0===G?void 0:G.orderType;console.log(t,"user");const{dense:W,page:Y,order:Z,orderBy:$,rowsPerPage:H,setPage:J,selected:K,onSort:Q,onChangeDense:X,onChangePage:ee,onChangeRowsPerPage:te}=(0,P.Ay)({defaultOrderBy:"createDate"}),re=(null===t||void 0===t?void 0:t.user_permissions)||{},ae=z.filter((e=>!0===(null===re||void 0===re?void 0:re[e.permission])));console.log(ae,"filteredTabs");const[se,oe]=(0,a.useState)([]),[ne,ie]=(0,a.useState)(""),[le,de]=(0,a.useState)("new"),[ce,ue]=(0,a.useState)(null),[pe,he]=(0,a.useState)(null),{currentTab:fe,onChangeTab:ge}=(0,j.A)("all"),[me,we]=(0,a.useState)((null===ae||void 0===ae?void 0:ae.length)>0?null===(e=ae[0])||void 0===e?void 0:e.label:null),[xe,ve]=(0,a.useState)(!1),Ae=(0,a.useRef)(null),[be,Oe]=(0,a.useState)(!1),[ye,Ce]=(0,a.useState)(""),[Se,je]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;"Sightline\xae"!==me&&"UCC"!==me&&_e(null===ae||void 0===ae||null===(e=ae.find((e=>e.label===me)))||void 0===e?void 0:e.api)}),[me]),(0,a.useEffect)((()=>{var e;U&&(_e(null===(e=z.find((e=>e.label===U)))||void 0===e?void 0:e.api),we(U))}),[U]);const _e=e=>{ve(!0);try{E.A.get("employee/".concat(e)).then((e=>{ve(!1);const t=e.data;console.log(t,"Dataemployee"),200===e.status?oe(t.orders):C(t.message)}))}catch(t){if(ve(!1),t.errors){Object.keys(t.errors).map((e=>C(t.errors[e][0],{variant:"error"})))}}},Pe=(e,t)=>{je(!0),Oe(e),Ce(t)},De=e=>{ve(!0),console.log(e,"files");const t=new FormData;t.append("file",e[0]);try{E.A.post("employee/complete/".concat(ye,"/").concat(be),t).then((e=>{if(console.log(e,"status api"),ve(!1),200===e.status||201===e.status){const t=e.data,r=se.map((e=>e.id===be?{...e,status:ye}:e));je(!1),console.log(r,"UpdatedOrders"),oe(r),C(t.message)}})).catch((()=>{ve(!1)}))}catch(r){if(ve(!1),r.errors){Object.keys(r.errors).map((e=>C(r.errors[e][0],{variant:"error"})))}}},Re=(0,y.mN)(),{control:Te}=Re,Ve=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:s,filterService:o,filterStartDate:n,filterEndDate:i}=e;const l=t.map(((e,t)=>[e,t]));l.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=l.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==s&&(t=t.filter((e=>e.status===s)));"new"!==o&&(t=t.filter((e=>e.status===o)));n&&i&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:se,comparator:(0,P.hz)(Z,$),filterName:ne,filterService:le,filterStatus:fe,filterStartDate:ce,filterEndDate:pe}),ke=W?56:76,Ee=!Ve.length&&!!ne||!Ve.length&&!!fe||!Ve.length&&!!le||!Ve.length&&!!pe||!Ve.length&&!!ce,Me=e=>se.filter((t=>t.status===e)).length,[Ne,Ie]=(se.length,Me("active"),Me("new"),Me("placed"),Me("completed"),Me("on_hold"),Me("draft"),Me("cancelled"),(0,a.useState)(se)),[Le,Fe]=(0,a.useState)(se);return(0,a.useEffect)((()=>{Ie(se),Fe(se)}),[se]),(0,a.useEffect)((()=>{if("default"===$)Fe(Ne);else{const e=[...Ne].sort((0,P.hz)(Z,$));Fe(e)}}),[Z,$]),(0,L.jsxs)(D.A,{title:"Order: Your Orders",children:[xe&&(0,L.jsx)(M.A,{}),(0,L.jsx)("input",{type:"file",ref:Ae,onChange:De,hidden:!0}),(0,L.jsxs)(o.A,{maxWidth:!r&&"xl",children:[(0,L.jsxs)(n.A,{sx:{borderRadius:"0px"},children:[(0,L.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:me,onChange:(e,t)=>{console.log(t,"value"),we(t)},sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:ae.map((e=>(0,L.jsx)(l.A,{disableRipple:!0,value:e.label,label:(0,L.jsx)(d.A,{spacing:1,direction:"row",alignItems:"center",children:(0,L.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,L.jsx)(T.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Orders",href:S.i8.root},{name:"All Orders"}]}),(0,L.jsx)(R.A,{children:(0,L.jsx)(c.A,{sx:{position:"relative"},children:(0,L.jsxs)(u.A,{size:W?"small":"medium",children:[(0,L.jsx)(V.er,{order:Z,orderBy:$,headLabel:q,rowCount:se.length,numSelected:K.length,onSort:Q}),(0,L.jsxs)(p.A,{children:[Le.slice(Y*H,Y*H+H).map((e=>(0,L.jsx)(k.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===me&&B(S.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===me&&(null!==e&&void 0!==e&&e.updated_by_pdf?B(S.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):B(S.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===me&&B(S.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===me&&B(S.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&B(S.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,B(S.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===me&&B(S.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===me&&B(S.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===me&&B(S.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===me&&B(S.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&B(S.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&B(S.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===me&&B(S.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===me&&B(S.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===me&&B(S.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===me&&B(S.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&B(S.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&B(S.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Pe(e.id,"file_completed"),onContainDocumentUpload:()=>Pe(e.id,"contin_completed"),onStatusChange:t=>((e,t)=>{ve(!0);try{const r=new FormData;r.append("status",t),r.append("id",e),E.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),ve(!1),200===r.status||201===r.status){const a=r.data,s=se.map((r=>r.id===e?{...r,status:t}:r));oe(s),C(a.message)}})).catch((e=>{ve(!1),console.log(e,"catch errror")}))}catch(r){ve(!1),r.errors&&Object.keys(r.errors).map((e=>C(r.errors[e][0],{variant:"error"})))}})(e.id,t)},e.id))),(0,L.jsx)(V.dO,{height:ke,emptyRows:(0,P.xl)(Y,H,se.length)}),(0,L.jsx)(V.Sm,{isNotFound:Ee})]})]})})}),(0,L.jsxs)(h.A,{sx:{position:"relative"},children:[(0,L.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ve.length,rowsPerPage:H,page:Y,onPageChange:ee,onRowsPerPageChange:te}),(0,L.jsx)(g.A,{control:(0,L.jsx)(m.A,{checked:W,onChange:X}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,L.jsx)(w.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Se,onClose:()=>je(!1),closeAfterTransition:!0,slots:{backdrop:x.A},slotProps:{backdrop:{timeout:500}},children:(0,L.jsx)(v.A,{in:Se,children:(0,L.jsx)(h.A,{sx:F,children:(0,L.jsx)(N.Op,{methods:Re,children:(0,L.jsxs)(A.Ay,{item:!0,xs:12,md:12,children:[(0,L.jsx)(b.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,L.jsxs)(h.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,L.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,L.jsx)(b.A,{variant:"h6",onClick:()=>{var e;return null===Ae||void 0===Ae||null===(e=Ae.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,L.jsx)(N.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:De})]}),(0,L.jsx)(d.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},55858:(e,t,r)=>{"use strict";var a=r(24994);t.A=void 0;var s=a(r(79526)),o=r(44414);t.A=(0,s.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},79526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=r(92079)},48089:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(58168),s=r(98587),o=r(9950),n=r(2803),i=r(5747),l=r(7951),d=r(79859),c=r(70693),u=r(37665);function p(e){return(0,u.A)("MuiCard",e)}(0,r(44245).A)("MuiCard",["root"]);var h=r(44414);const f=["className","raised"],g=(0,l.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),m=o.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=r,c=(0,s.A)(r,f),u=(0,a.A)({},r,{raised:l}),m=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},p,t)})(u);return(0,h.jsx)(g,(0,a.A)({className:(0,n.A)(m.root,o),elevation:l?8:void 0,ref:t,ownerState:u},c))}))},40033:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(58168),s=r(98587),o=r(9950),n=r(2803),i=r(5747),l=r(82053),d=r(7951),c=r(79859),u=r(23025),p=r(5536),h=r(44414);const f=["className","id"],g=(0,d.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),m=o.forwardRef((function(e,t){const r=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:d}=r,m=(0,s.A)(r,f),w=r,x=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},u.t,t)})(w),{titleId:v=d}=o.useContext(p.A);return(0,h.jsx)(g,(0,a.A)({component:"h2",className:(0,n.A)(x.root,l),ownerState:w,ref:t,variant:"h6",id:v},m))}))},92079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{capitalize:()=>s.A,createChainedFunction:()=>o.A,createSvgIcon:()=>n.A,debounce:()=>i.A,deprecatedPropType:()=>l,isMuiElement:()=>d.A,ownerDocument:()=>c.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>b,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>w.A,useEventCallback:()=>x.A,useForkRef:()=>v.A,useIsFocusVisible:()=>A.A});var a=r(66236),s=r(61676),o=r(25920),n=r(65471),i=r(21209);const l=function(e,t){return()=>null};var d=r(60096),c=r(27402),u=r(70827);r(58168);const p=function(e,t){return()=>null};const h=r(25679).A;var f=r(79044),g=r(31014);const m=function(e,t,r,a,s){return null};var w=r(48733),x=r(1976),v=r(31506),A=r(41573);const b={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.A.configure(e)}}},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);