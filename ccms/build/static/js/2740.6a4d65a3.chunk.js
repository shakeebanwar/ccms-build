"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[2740],{91745:(e,t,o)=>{o.d(t,{qU:()=>s,yR:()=>f});var r=o(7951),n=o(19657),i=o(6368),l=o(82053),a=o(44414);const d=(0,r.Ay)(i.A)((()=>({display:"flex",alignItems:"center",justifyContent:"flex-end"}))),c=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{marginLeft:-4,borderRadius:"50%",width:t.spacing(2),height:t.spacing(2),border:"solid 2px ".concat(t.palette.background.paper),boxShadow:"inset -1px 1px 2px ".concat((0,n.X4)(t.palette.common.black,.24))}}));function s(e){let{colors:t,limit:o=3,sx:r}=e;const n=t.slice(0,o),i=t.length-o;return(0,a.jsxs)(d,{component:"span",sx:r,children:[n.map(((e,t)=>(0,a.jsx)(c,{sx:{bgcolor:e}},e+t))),t.length>o&&(0,a.jsx)(l.A,{variant:"subtitle2",children:"+".concat(i)})]})}var p=o(66075);var u=o(49535),h=o(85815);function f(e){let{colors:t,...o}=e;return(0,a.jsx)(u.A,{row:!0,...o,children:t.map((e=>{const t="#FFFFFF"===e||"white"===e;return(0,a.jsx)(h.A,{value:e,color:"default",icon:(0,a.jsx)(v,{sx:{...t&&{border:e=>"solid 1px ".concat(e.palette.divider)}}}),checkedIcon:(0,a.jsx)(v,{sx:{transform:"scale(1.4)","&:before":{opacity:.48,width:"100%",content:"''",height:"100%",borderRadius:"50%",position:"absolute",boxShadow:"4px 4px 8px 0 currentColor"},"& svg":{width:12,height:12,color:"common.white"},...t&&{border:e=>"solid 1px ".concat(e.palette.divider),boxShadow:e=>"4px 4px 8px 0 ".concat(e.palette.grey[50024]),"& svg":{width:12,height:12,color:"common.black"}}}}),sx:{color:e,"&:hover":{opacity:.72}}},e)}))})}function v(e){let{sx:t}=e;return(0,a.jsx)(i.A,{sx:{width:20,height:20,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",bgcolor:"currentColor",transition:e=>e.transitions.create("all",{duration:e.transitions.duration.shortest}),...t},children:(0,a.jsx)(p.A,{icon:"eva:checkmark-fill"})})}},62740:(e,t,o)=>{o.d(t,{lM:()=>R,mg:()=>q,a7:()=>P});var r=o(9950),n=o(13564),i=o(60666),l=o(23334),a=o.n(l),d=o(43974),c=o(29031),s=o(9449),p=o(68654),u=o(12257),h=o(41205),f=o(8145),v=o(23266),x=o(79739),g=o(53065),m=o(25333),b=o(6368),y=o(75165),j=o(21410),w=o(28095),A=o(34117),C=o(42686),k=o(66075),_=o(91745),S=o(52401),I=o(32741),D=o(10608),F=o(44414);const M=["#00AB55","#1890FF","#54D62C","#FFC107","#FF4842","#04297A","#7A0C2E"];function R(e){let{event:t,range:o,onCancel:l,getDate:R}=e;console.log(t,"event");const{enqueueSnackbar:z}=(0,c.dh)(),T=(0,A.wA)(),{pathname:q}=(0,n.zy)(),{selectedFileNumber:O}=(0,A.d4)((e=>e.calendar)),[W,H]=(0,r.useState)([]),[N,B]=(0,r.useState)({}),L=0===Object.keys(t).length,G=q.includes("employee"),P=i.Ik().shape({title:i.Yj().max(255).required("Title is required"),description:i.Yj().max(5e3),order_no:i.Yj().max(5e3).required("File is Required")}),X=(0,s.mN)({resolver:(0,p.t)(P),defaultValues:((e,t)=>{var o;const r={address:(null===e||void 0===e?void 0:e.address)||"",name:e.name||"",title:"",order_no:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.order_no)||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:R?new Date(R):new Date};return e||t?a()({},r,e):r})(t,o)}),{reset:E,watch:U,control:V,setValue:Y,handleSubmit:Q,formState:{isSubmitting:J,errors:K}}=X,Z=U();console.log("values",Z),(0,r.useEffect)((()=>{O&&Y("title",O),G||$()}),[O]);const $=()=>{try{I.A.get("user/orders").then((e=>{const t=e.data;if(console.log(t,"Data"),200===e.status){if(H(t.orders),O){var o,r,n;const e=null===t||void 0===t||null===(o=t.orders)||void 0===o?void 0:o.find((e=>(null===e||void 0===e?void 0:e.file_no)===O));Y("name",null===(r=e.files)||void 0===r?void 0:r.file_name),Y("address",(null===(n=e.subject_premise)||void 0===n?void 0:n.property_location)||""),Y("order_no",e.order_no||"")}}else z(t.message)}))}catch(e){if(e.errors){Object.keys(e.errors).map((t=>z(e.errors[t][0],{variant:"error"})))}}};return(0,F.jsxs)(S.Op,{methods:X,onSubmit:Q((async e=>{try{const o=!G&&{order_id:W.find((t=>(null===t||void 0===t?void 0:t.order_no)===e.order_no)).id,title:e.title,address:e.address,description:e.description,textColor:e.textColor,end:(0,d.A)(e.end,"yyyy-MM-dd HH:mm:ss")},r=G&&{status:e.status,end:(0,d.A)(e.end,"yyyy-MM-dd HH:mm:ss")};t.id?(G?T((0,C.wL)(t.id,r)):(T((0,C.qM)(t.id,o)),T((0,C.kQ)())),setTimeout((()=>{z("Update success!")}),2e3)):(T((0,C.lh)(o)),setTimeout((()=>{z("Create success!")}),2e3)),l(),E()}catch(o){console.error(o)}})),children:[(0,F.jsxs)(u.A,{spacing:3,sx:{p:3},children:[(0,F.jsx)(S.o3,{name:"title",label:"title",disabled:G}),(0,F.jsx)(s.xI,{name:"name",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(h.A,{disabled:G,value:t.value||"",options:W.map((e=>({label:e.files.file_name,id:e.id}))),onChange:(e,o)=>{t.onChange((null===o||void 0===o?void 0:o.label)||"");const r=W.find((e=>e.files.file_name===(null===o||void 0===o?void 0:o.label)));r&&(Y("order_no",null===r||void 0===r?void 0:r.order_no),Y("address",r.subject_premise.property_location))},renderInput:e=>(0,F.jsx)(f.A,{...e,label:"Name",placeholder:"Search Name"})})}}),(0,F.jsx)(s.xI,{name:"address",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(h.A,{disabled:G,value:t.value||"",options:W.map((e=>{var t;return{label:(null===e||void 0===e||null===(t=e.subject_premise)||void 0===t?void 0:t.property_location)||"",id:e.id}})),onChange:(e,o)=>{t.onChange(o.label||null);const r=W.find((e=>e.subject_premise.property_location===(null===o||void 0===o?void 0:o.label)));r&&(Y("order_no",null===r||void 0===r?void 0:r.order_no),Y("name",null===r||void 0===r?void 0:r.files.file_name))},renderInput:e=>(0,F.jsx)(f.A,{...e,label:"Address",placeholder:"Search Address"})})}}),(0,F.jsx)(s.xI,{name:"order_no",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(h.A,{value:t.value||"",freeSolo:!0,disabled:G,options:W.map((e=>({label:null===e||void 0===e?void 0:e.order_no,id:null===e||void 0===e?void 0:e.order_no}))),getOptionLabel:e=>"string"===typeof e?e:e.label||"",onChange:(e,o)=>{t.onChange(o.label||null);const r=W.find((e=>(null===e||void 0===e?void 0:e.order_no)===(null===o||void 0===o?void 0:o.id)));r&&(Y("address",r.subject_premise.property_location),Y("name",null===r||void 0===r?void 0:r.files.file_name))},renderInput:e=>(0,F.jsx)(f.A,{label:"Order NO",...e})})}}),(0,F.jsx)(S.o3,{name:"description",label:"Description",multiline:!0,rows:4,disabled:G}),G&&(0,F.jsx)(s.xI,{name:"status",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(f.A,{...t,fullWidth:!0,select:!0,label:"Status",SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{textTransform:"capitalize"},children:D.XQ.map((e=>(0,F.jsx)(v.A,{value:e,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e},e)))})}}),(0,F.jsx)(s.xI,{name:"end",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(j.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy hh:mm a",renderInput:e=>(0,F.jsx)(f.A,{...e,fullWidth:!0,value:R})})}}),!G&&(0,F.jsx)(s.xI,{name:"textColor",control:V,render:e=>{let{field:t}=e;return(0,F.jsx)(_.yR,{value:t.value,onChange:t.onChange,colors:M})}})]}),(0,F.jsxs)(x.A,{children:[!L&&(0,F.jsx)(g.A,{title:"Delete Event",children:(0,F.jsx)(m.A,{onClick:async()=>{if(t.id)try{l(),T((0,C.SX)(t.id)),z("Delete success!")}catch(e){console.error(e)}},children:(0,F.jsx)(k.A,{icon:"eva:trash-2-outline",width:20,height:20})})}),(0,F.jsx)(b.A,{sx:{flexGrow:1}}),(0,F.jsx)(y.A,{variant:"outlined",color:"inherit",onClick:l,children:"Cancel"}),(0,F.jsx)(w.A,{sx:{bgcolor:"#00ab55","&:hover":{bgcolor:"#0aaa57"}},type:"submit",variant:"contained",loading:J,children:L?"Add":"Update"})]})]})}var z=o(7951),T=o(19657);const q=(0,z.Ay)("div")((e=>{let{theme:t}=e;return{width:"calc(100% + 2px)",marginLeft:-1,marginBottom:-1,"& .fc":{"--fc-list-event-dot-width":"8px","--fc-border-color":t.palette.divider,"--fc-event-border-color":t.palette.info.light,"--fc-now-indicator-color":t.palette.error.main,"--fc-today-bg-color":t.palette.action.selected,"--fc-page-bg-color":t.palette.background.default,"--fc-neutral-bg-color":t.palette.background.neutral,"--fc-list-event-hover-bg-color":t.palette.action.hover,"--fc-highlight-color":(0,T.X4)(t.palette.primary.main,.08)},"& .fc .fc-license-message":{display:"none"},"& .fc a":{color:t.palette.text.primary},"& .fc .fc-col-header ":{boxShadow:"inset 0 -1px 0 ".concat(t.palette.divider),"& th":{borderColor:"transparent"},"& .fc-col-header-cell-cushion":{...t.typography.subtitle2,padding:"13px 0"}},"& .fc .fc-event":{borderColor:"transparent",backgroundColor:"transparent"},"& .fc .fc-event .fc-event-main":{padding:"2px 4px",borderRadius:4,backgroundColor:t.palette.common.white,transition:t.transitions.create("filter"),"&:hover":{filter:"brightness(0.92)"},"&:before,&:after":{top:0,left:0,width:"100%",height:"100%",content:"''",borderRadius:4,position:"absolute",boxSizing:"border-box"},"&:before":{zIndex:8,opacity:.32,border:"solid 1px currentColor"},"&:after":{zIndex:7,opacity:.24,backgroundColor:"currentColor"}},"& .fc .fc-event .fc-event-main-frame":{fontSize:13,lineHeight:"20px",filter:"brightness(0.24)"},"& .fc .fc-daygrid-event .fc-event-title":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& .fc .fc-event .fc-event-time":{padding:0,overflow:"unset",fontWeight:t.typography.fontWeightBold},"& .fc .fc-popover":{border:0,overflow:"hidden",boxShadow:t.customShadows.z20,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper},"& .fc .fc-popover-header":{...t.typography.subtitle2,padding:t.spacing(1),backgroundColor:t.palette.grey[50012],borderBottom:"solid 1px ".concat(t.palette.divider)},"& .fc .fc-popover-close":{opacity:.48,transition:t.transitions.create("opacity"),"&:hover":{opacity:1}},"& .fc .fc-more-popover .fc-popover-body":{padding:t.spacing(1.5)},"& .fc .fc-popover-body":{"& .fc-daygrid-event.fc-event-start, & .fc-daygrid-event.fc-event-end":{margin:"2px 0"}},"& .fc .fc-day-other .fc-daygrid-day-top":{opacity:1,"& .fc-daygrid-day-number":{color:t.palette.text.disabled}},"& .fc .fc-daygrid-day-number":{...t.typography.body2,padding:t.spacing(1,1,0)},"& .fc .fc-daygrid-event":{marginTop:4},"& .fc .fc-daygrid-event.fc-event-start, & .fc .fc-daygrid-event.fc-event-end":{marginLeft:4,marginRight:4},"& .fc .fc-daygrid-more-link":{...t.typography.caption,color:t.palette.text.secondary},"& .fc .fc-timegrid-axis-cushion":{...t.typography.body2,color:t.palette.text.secondary},"& .fc .fc-timegrid-slot-label-cushion":{...t.typography.body2},"& .fc-direction-ltr .fc-list-day-text, .fc-direction-rtl .fc-list-day-side-text, .fc-direction-ltr .fc-list-day-side-text, .fc-direction-rtl .fc-list-day-text":{...t.typography.subtitle2},"& .fc .fc-list-event":{...t.typography.body2,"& .fc-list-event-time":{color:t.palette.text.secondary}},"& .fc .fc-list-table":{"& th, td":{borderColor:"transparent"}}}}));var O=o(53924),W=o(82053),H=o(34437),N=o(98091);const B=[{value:"dayGridMonth",label:"Month",icon:"ic:round-view-module"},{value:"timeGridWeek",label:"Week",icon:"ic:round-view-week"},{value:"timeGridDay",label:"Day",icon:"ic:round-view-day"},{value:"listWeek",label:"Agenda",icon:"ic:round-view-agenda"}],L=[],G=(0,z.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",flexDirection:"column",padding:t.spacing(2.5),[t.breakpoints.up("sm")]:{flexDirection:"row"}}}));function P(e){let{date:t,view:o,onToday:r,onNextDate:n,onPrevDate:i,onChangeView:l,todayBtn:a=!0}=e;const d=(0,N.A)("up","sm");return(0,F.jsxs)(G,{sx:{justifyContent:a?"space-between":"center"},children:[d&&(0,F.jsx)(u.A,{direction:"row",spacing:.5,children:a?null===B||void 0===B?void 0:B.map((e=>(0,F.jsx)(g.A,{title:e.label,children:(0,F.jsx)(O.A,{value:o,selected:e.value===o,onChange:()=>l(e.value),sx:{width:32,height:32,padding:0,border:0},children:(0,F.jsx)(k.A,{icon:e.icon,width:20,height:20})})},e.value))):null===L||void 0===L?void 0:L.map((e=>(0,F.jsx)(g.A,{title:e.label,children:(0,F.jsx)(O.A,{value:o,selected:e.value===o,onChange:()=>l(e.value),sx:{width:32,height:32,padding:0,border:0},children:(0,F.jsx)(k.A,{icon:e.icon,width:20,height:20})})},e.value)))}),(0,F.jsxs)(u.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,F.jsx)(m.A,{onClick:i,children:(0,F.jsx)(k.A,{icon:"eva:arrow-ios-back-fill",width:20,height:20})}),(0,F.jsx)(W.A,{variant:"h5",children:(0,H.ts)(t)}),(0,F.jsx)(m.A,{onClick:n,children:(0,F.jsx)(k.A,{icon:"eva:arrow-ios-forward-fill",width:20,height:20})})]}),d&&a&&(0,F.jsx)(y.A,{size:"small",color:"error",variant:"contained",onClick:r,children:"Today"})]})}}}]);