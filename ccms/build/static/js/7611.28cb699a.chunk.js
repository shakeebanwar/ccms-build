"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[7611],{87611:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(9950),l=a(60666),o=a(79537),s=a(48089),n=a(68367),i=a(84142),c=a(12257),d=a(6368),u=a(82053),h=a(74745),p=a(1320),g=a(15769),b=a(34075),f=a(91434),x=a(16497),m=a(37324),w=a(53984),S=a(73447),j=a(57191),v=a(60899),A=a(29031),y=a(73878),C=a(13564),O=a(9449),P=a(68654),D=a(28095),q=a(90260),B=a(46765),k=a(86608),T=a(38861),R=a(22704),_=(a(66075),a(44185)),E=a(63358),L=a(72870),V=a(12480),F=a(32741),I=a(95074),N=(a(42686),a(73561)),M=a(44414);const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},G=["new","old"],W=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],H=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function U(){const[e,t]=(0,r.useState)(!1),[a,U]=(0,r.useState)(),[Y,Z]=(0,r.useState)(!1),[J,K]=(0,r.useState)(),[Q,X]=(0,r.useState)(!1),{themeStretch:$}=(0,k.A)(),ee=((0,y.wA)(),(0,C.Zp)()),{enqueueSnackbar:te}=(0,A.dh)(),{dense:ae,page:re,order:le,orderBy:oe,rowsPerPage:se,setPage:ne,selected:ie,setSelected:ce,onSort:de,onChangeDense:ue,onChangePage:he,onChangeRowsPerPage:pe}=(0,T.Ay)({defaultOrderBy:"createDate"}),[ge,be]=(0,r.useState)([]),[fe,xe]=(0,r.useState)(""),[me,we]=(0,r.useState)("new"),[Se,je]=(0,r.useState)(null),[ve,Ae]=(0,r.useState)(null),{currentTab:ye,onChangeTab:Ce}=(0,B.A)("all"),[Oe,Pe]=(0,r.useState)("Title Insurance"),[De,qe]=(0,r.useState)(!1),[Be,ke]=(0,r.useState)(""),[Te,Re]=(0,r.useState)(null),{id:_e}=(0,C.g)();(0,r.useEffect)((()=>{"Sightline\xae"!==Oe&&Ee(H.find((e=>e.label===Oe)).api)}),[Oe]);const Ee=e=>{qe(!0);try{F.A.get("user/all_shared/by_user/".concat(e,"/").concat(_e)).then((e=>{qe(!1);const t=e.data;console.log(t,"Data"),200===e.status?(ke(t.filePath),be(t.orders)):te(t.message)}))}catch(t){if(qe(!1),t.errors){Object.keys(t.errors).map((e=>te(t.errors[e][0],{variant:"error"})))}}},Le=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:l,filterService:o,filterStartDate:s,filterEndDate:n}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=i.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));s&&n&&(t=t.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=n.getTime())));return t}({tableData:ge,comparator:(0,T.hz)(le,oe),filterName:fe,filterService:me,filterStatus:ye,filterStartDate:Se,filterEndDate:ve}),Ve=ae?56:76,Fe=!Le.length&&!!fe||!Le.length&&!!ye||!Le.length&&!!me||!Le.length&&!!ve||!Le.length&&!!Se,Ie=e=>ge.filter((t=>t.status===e)).length,Ne=[{value:"all",label:"All",color:"info",count:ge.length},{value:"active",label:"Active",color:"info",count:Ie("active")},{value:"new",label:"New",color:"info",count:Ie("new")},{value:"placed",label:"Placed",color:"info",count:Ie("placed")},{value:"completed",label:"Completed",color:"success",count:Ie("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ie("on hold")},{value:"draft",label:"Draft",color:"default",count:Ie("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ie("cancelled")}],Me=l.Ik().shape({request:l.Yj().required("Request Description is required")}),ze=(0,r.useMemo)((()=>({request:""})),[]),Ge=(0,O.mN)({resolver:(0,P.t)(Me),defaultValues:ze}),{reset:We,watch:He,setValue:Ue,handleSubmit:Ye,formState:{isSubmitting:Ze,errors:Je}}=Ge;He();return(0,M.jsxs)(o.A,{maxWidth:!$&&"lg",children:[De&&(0,M.jsx)(I.A,{}),(0,M.jsx)(E.A,{heading:"Shared Orders",links:[{name:"Dashboard",href:q.nB.root},{name:"Shared Orders"}]}),(0,M.jsx)(s.A,{sx:{mb:5},children:(0,M.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Oe,onChange:(e,t)=>Pe(t),sx:{px:2,bgcolor:"background.neutral"},children:H.map((e=>(0,M.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,M.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:e.label})})},e.label)))})}),(0,M.jsx)(d.A,{sx:{p:2},children:(0,M.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:Oe.label})}),(0,M.jsxs)(s.A,{children:[(0,M.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ye,onChange:Ce,sx:{px:2,bgcolor:"background.neutral"},children:Ne.map((e=>(0,M.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,M.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,M.jsx)("div",{children:e.label})," ",(0,M.jsxs)(R.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,M.jsx)(h.A,{}),(0,M.jsx)(V.F5,{filterName:fe,filterService:me,filterStartDate:Se,filterEndDate:ve,onFilterName:e=>{xe(e),ne(0)},onFilterService:e=>{we(e.target.value)},onFilterStartDate:e=>{je(e)},onFilterEndDate:e=>{Ae(e)},optionsService:G}),(0,M.jsx)(_.A,{children:(0,M.jsx)(p.A,{sx:{minWidth:800,position:"relative"},children:(0,M.jsxs)(g.A,{size:ae?"small":"medium",children:[(0,M.jsx)(L.er,{order:le,orderBy:oe,headLabel:W,rowCount:ge.length,numSelected:ie.length,onSort:de}),(0,M.jsxs)(b.A,{children:[Le.slice(re*se,re*se+se).map((e=>(0,M.jsx)(V.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===Oe&&ee(q.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===Oe&&ee(q.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===Oe&&ee(q.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===Oe&&ee(q.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===Oe&&ee(q.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===Oe&&ee(q.nB.viewOrders.otherSearchesOrderView,{state:e})})(e)},e.id))),(0,M.jsx)(L.dO,{height:Ve,emptyRows:(0,T.xl)(re,se,ge.length)}),(0,M.jsx)(L.Sm,{isNotFound:Fe})]})]})})}),(0,M.jsxs)(d.A,{sx:{position:"relative"},children:[(0,M.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Le.length,rowsPerPage:se,page:re,onPageChange:he,onRowsPerPageChange:pe}),(0,M.jsx)(x.A,{control:(0,M.jsx)(m.A,{checked:ae,onChange:ue}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,M.jsx)(w.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:()=>t(!1),closeAfterTransition:!0,slots:{backdrop:S.A},slotProps:{backdrop:{timeout:500}},children:(0,M.jsx)(j.A,{in:e,children:(0,M.jsx)(d.A,{sx:z,children:(0,M.jsx)(N.Op,{methods:Ge,onSubmit:Ye((async e=>{console.log(e.request,"request"),Z(!0);try{const t=new FormData;t.append("descriptions",e.request),await F.A.post("user/requests/create/".concat(a),t).then((e=>{if(Z(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"sent request"),te(t.message),ee(q.nB.root)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>te(t.errors[e][0],{variant:"error"})))}}finally{Z(!1)}})),children:(0,M.jsxs)(v.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Sent Request for edit your order"}),(0,M.jsx)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,M.jsx)(N.o3,{name:"request",label:"Please enter Desciption",multiline:!0,rows:3})}),(0,M.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,M.jsx)(D.A,{type:"submit",variant:"contained",loading:Y,children:"Send Request"})})]})})})})})]})}}}]);