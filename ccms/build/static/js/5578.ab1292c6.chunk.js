"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[5578],{93012:(e,a,n)=>{n.d(a,{A:()=>j});var l=n(60666),t=n(60899),o=n(12257),i=n(82053),s=n(75165),r=n(6368),d=n(9950),c=n(28095),u=n(29031),m=n(9449),v=n(68654),p=n(13564),h=n(73561),x=n(32741),g=n(44414);const j=e=>{let{getAllYourUser:a,setOpen:n,close:j,handleClose:A}=e;const{pathname:f}=(0,p.zy)(),b=f.includes("employee"),[y,C]=(0,d.useState)(!1),{enqueueSnackbar:w}=(0,u.dh)(),S=l.Ik().shape({fname:l.Yj().required("First Name is required"),lname:l.Yj().required("Last Name is required"),email:l.Yj().required("Email is required"),phone:l.Yj().min(11).max(15).required("Phone number min 11 digit and max 15 digit is required")}),_=(0,d.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),k=(0,m.mN)({resolver:(0,v.t)(S),defaultValues:_}),{reset:D,watch:N,setValue:P,handleSubmit:F,formState:{isSubmitting:I,errors:q}}=k,R=(N(),async(e,n,l)=>{try{var t;const o=new FormData;o.append("name","".concat(n," ").concat(l));const i=await x.A.post("".concat(b?"employee":"user","/contact/add/").concat(e),o);console.log(i,"add user in list api"),null!==i&&void 0!==i&&null!==(t=i.data)&&void 0!==t&&t.status?(w("User Add In Your List",{variant:"success"}),a()):console.log("Status False in API")}catch(o){console.log(o,"add user in list api error")}});return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(h.Op,{methods:k,onSubmit:F((async e=>{console.log(e.request,"request"),C(!0);try{const a=new FormData;a.append("first_name",e.fname),a.append("last_name",e.lname),a.append("email",e.email),a.append("phone",e.phone),a.append("address",e.address),a.append("company_name",e.company),a.append("job_title",e.job),await x.A.post("".concat(b?"employee":"user","/contact/user/add"),a).then((e=>{if(C(!1),200===e.status||201===e.status){var a,l,t;const o=e.data;console.log(o,"add user new"),w("successfully add new user"),D(),n(!1),R(null===o||void 0===o||null===(a=o.user)||void 0===a?void 0:a.id,null===o||void 0===o||null===(l=o.user)||void 0===l?void 0:l.first_name,null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.last_name)}}))}catch(a){if(console.error(a),a.errors){const e=Object.keys(a.errors);console.log(e,"keys"),e.map((e=>w(a.errors[e].msg,{variant:"error"})))}}finally{C(!1)}})),children:(0,g.jsxs)(t.Ay,{item:!0,xs:12,md:12,children:[(0,g.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row"},children:[(0,g.jsx)(i.A,{variant:"h5",sx:{mb:2},children:"Add Contact Details"}),(0,g.jsx)(s.A,{variant:"contained",sx:{},onClick:()=>{j(!1),A()},children:"X"})]}),(0,g.jsxs)(r.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,g.jsx)(h.o3,{name:"fname",label:"First Name"}),(0,g.jsx)(h.o3,{name:"lname",label:"Last Name"}),(0,g.jsx)(h.o3,{name:"email",label:"Email"}),(0,g.jsx)(h.o3,{name:"phone",label:"Phone Nunber"}),(0,g.jsx)(h.o3,{name:"address",label:"Address"}),(0,g.jsx)(h.o3,{name:"company",label:"Company Name"}),(0,g.jsxs)(h.tX,{name:"job",label:"Select Job Title",children:[(0,g.jsx)("option",{value:""}),(0,g.jsx)("option",{value:"real_state_agent",children:"RealState Agent"}),(0,g.jsx)("option",{value:"mortage_broker",children:"Mortage Broker"}),(0,g.jsx)("option",{value:"notray",children:"Notray"})]})]}),(0,g.jsx)(o.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,g.jsx)(c.A,{type:"submit",variant:"contained",loading:y,children:"Add Contact"})})]})})})}},5578:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Q});var l=n(9950),t=n(60666),o=n(79537),i=n(12257),s=n(75165),r=n(48089),d=n(6368),c=n(8145),u=n(74745),m=n(82053),v=n(68367),p=n(84142),h=n(1320),x=n(15769),g=n(34075),j=n(91434),A=n(53984),f=n(73447),b=n(57191),y=n(60899),C=n(25979),w=n(3788),S=n(93523),_=n(23266),k=n(28095),D=n(29031),N=n(13564),P=n(9449),F=n(68654),I=n(8279),q=(n(30744),n(86608)),R=n(38861),L=n(63358),E=n(90260),O=n(66075),T=(n(73561),n(30818),n(32741)),V=n(44185),Y=n(72870),B=n(12480),U=n(14857),z=n(9213),M=n(21671),G=n(93038),J=(n(22704),n(33949),n(44414));function W(e){let{row:a,selected:n,onSelectRow:t,onAssign:o,onViewRow:i,onDocumentUpload:s,onDownloadDocument:r,onDeleteRow:d,onShareRow:c,onEditRow:u,onOrderContin:m,onStatusChange:v}=e;(0,U.A)();const{pathname:p}=(0,N.zy)(),h=(p.includes("admin"),p.includes("employee"));(0,N.Zp)();console.log(a,"row");const{updated_at:x,email:g,company_name:j,last_name:A,middle_name:f,first_name:b,id:y,name:C,Contact:w}=a,[S,k]=(0,l.useState)(null),[D,P]=(Boolean(S),(0,l.useState)(null)),F=()=>{P(null)};return(0,J.jsxs)(z.A,{hover:!0,selected:n,children:[(t||n)&&(0,J.jsx)(M.A,{padding:"checkbox",children:(0,J.jsx)(G.A,{checked:n,onClick:t})}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.id}),(0,J.jsx)(M.A,{align:"left",children:C}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.email}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.phone}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.address}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.company_name}),(0,J.jsx)(M.A,{align:"left",children:null===w||void 0===w?void 0:w.job_title}),(0,J.jsx)(M.A,{align:"right",children:(0,J.jsx)(Y.ZE,{open:D,onOpen:e=>{P(e.currentTarget)},onClose:F,actions:(0,J.jsxs)(J.Fragment,{children:[c&&!h&&(0,J.jsxs)(_.A,{onClick:()=>{c(),F()},children:[(0,J.jsx)(O.A,{icon:"material-symbols:share"}),"All Share Orders"]}),d&&(0,J.jsxs)(_.A,{onClick:()=>{d(),F()},sx:{color:"error.main"},children:[(0,J.jsx)(O.A,{icon:"eva:trash-2-outline"}),"Delete"]}),u&&(0,J.jsxs)(_.A,{onClick:()=>{u(),F()},children:[(0,J.jsx)(O.A,{icon:"eva:edit-fill"}),"Edit"]})]})})})]})}var Z=n(93012),X=n(46765);const H={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},K=[{id:"id",label:"Id",align:"left",width:800},{id:"name",label:"Name",align:"left",width:800},{id:"email",label:"Email",align:"left",width:800},{id:"phone",label:"Phone",align:"left",width:600},{id:"address",label:"Address",align:"left",width:600},{id:"company_name",label:"Company",align:"left",width:600},{id:"job_title",label:"Job",align:"left",width:600},{id:""}];function Q(){var e,a,n,U,z,M,G;const{themeStretch:Q}=(0,q.A)(),{pathname:$}=(0,N.zy)(),ee=$.includes("employee"),[ae,ne]=(0,l.useState)(!1),[le,te]=(0,l.useState)([]),[oe,ie]=(0,l.useState)(),[se,re]=(0,l.useState)(!1),[de,ce]=(0,l.useState)(""),[ue,me]=(0,l.useState)("new"),[ve,pe]=(0,l.useState)(null),[he,xe]=(0,l.useState)(null),{currentTab:ge,onChangeTab:je}=(0,X.A)("all"),Ae=(0,N.Zp)(),{enqueueSnackbar:fe}=(0,D.dh)(),{dense:be,page:ye,order:Ce,orderBy:we,rowsPerPage:Se,setPage:_e,selected:ke,setSelected:De,onSort:Ne,onChangeDense:Pe,onChangePage:Fe,onChangeRowsPerPage:Ie}=(0,R.Ay)({defaultOrderBy:"createDate"}),[qe,Re]=(0,l.useState)([]),[Le,Ee]=(0,l.useState)(),[Oe,Te]=(0,l.useState)({}),[Ve,Ye]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{var e;const n=await T.A.get("".concat(ee?"employee":"user","/exists/contacts"));var a;console.log(n,"all user api"),null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.status?te(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.users):console.log("Status False in API")}catch(n){console.log(n,"all user api error")}})()}),[]);const Be=async()=>{try{var e;const n=await T.A.get("".concat(ee?"employee":"user","/added/contacts"));var a;if(console.log(n,"exist users api"),null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.status)Re(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.currentUser);else console.log("Status False in API")}catch(n){console.log(n,"all your user api error")}};(0,l.useEffect)((()=>{Be()}),[]);const Ue=async(e,a,n)=>{try{var l;const t=new FormData;t.append("name","".concat(a," ").concat(n));const o=await T.A.post("".concat(ee?"employee":"user","/contact/add/").concat(e),t);console.log(o,"add user in list api"),null!==o&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&l.status?(fe("User Add In Your List",{variant:"success"}),Be()):console.log("Status False in API")}catch(t){console.log(t,"add user in list api error")}},ze=(0,l.useRef)(""),Me=t.Ik().shape({fname:t.Yj().required("First Name is required"),lname:t.Yj().required("Last Name is required"),email:t.Yj().required("Email is required"),phone:t.Yj().min(11).max(15).required("Phone number min 11 digit and max 15 digit is required")}),Ge=(0,l.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),Je=(0,P.mN)({resolver:(0,F.t)(Me),defaultValues:Ge}),{reset:We,watch:Ze,setValue:Xe,handleSubmit:He,formState:{isSubmitting:Ke,errors:Qe}}=Je,$e=(Ze(),e=>{const{name:a,value:n}=null===e||void 0===e?void 0:e.target;Te((e=>({...e,[a]:n})))});console.log(Oe,"UpdatedData");const ea=function(e){var a;let{tableData:n,comparator:l,filterName:t,filterStatus:o,filterService:i,filterStartDate:s,filterEndDate:r}=e;const d=null===(a=n)||void 0===a?void 0:a.map(((e,a)=>[e,a]));d.sort(((e,a)=>{const n=l(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),n=d.map((e=>e[0])),t&&(n=n.filter((e=>{var a,n,l;return-1!==(null===(a=e.Contact)||void 0===a?void 0:a.first_name.toLowerCase().indexOf(t.toLowerCase()))||-1!==(null===(n=e.Contact)||void 0===n?void 0:n.last_name.toLowerCase().indexOf(t.toLowerCase()))||-1!==(null===(l=e.Contact)||void 0===l?void 0:l.email.toLowerCase().indexOf(t.toLowerCase()))})));"all"!==o&&(n=n.filter((e=>{var a;return(null===(a=e.Contact)||void 0===a?void 0:a.job_title)===o})));"new"!==i&&(n=n.filter((e=>e.status===i)));s&&r&&(n=n.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=r.getTime())));return n}({tableData:qe,comparator:(0,R.hz)(Ce,we),filterName:de,filterService:ue,filterStatus:ge,filterStartDate:ve,filterEndDate:he}),aa=be?56:76,na=!ea.length&&!!de||!ea.length&&!!ge||!ea.length&&!!ue||!ea.length&&!!he||!ea.length&&!!ve;return(0,J.jsx)(I.A,{title:"Add Contact",children:(0,J.jsxs)(o.A,{maxWidth:!Q&&"lg",children:[(0,J.jsx)(L.A,{heading:"Add Contact",links:[{name:"Dashboard",href:E.nB.root},{name:"Add Contact"}],action:(0,J.jsx)(i.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,J.jsx)(s.A,{variant:"contained",onClick:()=>re(!0),startIcon:(0,J.jsx)(O.A,{icon:"material-symbols:contact-page-rounded"}),children:"Add Contact"})})}),(0,J.jsx)(r.A,{sx:{mb:5},children:(0,J.jsxs)(d.A,{sx:{px:2},children:[(0,J.jsx)(i.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,J.jsx)(c.A,{sx:{my:1,width:1},ref:ze,label:"Search by first Name, Last Name & Email",value:(null===ze||void 0===ze||null===(e=ze.current)||void 0===e?void 0:e.value)||"",onChange:e=>{const a=e.target.value.toLowerCase();if(ze.current.value=a,console.log(ze.current.value,"filterValue"),""===ze.current.value)ie([]);else{const e=le.filter((e=>(null===e||void 0===e?void 0:e.first_name.toLowerCase().includes(a))||(null===e||void 0===e?void 0:e.last_name.toLowerCase().includes(a))||(null===e||void 0===e?void 0:e.email.toLowerCase().includes(a))));console.log(e,"filteredData"),ie(e)}},size:"small"})}),(0,J.jsx)(u.A,{}),(null===oe||void 0===oe?void 0:oe.length)>0&&oe.map(((e,a)=>(0,J.jsxs)(i.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,J.jsxs)(m.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,J.jsx)(O.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)]}),(0,J.jsx)(s.A,{variant:"contained",onClick:()=>Ue(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name),startIcon:(0,J.jsx)(O.A,{icon:"material-symbols:contact-page-rounded"}),children:"Add in your list"})]},a)))]})}),(0,J.jsx)(u.A,{}),(0,J.jsxs)(r.A,{children:[(0,J.jsxs)(v.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ge,onChange:je,sx:{px:2,bgcolor:"background.neutral"},children:[(0,J.jsx)(p.A,{disableRipple:!0,value:"all",label:(0,J.jsx)(i.A,{spacing:1,direction:"row",alignItems:"center",children:(0,J.jsx)("div",{children:"All"})})},"all"),(0,J.jsx)(p.A,{disableRipple:!0,value:"real_state_agent",label:(0,J.jsx)(i.A,{spacing:1,direction:"row",alignItems:"center",children:(0,J.jsx)("div",{children:"Real State Agents"})})},"real_state_agent"),(0,J.jsx)(p.A,{disableRipple:!0,value:"mortage_broker",label:(0,J.jsx)(i.A,{spacing:1,direction:"row",alignItems:"center",children:(0,J.jsx)("div",{children:"Mortage Broker"})})},"mortage_broker"),(0,J.jsx)(p.A,{disableRipple:!0,value:"notray",label:(0,J.jsx)(i.A,{spacing:1,direction:"row",alignItems:"center",children:(0,J.jsx)("div",{children:"Notray"})})},"notray")]}),(0,J.jsx)(u.A,{}),(0,J.jsx)(B.F5,{filterName:de,filterService:ue,filterStartDate:ve,filterEndDate:he,onFilterName:e=>{ce(e),_e(0)},onFilterService:e=>{me(e.target.value)},onFilterStartDate:e=>{pe(e)},onFilterEndDate:e=>{xe(e)}}),(0,J.jsx)(V.A,{children:(0,J.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,J.jsxs)(x.A,{size:be?"small":"medium",children:[(0,J.jsx)(Y.er,{order:Ce,orderBy:we,headLabel:K,rowCount:qe.length,numSelected:ke.length,onSort:Ne}),(0,J.jsxs)(g.A,{children:[ea.slice(ye*Se,ye*Se+Se).map((e=>(0,J.jsx)(W,{row:e,onShareRow:()=>{return a=e.id,void Ae(ee?"/employee/usershared/".concat(a):"/dashboard/usershared/".concat(a));var a},onEditRow:()=>(async e=>{console.log(e,"edit row"),Ee(e),Ye(!0),re(!0)})(e),onDeleteRow:()=>(async e=>{try{var a;const l=await T.A.get("".concat(ee?"employee":"user","/remove/contact/").concat(e));var n;console.log(l,"contact delete"),null!==l&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.status?(fe(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message,{variant:"success"}),Be()):console.log("contact delete")}catch(l){console.log(l,"contact delete error")}})(null===e||void 0===e?void 0:e.id)},e.id))),(0,J.jsx)(Y.dO,{height:aa,emptyRows:(0,R.xl)(ye,Se,qe.length)}),(0,J.jsx)(Y.Sm,{isNotFound:na})]})]})})}),(0,J.jsx)(d.A,{sx:{position:"relative"},children:(0,J.jsx)(j.A,{rowsPerPageOptions:[5,10,25],component:"div",count:ea.length,rowsPerPage:Se,page:ye,onPageChange:Fe,onRowsPerPageChange:Ie})})]}),(0,J.jsx)(A.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:se,onClose:()=>{re(!1),Ye(!1)},closeAfterTransition:!0,slots:{backdrop:f.A},slotProps:{backdrop:{timeout:500}},children:(0,J.jsx)(b.A,{in:se,children:(0,J.jsx)(d.A,{sx:H,children:Ve?(0,J.jsxs)(y.Ay,{item:!0,xs:12,md:12,children:[(0,J.jsx)(m.A,{variant:"h5",sx:{mb:2},children:"Edit Contact Details"}),(0,J.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,J.jsx)(c.A,{name:"fname",label:"First Name",value:null===Oe||void 0===Oe?void 0:Oe.fname,defaultValue:null===Le||void 0===Le||null===(a=Le.Contact)||void 0===a?void 0:a.first_name,onChange:e=>$e(e)}),(0,J.jsx)(c.A,{name:"lname",label:"Last Name",value:null===Oe||void 0===Oe?void 0:Oe.lname,defaultValue:null===Le||void 0===Le||null===(n=Le.Contact)||void 0===n?void 0:n.last_name,onChange:e=>$e(e)}),(0,J.jsx)(c.A,{name:"phone",label:"Phone Nunber",value:null===Oe||void 0===Oe?void 0:Oe.phone,defaultValue:null===Le||void 0===Le||null===(U=Le.Contact)||void 0===U?void 0:U.phone,onChange:e=>$e(e)}),(0,J.jsx)(c.A,{name:"address",label:"Address",value:null===Oe||void 0===Oe?void 0:Oe.address,defaultValue:null===Le||void 0===Le||null===(z=Le.Contact)||void 0===z?void 0:z.address,onChange:e=>$e(e)}),(0,J.jsx)(c.A,{name:"company",label:"Company Name",value:null===Oe||void 0===Oe?void 0:Oe.company,defaultValue:null===Le||void 0===Le||null===(M=Le.Contact)||void 0===M?void 0:M.company_name,onChange:e=>$e(e)}),(0,J.jsxs)(C.A,{fullWidth:!0,children:[(0,J.jsx)(w.A,{id:"demo-simple-select-label",children:"Select Job Title"}),(0,J.jsxs)(S.A,{name:"job",labelId:"demo-simple-select-label",id:"demo-simple-select",value:null===Oe||void 0===Oe?void 0:Oe.job,label:"Select Job Title",onChange:e=>$e(e),defaultValue:null===Le||void 0===Le||null===(G=Le.Contact)||void 0===G?void 0:G.job_title,children:[(0,J.jsx)(_.A,{value:"real_state_agent",children:"RealState Agent"}),(0,J.jsx)(_.A,{value:"mortage_broker",children:"Mortage Broker"}),(0,J.jsx)(_.A,{value:"notray",children:"Notray"})]})]})]}),(0,J.jsx)(i.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,J.jsx)(k.A,{type:"button",variant:"contained",loading:ae,onClick:()=>(async e=>{ne(!0);try{var a,n,l,t,o,i,s;const r=new FormData;r.append("name","".concat(Oe.fname," ").concat(Oe.lname)||"".concat(null===Le||void 0===Le||null===(a=Le.Contact)||void 0===a?void 0:a.first_name," ").concat(null===Le||void 0===Le||null===(n=Le.Contact)||void 0===n?void 0:n.last_name)),r.append("phone",Oe.phone||(null===Le||void 0===Le||null===(l=Le.Contact)||void 0===l?void 0:l.phone)),r.append("address",Oe.address||(null===Le||void 0===Le||null===(t=Le.Contact)||void 0===t?void 0:t.address)),r.append("company_name",Oe.company||(null===Le||void 0===Le||null===(o=Le.Contact)||void 0===o?void 0:o.company_name)),r.append("job_title",Oe.job||(null===Le||void 0===Le||null===(i=Le.Contact)||void 0===i?void 0:i.job_title));const d=await T.A.post("".concat(ee?"employee":"user","/update/contact/").concat(e),r);console.log(d,"update user api"),null!==d&&void 0!==d&&null!==(s=d.data)&&void 0!==s&&s.status?(fe("Contact Updated ",{variant:"success"}),ne(!1),Ye(!1),Te({}),re(!1),Be()):(console.log("Status False in API"),ne(!1))}catch(r){ne(!1),console.log(r,"add user in list api error")}})(null===Le||void 0===Le?void 0:Le.id),children:"Update Contact"})})]}):(0,J.jsx)(Z.A,{getAllYourUser:Be,setOpen:re,close:re})})})})]})})}}}]);