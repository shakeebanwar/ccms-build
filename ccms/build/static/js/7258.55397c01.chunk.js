"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[7258],{67258:(e,l,o)=>{o.r(l),o.d(l,{default:()=>T});var n=o(9950),t=o(79537),i=o(48089),a=o(12257),r=o(75165),s=o(6368),c=o(82053),d=o(1320),u=o(15769),h=o(34075),f=o(91434),g=o(29031),v=o(13564),p=o(26689),x=o(89791),m=o(90260),A=o(46765),j=o(86608),w=o(38861),C=o(30744),S=o(66075),b=o(44185),y=o(63358),_=o(72870),k=o(12480),D=o(6768),P=o(32741),F=o(95074),N=o(98594),B=o(44414);const E=[{id:"file_no",label:"File No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"updated_at",label:"Date",align:"left",width:600},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""},{id:""},{id:""}];function T(){const{themeStretch:e}=(0,j.A)(),l=(0,v.Zp)(),{enqueueSnackbar:o}=(0,g.dh)(),{dense:T,page:O,order:R,orderBy:L,rowsPerPage:I,setPage:M,selected:z,setSelected:U,onSort:V,onChangeDense:Z,onChangePage:W,onChangeRowsPerPage:q}=(0,w.Ay)({defaultOrderBy:"createDate"}),[J,G]=(0,n.useState)([]),[H,K]=(0,n.useState)(""),[Q,X]=(0,n.useState)("new"),[Y,$]=(0,n.useState)(null),[ee,le]=(0,n.useState)(null),{currentTab:oe,onChangeTab:ne}=(0,A.A)("all"),[te,ie]=(0,n.useState)("Title Insurance"),[ae,re]=(0,n.useState)(!1),[se,ce]=(0,n.useState)(""),[de,ue]=(0,n.useState)(),[he,fe]=(0,n.useState)(),[ge,ve]=(0,n.useState)([]),[pe,xe]=(0,n.useState)(null);Boolean(pe);(0,n.useEffect)((()=>{(async()=>{re(!0);try{var e;const l=await P.A.get("employee/users/list");console.log(l,"all user"),ve(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.files),console.log(l,"autofill")}catch(l){console.log(l,"autofill")}finally{re(!1)}})()}),[]);const{Employeefile:me}=(0,C.d4)((e=>e.EmployeeFile));console.log(me,"file details"),(0,n.useEffect)((()=>{null!==me&&void 0!==me&&me.length&&de&&G(me)}),[me]);const Ae=function(e){var l;let{tableData:o,comparator:n,filterName:t,filterStatus:i,filterService:a,filterStartDate:r,filterEndDate:s}=e;const c=null===(l=o)||void 0===l?void 0:l.map(((e,l)=>[e,l]));c.sort(((e,l)=>{const o=n(e[0],l[0]);return 0!==o?o:e[1]-l[1]})),o=c.map((e=>e[0])),t&&(o=o.filter((e=>-1!==e.file_name.toLowerCase().indexOf(t.toLowerCase())||-1!==e.file_no.toLowerCase().indexOf(t.toLowerCase()))));"all"!==i&&(o=o.filter((e=>e.status===i)));"new"!==a&&(o=o.filter((e=>e.status===a)));r&&s&&(o=o.filter((e=>e.updated_at.getTime()>=r.getTime()&&e.updated_at.getTime()<=s.getTime())));return o}({tableData:J,comparator:(0,w.hz)(R,L),filterName:H,filterService:Q,filterStatus:oe,filterStartDate:Y,filterEndDate:ee}),je=T?56:76,we=!Ae.length&&!!H||!Ae.length&&!!oe||!Ae.length&&!!Q||!Ae.length&&!!ee||!Ae.length&&!!Y;return(0,B.jsxs)(t.A,{maxWidth:!e&&"lg",children:[ae&&(0,B.jsx)(F.A,{}),(0,B.jsxs)(i.A,{sx:{p:3},children:[(0,B.jsx)(y.A,{heading:"Files",links:[{name:"Dashboard",href:m.nB.root},{name:"Files"}],action:(0,B.jsx)(a.A,{gap:1,direction:"row",children:(0,B.jsx)(r.A,{variant:"contained",component:p.N_,to:m.i8.file.addfile,startIcon:(0,B.jsx)(S.A,{icon:"clarity:form-line"}),children:"New File"})})}),(0,B.jsx)(a.A,{gap:1,sx:{width:"50%"},children:(0,B.jsx)(x.Ay,{options:null===ge||void 0===ge?void 0:ge.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:he,onChange:e=>{console.log(e,"newFileId"),(0,C.JD)((0,N.oc)(e.value)),ue(e.value),fe(e)},isSearchable:"true",placeholder:"Select a User",className:"w-100 py-3"})}),(0,B.jsx)(s.A,{sx:{p:2},children:(0,B.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:te.label})}),(0,B.jsx)(k.F5,{filterName:H,filterService:Q,filterStartDate:Y,filterEndDate:ee,onFilterName:e=>{K(e),M(0)},onFilterService:e=>{X(e.target.value)},onFilterStartDate:e=>{$(e)},onFilterEndDate:e=>{le(e)}}),(0,B.jsx)(b.A,{children:(0,B.jsx)(d.A,{sx:{minWidth:800,position:"relative"},children:(0,B.jsxs)(u.A,{size:T?"small":"medium",children:[(0,B.jsx)(_.er,{order:R,orderBy:L,headLabel:E,rowCount:J.length,numSelected:z.length,onSort:V}),(0,B.jsxs)(h.A,{children:[Ae.slice(O*I,O*I+I).map((e=>(0,B.jsx)(D.A,{row:e,onEditRow:()=>(e=>{l(m.i8.file.editfile(null===e||void 0===e?void 0:e.id),{state:e})})(e),onViewRow:()=>(e=>{l(m.i8.file.filepreview(null===e||void 0===e?void 0:e.id),{state:e})})(e),onDeleteRow:()=>{return l=e.id,re(!0),void P.A.delete("user/user_file/".concat(l)).then((e=>{if(console.log("response",e),re(!1),200===e.status||201===e.status){const e=J.filter((e=>e.id!==l));U([]),G(e),o("Delete Successfully")}})).catch((e=>{re(!1),e.errors&&Object.keys(e.errors).map((l=>o(e.errors[l][0],{variant:"error"})))}));var l}},e.id))),(0,B.jsx)(_.dO,{height:je,emptyRows:(0,w.xl)(O,I,J.length)}),(0,B.jsx)(_.Sm,{isNotFound:we})]})]})})}),(0,B.jsx)(s.A,{sx:{position:"relative"},children:(0,B.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ae.length,rowsPerPage:I,page:O,onPageChange:W,onRowsPerPageChange:q})})]})]})}},6768:(e,l,o)=>{o.d(l,{A:()=>m});var n=o(9950),t=o(13564),i=o(26689),a=o(14857),r=o(9213),s=o(21671),c=o(93038),d=o(23266),u=o(75165),h=o(97591),f=o(90260),g=o(34437),v=(o(22704),o(33949),o(66075)),p=o(72870),x=o(44414);function m(e){var l,o,m,A,j,w,C,S,b,y;let{row:_,selected:k,onSelectRow:D,onAssign:P,onViewRow:F,onDocumentUpload:N,onDownloadDocument:B,onDeleteRow:E,onShareRow:T,onEditRow:O,onOrderContin:R,onStatusChange:L}=e;(0,a.A)();const{pathname:I}=(0,t.zy)(),M=(I.includes("admin"),(0,t.Zp)());console.log(_,"row");const{updated_at:z,DummyData:U,transaction_type:V,purchase_price:Z,file_no:W,file_name:q,id:J,_count:G,user:H}=_,[K,Q]=(0,n.useState)(null),X=Boolean(K),[Y,$]=(0,n.useState)(null),ee=()=>{$(null)},le=()=>{M("/dashboard/filepreview/".concat(null===_||void 0===_?void 0:_.id),{state:{row:_}})};return(0,x.jsxs)(r.A,{selected:k,sx:{transition:"background-color 0.3s ease, color 0.3s ease","&:hover":{backgroundColor:"#403390",color:"white","& .MuiTableCell-root":{color:"white"},"& .MuiButton-root":{backgroundColor:"#fff",color:"#403390"},"& .MuiMenuItem-root":{color:"white"}}},children:[(D||k)&&(0,x.jsx)(s.A,{padding:"checkbox",children:(0,x.jsx)(c.A,{checked:k,onClick:D})}),(0,x.jsx)(s.A,{sx:{color:"#DD9A19"},align:"left",onClick:le,children:W}),(0,x.jsx)(s.A,{align:"left",onClick:le,children:q}),(0,x.jsx)(s.A,{align:"left",onClick:le,children:null===U||void 0===U||null===(l=U.subject_premise)||void 0===l?void 0:l.property_location}),(0,x.jsx)(s.A,{align:"left",onClick:le,children:z&&(0,g.ts)(z)}),(0,x.jsxs)(s.A,{align:"left",onClick:le,children:[(null===U||void 0===U||null===(o=U.buyers)||void 0===o?void 0:o.length)>0&&(null===U||void 0===U||null===(m=U.buyers[0])||void 0===m?void 0:m.first_name)," ",(null===U||void 0===U||null===(A=U.buyers)||void 0===A?void 0:A.length)>0&&(null===U||void 0===U||null===(j=U.buyers[0])||void 0===j?void 0:j.last_name)]}),(0,x.jsxs)(s.A,{align:"left",onClick:le,children:[(null===U||void 0===U||null===(w=U.sellers)||void 0===w?void 0:w.length)>0&&(null===U||void 0===U||null===(C=U.sellers[0])||void 0===C?void 0:C.first_name)," ",(null===U||void 0===U||null===(S=U.sellers)||void 0===S?void 0:S.length)>0&&(null===U||void 0===U||null===(b=U.sellers[0])||void 0===b?void 0:b.last_name)]}),(0,x.jsx)(s.A,{align:"left",onClick:le,children:V}),(0,x.jsx)(s.A,{align:"left",onClick:le,children:null===U||void 0===U||null===(y=U.lender)||void 0===y?void 0:y.organization}),(0,x.jsx)(s.A,{align:"left",children:(0,x.jsx)(d.A,{onClick:()=>{E(),ee()},sx:{color:"error.main"},children:(0,x.jsx)(v.A,{icon:"eva:trash-2-outline"})})}),(0,x.jsx)(s.A,{align:"left",children:R&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.A,{variant:"contained","aria-controls":X?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":X?"true":void 0,onClick:e=>{Q(e.currentTarget)},sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:(null===G||void 0===G?void 0:G.orders)>0?"Ordered":"Order"}),(0,x.jsxs)(h.A,{id:"basic-menu",anchorEl:K,open:X,onClose:()=>{Q(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.titleInsurance,"/").concat(J),children:"Title Insurance"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.coopLienSearch,"/").concat(J),children:"Coop Lien Search"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.eagle9Policy,"/").concat(J),children:"Eagle 9 Policy"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.coopCondoOfferinPlans,"/").concat(J),children:"Coop/Condo Offering Plans"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.uccCreateFile,"/").concat(J),children:"UCC - Create/File"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.exchange1031,"/").concat(J),children:"1031 Exchange"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.acrisETax,"/").concat(J),children:"Acris E-Tax Forms"}),(0,x.jsx)(d.A,{component:i.N_,to:"".concat(f.nB.orders.otherSearches,"/").concat(J),children:"Other Searches"})]})]})}),(0,x.jsx)(s.A,{align:"right",children:(0,x.jsx)(p.ZE,{open:Y,onOpen:e=>{$(e.currentTarget)},onClose:ee,actions:(0,x.jsxs)(x.Fragment,{children:[F&&(0,x.jsxs)(d.A,{onClick:()=>{F(),ee()},children:[(0,x.jsx)(v.A,{icon:"tabler:eye-filled"}),"View"]}),T&&(0,x.jsxs)(d.A,{onClick:()=>{T(),ee()},children:[(0,x.jsx)(v.A,{icon:"material-symbols:share"}),"Share"]})]})})})]})}}}]);