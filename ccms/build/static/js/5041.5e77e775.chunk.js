"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[5041,836],{25041:(e,o,r)=>{r.r(o),r.d(o,{default:()=>C});var a=r(60666),t=r(9950),n=r(29031),i=r(9449),l=r(68654),d=r(48711),s=r(28095),c=r(60899),u=r(48089),v=r(45180),p=r(6368),m=r(12257),h=r(24516),x=r(82053),b=r(73878),f=r(41397),y=(r(90260),r(52401)),A=r(32741),g=r(30818),j=r(44414);const C=()=>{var e,o;const r=(0,b.wA)(),{enqueueSnackbar:C}=(0,n.dh)(),{file:w}=(0,b.d4)((e=>e.File)),[S,_]=(0,t.useState)();console.log(w,"file details"),(0,t.useEffect)((()=>{r((0,g.xg)())}),[]);const k=(0,f.debounce)((e=>{_(e)}),300),M=(0,t.useMemo)((()=>{if(null===S||void 0===S||!S.trim())return w.map((e=>{var o,r;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(r=e.orders[0])||void 0===r?void 0:r.id)}}));const e=S.toLowerCase();return w.filter((o=>{var r,a,t,n;return null!==(r=null===o||void 0===o||null===(a=o.file_name)||void 0===a?void 0:a.toLowerCase().includes(e))&&void 0!==r&&r||null!==(t=null===o||void 0===o||null===(n=o.file_no)||void 0===n?void 0:n.toLowerCase().includes(e))&&void 0!==t&&t})).map((e=>{var o,r;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(r=e.orders[0])||void 0===r?void 0:r.id)}}))}),[S,w]),N=a.Ik().shape({order:a.Yj().required("Select Order"),date:a.Yj().required("Date is required"),notes:a.Yj(),is_active:a.zM().oneOf([!0],"Status is required")}),R=(0,t.useMemo)((()=>({order:"",date:"",notes:"",is_active:!1,price:""})),[]),P=(0,i.mN)({resolver:(0,l.t)(N),defaultValues:R}),{reset:T,watch:F,setValue:H,handleSubmit:I,formState:{isSubmitting:q,errors:z}}=P,O=F();console.log(O,"error");return(0,j.jsx)(y.Op,{methods:P,onSubmit:I((async e=>{console.log(e,"data");try{const o=new FormData;o.append("payment_date",(null===e||void 0===e?void 0:e.date)+" 00:00:00"),o.append("payment_note",null===e||void 0===e?void 0:e.notes),o.append("is_paid",null!==e&&void 0!==e&&e.is_active?1:0),await A.A.post("/admin/change/payment_status/".concat(null===e||void 0===e?void 0:e.order),o).then((()=>{C("Status Paid Success"),H("order",""),T()}))}catch(o){if(console.error(o,"error"),o.errors){Object.keys(o.errors).map((e=>C(o.errors[e][0],{variant:"error"})))}}})),children:(0,j.jsx)(c.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,j.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,j.jsxs)(u.A,{sx:{p:3},children:[(0,j.jsx)(v.A,{title:"Add Payment Status"}),(0,j.jsxs)(p.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},mt:2},children:[(0,j.jsxs)(m.A,{children:[(0,j.jsx)(d.Ay,{options:M,onInputChange:k,onChange:e=>{var o;const r=e.value;H("order",r);const a=null===w||void 0===w?void 0:w.find((e=>{var o,a;return(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(a=e.orders[0])||void 0===a?void 0:a.id)==r})),t=null===a||void 0===a||null===(o=a.orders[0])||void 0===o?void 0:o.Total_Price;H("price",t)},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-5",styles:{control:(e,o)=>({...e,backgroundColor:"white",borderRadius:"8px",border:o.isFocused?"2px solid #1976d2":"1px solid #ced4da",boxShadow:o.isFocused?"0 0 5px rgba(25, 118, 210, 0.5)":"none","&:hover":{borderColor:"#1976d2"},minHeight:"48px"}),menu:e=>({...e,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",zIndex:9999}),option:(e,o)=>({...e,backgroundColor:o.isFocused?"#f5f5f5":"white",color:"black",padding:"10px 15px","&:active":{backgroundColor:"#e0e0e0"}}),placeholder:e=>({...e,color:"#6c757d",fontSize:"16px"}),singleValue:e=>({...e,color:"#495057",fontSize:"16px"}),dropdownIndicator:(e,o)=>({...e,color:o.isFocused?"#1976d2":"#6c757d","&:hover":{color:"#1976d2"}}),indicatorSeparator:e=>({...e,display:"none"})}}),""===(null===O||void 0===O?void 0:O.order)&&(0,j.jsx)(h.A,{sx:{color:"red"},children:null===z||void 0===z||null===(e=z.order)||void 0===e?void 0:e.message})]}),(0,j.jsx)(y.o3,{name:"price",label:"Price",disabled:!0}),(0,j.jsx)(y.o3,{name:"date",type:"date"}),(0,j.jsx)(y.o3,{name:"notes",label:"Notes",multi:!0}),(0,j.jsx)(y.b8,{name:"is_active",labelPlacement:"start",label:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(x.A,{variant:"h6",sx:{mb:.5},children:"Paid"})}),sx:{mx:0,width:1,justifyContent:"space-between"}}),(null===z||void 0===z?void 0:z.is_active)&&(0,j.jsx)(h.A,{sx:{color:"red"},children:null===z||void 0===z||null===(o=z.is_active)||void 0===o?void 0:o.message})]}),(0,j.jsx)(m.A,{alignItems:"flex-end",sx:{mt:3},children:(0,j.jsx)(s.A,{type:"submit",variant:"contained",loading:q,children:"Save Changes"})})]})})})})}},45180:(e,o,r)=>{r.d(o,{A:()=>A});var a=r(98587),t=r(58168),n=r(9950),i=r(2803),l=r(5747),d=r(82053),s=r(79859),c=r(7951),u=r(37665);function v(e){return(0,u.A)("MuiCardHeader",e)}const p=(0,r(44245).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var m=r(44414);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,o)=>(0,t.A)({["& .".concat(p.title)]:o.title,["& .".concat(p.subheader)]:o.subheader},o.root)})({display:"flex",alignItems:"center",padding:16}),b=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,o)=>o.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,o)=>o.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,o)=>o.content})({flex:"1 1 auto"}),A=n.forwardRef((function(e,o){const r=(0,s.A)({props:e,name:"MuiCardHeader"}),{action:n,avatar:c,className:u,component:p="div",disableTypography:A=!1,subheader:g,subheaderTypographyProps:j,title:C,titleTypographyProps:w}=r,S=(0,a.A)(r,h),_=(0,t.A)({},r,{component:p,disableTypography:A}),k=(e=>{const{classes:o}=e;return(0,l.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},v,o)})(_);let M=C;null==M||M.type===d.A||A||(M=(0,m.jsx)(d.A,(0,t.A)({variant:c?"body2":"h5",className:k.title,component:"span",display:"block"},w,{children:M})));let N=g;return null==N||N.type===d.A||A||(N=(0,m.jsx)(d.A,(0,t.A)({variant:c?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},j,{children:N}))),(0,m.jsxs)(x,(0,t.A)({className:(0,i.A)(k.root,u),as:p,ref:o,ownerState:_},S,{children:[c&&(0,m.jsx)(b,{className:k.avatar,ownerState:_,children:c}),(0,m.jsxs)(y,{className:k.content,ownerState:_,children:[M,N]}),n&&(0,m.jsx)(f,{className:k.action,ownerState:_,children:n})]}))}))},48089:(e,o,r)=>{r.d(o,{A:()=>x});var a=r(58168),t=r(98587),n=r(9950),i=r(2803),l=r(5747),d=r(7951),s=r(79859),c=r(70693),u=r(37665);function v(e){return(0,u.A)("MuiCard",e)}(0,r(44245).A)("MuiCard",["root"]);var p=r(44414);const m=["className","raised"],h=(0,d.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,o)=>o.root})((()=>({overflow:"hidden"}))),x=n.forwardRef((function(e,o){const r=(0,s.A)({props:e,name:"MuiCard"}),{className:n,raised:d=!1}=r,c=(0,t.A)(r,m),u=(0,a.A)({},r,{raised:d}),x=(e=>{const{classes:o}=e;return(0,l.A)({root:["root"]},v,o)})(u);return(0,p.jsx)(h,(0,a.A)({className:(0,i.A)(x.root,n),elevation:d?8:void 0,ref:o,ownerState:u},c))}))}}]);