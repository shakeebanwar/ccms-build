"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[789,676],{36571:(e,o,n)=>{n.d(o,{v:()=>l});const l=["Albany","Allegany","Bronx","Broome","Cattaraugus","Cayuga","Chautauqua","Chemung","Chenango","Clinton","Columbia","Cortland","Delaware","Dutchess","Erie","Essex","Franklin","Fulton","Genesee","Greene","Hamilton","Herkimer","Jefferson","Kings","Lewis","Livingston","Madison","Monroe","Montgomery","Nassau","New York","Niagara","Oneida","Onondaga","Ontario","Orange","Orleans","Oswego","Otsego","Putnam","Queens","Rensselaer","Richmond","Rockland","Saratoga","Schenectady","Schoharie","Schuyler","Seneca","St. Lawrence","Steuben","Suffolk","Sullivan","Tioga","Tompkins","Ulster","Warren","Washington","Wayne","Westchester","Wyoming","Yates"]},48330:(e,o,n)=>{n.r(o),n.d(o,{default:()=>$});var l=n(60899),t=n(9950),a=n(8279),i=n(93591),s=n(86608),d=n(60666),r=n(29031),c=n(9449),u=n(68654),v=n(48711),h=n(28095),p=n(48089),x=n(45180),m=n(6368),g=n(12257),j=n(24516),f=n(25979),b=n(3788),A=n(93523),y=n(23266),C=n(82053),S=n(73878),w=n(41397),_=(n(90260),n(52401)),k=n(32741),F=n(30818),O=n(25333),I=n(8145),W=n(2599),P=n(53256),T=n(36571),N=n(53984),q=n(73447),G=n(57191),M=n(44414);const R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},V={control:e=>({...e,background:"white",borderColor:"lightgray",boxShadow:"none","&:hover":{borderColor:"gray"}}),menu:e=>({...e,background:"white",zIndex:9999}),option:(e,o)=>({...e,background:o.isSelected?"#007bff":"white",color:o.isSelected?"white":"black","&:hover":{background:"#f0f0f0"}})},z=e=>{let{setOpen:o,open:n}=e;const{enqueueSnackbar:a}=(0,r.dh)(),[i,s]=(0,t.useState)(!1),[d,u]=(0,t.useState)([]),[p,x]=(0,t.useState)(!1),[j,f]=(0,t.useState)({name:"",note:"",gov_fee:"",total_price:"",is_added:!1}),b=(e,o)=>{f((n=>({...n,[e]:o})))};console.log(j,"formValues");const A=(0,c.mN)(),{setValue:y,getValues:S}=A;return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(N.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,onClose:()=>o(!1),closeAfterTransition:!0,slots:{backdrop:q.A},slotProps:{backdrop:{timeout:500}},children:(0,M.jsx)(G.A,{in:n,children:(0,M.jsx)(m.A,{sx:R,children:(0,M.jsx)(_.Op,{methods:A,children:(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(C.A,{variant:"h5",sx:{mb:2},children:"Add New Additions"}),(0,M.jsx)(m.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,M.jsx)(v.Ay,{isMulti:!0,options:null===T.v||void 0===T.v?void 0:T.v.map((e=>({label:e,value:e}))),value:d,styles:V,onChange:e=>{u(e);const o=null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value));y("counies",o)},placeholder:"Select Counties"})}),(0,M.jsxs)(m.A,{sx:{maxWidth:"100%",margin:"auto",p:2},children:[(0,M.jsxs)(g.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsx)(I.A,{label:"Title",fullWidth:!0,value:j.title,onChange:e=>b("name",e.target.value)}),(0,M.jsx)(O.A,{onClick:()=>x(!p),color:"primary",children:p?(0,M.jsx)(W.A,{}):(0,M.jsx)(P.A,{})})]}),p&&(0,M.jsxs)(m.A,{sx:{mt:2,display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,M.jsx)(I.A,{label:"Notes",multiline:!0,fullWidth:!0,value:j.note,onChange:e=>b("note",e.target.value)}),(0,M.jsx)(I.A,{label:"Gov Fee(s)",fullWidth:!0,value:j.gov_fee,onChange:e=>b("gov_fee",e.target.value)}),(0,M.jsx)(I.A,{label:"Total Price",fullWidth:!0,value:j.total_price,onChange:e=>b("total_price",e.target.value)})]})]}),(0,M.jsxs)(g.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:[(0,M.jsx)(h.A,{type:"button",variant:"contained",loading:i,onClick:async()=>{try{s(!0);const e={county_names:S("counies"),additional_charges:[j]};await k.A.post("admin/additional_charges/add_to_prices",e).then((e=>{if(console.log(e,"Add new addtions"),s(!1),e.data.status){const n=e.data;a(n.message),o(!1)}}))}catch(e){s(!1),console.log(e,"file Upload error")}},children:"Save"}),(0,M.jsx)(h.A,{type:"button",variant:"contained",onClick:()=>o(!1),children:"Cancel"})]})]})})})})})})},D=()=>{const{enqueueSnackbar:e}=(0,r.dh)(),[o,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)({additions:"",county:""}),[s,d]=(0,t.useState)([]),[u,v]=(0,t.useState)(!1),[j,f]=(0,t.useState)([]),b=(0,c.mN)(),{reset:A,handleSubmit:y,setValue:S,watch:w}=b,F=w();console.log(a,"values");const N=async o=>{try{n(!0),await k.A.get("admin/additional_charges/get_price/".concat(o)).then((o=>{if(console.log(o,"get County"),n(!1),o.data.status){var l,t;const e=o.data,n=null===e||void 0===e||null===(l=e.additional_prices)||void 0===l||null===(t=l.additional_charges)||void 0===t?void 0:t.map((e=>({...e,is_added:e.is_added||!1})));f(n),d(n)}else{var a;d([]),e(null===(a=o.data)||void 0===a?void 0:a.message)}}))}catch(l){n(!1),console.log(l,"get County error")}};(0,t.useEffect)((()=>{null!==F&&void 0!==F&&F.county&&i((e=>({...e,county:""}))),(null===s||void 0===s?void 0:s.length)>0&&i((e=>({...e,additions:""})))}),[null===F||void 0===F?void 0:F.county,s]);const q=(e,o,n)=>{d((l=>l.map((l=>l.name===e?{...l,[o]:n,is_added:!0}:l)))),f((l=>l.map((l=>l.name===e?{...l,[o]:n,is_added:!0}:l))))};console.log(s,"expanded");return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(_.Op,{methods:b,onSubmit:y((async()=>{n(!0);try{if(void 0===(null===F||void 0===F?void 0:F.county))return i((e=>({...e,county:"County is required"}))),null;if(i((e=>({...e,county:""}))),0===(null===s||void 0===s?void 0:s.length))return i((e=>({...e,additions:"Additions are required"}))),null;i((e=>({...e,additions:""})));const o={county_names:[null===F||void 0===F?void 0:F.county],additional_charges:s};await k.A.post("admin/additional_charges/add_price",o).then((o=>{if(n(!1),200===o.status||201===o.status){const n=o.data;console.log(n,"set additions"),e(null===n||void 0===n?void 0:n.message),A()}}))}catch(o){if(console.error(o),o.errors){Object.keys(o.errors).map((n=>e(o.errors[n][0],{variant:"error"})))}}finally{n(!1)}})),children:(0,M.jsx)(l.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"center",mt:2},children:(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsxs)(p.A,{sx:{p:3},children:[(0,M.jsxs)(g.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",mb:2},children:[(0,M.jsx)(x.A,{sx:{p:0,mb:2},title:"Set Payment For Additions"}),(0,M.jsx)(h.A,{type:"button",variant:"contained",onClick:()=>{v(!0)},children:"Add Additions"})]}),(0,M.jsxs)(_.tX,{name:"county",label:"County",onChange:e=>{const{value:o}=e.target;S("county",o),N(o)},children:[(0,M.jsx)("option",{value:""}),T.v.map(((e,o)=>(0,M.jsx)("option",{value:e,children:e},o)))]}),(null===a||void 0===a?void 0:a.county)&&(0,M.jsx)(C.A,{variant:"p",sx:{mb:2,color:"red",textAlign:"center",width:"100%",display:"block"},children:null===a||void 0===a?void 0:a.county}),s.map((e=>(0,M.jsxs)(m.A,{children:[(0,M.jsxs)(g.A,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,sx:{border:"1px solid lightblue",padding:"10px",borderRadius:"10px",my:2},children:[(0,M.jsx)("span",{children:e.name}),(0,M.jsx)(O.A,{onClick:()=>{return o=e.name,void d((e=>e.map((e=>e.name===o?{...e,is_added:!e.is_added}:e))));var o},color:"primary",children:e.is_added?(0,M.jsx)(W.A,{}):(0,M.jsx)(P.A,{})})]}),e.is_added&&(0,M.jsxs)(m.A,{sx:{mt:2,pl:1,display:"grid",gap:2,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,M.jsx)(I.A,{id:"notes-".concat(e.name),label:"Notes",multiline:!0,fullWidth:!0,value:e.note||"",onChange:o=>q(e.name,"note",o.target.value)}),(0,M.jsx)(I.A,{id:"gov-fee-".concat(e.name),label:"Gov Fee(s)",fullWidth:!0,value:e.gov_fee||"",onChange:o=>q(e.name,"gov_fee",o.target.value)}),(0,M.jsx)(I.A,{id:"total-".concat(e.name),label:"Total Price",fullWidth:!0,value:e.total_price||"",onChange:o=>q(e.name,"total_price",o.target.value)})]})]},e.name))),(null===a||void 0===a?void 0:a.additions)&&(0,M.jsx)(C.A,{variant:"p",sx:{mb:2,color:"red",textAlign:"center",width:"100%",display:"block"},children:null===a||void 0===a?void 0:a.additions}),(0,M.jsx)(g.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,M.jsx)(h.A,{type:"submit",variant:"contained",loading:o,children:"Add"})})]})})})}),(0,M.jsx)(z,{setOpen:v,open:u})]})},L=()=>{var e,o;const n=(0,S.wA)(),{enqueueSnackbar:a}=(0,r.dh)(),{file:i,UserId:s}=(0,S.d4)((e=>e.File)),[O,I]=(0,t.useState)();console.log(i,"file details"),(0,t.useEffect)((()=>{n((0,F.fl)())}),[]);const W=(0,w.debounce)((e=>{I(e)}),300),P=(0,t.useMemo)((()=>{if(null===O||void 0===O||!O.trim())return i.map((e=>{var o,n;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(n=e.orders[0])||void 0===n?void 0:n.id)}}));const e=O.toLowerCase();return i.filter((o=>{var n,l,t,a;return null!==(n=null===o||void 0===o||null===(l=o.file_name)||void 0===l?void 0:l.toLowerCase().includes(e))&&void 0!==n&&n||null!==(t=null===o||void 0===o||null===(a=o.file_no)||void 0===a?void 0:a.toLowerCase().includes(e))&&void 0!==t&&t})).map((e=>{var o,n;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(n=e.orders[0])||void 0===n?void 0:n.id)}}))}),[O,i]),T=d.Ik().shape({order:d.Yj().required("Select Order"),date:d.Yj().required("Date is required"),notes:d.Yj(),is_active:d.zM().oneOf([!0],"Status is required")}),N=(0,t.useMemo)((()=>({order:"",date:"",notes:"",is_active:!1,price:""})),[]),q=(0,c.mN)({resolver:(0,u.t)(T),defaultValues:N}),{reset:G,watch:R,setValue:V,handleSubmit:z,formState:{isSubmitting:L,errors:$}}=q,H=R();console.log(H,"error");return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(_.Op,{methods:q,onSubmit:z((async e=>{console.log(e,"data");try{const o=new FormData;o.append("payment_date",(null===e||void 0===e?void 0:e.date)+" 00:00:00"),o.append("payment_note",null===e||void 0===e?void 0:e.notes),o.append("is_paid",null!==e&&void 0!==e&&e.is_active?1:0),o.append("Total_Price",null===e||void 0===e?void 0:e.price),await k.A.post("/admin/change/payment_status/".concat(null===e||void 0===e?void 0:e.order),o).then((()=>{a("Status Paid Success"),V("order",""),G(),n((0,F.xg)("all",s))}))}catch(o){if(console.error(o,"error"),o.errors){Object.keys(o.errors).map((e=>a(o.errors[e][0],{variant:"error"})))}}})),children:(0,M.jsx)(l.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"center"},children:(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsxs)(p.A,{sx:{p:3},children:[(0,M.jsx)(x.A,{title:"Add Payment Status"}),(0,M.jsxs)(m.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},mt:2},children:[(0,M.jsxs)(g.A,{children:[(0,M.jsx)(v.Ay,{options:P,onInputChange:W,onChange:e=>{var o,n;const l=e.value;V("order",l);const t=null===i||void 0===i?void 0:i.find((e=>{var o,n;return(null===e||void 0===e||null===(o=e.orders)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(n=e.orders[0])||void 0===n?void 0:n.id)==l})),a=null===t||void 0===t||null===(o=t.orders[0])||void 0===o||null===(n=o.Total_Price)||void 0===n?void 0:n.split(".");V("price",(null===a||void 0===a?void 0:a.length)>0&&a[0]),console.log(a,"getPrice")},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-5",styles:{control:(e,o)=>({...e,backgroundColor:"white",borderRadius:"8px",border:o.isFocused?"2px solid #1976d2":"1px solid #ced4da",boxShadow:o.isFocused?"0 0 5px rgba(25, 118, 210, 0.5)":"none","&:hover":{borderColor:"#1976d2"},minHeight:"48px"}),menu:e=>({...e,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",zIndex:9999}),option:(e,o)=>({...e,backgroundColor:o.isFocused?"#f5f5f5":"white",color:"black",padding:"10px 15px","&:active":{backgroundColor:"#e0e0e0"}}),placeholder:e=>({...e,color:"#6c757d",fontSize:"16px"}),singleValue:e=>({...e,color:"#495057",fontSize:"16px"}),dropdownIndicator:(e,o)=>({...e,color:o.isFocused?"#1976d2":"#6c757d","&:hover":{color:"#1976d2"}}),indicatorSeparator:e=>({...e,display:"none"})}}),""===(null===H||void 0===H?void 0:H.order)&&(0,M.jsx)(j.A,{sx:{color:"red"},children:null===$||void 0===$||null===(e=$.order)||void 0===e?void 0:e.message})]}),(0,M.jsxs)(f.A,{fullWidth:!0,children:[(0,M.jsx)(b.A,{id:"demo-simple-select-label",children:"Select price"}),(0,M.jsxs)(A.A,{labelId:"demo-simple-select-label",name:"price",id:"demo-simple-select",value:null===H||void 0===H?void 0:H.price,onChange:e=>{const{value:o}=e.target;V("price",o),console.log(o,"values")},label:"Select a price",children:[(0,M.jsx)(y.A,{value:"300",children:"$ 300.00"}),(0,M.jsx)(y.A,{value:"350",children:"$ 350.00"}),(0,M.jsx)(y.A,{value:"395",children:"$ 395.00"}),(0,M.jsx)(y.A,{value:"400",children:"$ 400.00"}),(0,M.jsx)(y.A,{value:"450",children:"$ 450.00"}),(0,M.jsx)(y.A,{value:"500",children:"$ 500.00"})]})]}),(0,M.jsx)(_.o3,{name:"date",type:"date"}),(0,M.jsx)(_.o3,{name:"notes",label:"Notes",multi:!0}),(0,M.jsx)(_.b8,{name:"is_active",labelPlacement:"start",label:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(C.A,{variant:"h6",sx:{mb:.5},children:"Paid"})}),sx:{mx:0,width:1,justifyContent:"space-between"}}),(null===$||void 0===$?void 0:$.is_active)&&(0,M.jsx)(j.A,{sx:{color:"red"},children:null===$||void 0===$||null===(o=$.is_active)||void 0===o?void 0:o.message})]}),(0,M.jsx)(g.A,{alignItems:"flex-end",sx:{mt:3},children:(0,M.jsx)(h.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"submit",variant:"contained",loading:L,children:"Save Changes"})})]})})})}),(0,M.jsx)(D,{})]})},$=()=>{const{themeStretch:e}=(0,s.A)();return(0,M.jsx)(a.A,{title:"All Files",children:(0,M.jsxs)(l.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"start",alignItems:"center"},children:[(0,M.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,M.jsx)(i.default,{})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,M.jsx)(L,{})})]})})}},53256:(e,o,n)=>{n.d(o,{A:()=>a});var l=n(65471),t=n(44414);const a=(0,l.A)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},2599:(e,o,n)=>{n.d(o,{A:()=>a});var l=n(65471),t=n(44414);const a=(0,l.A)((0,t.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")}}]);