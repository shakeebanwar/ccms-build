(self.webpackChunkccms=self.webpackChunkccms||[]).push([[495],{84966:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});i(32415);var n=i(62773),r=i(9950),o=i(7951),a=i(14857),s=i(6368),l=i(47177),c=i(25333),d=i(61770),h=i(66075),p=i(44414);const x=(0,o.Ay)(s.A)({position:"relative"}),u=(0,o.Ay)("div")((e=>{let{theme:t}=e;return{bottom:40,overflow:"hidden",position:"absolute",left:t.spacing(-2),boxShadow:t.customShadows.z20,borderRadius:2*Number(t.shape.borderRadius),"& .emoji-mart":{border:"none",backgroundColor:t.palette.background.paper},"& .emoji-mart-anchor":{color:t.palette.text.disabled,"&:hover, &:focus, &.emoji-mart-anchor-selected":{color:t.palette.text.primary}},"& .emoji-mart-bar":{borderColor:t.palette.divider},"& .emoji-mart-search input":{backgroundColor:"transparent",color:t.palette.text.primary,borderColor:t.palette.grey[50032],"&::placeholder":{...t.typography.body2,color:t.palette.text.disabled}},"& .emoji-mart-search-icon svg":{opacity:1,fill:t.palette.text.disabled},"& .emoji-mart-category-label span":{...t.typography.subtitle2,...(0,d.A)().bgBlur({color:t.palette.background.paper}),color:t.palette.text.primary},"& .emoji-mart-title-label":{color:t.palette.text.primary},"& .emoji-mart-category .emoji-mart-emoji:hover:before":{backgroundColor:t.palette.action.selected},"& .emoji-mart-emoji":{outline:"none"},"& .emoji-mart-preview-name":{color:t.palette.text.primary},"& .emoji-mart-preview-shortname, .emoji-mart-preview-emoticon":{color:t.palette.text.secondary}}}));function m(e){let{disabled:t,value:i,setValue:o,alignRight:s=!1,...d}=e;const m=(0,a.A)(),[g,f]=(0,r.useState)(!1);let j;g&&(j=(0,p.jsx)(n.LC,{color:m.palette.primary.main,title:"Pick your emoji\u2026",emoji:"point_up",onSelect:e=>o(i+(null===e||void 0===e?void 0:e.native))}));return(0,p.jsx)(l.A,{onClickAway:()=>{f(!1)},children:(0,p.jsxs)(x,{...d,children:[(0,p.jsx)(u,{sx:{...s&&{right:-2,left:"auto !important"}},children:j}),(0,p.jsx)(c.A,{disabled:t,size:"small",onClick:e=>{e.preventDefault(),f(!g)},children:(0,p.jsx)(h.A,{icon:"eva:smiling-face-fill",width:20,height:20})})]})})}},94416:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var n=i(9950),r=i(571),o=i(14857),a=i(19657),s=i(71030),l=i(82053),c=i(44414);function d(){const e=(0,o.A)(),t="rtl"===e.direction,i=e.palette.grey[600].replace("#",""),n=e=>"url(https://api.iconify.design/carbon/".concat(e,".svg?color=%23").concat(i,"&width=").concat(32,"&height=").concat(32,")"),r=t=>({opacity:1,alignItems:"center",display:"inline-flex",justifyContent:"center",backgroundImage:"unset",backgroundColor:"transparent",transition:e.transitions.create("opacity"),"&:before":{display:"block",width:32,height:32,content:n(t)},"&:hover":{opacity:.72}});return(0,c.jsx)(s.A,{styles:{"& .ReactModalPortal":{"& .ril__outer":{backgroundColor:(0,a.X4)(e.palette.grey[900],.96)},"& .ril__toolbar":{height:"auto !important",padding:e.spacing(2,3),backgroundColor:"transparent"},"& .ril__toolbarLeftSide":{display:"none"},"& .ril__toolbarRightSide":{height:"auto !important",padding:0,flexGrow:1,display:"flex",alignItems:"center","& li":{display:"flex",alignItems:"center"},"& li:first-of-type":{flexGrow:1},"& li:not(:first-of-type)":{width:40,height:40,justifyContent:"center",marginLeft:e.spacing(2)}},"& button:focus":{outline:"none"},"& .ril__toolbarRightSide button":{width:"100%",height:"100%","&.ril__zoomInButton":r("zoom-in"),"&.ril__zoomOutButton":r("zoom-out"),"&.ril__closeButton":r("close")},"& .ril__navButtons":{padding:e.spacing(3),"&.ril__navButtonPrev":{right:"auto",left:e.spacing(2),...r(t?"arrow-right":"arrow-left")},"&.ril__navButtonNext":{left:"auto",right:e.spacing(2),...r(t?"arrow-left":"arrow-right")}}}}})}function h(e){let{images:t,photoIndex:i,setPhotoIndex:o,isOpen:a,...s}=e;(0,n.useEffect)((()=>{document.body.style.overflow=a?"hidden":"unset"}),[a]);const h=[(0,c.jsx)(l.A,{variant:"subtitle2",children:"".concat(i+1," / ").concat(t.length)})];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{}),a&&(0,c.jsx)(r.A,{animationDuration:160,nextSrc:t[(i+1)%t.length],prevSrc:t[(i+t.length-1)%t.length],onMovePrevRequest:()=>o((i+t.length-1)%t.length),onMoveNextRequest:()=>o((i+1)%t.length),toolbarButtons:h,reactModalStyle:{overlay:{zIndex:9999}},...s})]})}},97751:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(70693),r=i(82053),o=i(44414);function a(e){let{searchQuery:t="",...i}=e;return t?(0,o.jsxs)(n.A,{...i,children:[(0,o.jsx)(r.A,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,o.jsxs)(r.A,{variant:"body2",align:"center",children:["No results found for \xa0",(0,o.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]}):(0,o.jsx)(r.A,{variant:"body2",children:" Please enter keywords"})}},29449:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Ct});var n=i(9950),r=i(79537),o=i(48089),a=i(30744),s=i(83090),l=i(90260),c=i(86608),d=i(8279),h=i(63358),p=i(7951),x=i(14857),u=i(25333),m=i(74745),g=i(6368),f=i(71525),j=i(98091),v=i(66075),A=i(80561),y=i.n(A),b=i(32964),w=i.n(b),C=i(75165),k=i(33738),S=i(82053),I=i(34437),R=i(50570),M=i(44185),D=i(44414);const P=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{flexGrow:1,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column",paddingBottom:t.spacing(2)}})),T=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",marginTop:t.spacing(2),padding:t.spacing(0,2.5)}})),z=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{width:40,height:40,flexShrink:0,display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.grey[50016]}})),W=(0,p.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,flexShrink:0,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}}));function O(e){let{conversation:t,isCollapse:i,onCollapse:n}=e;const r=y()(w()(t.messages.map((e=>e.attachments)))).length;return(0,D.jsxs)(P,{children:[(0,D.jsxs)(W,{fullWidth:!0,color:"inherit",onClick:n,endIcon:(0,D.jsx)(v.A,{icon:i?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["attachment (",r,")"]}),!i&&(0,D.jsx)(m.A,{}),(0,D.jsx)(M.A,{children:(0,D.jsx)(k.A,{in:i,children:t.messages.map((e=>(0,D.jsx)("div",{children:e.attachments.map((t=>(0,D.jsx)(_,{file:e,fileUrl:t},t)))},e.id)))})})]})}function _(e){let{file:t,fileUrl:i}=e;return(0,D.jsxs)(T,{children:[(0,D.jsx)(z,{children:(0,R.ZR)(i)}),(0,D.jsxs)(g.A,{sx:{ml:1.5,maxWidth:150},children:[(0,D.jsx)(S.A,{variant:"body2",noWrap:!0,children:(0,R.Nl)(i)}),(0,D.jsx)(S.A,{noWrap:!0,variant:"caption",sx:{color:"text.secondary",display:"block"},children:(0,I.uK)(t.createdAt)})]})]},i)}var B=i(62854);const E=(0,p.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}})),F=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",margin:t.spacing(1.5,0)}})),N=(0,p.Ay)(v.A)((e=>{let{theme:t}=e;return{width:16,height:16,marginTop:4,marginRight:t.spacing(1),color:t.palette.text.secondary}})),L=(0,p.Ay)(S.A)((e=>{let{theme:t}=e;return{flexGrow:1,maxWidth:160,wordWrap:"break-word",...t.typography.body2}}));function G(e){let{participants:t,isCollapse:i,onCollapse:n}=e;const r=[...t][0];return void 0===r?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{pt:4,pb:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,D.jsx)(B.A,{alt:r.name,src:r.avatar,sx:{width:96,height:96}}),(0,D.jsxs)(g.A,{sx:{mt:2,textAlign:"center"},children:[(0,D.jsx)(S.A,{variant:"subtitle1",children:r.name}),(0,D.jsx)(S.A,{variant:"body2",sx:{color:"text.secondary"},children:r.position})]})]}),(0,D.jsx)(m.A,{}),(0,D.jsx)(E,{fullWidth:!0,color:"inherit",onClick:n,endIcon:(0,D.jsx)(v.A,{icon:i?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:"information"}),(0,D.jsx)(k.A,{in:i,children:(0,D.jsxs)(g.A,{sx:{px:2.5,pb:1},children:[(0,D.jsxs)(F,{children:[(0,D.jsx)(N,{icon:"eva:pin-fill"}),(0,D.jsx)(L,{children:r.address})]}),(0,D.jsxs)(F,{children:[(0,D.jsx)(N,{icon:"eva:phone-fill"}),(0,D.jsx)(L,{children:r.phone})]}),(0,D.jsxs)(F,{children:[(0,D.jsx)(N,{icon:"eva:email-fill"}),(0,D.jsx)(L,{children:r.email})]})]})})]})}var U=i(249),q=i(57357),H=i(16233),Y=i(83563);const K=(0,p.Ay)("span")((e=>{let{theme:t,ownerState:i}=e;const{status:n,size:r}=i;return{width:10,height:10,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center","&:before, &:after":{content:"''",borderRadius:1,backgroundColor:t.palette.common.white},..."small"===r&&{width:8,height:8},..."large"===r&&{width:12,height:12},..."offline"===n&&{backgroundColor:"transparent"},..."away"===n&&{backgroundColor:t.palette.warning.main,"&:before":{width:2,height:4,transform:"translateX(1px) translateY(-1px)"},"&:after":{width:2,height:4,transform:"translateY(1px) rotate(125deg)"}},..."busy"===n&&{backgroundColor:t.palette.error.main,"&:before":{width:6,height:2}},..."online"===n&&{backgroundColor:t.palette.success.main},..."invisible"===n&&{backgroundColor:t.palette.text.disabled,"&:before":{width:6,height:6,borderRadius:"50%"}},..."unread"===n&&{backgroundColor:t.palette.info.main}}}));function Q(e){let{size:t="medium",status:i="offline",...n}=e;return(0,D.jsx)(K,{ownerState:{status:i,size:t},...n})}var Z=i(28170),V=i(20131);const X=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",marginTop:t.spacing(1.5)}}));function $(e){let{participant:t,isOpen:i,onClose:n}=e;const{name:r,avatar:o,position:a,address:s,phone:l,email:c}=t;return(0,D.jsx)(V.ys,{fullWidth:!0,maxWidth:"xs",open:i,onClose:n,children:(0,D.jsxs)(Z.A,{sx:{pb:5,textAlign:"center"},children:[(0,D.jsx)(B.A,{alt:r,src:o,sx:{mt:5,mb:2,mx:"auto",width:96,height:96}}),(0,D.jsx)(S.A,{variant:"h6",children:r}),(0,D.jsx)(S.A,{variant:"body2",paragraph:!0,sx:{color:"text.secondary"},children:a}),(0,D.jsxs)(X,{children:[(0,D.jsx)(v.A,{icon:"eva:pin-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:s})]}),(0,D.jsxs)(X,{children:[(0,D.jsx)(v.A,{icon:"eva:phone-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:l})]}),(0,D.jsxs)(X,{children:[(0,D.jsx)(v.A,{icon:"eva:email-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:c})]})]})})}const J=64,ee=(0,p.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}}));function te(e){let{participants:t,selectUserId:i,onShowPopupUserInfo:n,isCollapse:r,onCollapse:o}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(ee,{fullWidth:!0,disableRipple:!0,color:"inherit",onClick:o,endIcon:(0,D.jsx)(v.A,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["In room (",t.length,")"]}),(0,D.jsx)(g.A,{sx:{height:r?4*J:0},children:(0,D.jsx)(M.A,{children:(0,D.jsx)(k.A,{in:r,sx:{height:r?4*J:0},children:(0,D.jsx)(U.A,{disablePadding:!0,children:t.map((e=>(0,D.jsx)(ie,{participant:e,isOpen:i===e.id,onShowPopup:()=>n(e.id),onClosePopup:()=>n(null)},e.id)))})})})})]})}function ie(e){let{participant:t,isOpen:i,onClosePopup:n,onShowPopup:r}=e;const{name:o,avatar:a,status:s,position:l}=t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(q.A,{onClick:r,sx:{height:J,px:2.5},children:[(0,D.jsx)(H.A,{children:(0,D.jsxs)(g.A,{sx:{position:"relative",width:40,height:40},children:[(0,D.jsx)(B.A,{alt:o,src:a}),(0,D.jsx)(Q,{status:s,sx:{right:0,bottom:0,position:"absolute"}})]})}),(0,D.jsx)(Y.A,{primary:o,secondary:l,primaryTypographyProps:{variant:"subtitle2",noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}),(0,D.jsx)($,{participant:t,isOpen:i,onClose:n})]})}const ne=(0,p.Ay)((e=>(0,D.jsx)(u.A,{disableRipple:!0,...e})))((e=>{let{theme:t}=e;return{right:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(1),boxShadow:t.customShadows.z8,backgroundColor:t.palette.background.paper,border:"solid 1px ".concat(t.palette.divider),borderRight:0,borderRadius:"12px 0 0 12px",transition:t.transitions.create("all"),"&:hover":{backgroundColor:t.palette.background.neutral}}})),re=240;function oe(e){let{conversation:t,participants:i}=e;const r=(0,x.A)(),[o,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[u,A]=(0,n.useState)(!0),y=(0,j.A)("up","lg"),b=i.length>1;(0,n.useEffect)((()=>y?w():C()),[y]);const w=()=>{a(!0)},C=()=>{a(!1)},k=(0,D.jsxs)(D.Fragment,{children:[b?(0,D.jsx)(te,{selectUserId:c,participants:i,isCollapse:u,onShowPopupUserInfo:e=>d(e),onCollapse:()=>A((e=>!e))}):(0,D.jsx)("div",{children:(0,D.jsx)(G,{participants:i,isCollapse:s,onCollapse:()=>l((e=>!e))})}),(0,D.jsx)(m.A,{}),(0,D.jsx)(O,{conversation:t,isCollapse:h,onCollapse:()=>p((e=>!e))})]});return(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(ne,{onClick:()=>{a((e=>!e))},sx:{...o&&y&&{right:re}},children:(0,D.jsx)(v.A,{width:16,height:16,icon:o?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),y?(0,D.jsx)(f.Ay,{open:o,anchor:"right",variant:"persistent",sx:{height:1,width:re,transition:r.transitions.create("width"),...!o&&{width:"0px"},"& .MuiDrawer-paper":{position:"static",width:re}},children:k}):(0,D.jsx)(f.Ay,{anchor:"right",ModalProps:{keepMounted:!0},open:o,onClose:C,sx:{"& .MuiDrawer-paper":{width:re}},children:k})]})}var ae=i(13564),se=i(12257),le=i(94416),ce=i(20053),de=i(27476),he=i(98889),pe=i(12521),xe=i(43298),ue=i(78397),me=6e4,ge=1440,fe=30*ge,je=365*ge;function ve(e,t){return(0,ue.A)(1,arguments),function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,ue.A)(2,arguments);var n=i.locale||xe.A;if(!n.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=(0,de.A)(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var o,a,s=(0,pe.A)(i);s.addSuffix=Boolean(i.addSuffix),s.comparison=r,r>0?(o=(0,he.A)(t),a=(0,he.A)(e)):(o=(0,he.A)(e),a=(0,he.A)(t));var l,c=null==i.roundingMethod?"round":String(i.roundingMethod);if("floor"===c)l=Math.floor;else if("ceil"===c)l=Math.ceil;else{if("round"!==c)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var d,h=a.getTime()-o.getTime(),p=h/me,x=(h-((0,ce.A)(a)-(0,ce.A)(o)))/me;if("second"===(d=null==i.unit?p<1?"second":p<60?"minute":p<ge?"hour":x<fe?"day":x<je?"month":"year":String(i.unit))){var u=l(h/1e3);return n.formatDistance("xSeconds",u,s)}if("minute"===d){var m=l(p);return n.formatDistance("xMinutes",m,s)}if("hour"===d){var g=l(p/60);return n.formatDistance("xHours",g,s)}if("day"===d){var f=l(x/ge);return n.formatDistance("xDays",f,s)}if("month"===d){var j=l(x/fe);return 12===j&&"month"!==i.unit?n.formatDistance("xYears",1,s):n.formatDistance("xMonths",j,s)}if("year"===d){var v=l(x/je);return n.formatDistance("xYears",v,s)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),t)}var Ae=i(63575);const ye=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",marginBottom:t.spacing(3)}})),be=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{maxWidth:320,padding:t.spacing(1.5),marginTop:t.spacing(.5),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral}})),we=(0,p.Ay)(S.A)((e=>{let{theme:t}=e;return{display:"flex",marginBottom:t.spacing(.75),color:t.palette.text.secondary}}));function Ce(e){let{message:t,conversation:i,onOpenLightbox:n}=e;const r=i.participants.find((e=>e.id===t.senderId)),o="8864c717-587d-472a-929a-8e5f298024da-0"===t.senderId?{type:"me"}:{avatar:null===r||void 0===r?void 0:r.avatar,name:null===r||void 0===r?void 0:r.name},a="me"===o.type,s="image"===t.contentType,l=o.name&&o.name.split(" ")[0];return(0,D.jsx)(ye,{children:(0,D.jsxs)(g.A,{sx:{display:"flex",...a&&{ml:"auto"}},children:["me"!==o.type&&(0,D.jsx)(B.A,{alt:o.name,src:o.avatar,sx:{width:32,height:32,mr:2}}),(0,D.jsxs)("div",{children:[(0,D.jsxs)(we,{variant:"caption",sx:{...a&&{justifyContent:"flex-end"}},children:[!a&&"".concat(l,","),"\xa0",ve(new Date(t.createdAt),{addSuffix:!0})]}),(0,D.jsx)(be,{sx:{...a&&{color:"grey.800",bgcolor:"primary.lighter"},...s&&{p:0}},children:s?(0,D.jsx)(Ae.A,{alt:"attachment",src:t.body,onClick:()=>n(t.body),sx:{borderRadius:1,cursor:"pointer","&:hover":{opacity:.8}}}):(0,D.jsx)(S.A,{variant:"body2",children:t.body})})]})]})})}function ke(e){let{conversation:t}=e;const i=(0,n.useRef)(null),[r,o]=(0,n.useState)(!1),[a,s]=(0,n.useState)(0);(0,n.useEffect)((()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[t.messages]);const l=t.messages.filter((e=>"image"===e.contentType)).map((e=>e.body)),c=e=>{const t=l.findIndex((t=>t===e));o(!0),s(t)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.A,{scrollableNodeProps:{ref:i},sx:{p:3,height:1},children:t.messages.map((e=>(0,D.jsx)(Ce,{message:e,conversation:t,onOpenLightbox:c},e.id)))}),(0,D.jsx)(le.A,{images:l,mainSrc:l[a],photoIndex:a,setPhotoIndex:s,isOpen:r,onCloseRequest:()=>o(!1)})]})}var Se=i(9693),Ie=i(34339),Re=i(22707);const Me=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{flexShrink:0,minHeight:92,display:"flex",alignItems:"center",padding:t.spacing(0,3)}}));function De(e){let{participants:t}=e;const i=t.length>1;return(0,D.jsxs)(Me,{children:[i?(0,D.jsx)(Te,{participants:t}):(0,D.jsx)(Pe,{participants:t}),(0,D.jsx)(g.A,{sx:{flexGrow:1}}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:phone-fill",width:20,height:20})}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:video-fill",width:20,height:20})}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:more-vertical-fill",width:20,height:20})})]})}function Pe(e){let{participants:t}=e;const i=[...t][0];return void 0!==i&&i.status?(0,D.jsxs)(g.A,{sx:{display:"flex",alignItems:"center"},children:[(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(B.A,{src:i.avatar,alt:i.name}),(0,D.jsx)(Q,{status:i.status,sx:{position:"absolute",right:2,bottom:2}})]}),(0,D.jsxs)(g.A,{sx:{ml:2},children:[(0,D.jsx)(S.A,{variant:"subtitle2",children:i.name}),(0,D.jsx)(S.A,{variant:"body2",sx:{color:"text.secondary"},children:"offline"!==i.status?(0,Se.D)(i.status):(0,I.kH)(i.lastActivity||"")})]})]}):null}function Te(e){let{participants:t}=e;return(0,D.jsxs)("div",{children:[(0,D.jsx)(Ie.A,{max:3,sx:{mb:.5,"& .MuiAvatar-root":{width:32,height:32}},children:t.map((e=>(0,D.jsx)(B.A,{alt:e.name,src:e.avatar},e.id)))}),(0,D.jsx)(Re.A,{variant:"body2",underline:"none",component:"button",color:"text.secondary",onClick:()=>{},children:(0,D.jsxs)(g.A,{sx:{display:"flex",alignItems:"center"},children:[t.length," persons",(0,D.jsx)(v.A,{icon:"eva:arrow-ios-forward-fill"})]})})]})}var ze=i(82321),We=i(2046),Oe=i(76738),_e=i(84966);const Be=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{minHeight:56,display:"flex",position:"relative",alignItems:"center",paddingLeft:t.spacing(2)}}));function Ee(e){let{disabled:t,conversationId:i,onSend:r}=e;const o=(0,n.useRef)(null),[a,s]=(0,n.useState)(""),l=()=>{var e;null===(e=o.current)||void 0===e||e.click()},c=()=>a?(r&&i&&r({conversationId:i,messageId:(0,Oe.A)(),message:a,contentType:"text",attachments:[],createdAt:new Date,senderId:"8864c717-587d-472a-929a-8e5f298024da-0"}),s("")):"";return(0,D.jsxs)(Be,{children:[(0,D.jsx)(ze.A,{disabled:t,fullWidth:!0,value:a,disableUnderline:!0,onKeyUp:e=>{"Enter"===e.key&&c()},onChange:e=>s(e.target.value),placeholder:"Type a message",startAdornment:(0,D.jsx)(We.A,{position:"start",children:(0,D.jsx)(_e.A,{disabled:t,value:a,setValue:s})}),endAdornment:(0,D.jsxs)(se.A,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:[(0,D.jsx)(u.A,{disabled:t,size:"small",onClick:l,children:(0,D.jsx)(v.A,{icon:"ic:round-add-photo-alternate",width:22,height:22})}),(0,D.jsx)(u.A,{disabled:t,size:"small",onClick:l,children:(0,D.jsx)(v.A,{icon:"eva:attach-2-fill",width:22,height:22})}),(0,D.jsx)(u.A,{disabled:t,size:"small",children:(0,D.jsx)(v.A,{icon:"eva:mic-fill",width:22,height:22})})]})}),(0,D.jsx)(m.A,{orientation:"vertical",flexItem:!0}),(0,D.jsx)(u.A,{color:"primary",disabled:!a,onClick:c,sx:{mx:1},children:(0,D.jsx)(v.A,{icon:"ic:round-send",width:22,height:22})}),(0,D.jsx)("input",{type:"file",ref:o,style:{display:"none"}})]})}var Fe=i(55471),Ne=i.n(Fe),Le=i(99573),Ge=i.n(Le),Ue=i(19657),qe=i(41205),He=i(25277),Ye=i(8145),Ke=i(97751);const Qe=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(2,3)}})),Ze=(0,p.Ay)("div")((e=>{let{theme:t}=e;return{"& .MuiAutocomplete-root":{minWidth:280,marginLeft:t.spacing(2),"&.Mui-focused .MuiAutocomplete-inputRoot":{boxShadow:t.customShadows.z8}},"& .MuiAutocomplete-inputRoot":{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}}));function Ve(e){let{contacts:t,recipients:i,onAddRecipients:r}=e;const[o,a]=(0,n.useState)("");return(0,D.jsxs)(Qe,{children:[(0,D.jsx)(S.A,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),(0,D.jsx)(Ze,{children:(0,D.jsx)(qe.A,{multiple:!0,size:"small",disablePortal:!0,popupIcon:null,noOptionsText:(0,D.jsx)(Ke.A,{searchQuery:o}),onChange:(e,t)=>(e=>{a(""),r(e)})(t),onInputChange:(e,t)=>a(t),options:t,getOptionLabel:e=>e.name,renderOption:(e,t,i)=>{let{inputValue:n,selected:r}=i;const{name:o,avatar:a}=t,s=Ge()(o,n),l=Ne()(o,s);return(0,D.jsxs)(g.A,{component:"li",sx:{p:"12px !important"},...e,children:[(0,D.jsxs)(g.A,{sx:{mr:1.5,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,D.jsx)(B.A,{alt:o,src:a}),(0,D.jsx)(g.A,{sx:{top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:e=>(0,Ue.X4)(e.palette.grey[900],.8),transition:e=>e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter}),...r&&{opacity:1,color:"primary.main"}},children:(0,D.jsx)(v.A,{icon:"eva:checkmark-fill",width:20,height:20})})]}),l.map(((e,t)=>(0,D.jsx)(S.A,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},t)))]})},renderTags:(e,t)=>e.map(((e,i)=>{const{id:r,name:o,avatar:a}=e;return(0,n.createElement)(He.A,{...t({index:i}),key:r,size:"small",label:o,color:"info",avatar:(0,D.jsx)(B.A,{alt:o,src:a})})})),renderInput:e=>(0,D.jsx)(Ye.A,{...e,placeholder:0===i.length?"Recipients":""})})})]})}const Xe=e=>{const{conversations:t,activeConversationId:i}=e.chat,n=i?t.byId[i]:null;if(n)return n;return{id:"",messages:[],participants:[],unreadCount:0,type:""}};function $e(){const e=(0,a.wA)(),t=(0,ae.Zp)(),{pathname:i}=(0,ae.zy)(),{conversationKey:r}=(0,ae.g)(),{contacts:o,recipients:c,participants:d,activeConversationId:h}=(0,a.d4)((e=>e.chat)),p=(0,a.d4)((e=>Xe(e))),x=r?"DETAIL":"COMPOSE",u=d.filter((e=>"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id));(0,n.useEffect)((()=>{r?(async()=>{e((0,s.Ln)(r));try{await e((0,s.xo)(r))}catch(i){console.error(i),t(l.nB.chat.new)}})():h&&e((0,s.lO)())}),[r]),(0,n.useEffect)((()=>{h&&e((0,s.$G)(h))}),[e,h]);return(0,D.jsxs)(se.A,{sx:{flexGrow:1,minWidth:"1px"},children:["DETAIL"===x?(0,D.jsx)(De,{participants:u}):(0,D.jsx)(Ve,{recipients:c,contacts:Object.values(o.byId),onAddRecipients:t=>{e((0,s.QL)(t))}}),(0,D.jsx)(m.A,{}),(0,D.jsxs)(g.A,{sx:{flexGrow:1,display:"flex",overflow:"hidden"},children:[(0,D.jsxs)(se.A,{sx:{flexGrow:1},children:[(0,D.jsx)(ke,{conversation:p}),(0,D.jsx)(m.A,{}),(0,D.jsx)(Ee,{conversationId:h,onSend:async t=>{try{e((0,s.t2)(t))}catch(i){console.error(i)}},disabled:i===l.nB.chat.new})]}),"DETAIL"===x&&(0,D.jsx)(oe,{conversation:p,participants:u})]})]})}var Je=i(53065),et=i(23266),tt=i(93523),it=i(33507),nt=i(45359),rt=i(70458);const ot=["online","invisible","away"];function at(){const{user:e}=(0,it.A)(),[t,i]=(0,n.useState)("online"),[r,o]=(0,n.useState)(null),a={mr:2,width:20,height:20};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(nt.A,{onClick:e=>{o(e.currentTarget)},sx:{cursor:"pointer",width:48,height:48}}),(0,D.jsx)(Q,{status:t,sx:{position:"absolute",bottom:2,right:2}})]}),(0,D.jsxs)(rt.A,{open:Boolean(r),anchorEl:r,onClose:()=>{o(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},arrow:"left-top",sx:{p:0,ml:.5,width:"auto"},children:[(0,D.jsxs)(se.A,{direction:"row",alignItems:"center",spacing:2,sx:{py:2,pr:1,pl:2.5},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(S.A,{noWrap:!0,variant:"subtitle1",children:null===e||void 0===e?void 0:e.first_name}),(0,D.jsx)(S.A,{noWrap:!0,variant:"body2",sx:{color:"text.secondary"},children:null===e||void 0===e?void 0:e.email})]}),(0,D.jsx)(Je.A,{title:"Log out",children:(0,D.jsx)(u.A,{color:"error",children:(0,D.jsx)(v.A,{icon:"ic:round-power-settings-new",width:20,height:20})})})]}),(0,D.jsx)(m.A,{}),(0,D.jsxs)(U.A,{sx:{px:1,"& .MuiMenuItem-root":{py:1,px:2,typography:"body2",borderRadius:.75}},children:[(0,D.jsxs)(et.A,{children:[(0,D.jsx)(Q,{size:"large",status:t,sx:{m:.5,flexShrink:0}}),(0,D.jsx)(tt.A,{native:!0,fullWidth:!0,value:t,onChange:e=>i(e.target.value),sx:{ml:2,"& svg":{display:"none"},"& select":{p:0,typography:"body2"},"& fieldset":{display:"none"}},children:ot.map((e=>(0,D.jsx)("option",{value:e,children:(0,Se.D)(e)},e)))})]}),(0,D.jsxs)(et.A,{children:[(0,D.jsx)(v.A,{icon:"ic:round-account-box",sx:{...a}}),"Profile"]}),(0,D.jsxs)(et.A,{children:[(0,D.jsx)(v.A,{icon:"eva:settings-2-fill",sx:{...a}}),"Settings"]})]})]})]})}var st=i(32741);function lt(e){let{query:t,results:i,onSelectContact:n}=e;const r=i.length>0;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(S.A,{paragraph:!0,variant:"subtitle1",sx:{px:3,color:"text.secondary"},children:"Contacts"}),(0,D.jsx)(U.A,{disablePadding:!0,children:i.map((e=>(0,D.jsxs)(q.A,{onClick:()=>n(e),sx:{py:1.5,px:3},children:[(0,D.jsx)(H.A,{children:(0,D.jsx)(B.A,{alt:e.name,src:e.avatar})}),(0,D.jsx)(Y.A,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)))}),!r&&(0,D.jsx)(Ke.A,{searchQuery:t,sx:{p:3,mx:"auto",width:"calc(100% - 48px)",bgcolor:"background.neutral"}})]})}var ct=i(47177),dt=i(97842);function ht(e){let{query:t,onChange:i,onFocus:n,onClickAway:r}=e;return(0,D.jsx)(ct.A,{onClickAway:r,children:(0,D.jsx)(dt.A,{fullWidth:!0,size:"small",value:t,onFocus:n,onChange:i,placeholder:"Search contacts...",InputProps:{startAdornment:(0,D.jsx)(We.A,{position:"start",children:(0,D.jsx)(v.A,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})},sx:{mt:2}})})}var pt=i(2995);const xt=48,ut=32,mt=(0,p.Ay)(q.A)((e=>{let{theme:t}=e;return{padding:t.spacing(1.5,3),transition:t.transitions.create("all")}})),gt=(0,p.Ay)("div")({position:"relative",width:xt,height:xt,"& .MuiAvatar-img":{borderRadius:"50%"},"& .MuiAvatar-root":{width:"100%",height:"100%"}}),ft=(e,t)=>{const i=e.participants.filter((e=>e.id!==t)),n=i.reduce(((e,t)=>[...e,t.name]),[]).join(", ");let r="";const o=e.messages[e.messages.length-1];if(o){const e=o.senderId===t?"You: ":"",i="image"===o.contentType?"Sent a photo":o.body;r="".concat(e).concat(i)}return{otherParticipants:i,displayNames:n,displayText:r}};function jt(e){let{isSelected:t,conversation:i,isOpenSidebar:n,onSelectConversation:r}=e;const o=ft(i,"8864c717-587d-472a-929a-8e5f298024da-0"),a=i.messages[i.messages.length-1].createdAt,s=o.otherParticipants.length>1,l=i.unreadCount>0,c=s&&o.otherParticipants.map((e=>e.status)).includes("online");return(0,D.jsxs)(mt,{onClick:r,sx:{...t&&{bgcolor:"action.selected"}},children:[(0,D.jsx)(H.A,{children:(0,D.jsxs)(g.A,{sx:{...s&&{position:"relative",width:xt,height:xt,"& .avatarWrapper":{position:"absolute",width:ut,height:ut,"&:nth-of-type(1)":{left:0,zIndex:9,bottom:2,"& .MuiAvatar-root":{border:e=>"solid 2px ".concat(e.palette.background.paper)}},"&:nth-of-type(2)":{top:2,right:0}}}},children:[o.otherParticipants.slice(0,2).map((e=>(0,D.jsxs)(gt,{className:"avatarWrapper",children:[(0,D.jsx)(B.A,{alt:e.name,src:e.avatar}),!s&&(0,D.jsx)(Q,{status:e.status,sx:{right:2,bottom:2,position:"absolute"}})]},e.id))),c&&(0,D.jsx)(Q,{status:"online",sx:{right:2,bottom:2,position:"absolute"}})]})}),n&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Y.A,{primary:o.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:o.displayText,secondaryTypographyProps:{noWrap:!0,variant:l?"subtitle2":"body2",color:l?"textPrimary":"textSecondary"}}),(0,D.jsxs)(g.A,{sx:{ml:2,height:44,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[(0,D.jsx)(g.A,{sx:{mb:1.25,fontSize:12,lineHeight:"22px",whiteSpace:"nowrap",color:"text.disabled"},children:ve(new Date(a),{addSuffix:!1})}),l&&(0,D.jsx)(Q,{status:"unread",size:"small"})]})]})]})}function vt(e){let{conversations:t,isOpenSidebar:i,activeConversationId:n,sx:r,...o}=e;const a=(0,ae.Zp)(),s=!t.allIds.length;return(0,D.jsx)(U.A,{disablePadding:!0,sx:r,...o,children:(s?[...Array(12)]:t.allIds).map(((e,r)=>e?(0,D.jsx)(jt,{isOpenSidebar:i,conversation:t.byId[e],isSelected:n===e,onSelectConversation:()=>(e=>{let i="";const n=t.byId[e];if("GROUP"===n.type)i=n.id;else{const e=n.participants.find((e=>"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id));null!==e&&void 0!==e&&e.username&&(i=null===e||void 0===e?void 0:e.username)}a(l.nB.chat.view(i))})(e)},e):(0,D.jsx)(pt.E2,{},r)))})}const At=(0,p.Ay)((e=>(0,D.jsx)(u.A,{disableRipple:!0,...e})))((e=>{let{theme:t}=e;return{left:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(13),borderRadius:"0 12px 12px 0",color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,boxShadow:t.customShadows.primary,"&:hover":{backgroundColor:t.palette.primary.darker}}})),yt=320,bt=96;function wt(){const e=(0,x.A)(),t=(0,ae.Zp)(),{pathname:i}=(0,ae.zy)(),[r,o]=(0,n.useState)(!0),[s,c]=(0,n.useState)(""),[d,h]=(0,n.useState)([]),[p,m]=(0,n.useState)(!1),{conversations:A,activeConversationId:y}=(0,a.d4)((e=>e.chat)),b=(0,j.A)("up","md"),w=s&&p,C=b&&!r;(0,n.useEffect)((()=>b?k():S()),[b,i]),(0,n.useEffect)((()=>{if(!r)return m(!1)}),[r]);const k=()=>{o(!0)},S=()=>{o(!1)},I=()=>{o((e=>!e))},R=e=>{m(!1),c(""),t(l.nB.chat.view(e))},P=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{py:2,px:3},children:[(0,D.jsxs)(se.A,{direction:"row",alignItems:"center",justifyContent:"center",children:[!C&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(at,{}),(0,D.jsx)(g.A,{sx:{flexGrow:1}})]}),(0,D.jsx)(u.A,{onClick:I,children:(0,D.jsx)(v.A,{width:20,height:20,icon:r?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"})}),!C&&(0,D.jsx)(u.A,{onClick:()=>t(l.nB.chat.new),children:(0,D.jsx)(v.A,{icon:"eva:edit-fill",width:20,height:20})})]}),!C&&(0,D.jsx)(ht,{query:s,onFocus:()=>{m(!0)},onChange:async e=>{try{const{value:t}=e.target;if(c(t),t){const e=await st.A.get("/api/chat/search",{params:{query:t}});h(e.data.results)}else h([])}catch(t){console.error(t)}},onClickAway:()=>{m(!1),c("")}})]}),(0,D.jsx)(M.A,{children:w?(0,D.jsx)(lt,{query:s,results:d,onSelectContact:e=>{R&&R(e.username)}}):(0,D.jsx)(vt,{conversations:A,isOpenSidebar:r,activeConversationId:y,sx:{...p&&{display:"none"}}})})]});return(0,D.jsxs)(D.Fragment,{children:[!b&&(0,D.jsx)(At,{onClick:I,children:(0,D.jsx)(v.A,{width:16,height:16,icon:"eva:people-fill"})}),b?(0,D.jsx)(f.Ay,{open:r,variant:"persistent",sx:{width:yt,transition:e.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",width:yt},...C&&{width:bt,"& .MuiDrawer-paper":{width:bt,position:"static",transform:"none !important",visibility:"visible !important"}}},children:P}):(0,D.jsx)(f.Ay,{ModalProps:{keepMounted:!0},open:r,onClose:S,sx:{"& .MuiDrawer-paper":{width:yt}},children:P})]})}function Ct(){const{themeStretch:e}=(0,c.A)(),t=(0,a.wA)();return(0,n.useEffect)((()=>{t((0,s.lS)()),t((0,s.kK)())}),[t]),(0,D.jsx)(d.A,{title:"Chat",children:(0,D.jsxs)(r.A,{maxWidth:!e&&"xl",children:[(0,D.jsx)(h.A,{heading:"Chat",links:[{name:"Dashboard",href:l.nB.root},{name:"Chat"}]}),(0,D.jsxs)(o.A,{sx:{height:"72vh",display:"flex"},children:[(0,D.jsx)(wt,{}),(0,D.jsx)($e,{})]})]})})}},76738:(e,t,i)=>{"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}i.d(t,{A:()=>n})},28170:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var n=i(98587),r=i(58168),o=i(9950),a=i(2803),s=i(5747),l=i(7951),c=i(79859),d=i(37665);function h(e){return(0,d.A)("MuiDialogContent",e)}(0,i(44245).A)("MuiDialogContent",["root","dividers"]);var p=i(23025),x=i(44414);const u=["className","dividers"],m=(0,l.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},i.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(p.A.root," + &")]:{paddingTop:0}})})),g=o.forwardRef((function(e,t){const i=(0,c.A)({props:e,name:"MuiDialogContent"}),{className:o,dividers:l=!1}=i,d=(0,n.A)(i,u),p=(0,r.A)({},i,{dividers:l}),g=(e=>{const{classes:t,dividers:i}=e,n={root:["root",i&&"dividers"]};return(0,s.A)(n,h,t)})(p);return(0,x.jsx)(m,(0,r.A)({className:(0,a.A)(g.root,o),ownerState:p,ref:t},d))}))},23025:(e,t,i)=>{"use strict";i.d(t,{A:()=>o,t:()=>r});var n=i(37665);function r(e){return(0,n.A)("MuiDialogTitle",e)}const o=(0,i(44245).A)("MuiDialogTitle",["root"])},80561:(e,t,i)=>{var n=i(88183);e.exports=function(e){return e&&e.length?n(e):[]}}}]);