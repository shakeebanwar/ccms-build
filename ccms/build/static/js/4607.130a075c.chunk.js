"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{16099:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(90706),l=r(79947),o=r(28339),n=r(6978),i=r(60820),s=r(36404),c=r(9950),d=r(14857),u=r(79537),p=r(48089),h=r(6368),g=r(82053),f=r(40033),w=r(42686),x=r(62740),v=r(30744),m=(r(90260),r(98091)),b=r(86608),A=(r(63358),r(20131)),O=r(44414);const y=e=>{const{events:t,selectedEventId:r}=e.calendar;return r?t.find((e=>Number(e.id)===Number(r))):null};function S(){const{themeStretch:e}=(0,b.A)(),t=(0,d.A)(),r=(0,v.wA)(),S=(0,m.A)("up","sm"),j=(0,c.useRef)(null),[C,D]=(0,c.useState)(new Date),[P,R]=(0,c.useState)(S?"dayGridMonth":"listWeek"),_=(0,v.d4)(y),{events:k,isOpenModal:V,selectedRange:E}=(0,v.d4)((e=>e.calendar));(0,c.useEffect)((()=>{r((0,w.Wb)())}),[r]),(0,c.useEffect)((()=>{const e=j.current;if(e){const t=e.getApi(),r=S?"dayGridMonth":"listWeek";t.changeView(r),R(r)}}),[S]);const T=()=>{r((0,w.Oo)())};return(0,O.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,O.jsxs)(p.A,{children:[(0,O.jsx)(h.A,{sx:{bgcolor:t.palette.primary.main,m:3,p:3,borderRadius:"12px"},children:(0,O.jsx)(g.A,{variant:"h4",color:"white",children:"Calendar"})}),(0,O.jsxs)(x.mg,{children:[(0,O.jsx)(x.a7,{date:C,view:P,onNextDate:()=>{const e=j.current;if(e){const t=e.getApi();t.next(),D(t.getDate())}},onPrevDate:()=>{const e=j.current;if(e){const t=e.getApi();t.prev(),D(t.getDate())}},onToday:()=>{const e=j.current;if(e){const t=e.getApi();t.today(),D(t.getDate())}},onChangeView:e=>{const t=j.current;if(t){t.getApi().changeView(e),R(e)}}}),(0,O.jsx)(a.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:k,ref:j,rerenderDelay:10,initialDate:C,initialView:P,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{r((0,w.PY)(e.event.id))},height:S?720:"auto",plugins:[l.A,o.Ay,i.Ay,n.Ay,s.Ay]})]})]}),(0,O.jsxs)(A.ys,{open:V,onClose:T,children:[(0,O.jsx)(f.A,{children:_?"Edit Order Contin":"Add Order Contin"}),(0,O.jsx)(x.lM,{event:_||{},range:E,onCancel:T})]})]})}},4607:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(9950),l=r(13564),o=r(79537),n=r(48089),i=r(68367),s=r(84142),c=r(12257),d=r(6368),u=r(82053),p=r(74745),h=r(1320),g=r(15769),f=r(34075),w=r(91434),x=r(16497),v=r(37324),m=r(53984),b=r(73447),A=r(57191),O=r(60899),y=r(29031),S=r(9449),j=r(90260),C=r(46765),D=r(86608),P=r(38861),R=r(8279),_=r(22704),k=(r(66075),r(44185)),V=r(63358),E=r(72870),T=r(12480),I=r(32741),L=r(95074),N=(r(16099),r(73561)),F=r(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},B=["new","old"],q=[{id:"status",label:"Order Status",align:"left",width:500},{id:"user",label:"ordered by",align:"left",width:600},{id:"request",label:"Request",align:"left",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"file_pdf",label:"Contract Pdf",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],U=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function W(){const{themeStretch:e}=(0,D.A)(),{enqueueSnackbar:t}=(0,y.dh)(),r=(0,l.Zp)(),{state:W}=(0,l.zy)(),z=null===W||void 0===W?void 0:W.orderType,{dense:G,page:Y,order:H,orderBy:Z,rowsPerPage:$,setPage:J,selected:K,onSort:Q,onChangeDense:X,onChangePage:ee,onChangeRowsPerPage:te}=(0,P.Ay)({defaultOrderBy:"createDate"}),[re,ae]=(0,a.useState)([]),[le,oe]=(0,a.useState)(""),[ne,ie]=(0,a.useState)("new"),[se,ce]=(0,a.useState)(null),[de,ue]=(0,a.useState)(null),{currentTab:pe,onChangeTab:he}=(0,C.A)("all"),[ge,fe]=(0,a.useState)("Title Insurance"),[we,xe]=(0,a.useState)(!1),ve=(0,a.useRef)(null),[me,be]=(0,a.useState)(!1),[Ae,Oe]=(0,a.useState)(""),[ye,Se]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;"Sightline\xae"!==ge&&"UCC"!==ge&&je(null===(e=U.find((e=>e.label===ge)))||void 0===e?void 0:e.api)}),[ge]),(0,a.useEffect)((()=>{var e;z&&(je(null===(e=U.find((e=>e.label===z)))||void 0===e?void 0:e.api),fe(z))}),[z]);const je=e=>{xe(!0);try{I.A.get("employee/".concat(e)).then((e=>{xe(!1);const r=e.data;console.log(r,"Dataemployee"),200===e.status?ae(r.orders):t(r.message)}))}catch(r){if(xe(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},Ce=(e,t)=>{Se(!0),be(e),Oe(t)},De=e=>{xe(!0),console.log(e,"files");const r=new FormData;r.append("file",e[0]);try{I.A.post("employee/complete/".concat(Ae,"/").concat(me),r).then((e=>{if(console.log(e,"status api"),xe(!1),200===e.status||201===e.status){const r=e.data,a=re.map((e=>e.id===me?{...e,status:Ae}:e));Se(!1),console.log(a,"UpdatedOrders"),ae(a),t(r.message)}})).catch((()=>{xe(!1)}))}catch(a){if(xe(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},Pe=(0,S.mN)(),{control:Re}=Pe,_e=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:l,filterService:o,filterStartDate:n,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=s.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));n&&i&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:re,comparator:(0,P.hz)(H,Z),filterName:le,filterService:ne,filterStatus:pe,filterStartDate:se,filterEndDate:de}),ke=G?56:76,Ve=!_e.length&&!!le||!_e.length&&!!pe||!_e.length&&!!ne||!_e.length&&!!de||!_e.length&&!!se,Ee=e=>re.filter((t=>t.status===e)).length,Te=[{value:"all",label:"All",color:"info",count:re.length},{value:"active",label:"Active",color:"info",count:Ee("active")},{value:"new",label:"New",color:"info",count:Ee("new")},{value:"placed",label:"Placed",color:"info",count:Ee("placed")},{value:"completed",label:"Completed",color:"success",count:Ee("completed")},{value:"on_hold",label:"On Hold",color:"warning",count:Ee("on_hold")},{value:"draft",label:"Draft",color:"default",count:Ee("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ee("cancelled")}];return(0,F.jsxs)(R.A,{title:"Order: Your Orders",children:[we&&(0,F.jsx)(L.A,{}),(0,F.jsx)("input",{type:"file",ref:ve,onChange:De,hidden:!0}),(0,F.jsxs)(o.A,{maxWidth:!e&&"lg",children:[(0,F.jsxs)(n.A,{sx:{p:3},children:[(0,F.jsx)(V.A,{heading:"All Orders",links:[{name:"Orders",href:j.i8.root},{name:"All Orders"}]}),(0,F.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ge,onChange:(e,t)=>fe(t),sx:{px:2,bgcolor:"background.neutral"},children:U.map((e=>(0,F.jsx)(s.A,{disableRipple:!0,value:e.label,label:(0,F.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,F.jsx)("div",{children:e.label})}),sx:{color:ge===e.label?"#22C55E":"black","&.Mui-selected":{color:"#22C55E"}}},e.label)))}),(0,F.jsx)(d.A,{sx:{py:2},children:(0,F.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:ge.label})}),(0,F.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:pe,onChange:he,sx:{px:2,bgcolor:"background.neutral"},children:Te.map((e=>(0,F.jsx)(s.A,{disableRipple:!0,value:e.value,label:(0,F.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,F.jsx)("div",{children:e.label})," ",(0,F.jsxs)(_.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,F.jsx)(p.A,{}),(0,F.jsx)(T.F5,{filterName:le,filterService:ne,filterStartDate:se,filterEndDate:de,onFilterName:e=>{oe(e),J(0)},onFilterService:e=>{ie(e.target.value)},onFilterStartDate:e=>{ce(e)},onFilterEndDate:e=>{ue(e)},optionsService:B}),(0,F.jsx)(k.A,{children:(0,F.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,F.jsxs)(g.A,{size:G?"small":"medium",children:[(0,F.jsx)(E.er,{order:H,orderBy:Z,headLabel:q,rowCount:re.length,numSelected:K.length,onSort:Q}),(0,F.jsxs)(f.A,{children:[_e.slice(Y*$,Y*$+$).map((e=>(0,F.jsx)(T.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===ge&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===ge&&(null!==e&&void 0!==e&&e.updated_by_pdf?r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):r(j.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===ge&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===ge&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ge&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ge&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,r(j.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===ge&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===ge&&r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===ge&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===ge&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ge&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ge&&r(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===ge&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===ge&&r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===ge&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===ge&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ge&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ge&&r(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Ce(e.id,"file_completed"),onContainDocumentUpload:()=>Ce(e.id,"contin_completed"),onStatusChange:r=>((e,r)=>{xe(!0);try{const a=new FormData;a.append("status",r),a.append("id",e),I.A.post("/employee/changeorderStatus",a).then((a=>{if(console.log(a,"status api"),xe(!1),200===a.status||201===a.status){const l=a.data,o=re.map((t=>t.id===e?{...t,status:r}:t));ae(o),t(l.message)}})).catch((e=>{xe(!1),console.log(e,"catch errror")}))}catch(a){xe(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,F.jsx)(E.dO,{height:ke,emptyRows:(0,P.xl)(Y,$,re.length)}),(0,F.jsx)(E.Sm,{isNotFound:Ve})]})]})})}),(0,F.jsxs)(d.A,{sx:{position:"relative"},children:[(0,F.jsx)(w.A,{rowsPerPageOptions:[5,10,25],component:"div",count:_e.length,rowsPerPage:$,page:Y,onPageChange:ee,onRowsPerPageChange:te}),(0,F.jsx)(x.A,{control:(0,F.jsx)(v.A,{checked:G,onChange:X}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,F.jsx)(m.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ye,onClose:()=>Se(!1),closeAfterTransition:!0,slots:{backdrop:b.A},slotProps:{backdrop:{timeout:500}},children:(0,F.jsx)(A.A,{in:ye,children:(0,F.jsx)(d.A,{sx:M,children:(0,F.jsx)(N.Op,{methods:Pe,children:(0,F.jsxs)(O.Ay,{item:!0,xs:12,md:12,children:[(0,F.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,F.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,F.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,F.jsx)(u.A,{variant:"h6",onClick:()=>{var e;return null===ve||void 0===ve||null===(e=ve.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,F.jsx)(N.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:De})]}),(0,F.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},40033:(e,t,r)=>{r.d(t,{A:()=>w});var a=r(58168),l=r(98587),o=r(9950),n=r(2803),i=r(5747),s=r(82053),c=r(7951),d=r(79859),u=r(23025),p=r(5536),h=r(44414);const g=["className","id"],f=(0,c.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),w=o.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:c}=r,w=(0,l.A)(r,g),x=r,v=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},u.t,t)})(x),{titleId:m=c}=o.useContext(p.A);return(0,h.jsx)(f,(0,a.A)({component:"h2",className:(0,n.A)(v.root,s),ownerState:x,ref:t,variant:"h6",id:m},w))}))}}]);