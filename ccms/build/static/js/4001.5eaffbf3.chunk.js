"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4001],{10608:(e,t,n)=>{n.d(t,{X:()=>r});const r=["active","draft","completed","cancelled","on hold","placed","new"]},63358:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(56801),a=n.n(r),i=n(6368),o=n(82053),s=n(22707),l=n(26689),d=n(52432),c=n(44414);function u(e){let{links:t,activeLast:n=!1,...r}=e;const a=t[t.length-1].name,s=t.map((e=>(0,c.jsx)(x,{link:e},e.name))),l=t.map((e=>(0,c.jsx)("div",{children:e.name!==a?(0,c.jsx)(x,{link:e}):(0,c.jsx)(o.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:a})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...r,children:n?s:l})}function x(e){let{link:t}=e;const{href:n,name:r,icon:a}=t;return(0,c.jsxs)(s.A,{variant:"body2",component:l.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,c.jsx)(i.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),r]},r)}function h(e){let{links:t,action:n,heading:r,moreLink:l=[],sx:d,...x}=e;return(0,c.jsxs)(i.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,c.jsx)(o.A,{variant:"h4",gutterBottom:!0,children:r}),(0,c.jsx)(u,{links:t,...x})]}),n&&(0,c.jsx)(i.A,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(i.A,{sx:{mt:2},children:a()(l)?(0,c.jsx)(s.A,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,c.jsx)(s.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},72900:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var r=n(90706),a=n(79947),i=n(28339),o=n(6978),s=n(60820),l=n(36404),d=n(9950),c=n(53065),u=n(64697),x=n(79537),h=n(75165),p=n(48089),m=n(40033),f=n(7951),v=n(70693),A=n(82053),g=n(12257),j=n(66075),y=n(44414);const D=e=>{let{handleAddEvent:t,handleAddReminder:n,handleCloseButtonTooltip:r}=e;return(0,y.jsxs)(v.A,{elevation:2,style:{padding:"10px",width:"150px",height:"140px",position:"absolute",left:"-130px",top:"-10px",backgroundColor:"lightgray"},children:[(0,y.jsx)(A.A,{variant:"p",sx:{float:"right",cursor:"pointer",position:"absolute",top:"10px"},onClick:r,children:"x"}),(0,y.jsxs)(g.A,{sx:{position:"absolute",top:"20px"},children:[(0,y.jsx)(h.A,{variant:"contained",startIcon:(0,y.jsx)(j.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:t,sx:{fontSize:"10px",position:"absolute",top:"60px",width:"120px"},children:"Order Contin"}),(0,y.jsx)(h.A,{variant:"contained",startIcon:(0,y.jsx)(j.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:n,sx:{fontSize:"10px",position:"absolute",top:"20px",width:"120px"},children:"Add Reminder"})]})]})};var w=n(32741);const b=e=>{var t;let{event:n,data:r,handleCloseTooltip:a}=e;const i=null===r||void 0===r?void 0:r.find((e=>(null===e||void 0===e?void 0:e.id)===Number(null===n||void 0===n?void 0:n.title)));return console.log(n,"event"),console.log(r,"dataFilter"),(0,y.jsxs)(v.A,{elevation:2,style:{padding:"10px",width:"300px",height:"auto",position:"relative",zIndex:1e3,borderRadius:"0px",transform:"translateX(-3%)"},children:[(0,y.jsx)(A.A,{variant:"p",sx:{float:"right",cursor:"pointer"},onClick:a,children:"x"}),(0,y.jsx)(A.A,{variant:"h5",children:i.title}),(0,y.jsxs)(A.A,{variant:"p",sx:{my:5,fontSize:12},children:["date: ",null===(t=i.start)||void 0===t?void 0:t.split("T")[0]]}),(0,y.jsx)(A.A,{sx:{my:2,fontSize:12},children:i.description})]})};var S=n(30744),C=n(42686),k=n(90260),M=n(86608),T=n(98091),I=n(20131),R=n(63358),E=n(62740),O=n(60666),X=n(23334),H=n.n(X),z=n(43974),N=n(29031),F=n(9449),W=n(68654),Y=n(8145),q=n(79739),V=n(21410),_=n(28095),B=(n(91745),n(73561));function P(e){let{event:t,range:n,onCancel:r,getDate:a}=e;const{enqueueSnackbar:i}=(0,N.dh)(),o=((0,S.wA)(),O.Ik().shape({title:O.Yj().max(255).required("Title is required"),description:O.Yj().max(5e3)})),s=(0,F.mN)({resolver:(0,W.t)(o),defaultValues:((e,t)=>{const n={title:"",order_id:e.order_id||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:t?new Date(t.end):new Date,date:a?new Date(a):new Date};return e||t?H()({},n,e):n})(t,n)}),{reset:l,control:d,setValue:c,handleSubmit:u,formState:{isSubmitting:x}}=s;return(0,y.jsxs)(B.Op,{methods:s,onSubmit:u((async e=>{try{const t={title:e.title,note:e.description,start:(0,z.A)(e.start,"HH:mm:ss"),end:(0,z.A)(e.end,"HH:mm:ss"),date:(0,z.A)(e.date,"yyyy-MM-dd HH:mm:ss")},n=await w.A.post("todo",t);console.log(n,"reminder"),r(),l()}catch(t){console.error(t)}})),children:[(0,y.jsxs)(g.A,{spacing:3,sx:{p:3},children:[(0,y.jsx)(B.o3,{name:"title",label:"title"}),(0,y.jsx)(B.o3,{name:"description",label:"Description",multiline:!0,rows:4}),(0,y.jsx)(F.xI,{name:"date",control:d,render:e=>{let{field:t}=e;return(0,y.jsx)(V.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy",renderInput:e=>(0,y.jsx)(Y.A,{...e,fullWidth:!0,value:a})})}}),(0,y.jsx)(F.xI,{name:"start",control:d,render:e=>{let{field:t}=e;return(0,y.jsx)(V.A,{...t,label:"Start Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,y.jsx)(Y.A,{...e,fullWidth:!0})})}}),(0,y.jsx)(F.xI,{name:"end",control:d,render:e=>{let{field:t}=e;return(0,y.jsx)(V.A,{...t,label:"End Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,y.jsx)(Y.A,{...e,fullWidth:!0,value:a})})}})]}),(0,y.jsxs)(q.A,{children:[(0,y.jsx)(h.A,{variant:"outlined",color:"inherit",onClick:r,children:"Cancel"}),(0,y.jsx)(_.A,{type:"submit",variant:"contained",loading:x,children:"Add"})]})]})}const G=e=>{const{events:t,selectedEventId:n}=e.calendar;return n?t.find((e=>Number(e.id)===Number(n))):null},L=(0,f.Ay)((e=>{let{className:t,...n}=e;return(0,y.jsx)(c.A,{...n,classes:{popper:t}})}))((e=>{let{theme:t}=e;return{["& .".concat(u.A.tooltip)]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:"300px",fontSize:t.typography.pxToRem(12),border:"none"}}}));function J(){const{themeStretch:e}=(0,M.A)(),t=(0,S.wA)(),n=(0,T.A)("up","sm"),c=(0,d.useRef)(null),[u,f]=(0,d.useState)(null),[v,A]=(0,d.useState)(),[g,O]=(0,d.useState)(null),[X,H]=(0,d.useState)(null),[z,N]=(0,d.useState)(""),[F,W]=(0,d.useState)([]),[Y,q]=(0,d.useState)([]),[V,_]=(0,d.useState)(new Date),[B,J]=(0,d.useState)(n?"dayGridMonth":"listWeek"),K=(0,S.d4)(G),{events:Q,isOpenModal:$,selectedRange:U,isOpenReminderModal:Z}=(0,S.d4)((e=>e.calendar));console.log(K,"events");(0,d.useEffect)((()=>{(async()=>{try{var e;const t=await w.A.get("todos"),n=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.todos)||[];W(n),console.log(t,"reminder")}catch(t){console.log(t,"error")}})()}),[Q]),(0,d.useEffect)((()=>{t((0,C.kQ)())}),[t]),(0,d.useEffect)((()=>{const e=Q.map((e=>({id:e.id,title:e.title,start:e.start,end:e.end,textColor:e.textColor||"#000",description:e.description}))),t=F.map((e=>({type:"reminder",id:e.id,title:e.note||e.title,start:new Date(e.date).toISOString().split("T")[0]+"T"+e.start,end:new Date(e.date).toISOString().split("T")[0]+"T"+e.end,textColor:e.textColor||"#000",description:e.note})));q([...e,...t])}),[Q,F]),console.log(Y,"mergedTasks"),(0,d.useEffect)((()=>{const e=c.current;if(e){const t=e.getApi(),r=n?"dayGridMonth":"listWeek";t.changeView(r),J(r)}}),[n]);const ee=()=>{t((0,C.qf)())},te=()=>{t((0,C.Oo)())},ne=()=>{t((0,C.kd)())},re=()=>{t((0,C.yJ)())},ae=()=>{O(null)},ie=()=>{H(null)};return(0,y.jsxs)(x.A,{maxWidth:!e&&"xl",children:[(0,y.jsx)(R.A,{heading:"Order Continuation",links:[{name:"Dashboard",href:k.nB.root},{name:"Order Continuation"}],action:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{variant:"contained",startIcon:(0,y.jsx)(j.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:ee,sx:{fontSize:"12px",mr:2},children:"Order Contin"}),(0,y.jsx)(h.A,{variant:"contained",startIcon:(0,y.jsx)(j.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:ne,sx:{fontSize:"12px"},children:"Add Reminder"})]})}),(0,y.jsx)(p.A,{children:(0,y.jsxs)(E.mg,{children:[(0,y.jsx)(E.a7,{date:V,view:B,onNextDate:()=>{const e=c.current;if(e){const t=e.getApi();t.next(),_(t.getDate())}},onPrevDate:()=>{const e=c.current;if(e){const t=e.getApi();t.prev(),_(t.getDate())}},onToday:()=>{const e=c.current;if(e){const t=e.getApi();t.today(),_(t.getDate())}},onChangeView:e=>{const t=c.current;if(t){t.getApi().changeView(e),J(e)}}}),(0,y.jsx)(r.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:Y,ref:c,rerenderDelay:10,initialDate:V,initialView:B,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventDrop:async e=>{let{event:n}=e;try{t((0,C.qM)(n.id,{allDay:n.allDay,start:n.start,end:n.end}))}catch(r){console.error(r)}},eventClick:e=>{var n,r;(console.log(e.el.fcSeg.eventRange.def.extendedProps.type,"info"),N(e.event.startStr),O({title:null===(n=e.event._def)||void 0===n?void 0:n.publicId,start:e.event.startStr,end:e.event.endStr,top:e.jsEvent.clientY,left:e.jsEvent.clientX}),"reminder"!==e.el.fcSeg.eventRange.def.extendedProps.type)&&t((0,C.PY)(null===(r=e.event)||void 0===r?void 0:r.id))},dateClick:e=>{console.log(e,"arg"),A(e.dateStr),f(e.date.toISOString().split("T")[0]),H({top:e.jsEvent.clientY,left:e.jsEvent.clientX})},dayCellContent:e=>{const t=e.date.toISOString().split("T")[0],n=e.date.toLocaleDateString("en-CA"),r=null===z||void 0===z?void 0:z.split("T")[0];return console.log(u===t,"dateStr"),(0,y.jsxs)(y.Fragment,{children:[g&&r===n&&(0,y.jsx)(L,{arrow:!0,open:!!g,onClose:ae,title:(0,y.jsx)(b,{event:g,data:Y,handleCloseTooltip:ae}),placement:"top",children:(0,y.jsx)("span",{})}),(0,y.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,y.jsx)("div",{children:e.dayNumberText}),u===t&&(0,y.jsx)(L,{arrow:!0,open:!!X,onClose:ie,title:(0,y.jsx)(D,{handleAddEvent:ee,handleAddReminder:ne,handleCloseButtonTooltip:ie}),placement:"top",children:(0,y.jsx)("span",{})})]})]})},eventResize:async e=>{let{event:n}=e;try{t((0,C.qM)(n.id,{allDay:n.allDay,start:n.start,end:n.end}))}catch(r){console.error(r)}},height:n?720:"auto",plugins:[a.A,i.Ay,s.Ay,o.Ay,l.Ay]})]})}),(0,y.jsxs)(I.ys,{open:$,onClose:te,children:[(0,y.jsx)(m.A,{children:K?"Edit Order Contin":"Add Order Contin"}),(0,y.jsx)(E.lM,{event:K||{},range:U,onCancel:te,getDate:v})]}),(0,y.jsxs)(I.ys,{open:Z,onClose:re,children:[(0,y.jsx)(m.A,{children:K?"Edit Reminder":"Add Reminder"}),(0,y.jsx)(P,{event:K||{},range:U,onCancel:re,getDate:v})]})]})}},34437:(e,t,n)=>{n.d(t,{j5:()=>s,kH:()=>l,ts:()=>i,uK:()=>o});var r=n(43974),a=n(1369);function i(e){return(0,r.A)(new Date(e),"dd MMMM yyyy")}function o(e){return(0,r.A)(new Date(e),"dd MMM yyyy HH:mm")}function s(e){return(0,r.A)(new Date(e),"dd/MM/yyyy hh:mm p")}function l(e){return(0,a.A)(new Date(e),{addSuffix:!0})}},12521:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(64388);function a(e){return(0,r.A)({},e)}},1369:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(27476),a=n(62588),i=n(94369),o=n(43298),s=n(98889),l=n(12521),d=n(20053),c=n(78397),u=1440,x=2520,h=43200,p=86400;function m(e,t){return(0,c.A)(1,arguments),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.A)(2,arguments);var m=n.locale||o.A;if(!m.formatDistance)throw new RangeError("locale must contain formatDistance property");var f=(0,r.A)(e,t);if(isNaN(f))throw new RangeError("Invalid time value");var v,A,g=(0,l.A)(n);g.addSuffix=Boolean(n.addSuffix),g.comparison=f,f>0?(v=(0,s.A)(t),A=(0,s.A)(e)):(v=(0,s.A)(e),A=(0,s.A)(t));var j,y=(0,i.A)(A,v),D=((0,d.A)(A)-(0,d.A)(v))/1e3,w=Math.round((y-D)/60);if(w<2)return n.includeSeconds?y<5?m.formatDistance("lessThanXSeconds",5,g):y<10?m.formatDistance("lessThanXSeconds",10,g):y<20?m.formatDistance("lessThanXSeconds",20,g):y<40?m.formatDistance("halfAMinute",null,g):y<60?m.formatDistance("lessThanXMinutes",1,g):m.formatDistance("xMinutes",1,g):0===w?m.formatDistance("lessThanXMinutes",1,g):m.formatDistance("xMinutes",w,g);if(w<45)return m.formatDistance("xMinutes",w,g);if(w<90)return m.formatDistance("aboutXHours",1,g);if(w<u){var b=Math.round(w/60);return m.formatDistance("aboutXHours",b,g)}if(w<x)return m.formatDistance("xDays",1,g);if(w<h){var S=Math.round(w/u);return m.formatDistance("xDays",S,g)}if(w<p)return j=Math.round(w/h),m.formatDistance("aboutXMonths",j,g);if((j=(0,a.A)(A,v))<12){var C=Math.round(w/h);return m.formatDistance("xMonths",C,g)}var k=j%12,M=Math.floor(j/12);return k<3?m.formatDistance("aboutXYears",M,g):k<9?m.formatDistance("overXYears",M,g):m.formatDistance("almostXYears",M+1,g)}(e,Date.now(),t)}}}]);