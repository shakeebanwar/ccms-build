"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[5209],{45209:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(9950),o=n(79537),a=n(6368),l=n(82053),i=n(29031),d=n(13564),s=n(54987),c=n(8279),u=n(30818),p=n(30744),y=n(86608),x=n(32741),m=n(48089),b=n(12257),g=n(74745),v=n(73878),_=(n(87307),n(28095)),h=n(44414);const f=e=>{let{docID:t,FileId:n,data:o}=e;const{enqueueSnackbar:l}=(0,i.dh)(),s=(0,d.Zp)(),c=(0,v.wA)(),{file:p}=(0,v.d4)((e=>e.File));null===p||void 0===p||p.find((e=>(null===e||void 0===e?void 0:e.id)===Number(n)));console.log(o,"file details"),(0,r.useEffect)((()=>{c((0,u.oc)())}),[]);const y=(0,r.useRef)(null),[f,A]=(0,r.useState)(!1),[j,w]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{var e;const r=await x.A.get("user/download/text_user_pdf/".concat(t,"/1"));if(null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e.status){var n;const e=null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.pdf_text.replace(/\n/g,"<br/>");console.log(e,"content api"),w(e)}}catch(r){console.log(r)}})()}),[]);const S=(e,t)=>{e.dataTransfer.setData("text",t)},C=e=>{document.execCommand(e,!1,null)},k=e=>{document.execCommand("formatBlock",!1,"<h".concat(e,">"))};return(0,h.jsx)(m.A,{sx:{mb:5,p:2,height:"100vh"},children:(0,h.jsx)(a.A,{sx:{px:2},children:(0,h.jsxs)(b.A,{gap:1,direction:"row",alignItems:"start",justifyContent:"space-between",children:[(0,h.jsxs)(b.A,{gap:1,direction:"column",alignItems:"start",justifyContent:"space-between",sx:{height:"auto",maxHeight:"90vh",width:"100%",overflow:"auto"},children:[(0,h.jsxs)("div",{style:{border:"3px solid #03a84e",borderRadius:"10px",padding:"10px",minHeight:"90vh",width:"100%",fontSize:"14px",overflowY:"auto",outline:"none",boxShadow:"none",outlineStyle:"none",outlineColor:"transparent",MozOutlineStyle:"none",WebkitBoxShadow:"none",outlineWidth:0},children:[(0,h.jsxs)(b.A,{gap:1,direction:"row",alignItems:"start",justifyContent:"space-between",flexWrap:"wrap",sx:{mb:2},children:[(0,h.jsx)("button",{onClick:()=>C("bold"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Bold"}),(0,h.jsx)("button",{onClick:()=>C("italic"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Italic"}),(0,h.jsx)("button",{onClick:()=>C("underline"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Underline"}),(0,h.jsx)("button",{onClick:()=>C("justifyLeft"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Left Align"}),(0,h.jsx)("button",{onClick:()=>C("justifyCenter"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Center Align"}),(0,h.jsx)("button",{onClick:()=>C("justifyRight"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Right Align"}),(0,h.jsx)("button",{onClick:()=>C("insertblockquote"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Quote"}),(0,h.jsx)("button",{onClick:()=>C("insertOrderedList"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Numbered List"}),(0,h.jsx)("button",{onClick:()=>C("insertUnorderedList"),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"Bullet List"}),(0,h.jsx)("button",{onClick:()=>k(1),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H1"}),(0,h.jsx)("button",{onClick:()=>k(2),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H2"}),(0,h.jsx)("button",{onClick:()=>k(3),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H3"}),(0,h.jsx)("button",{onClick:()=>k(4),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H4"}),(0,h.jsx)("button",{onClick:()=>k(5),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H5"}),(0,h.jsx)("button",{onClick:()=>k(6),style:{border:"1px solid #03a84e",borderRadius:"10px",padding:"5px"},children:"H6"})]}),(0,h.jsx)(g.A,{}),(0,h.jsx)("div",{ref:y,contentEditable:!0,onDrop:e=>{e.preventDefault();const t=e.dataTransfer.getData("text"),n=document.createElement("span");n.contentEditable="false",n.style.display="inline-block",n.style.color="#000",n.style.fontSize="12px",n.style.margin="0 0px",n.style.width="auto",n.style.height="auto",n.innerText=t;const r=y.current,o=window.getSelection();if(!o.rangeCount)return;const a=o.getRangeAt(0);let l=a.startContainer;for(;l;){if(l.nodeType===Node.ELEMENT_NODE&&"SPAN"===l.tagName)return;l=l.parentNode}a.insertNode(n),a.setStartAfter(n),o.removeAllRanges(),o.addRange(a),r.focus()},onDragOver:e=>{e.preventDefault()},dangerouslySetInnerHTML:j?{__html:j}:void 0})]}),(0,h.jsx)(_.A,{loading:f,variant:"contained",onClick:async()=>{A(!0);try{var e;const n=y.current.innerHTML,r=new FormData;r.append("html_content",n);const o=await x.A.post("user/update/text_user_pdf/".concat(t),r);null!==o&&void 0!==o&&null!==(e=o.data)&&void 0!==e&&e.status&&(l(null===o||void 0===o?void 0:o.data.message),console.log(o,"upload html"),s(-1))}catch(n){A(!1),console.log(n)}},sx:{mt:"20px"},children:"Save"})]}),(0,h.jsxs)(b.A,{gap:1,direction:"column",alignItems:"start",justifyContent:"space-between",sx:{height:"auto",maxHeight:"90vh",overflowY:"auto",width:"40%"},children:[(0,h.jsx)("h4",{children:"Subject Premises"}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",marginBottom:"20px"},children:[{id:1,content:"{{subject_premise.property_location}} {{subject_premise.city_village}} {{subject_premise.county}} {{subject_premise.zipcode}}",value:"Full Address"},{id:2,content:"{{subject_premise.property_location}}",value:"address"},{id:3,content:"{{subject_premise.block}}",value:"Block"},{id:4,content:"{{subject_premise.city_village}}",value:"City"},{id:5,content:"{{subject_premise.county}}",value:"County"},{id:6,content:"{{subject_premise.district}}",value:"District"},{id:7,content:"{{subject_premise.lot}}",value:"Lot"},{id:8,content:"{{subject_premise.section}}",value:"Section"},{id:9,content:"{{subject_premise.zipcode}}",value:"Zipcode"}].map((e=>(0,h.jsx)("div",{draggable:!0,onDragStart:t=>S(t,e.content,e.value),style:{border:"1px solid #03a84e",color:"white",borderRadius:"10px",padding:"2px 2px",cursor:"grab",width:"auto",height:"auto",textAlign:"center",backgroundColor:"#03a84e",whiteSpace:"nowrap"},children:e.value},e.id)))}),(0,h.jsx)("h4",{children:"Property"}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",marginBottom:"20px"},children:[{id:1,content:"{{order_title.property_type}}",value:"Property Type"},{id:2,content:"{{order_title.transaction_type}}",value:"Transaction Type"},{id:3,content:"{{order_title.purchase_price}}",value:"Purchase Price"},{id:4,content:"{{loan_amount.amount}}",value:"Loan Amount"}].map((e=>(0,h.jsx)("div",{draggable:!0,onDragStart:t=>S(t,e.content,e.value),style:{border:"1px solid #03a84e",color:"white",borderRadius:"10px",padding:"2px 5px",cursor:"grab",width:"100%",height:"auto",textAlign:"center",backgroundColor:"#03a84e",whiteSpace:"nowrap"},children:e.value},e.id)))}),(0,h.jsx)("h4",{children:"Names"}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",gap:"10px",marginBottom:"20px"},children:[{id:1,content:"{{buyers.type}}",value:"Buyer Type"},{id:2,content:"{{buyers.first_name}} {{buyers.middle_name}} {{buyers.last_name}}",value:"Buyer Full Name"},{id:3,content:"{{buyers.first_name}}",value:"Buyer First Name"},{id:4,content:"{{buyers.middle_name}}",value:"Buyer Middle Name"},{id:5,content:"{{buyers.last_name}}",value:"Buyer Last Name"},{id:6,content:"{{buyer_attorney.address}} {{buyer_attorney.city}} {{buyer_attorney.state}} {{buyer_attorney.zipcode}}",value:"Buyer Attorney Full Address"},{id:7,content:"{{buyer_attorney.address}}",value:"Buyer Attorney Address"},{id:8,content:"{{buyer_attorney.city}}",value:"Buyer Attorney City"},{id:9,content:"{{buyer_attorney.attorney_name}}",value:"Buyer Attorney Name"},{id:10,content:"{{buyer_attorney.email}}",value:"Buyer Attorney Email"},{id:11,content:"{{buyer_attorney.firm_name}}",value:"Buyer Attorney Firm Name"},{id:12,content:"{{buyer_attorney.phone_number}}",value:"Buyer Attorney Number"},{id:13,content:"{{buyer_attorney.state}}",value:"Buyer Attorney State"},{id:14,content:"{{buyer_attorney.zipcode}}",value:"Buyer Attorney Zipcode"},{id:15,content:"{{sellers.type}}",value:"Seller Type"},{id:16,content:"{{sellers.first_name}} {{sellers.middle_name}} {{sellers.last_name}}",value:"Sellers Full Name"},{id:17,content:"{{sellers.first_name}}",value:"Seller First Name"},{id:18,content:"{{sellers.middle_name}}",value:"Seller Middle Name"},{id:19,content:"{{sellers.last_name}}",value:"Seller Last Name"},{id:20,content:"{{seller_attorney.address}} {{seller_attorney.city}} {{seller_attorney.state}} {{seller_attorney.zipcode}}",value:"Seller Attorney Full Address"},{id:21,content:"{{seller_attorney.address}}",value:"Seller Attorney Address"},{id:22,content:"{{seller_attorney.city}}",value:"Seller Attorney City"},{id:23,content:"{{seller_attorney.attorney_name}}",value:"Seller Attorney Name"},{id:24,content:"{{seller_attorney.email}}",value:"Seller Attorney Email"},{id:25,content:"{{seller_attorney.firm_name}}",value:"Seller Attorney Firm Name"},{id:26,content:"{{seller_attorney.phone_number}}",value:"Seller Attorney Number"},{id:27,content:"{{seller_attorney.state}}",value:"Seller Attorney State"},{id:28,content:"{{seller_attorney.zipcode}}",value:"Seller Attorney Zipcode"},{id:1,content:"{{lender.address}}",value:"Lender Address"},{id:2,content:"{{lender.city}}",value:"Lender City"},{id:3,content:"{{lender.organization}}",value:"Lender Organization"},{id:4,content:"{{lender.state}}",value:"Lender State"},{id:5,content:"{{lender_attorney.address}} {{lender_attorney.city}} {{lender_attorney.state}} {{lender_attorney.zipcode}}",value:"Lender Attorney Full Address"},{id:6,content:"{{lender_attorney.city}}",value:"Lender Attorney City"},{id:7,content:"{{lender_attorney.address}}",value:"Lender Attorney Address"},{id:8,content:"{{lender_attorney.attorney_name}}",value:"Lender Attorney Name"},{id:9,content:"{{lender_attorney.email}}",value:"Lender Attorney Email"},{id:10,content:"{{lender_attorney.firm_name}}",value:"Lender Attorney Firm Name"},{id:11,content:"{{lender_attorney.phone_number}}",value:"Lender Attorney Number"},{id:12,content:"{{lender_attorney.state}}",value:"Lender Attorney State"},{id:13,content:"{{lender_attorney.zipcode}}",value:"Lender Attorney Zipcode"},{id:14,content:"{{real_estate_agents.rea_first_name}}",value:"Real Estate Agents First Name"},{id:15,content:"{{real_estate_agents.rea_last_name}}",value:"Real Estate Agents Last Name"},{id:16,content:"{{mortgage_brokers.mb_first_name}}",value:"Mortgage Brokers First Name"},{id:17,content:"{{mortgage_brokers.mb_last_name}}",value:"Mortgage Brokers Last Name"}].map((e=>(0,h.jsx)("div",{draggable:!0,onDragStart:t=>S(t,e.content,e.value),style:{border:"1px solid #03a84e",color:"white",borderRadius:"10px",padding:"2px 5px",cursor:"grab",width:"auto",height:"auto",textAlign:"center",backgroundColor:"#03a84e",whiteSpace:"nowrap"},children:e.value},e.id)))})]})]})})})},A=()=>{const{enqueueSnackbar:e}=(0,i.dh)(),{themeStretch:t}=(0,y.A)(),n=(0,d.zy)(),{state:m}=n,{id:b}=(0,d.g)(),{file:g}=(0,p.d4)((e=>e.File));console.log(g,"file details");const[v,_]=(0,r.useState)([]),[A,j]=(0,r.useState)(),[w,S]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[N,L]=(0,r.useState)([]);(0,r.useRef)("");(0,r.useEffect)((()=>{(0,p.JD)((0,u.oc)())}),[]);(0,r.useEffect)((()=>{(async()=>{try{const e=await x.A.get("/user/download/user_pdf/".concat(b),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data],{type:"application/pdf"}));await R(t),console.log(t,"preview")}catch(e){console.log(e,"autofill")}finally{k(!1),S(null)}})()}),[]);const R=async e=>{const t=s.YE(e);try{const e=await t.promise;let n="";for(let t=1;t<=e.numPages;t++){const r=await e.getPage(t),o=await r.getTextContent();n+=o.items.map((e=>e.str)).join(" ")+"\n"}return console.log(n,"extractedText"),n}catch(n){return console.error("Error extracting text from PDF:",n),""}};return(0,h.jsx)(c.A,{title:"Personal Documents",children:(0,h.jsxs)(o.A,{maxWidth:!t&&"lg",children:[(0,h.jsx)(a.A,{sx:{display:"flex",alignItems:"center"},children:(0,h.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Edit Documents"})}),(0,h.jsx)(f,{docID:b,FileId:A,data:m})]})})}}}]);