"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{16099:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(90706),l=r(79947),o=r(28339),i=r(6978),n=r(60820),s=r(36404),c=r(9950),d=r(14857),u=r(79537),p=r(48089),h=r(6368),g=r(82053),f=r(40033),w=r(42686),v=r(62740),x=r(30744),m=(r(90260),r(98091)),b=r(86608),A=(r(63358),r(20131)),y=r(44414);const O=e=>{const{events:t,selectedEventId:r}=e.calendar;return r?t.find((e=>Number(e.id)===Number(r))):null};function S(){const{themeStretch:e}=(0,b.A)(),t=(0,d.A)(),r=(0,x.wA)(),S=(0,m.A)("up","sm"),j=(0,c.useRef)(null),[C,D]=(0,c.useState)(new Date),[_,P]=(0,c.useState)(S?"dayGridMonth":"listWeek"),R=(0,x.d4)(O),{events:k,isOpenModal:E,selectedRange:V}=(0,x.d4)((e=>e.calendar));(0,c.useEffect)((()=>{r((0,w.Wb)())}),[r]),(0,c.useEffect)((()=>{const e=j.current;if(e){const t=e.getApi(),r=S?"dayGridMonth":"listWeek";t.changeView(r),P(r)}}),[S]);const T=()=>{r((0,w.Oo)())};return(0,y.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,y.jsxs)(p.A,{children:[(0,y.jsx)(h.A,{sx:{bgcolor:t.palette.primary.main,m:3,p:3,borderRadius:"12px"},children:(0,y.jsx)(g.A,{variant:"h4",color:"white",children:"Calendar"})}),(0,y.jsxs)(v.mg,{children:[(0,y.jsx)(v.a7,{date:C,view:_,onNextDate:()=>{const e=j.current;if(e){const t=e.getApi();t.next(),D(t.getDate())}},onPrevDate:()=>{const e=j.current;if(e){const t=e.getApi();t.prev(),D(t.getDate())}},onToday:()=>{const e=j.current;if(e){const t=e.getApi();t.today(),D(t.getDate())}},onChangeView:e=>{const t=j.current;if(t){t.getApi().changeView(e),P(e)}}}),(0,y.jsx)(a.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:k,ref:j,rerenderDelay:10,initialDate:C,initialView:_,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{r((0,w.PY)(e.event.id))},height:S?720:"auto",plugins:[l.A,o.Ay,n.Ay,i.Ay,s.Ay]})]})]}),(0,y.jsxs)(A.ys,{open:E,onClose:T,children:[(0,y.jsx)(f.A,{children:R?"Edit Order Contin":"Add Order Contin"}),(0,y.jsx)(v.lM,{event:R||{},range:V,onCancel:T})]})]})}},4607:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(9950),l=r(13564),o=r(79537),i=r(48089),n=r(68367),s=r(84142),c=r(12257),d=r(6368),u=r(82053),p=r(74745),h=r(1320),g=r(15769),f=r(34075),w=r(91434),v=r(16497),x=r(37324),m=r(53984),b=r(73447),A=r(57191),y=r(60899),O=r(29031),S=r(9449),j=r(90260),C=r(46765),D=r(86608),_=r(38861),P=r(8279),R=r(22704),k=(r(66075),r(44185)),E=r(63358),V=r(72870),T=r(12480),I=r(32741),L=r(95074),N=(r(16099),r(73561)),F=r(33507),M=r(44414);const q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},B=["new","old"],z=[{id:"status",label:"Order Status",align:"left",width:500},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"file_pdf",label:"Contract Pdf",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],U=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function W(){var e;const{user:t}=(0,F.A)(),{themeStretch:r}=(0,D.A)(),{enqueueSnackbar:W}=(0,O.dh)(),G=(0,l.Zp)(),{state:Y}=(0,l.zy)(),H=null===Y||void 0===Y?void 0:Y.orderType;console.log(t,"user");const{dense:Z,page:$,order:J,orderBy:K,rowsPerPage:Q,setPage:X,selected:ee,onSort:te,onChangeDense:re,onChangePage:ae,onChangeRowsPerPage:le}=(0,_.Ay)({defaultOrderBy:"createDate"}),oe=(null===t||void 0===t?void 0:t.user_permissions)||{},ie=U.filter((e=>!0===(null===oe||void 0===oe?void 0:oe[e.permission])));console.log(ie,"filteredTabs");const[ne,se]=(0,a.useState)([]),[ce,de]=(0,a.useState)(""),[ue,pe]=(0,a.useState)("new"),[he,ge]=(0,a.useState)(null),[fe,we]=(0,a.useState)(null),{currentTab:ve,onChangeTab:xe}=(0,C.A)("all"),[me,be]=(0,a.useState)((null===ie||void 0===ie?void 0:ie.length)>0?null===(e=ie[0])||void 0===e?void 0:e.label:null),[Ae,ye]=(0,a.useState)(!1),Oe=(0,a.useRef)(null),[Se,je]=(0,a.useState)(!1),[Ce,De]=(0,a.useState)(""),[_e,Pe]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;"Sightline\xae"!==me&&"UCC"!==me&&Re(null===ie||void 0===ie||null===(e=ie.find((e=>e.label===me)))||void 0===e?void 0:e.api)}),[me]),(0,a.useEffect)((()=>{var e;H&&(Re(null===(e=U.find((e=>e.label===H)))||void 0===e?void 0:e.api),be(H))}),[H]);const Re=e=>{ye(!0);try{I.A.get("employee/".concat(e)).then((e=>{ye(!1);const t=e.data;console.log(t,"Dataemployee"),200===e.status?se(t.orders):W(t.message)}))}catch(t){if(ye(!1),t.errors){Object.keys(t.errors).map((e=>W(t.errors[e][0],{variant:"error"})))}}},ke=(e,t)=>{Pe(!0),je(e),De(t)},Ee=e=>{ye(!0),console.log(e,"files");const t=new FormData;t.append("file",e[0]);try{I.A.post("employee/complete/".concat(Ce,"/").concat(Se),t).then((e=>{if(console.log(e,"status api"),ye(!1),200===e.status||201===e.status){const t=e.data,r=ne.map((e=>e.id===Se?{...e,status:Ce}:e));Pe(!1),console.log(r,"UpdatedOrders"),se(r),W(t.message)}})).catch((()=>{ye(!1)}))}catch(r){if(ye(!1),r.errors){Object.keys(r.errors).map((e=>W(r.errors[e][0],{variant:"error"})))}}},Ve=(0,S.mN)(),{control:Te}=Ve,Ie=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:l,filterService:o,filterStartDate:i,filterEndDate:n}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=s.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));i&&n&&(t=t.filter((e=>e.updated_at.getTime()>=i.getTime()&&e.updated_at.getTime()<=n.getTime())));return t}({tableData:ne,comparator:(0,_.hz)(J,K),filterName:ce,filterService:ue,filterStatus:ve,filterStartDate:he,filterEndDate:fe}),Le=Z?56:76,Ne=!Ie.length&&!!ce||!Ie.length&&!!ve||!Ie.length&&!!ue||!Ie.length&&!!fe||!Ie.length&&!!he,Fe=e=>ne.filter((t=>t.status===e)).length,Me=[{value:"all",label:"All",color:"info",count:ne.length},{value:"active",label:"Active",color:"info",count:Fe("active")},{value:"new",label:"New",color:"info",count:Fe("new")},{value:"placed",label:"Placed",color:"info",count:Fe("placed")},{value:"completed",label:"Completed",color:"success",count:Fe("completed")},{value:"on_hold",label:"On Hold",color:"warning",count:Fe("on_hold")},{value:"draft",label:"Draft",color:"default",count:Fe("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Fe("cancelled")}],[qe,Be]=(0,a.useState)(ne),[ze,Ue]=(0,a.useState)(ne);return(0,a.useEffect)((()=>{Be(ne),Ue(ne)}),[ne]),(0,a.useEffect)((()=>{if("default"===K)Ue(qe);else{const e=[...qe].sort((0,_.hz)(J,K));Ue(e)}}),[J,K]),(0,M.jsxs)(P.A,{title:"Order: Your Orders",children:[Ae&&(0,M.jsx)(L.A,{}),(0,M.jsx)("input",{type:"file",ref:Oe,onChange:Ee,hidden:!0}),(0,M.jsxs)(o.A,{maxWidth:!r&&"lg",children:[(0,M.jsxs)(i.A,{sx:{p:3},children:[(0,M.jsx)(E.A,{heading:"All Orders",links:[{name:"Orders",href:j.i8.root},{name:"All Orders"}]}),(0,M.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:me,onChange:(e,t)=>be(t),sx:{px:2,bgcolor:"background.neutral"},children:ie.map((e=>(0,M.jsx)(s.A,{disableRipple:!0,value:e.label,label:(0,M.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:e.label})}),sx:{color:me===e.label?"#22C55E":"black","&.Mui-selected":{color:"#22C55E"}}},e.label)))}),(0,M.jsx)(d.A,{sx:{py:2},children:(0,M.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:null===me||void 0===me?void 0:me.label})}),(0,M.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ve,onChange:xe,sx:{px:2,bgcolor:"background.neutral"},children:Me.map((e=>(0,M.jsx)(s.A,{disableRipple:!0,value:e.value,label:(0,M.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,M.jsx)("div",{children:e.label})," ",(0,M.jsxs)(R.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,M.jsx)(p.A,{}),(0,M.jsx)(T.F5,{filterName:ce,filterService:ue,filterStartDate:he,filterEndDate:fe,onFilterName:e=>{de(e),X(0)},onFilterService:e=>{pe(e.target.value)},onFilterStartDate:e=>{ge(e)},onFilterEndDate:e=>{we(e)},optionsService:B}),(0,M.jsx)(k.A,{children:(0,M.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,M.jsxs)(g.A,{size:Z?"small":"medium",children:[(0,M.jsx)(V.er,{order:J,orderBy:K,headLabel:z,rowCount:ne.length,numSelected:ee.length,onSort:te}),(0,M.jsxs)(f.A,{children:[ze.slice($*Q,$*Q+Q).map((e=>(0,M.jsx)(T.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===me&&G(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===me&&(null!==e&&void 0!==e&&e.updated_by_pdf?G(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):G(j.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===me&&G(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===me&&G(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&G(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,G(j.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===me&&G(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===me&&G(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===me&&G(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===me&&G(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&G(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&G(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===me&&G(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===me&&G(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===me&&G(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===me&&G(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&G(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&G(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>ke(e.id,"file_completed"),onContainDocumentUpload:()=>ke(e.id,"contin_completed"),onStatusChange:t=>((e,t)=>{ye(!0);try{const r=new FormData;r.append("status",t),r.append("id",e),I.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),ye(!1),200===r.status||201===r.status){const a=r.data,l=ne.map((r=>r.id===e?{...r,status:t}:r));se(l),W(a.message)}})).catch((e=>{ye(!1),console.log(e,"catch errror")}))}catch(r){ye(!1),r.errors&&Object.keys(r.errors).map((e=>W(r.errors[e][0],{variant:"error"})))}})(e.id,t)},e.id))),(0,M.jsx)(V.dO,{height:Le,emptyRows:(0,_.xl)($,Q,ne.length)}),(0,M.jsx)(V.Sm,{isNotFound:Ne})]})]})})}),(0,M.jsxs)(d.A,{sx:{position:"relative"},children:[(0,M.jsx)(w.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ie.length,rowsPerPage:Q,page:$,onPageChange:ae,onRowsPerPageChange:le}),(0,M.jsx)(v.A,{control:(0,M.jsx)(x.A,{checked:Z,onChange:re}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,M.jsx)(m.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:_e,onClose:()=>Pe(!1),closeAfterTransition:!0,slots:{backdrop:b.A},slotProps:{backdrop:{timeout:500}},children:(0,M.jsx)(A.A,{in:_e,children:(0,M.jsx)(d.A,{sx:q,children:(0,M.jsx)(N.Op,{methods:Ve,children:(0,M.jsxs)(y.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,M.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,M.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,M.jsx)(u.A,{variant:"h6",onClick:()=>{var e;return null===Oe||void 0===Oe||null===(e=Oe.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,M.jsx)(N.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:Ee})]}),(0,M.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},40033:(e,t,r)=>{r.d(t,{A:()=>w});var a=r(58168),l=r(98587),o=r(9950),i=r(2803),n=r(5747),s=r(82053),c=r(7951),d=r(79859),u=r(23025),p=r(5536),h=r(44414);const g=["className","id"],f=(0,c.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),w=o.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:c}=r,w=(0,l.A)(r,g),v=r,x=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},u.t,t)})(v),{titleId:m=c}=o.useContext(p.A);return(0,h.jsx)(f,(0,a.A)({component:"h2",className:(0,i.A)(x.root,s),ownerState:v,ref:t,variant:"h6",id:m},w))}))}}]);