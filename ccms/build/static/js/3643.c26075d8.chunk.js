(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3643],{63358:(e,o,n)=>{"use strict";n.d(o,{A:()=>u});var l=n(56801),t=n.n(l),a=n(6368),i=n(82053),r=n(22707),s=n(26689),d=n(52432),c=n(44414);function p(e){let{links:o,activeLast:n=!1,...l}=e;const t=o[o.length-1].name,r=o.map((e=>(0,c.jsx)(x,{link:e},e.name))),s=o.map((e=>(0,c.jsx)("div",{children:e.name!==t?(0,c.jsx)(x,{link:e}):(0,c.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:t})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(a.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...l,children:n?r:s})}function x(e){let{link:o}=e;const{href:n,name:l,icon:t}=o;return(0,c.jsxs)(r.A,{variant:"body2",component:s.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,c.jsx)(a.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),l]},l)}function u(e){let{links:o,action:n,heading:l,moreLink:s=[],sx:d,...x}=e;return(0,c.jsxs)(a.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:l}),(0,c.jsx)(p,{links:o,...x})]}),n&&(0,c.jsx)(a.A,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(a.A,{sx:{mt:2},children:t()(s)?(0,c.jsx)(r.A,{href:s,target:"_blank",rel:"noopener",variant:"body2",children:s}):null===s||void 0===s?void 0:s.map((e=>(0,c.jsx)(r.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},42373:(e,o,n)=>{"use strict";n.r(o),n.d(o,{default:()=>N});var l=n(9950),t=n(25277),a=n(79537),i=n(6368),r=n(12257),s=n(75165),d=n(60899),c=n(82053),p=n(48089),x=n(50704),u=n(53984),h=n(73447),g=n(57191),m=n(28095),f=n(7951),v=n(19657),b=n(9449),j=n(29031),w=n(13564),A=n(26689),y=n(87307),k=n.n(y),S=n(73114),C=(n(73970),n(59019),n(41397)),_=n(48711),F=n(66677),D=n(8279),E=n(34117),I=n(86608),L=n(63358),R=n(90260),B=n(66075),P=n(52401),W=n(30818),G=n(32741),T=(n(12490),n(44414));S.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(S.version,"/pdf.worker.js");const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},N=()=>{var e;(0,f.Ay)(t.A)((e=>{let{theme:o}=e;const n=(o.palette.mode,"#00AB55");return{backgroundColor:"#00AB55",height:o.spacing(3),color:"white",padding:"15px",fontWeight:o.typography.fontWeightBold,"&:hover, &:focus":{backgroundColor:(0,v.tL)(n,.06)},"&:active":{boxShadow:o.shadows[1],backgroundColor:(0,v.tL)(n,.12)}}}));const o=(0,w.Zp)(),n=(0,w.zy)().pathname,{enqueueSnackbar:y}=(0,j.dh)(),{themeStretch:S}=(0,I.A)(),[N,q]=(0,l.useState)([]),[H,O]=(0,l.useState)(),[U,M]=(0,l.useState)(),[V,$]=(0,l.useState)(null),[J,Z]=(0,l.useState)(!1),[K,Q]=(0,l.useState)([]),[X,Y]=(0,l.useState)(!1),[ee,oe]=(0,l.useState)(!1),[ne,le]=(0,l.useState)(),[te,ae]=(0,l.useState)(),[ie,re]=(0,l.useState)(""),se=(0,l.useRef)(""),{file:de}=((0,l.useRef)(),(0,E.d4)((e=>e.File)));console.log(de,"file details"),(0,l.useEffect)((()=>{(0,E.JD)((0,W.oc)())}),[]);const ce=(0,b.mN)(),{setValue:pe,getValues:xe}=ce,ue=(0,C.debounce)((e=>{console.log(e,"value"),M(e)}),300),he=(0,l.useMemo)((()=>{if(console.log("Searching for:",U),null===U||void 0===U||!U.trim())return de.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:null===e||void 0===e?void 0:e.id})));const e=U.toLowerCase();return de.filter((o=>{var n,l,t,a,i,r,s,d;return null!==(n=null===o||void 0===o||null===(l=o.file_name)||void 0===l?void 0:l.toLowerCase().includes(e))&&void 0!==n&&n||null!==(t=null===o||void 0===o||null===(a=o.file_no)||void 0===a?void 0:a.toLowerCase().includes(e))&&void 0!==t&&t||null!==(i=null===o||void 0===o||null===(r=o.DummyData)||void 0===r||null===(s=r.subject_premise)||void 0===s||null===(d=s.property_location)||void 0===d?void 0:d.toLowerCase().includes(e))&&void 0!==i&&i})).map((e=>{var o,n;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,") - ").concat(null===e||void 0===e||null===(o=e.DummyData)||void 0===o||null===(n=o.subject_premise)||void 0===n?void 0:n.property_location),value:null===e||void 0===e?void 0:e.id}}))}),[U,de]),ge=(0,l.useCallback)((e=>{if(e&&e.length>0){const o=e[0];console.log(o,"acceptedFile"),ae(o),le(o.name),pe("file",o)}}),[pe]),me=async()=>{Z(!0);try{var e;const o=await G.A.get("/user/doc/user_pdf");console.log(o,"personal doc show"),q(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.files)}catch(o){console.log(o,"personal doc error")}finally{Z(!1)}};(0,l.useEffect)((()=>{me()}),[]);const fe=(e,o,n)=>{console.log("addclass");const l=new RegExp("(<".concat(o,"(?![^>]*class=)[^>]*)(>)"),"gi"),t=(new RegExp("(<".concat(o,"[^>]*class=[\"'][^\"']*)[\"']"),"gi"),e.replace(l,'$1 class="'.concat(n,'"$2')));return console.log(t,"updatedHtml"),t},ve=(e,o)=>{oe(!0),console.log(e,"pdfText");let n=(e=>{let o=e;return o=o.replace(/}}/g,""),o=o.replace(/contenteditable="\\&quot;false\\&quot;"/g,'contenteditable="false"'),o})(e);n=(e=>{let o=e;return o=o.replace(/<h1>/g,'<h1 class="page-break">'),o=o.replace(/<h2>/g,'<h2 class="page-break">'),o=o.replace(/<p>/g,'<p class="no-break">'),o})(n),n=(e=>{let o=e;return o=o.replace(/<h1>/g,'<h1 class="underline text-center">'),o=o.replace(/<h2>/g,'<h2 class="underline text-left">'),o})(n);const l=document.createElement("div");l.innerHTML='<div class="pdf-container">'.concat(n,"</div>");const t=document.createElement("style");t.innerHTML="\n  @page {\n    margin: 1in;\n  }\n\n  body {\n    font-family: Arial, sans-serif;\n    font-size: 9px;\n    line-height: 1.6;\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n  }\n\n  .pdf-container {\n    width: 100%;\n    max-width: 1000px;\n    box-sizing: border-box;\n    padding: 15px;\n    overflow: hidden;\n  }\n\n  .page-break {\n    page-break-before: always;\n  }\n\n  .no-break {\n    page-break-inside: avoid;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    margin-top: 8px;\n    margin-bottom: 8px;\n    padding-bottom: 2px;\n    border-bottom: 2px solid #000;\n  }\n\n  .text-center {\n    text-align: center;\n  }\n\n  .text-left {\n    text-align: left;\n  }\n\n  .text-right {\n    text-align: right;\n  }\n\n  span {\n    display: inline-block;\n  }\n",l.prepend(t);const a={margin:[2,.5,1,.5],filename:o,image:{type:"jpeg",quality:.98},html2canvas:{scale:3,useCORS:!0,allowTaint:!1},jsPDF:{unit:"mm",format:[750,1100],orientation:"portrait"}};k()().set(a).from(l).save().then((()=>{oe(!1),y("PDF generated successfully!",{variant:"success"})})).catch((e=>{oe(!1),y("Error generating PDF",{variant:"error"}),console.error("Error generating PDF:",e)}))},be=[{label:"Personal Documents",value:"/dashboard/personal-documents",path:R.nB.personaldocument},{label:"Documents",value:"/dashboard/legal-forms",path:R.nB.legalForm}];return(0,T.jsx)(D.A,{title:"Personal Documents",children:(0,T.jsxs)(a.A,{maxWidth:!S&&"xl",children:[(0,T.jsxs)(i.A,{sx:{bgcolor:"#2e3c56",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsx)(r.A,{sx:{width:"25%"},children:(0,T.jsx)("input",{type:"text",placeholder:"Search",ref:se,value:(null===se||void 0===se||null===(e=se.current)||void 0===e?void 0:e.value)||"",onChange:e=>{const o=e.target.value.toLowerCase();se.current.value=o;const n=N.filter((e=>e.name.toLowerCase().includes(o)));q(n)},style:{width:"350px",backgroundColor:"#4e596f",color:"white",border:"none",padding:"10px",borderRadius:"4px",outline:"none",fontSize:"14px"}})}),(0,T.jsxs)(r.A,{direction:"row",spacing:2,children:[(0,T.jsx)(s.A,{sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,T.jsx)(B.A,{icon:"clarity:form-line"}),children:"Generate"}),(0,T.jsx)(s.A,{sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,T.jsx)(B.A,{icon:"material-symbols:scan"}),children:"Scan"}),(0,T.jsx)(s.A,{onClick:()=>{Y(!0)},sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,T.jsx)(B.A,{icon:"material-symbols:cloud-upload"}),children:"Upload"})]})]}),(0,T.jsxs)(i.A,{sx:{p:2},children:[(0,T.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,px:2},children:[(0,T.jsx)(r.A,{sx:{pt:2},children:(0,T.jsx)(L.A,{links:[{name:"Dashboard",href:R.nB.root},{name:"Documents"}]})}),(0,T.jsx)(r.A,{gap:1,sx:{width:"25%"},children:(0,T.jsx)(_.Ay,{options:he,onInputChange:ue,onChange:e=>{const o=e.value;console.log(o,"newFileId"),O(o)},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-3",styles:{control:(e,o)=>({...e,backgroundColor:"#4E596F",color:"white",borderRadius:"0px",minHeight:"48px",border:o.isFocused?"2px solid #4E596F":"1px solid transparent",boxShadow:o.isFocused?"0 0 5px #4E596F":"none","&:hover":{borderColor:"#4E596F"}}),menu:e=>({...e,backgroundColor:"#4E596F",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,o)=>({...e,backgroundColor:o.isFocused?"#333":"#4E596F",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),input:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"white"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})})]}),(0,T.jsxs)(d.Ay,{container:!0,spacing:1,children:[(0,T.jsx)(d.Ay,{item:!0,xs:12,sm:12,md:2,children:(0,T.jsx)(d.Ay,{container:!0,spacing:2,children:null===be||void 0===be?void 0:be.map(((e,o)=>{const l=n===e.value;return(0,T.jsx)(d.Ay,{item:!0,xs:12,children:(0,T.jsxs)(i.A,{display:"flex",alignItems:"center",children:[l&&(0,T.jsx)(F.A,{sx:{color:"green",mr:1}}),(0,T.jsx)(A.N_,{to:null===e||void 0===e?void 0:e.path,style:{textDecoration:"none"},children:(0,T.jsx)(c.A,{variant:l?"subtitle1":"subtitle2",sx:{fontWeight:"bold",color:l?"#191919":"#7A7A7A",paddingLeft:l?"0px":"30px",...l&&{borderBottom:"1px solid gray"},mt:.5,cursor:"pointer"},children:e.label})})]})},o)}))})}),(0,T.jsx)(d.Ay,{item:!0,xs:12,sm:12,md:10,margin:"auto",children:(0,T.jsx)(d.Ay,{container:!0,spacing:2,margin:"auto",children:null===N||void 0===N?void 0:N.map(((e,n)=>{var l;return(0,T.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,sx:{my:1},children:[(0,T.jsx)(p.A,{sx:{bgcolor:"#E9E9E9",padding:"0px",display:"flex",width:"300px",alignItems:"center",borderRadius:"1px"},children:(0,T.jsx)(x.A,{sx:{display:"flex",alignItems:"center",width:"100%",paddingBottom:"0px",paddingTop:"5px",paddingRight:"5px",paddingLeft:"5px"},children:(0,T.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[(0,T.jsx)("img",{src:"/images/red_icon.png",alt:"Red icon",style:{width:60,height:70,marginRight:8}}),(0,T.jsx)(c.A,{variant:"subtitle2",sx:{color:"#3c3c3c",maxWidth:"150px",fontWeight:"400"},children:"".concat(e.title_name||(null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.slice(0,20)),".pdf")})]})})}),(0,T.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[null!==(null===e||void 0===e?void 0:e.updated_doc)&&(0,T.jsx)(s.A,{variant:"contained",sx:{bgcolor:"#00ab55",color:"#fff",bottom:"74px",width:"30%",position:"relative",left:"30%","&:hover":{bgcolor:"#0aaa57"}},onClick:()=>(async(e,o,n)=>{if(H){$(n),Z(!0);try{var l;const n=await G.A.get("user/download/filled_text/user_pdf/".concat(o,"/").concat(H));console.log(n,"autofill");const t=await fe(null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.pdf_text,"div","html2pdf__page-break");ve(t,e),y("AutoFill and download successfully")}catch(t){y("Something went wrong",{variant:"error"}),console.log(t,"autofill")}finally{Z(!1),$(null)}}else y("Please Select File First",{variant:"error"}),$(!1),Z(!1)})(null===e||void 0===e?void 0:e.name,null===e||void 0===e?void 0:e.id,n),disabled:V===n,children:V===n&&J?(0,T.jsx)("div",{className:"loader"}):"Auto fill"}),(0,T.jsx)(s.A,{variant:"contained",sx:{bgcolor:"#00ab55",color:"#fff",bottom:null!==(null===e||void 0===e?void 0:e.updated_doc)?"64px":"50px",width:"30%",position:"relative",left:"30%","&:hover":{bgcolor:"#0aaa57"}},onClick:()=>o("/dashboard/edit-documents/".concat(null===e||void 0===e?void 0:e.id),{state:{fileName:""!==(null===e||void 0===e?void 0:e.title_name)?null===e||void 0===e?void 0:e.title_name:null===e||void 0===e?void 0:e.name,file:te}}),children:"Edit"})]})]},n)}))})})]})]}),(0,T.jsx)(u.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:X,onClose:()=>Y(!1),closeAfterTransition:!0,slots:{backdrop:h.A},slotProps:{backdrop:{timeout:500}},children:(0,T.jsx)(g.A,{in:X,children:(0,T.jsx)(i.A,{sx:z,children:(0,T.jsx)(P.Op,{methods:ce,children:(0,T.jsxs)(d.Ay,{item:!0,xs:12,md:12,children:[(0,T.jsx)(c.A,{variant:"h5",sx:{mb:2},children:"Upload"}),(0,T.jsxs)(i.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,T.jsx)(P.Oq,{showPreview:!0,accept:".pdf,.doc,.docx,.xml,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",maxSize:3145728,onDrop:ge}),(0,T.jsx)(c.A,{variant:"h4",children:ne})]}),(0,T.jsx)(r.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,T.jsx)(m.A,{type:"button",variant:"contained",loading:ee,onClick:async()=>{const e=xe("file");console.log(e,ie,"file");try{oe(!0);const o=new FormData;o.append("title_name",ie),o.append("file",e),await G.A.post("/user/upload/user_pdf",o).then((e=>{if(console.log(e,"file upload"),oe(!1),e.data.upload.status){const o=e.data.upload;y(o.message),Y(!1),le(""),me()}}))}catch(o){oe(!1),console.log(o,"file Upload error")}},children:"Upload"})})]})})})})})]})})}},12490:()=>{},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{}}]);