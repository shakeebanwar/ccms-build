"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4590],{24590:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r(9950),o=r(13564),s=r(79537),i=r(48089),n=r(68367),l=r(84142),d=r(12257),c=r(1320),p=r(15769),u=r(34075),h=r(6368),g=r(91434),f=r(16497),m=r(37324),x=r(40033),A=r(28170),w=r(82053),v=r(75165),b=r(29031),y=r(20131),C=r(90260),S=r(46765),j=r(86608),O=r(38861),R=r(8279),D=(r(22704),r(66075)),P=r(44185),T=r(63358),k=r(72870),M=r(12480),_=r(32741),N=r(95074),L=r(44414);const E=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"county",label:"County",align:"left",width:800},{id:"employee",label:"Assign Employee",align:"left",width:1e3},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],I=[{api:"all",label:"All"},{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function B(){const{themeStretch:e}=(0,j.A)(),{enqueueSnackbar:t}=(0,b.dh)(),r=(0,o.Zp)(),{dense:B,page:V,order:F,orderBy:W,rowsPerPage:q,setPage:z,selected:U,onSort:Y,onChangeDense:Z,onChangePage:G,onChangeRowsPerPage:H}=(0,O.Ay)({defaultOrderBy:"createDate"}),[J,K]=(0,a.useState)([]),[Q,X]=(0,a.useState)(""),[$,ee]=(0,a.useState)("new"),[te,re]=(0,a.useState)(null),[ae,oe]=(0,a.useState)(null),{currentTab:se,onChangeTab:ie}=(0,S.A)("all"),[ne,le]=(0,a.useState)("All"),[de,ce]=(0,a.useState)(!1),[pe,ue]=(0,a.useState)(!1),[he,ge]=(0,a.useState)([]),[fe,me]=(0,a.useState)([]);(0,a.useEffect)((()=>{"Sightline\xae"!==ne&&"UCC"!==ne&&xe(I.find((e=>e.label===ne)).api)}),[ne]);const xe=e=>{ce(!0);try{_.A.get("admin/".concat(e)).then((e=>{ce(!1);const r=e.data;200===e.status?K(r.orders):t(r.message)}))}catch(r){if(ce(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},Ae=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:o,filterService:s,filterStartDate:i,filterEndDate:n}=e;const l=t.map(((e,t)=>[e,t]));l.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=l.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==s&&(t=t.filter((e=>e.status===s)));i&&n&&(t=t.filter((e=>e.updated_at.getTime()>=i.getTime()&&e.updated_at.getTime()<=n.getTime())));return t}({tableData:J,comparator:(0,O.hz)(F,W),filterName:Q,filterService:$,filterStatus:se,filterStartDate:te,filterEndDate:ae}),we=B?56:76,ve=!Ae.length&&!!Q||!Ae.length&&!!se||!Ae.length&&!!$||!Ae.length&&!!ae||!Ae.length&&!!te,be=e=>J.filter((t=>t.status===e)).length;J.length,be("active"),be("new"),be("placed"),be("completed"),be("on hold"),be("draft"),be("cancelled");return(0,L.jsxs)(R.A,{title:"Order: Your Orders",children:[de&&(0,L.jsx)(N.A,{}),(0,L.jsxs)(s.A,{maxWidth:!e&&"xl",children:[(0,L.jsxs)(i.A,{sx:{borderRadius:"0px"},children:[(0,L.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ne,onChange:(e,t)=>le(t),sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:I.map((e=>(0,L.jsx)(l.A,{disableRipple:!0,value:e.label,label:(0,L.jsx)(d.A,{spacing:1,direction:"row",alignItems:"center",children:(0,L.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,L.jsx)(T.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:C.RO.root},{name:"Orders"}]}),(0,L.jsx)(P.A,{children:(0,L.jsx)(c.A,{sx:{minWidth:800,position:"relative"},children:(0,L.jsxs)(p.A,{size:B?"small":"medium",children:[(0,L.jsx)(k.er,{order:F,orderBy:W,headLabel:E,rowCount:J.length,numSelected:U.length,onSort:Y}),(0,L.jsxs)(u.A,{children:[Ae.slice(V*q,V*q+q).map((e=>(0,L.jsx)(M.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===ne&&r(C.RO.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===ne&&r(C.RO.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}),"Eagle 9 Policy"===ne&&r(C.RO.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Coop/Condo offering plans"===ne&&r(C.RO.viewOrders.coopCondoOfferinPlansOrderView,{state:{row:e,type:"view"}}),"1031 Exchanges"===ne&&r(C.RO.viewOrders.exchange1031OrderView,{state:{row:e,type:"view"}}),"Other Search / Request"===ne&&r(C.RO.viewOrders.otherSearchesOrderView,{state:{row:e,type:"view"}})})(e),onAssign:()=>(async e=>{if(me(e),!he.length>0){ce(!0);try{await _.A.get("/admin/employees").then((e=>{ce(!1);const t=e.data;ge(t.user)}))}catch(r){ce(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}ue(!0)})(e.id),onStatusChange:r=>((e,r)=>{ce(!0);try{const a=new FormData;a.append("status",r),a.append("id",e),_.A.post("/admin/changeorderStatus",a).then((a=>{if(ce(!1),200===a.status||201===a.status){const o=a.data,s=J.map((t=>t.id===e?{...t,status:r}:t));K(s),t(o.message)}}))}catch(a){ce(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,L.jsx)(k.dO,{height:we,emptyRows:(0,O.xl)(V,q,J.length)}),(0,L.jsx)(k.Sm,{isNotFound:ve})]})]})})}),(0,L.jsxs)(h.A,{sx:{position:"relative"},children:[(0,L.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ae.length,rowsPerPage:q,page:V,onPageChange:G,onRowsPerPageChange:H}),(0,L.jsx)(f.A,{control:(0,L.jsx)(m.A,{checked:B,onChange:Z}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,L.jsxs)(y.ys,{fullWidth:!0,maxWidth:"sm",open:pe,onClose:()=>{ue(!1)},children:[(0,L.jsx)(x.A,{children:"Employees"}),(0,L.jsxs)(A.A,{sx:{pb:3,mt:2,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[he.map(((e,r)=>(0,L.jsxs)(d.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,L.jsxs)(w.A,{variant:"subtitle1",children:[(0,L.jsx)(D.A,{icon:"raphael:employee"})," ",e.first_name]}),(0,L.jsx)(v.A,{variant:"text",onClick:()=>(async e=>{ce(!0);try{const r=new FormData;r.append("user_id",e.id),r.append("order_id",fe),await _.A.post("/admin/assignOrder",r).then((r=>{if(ce(!1),200===r.status||201===r.status){const a=r.data,o=J.map((t=>t.id===fe?{...t,employee:[e]}:t));K(o),t(a.message)}}))}catch(r){ce(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}ue(!1)})(e),children:"Assign"})]},r))),(0,L.jsx)(d.A,{flexDirection:"row",justifyContent:"end",gap:1,children:(0,L.jsx)(v.A,{variant:"outlined",color:"inherit",onClick:()=>{ue(!1)},children:"Close"})})]})]})]})]})}},48089:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(58168),o=r(98587),s=r(9950),i=r(2803),n=r(5747),l=r(7951),d=r(79859),c=r(70693),p=r(37665);function u(e){return(0,p.A)("MuiCard",e)}(0,r(44245).A)("MuiCard",["root"]);var h=r(44414);const g=["className","raised"],f=(0,l.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),m=s.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiCard"}),{className:s,raised:l=!1}=r,c=(0,o.A)(r,g),p=(0,a.A)({},r,{raised:l}),m=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},u,t)})(p);return(0,h.jsx)(f,(0,a.A)({className:(0,i.A)(m.root,s),elevation:l?8:void 0,ref:t,ownerState:p},c))}))},28170:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(98587),o=r(58168),s=r(9950),i=r(2803),n=r(5747),l=r(7951),d=r(79859),c=r(37665);function p(e){return(0,c.A)("MuiDialogContent",e)}(0,r(44245).A)("MuiDialogContent",["root","dividers"]);var u=r(23025),h=r(44414);const g=["className","dividers"],f=(0,l.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},r.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(u.A.root," + &")]:{paddingTop:0}})})),m=s.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogContent"}),{className:s,dividers:l=!1}=r,c=(0,a.A)(r,g),u=(0,o.A)({},r,{dividers:l}),m=(e=>{const{classes:t,dividers:r}=e,a={root:["root",r&&"dividers"]};return(0,n.A)(a,p,t)})(u);return(0,h.jsx)(f,(0,o.A)({className:(0,i.A)(m.root,s),ownerState:u,ref:t},c))}))},40033:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(58168),o=r(98587),s=r(9950),i=r(2803),n=r(5747),l=r(82053),d=r(7951),c=r(79859),p=r(23025),u=r(5536),h=r(44414);const g=["className","id"],f=(0,d.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),m=s.forwardRef((function(e,t){const r=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:d}=r,m=(0,o.A)(r,g),x=r,A=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},p.t,t)})(x),{titleId:w=d}=s.useContext(u.A);return(0,h.jsx)(f,(0,a.A)({component:"h2",className:(0,i.A)(A.root,l),ownerState:x,ref:t,variant:"h6",id:w},m))}))},23025:(e,t,r)=>{r.d(t,{A:()=>s,t:()=>o});var a=r(37665);function o(e){return(0,a.A)("MuiDialogTitle",e)}const s=(0,r(44245).A)("MuiDialogTitle",["root"])}}]);