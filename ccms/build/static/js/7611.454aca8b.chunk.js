"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[7611],{87611:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(9950),s=r(60666),o=r(79537),l=r(48089),n=r(68367),i=r(84142),d=r(12257),c=r(1320),u=r(15769),p=r(34075),h=r(6368),f=r(91434),g=r(16497),x=r(37324),m=r(53984),b=r(73447),w=r(57191),S=r(60899),A=r(82053),j=r(29031),y=r(73878),C=r(13564),v=r(9449),O=r(68654),P=r(28095),R=r(90260),q=r(46765),D=r(86608),T=r(8279),B=r(38861),k=(r(22704),r(66075),r(44185)),_=r(63358),L=r(72870),V=r(12480),E=r(32741),N=r(95074),I=(r(42686),r(52401)),M=r(44414);const F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},z=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800}],G=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function W(){const[e,t]=(0,a.useState)(!1),[r,W]=(0,a.useState)(),[U,Y]=(0,a.useState)(!1),[Z,H]=(0,a.useState)(),[J,K]=(0,a.useState)(!1),{themeStretch:Q}=(0,D.A)(),X=((0,y.wA)(),(0,C.Zp)()),{enqueueSnackbar:$}=(0,j.dh)(),{dense:ee,page:te,order:re,orderBy:ae,rowsPerPage:se,setPage:oe,selected:le,setSelected:ne,onSort:ie,onChangeDense:de,onChangePage:ce,onChangeRowsPerPage:ue}=(0,B.Ay)({defaultOrderBy:"createDate"}),[pe,he]=(0,a.useState)([]),[fe,ge]=(0,a.useState)(""),[xe,me]=(0,a.useState)("new"),[be,we]=(0,a.useState)(null),[Se,Ae]=(0,a.useState)(null),{currentTab:je,onChangeTab:ye}=(0,q.A)("all"),[Ce,ve]=(0,a.useState)("Title Insurance"),[Oe,Pe]=(0,a.useState)(!1),[Re,qe]=(0,a.useState)(""),[De,Te]=(0,a.useState)(null),{id:Be}=(0,C.g)();(0,a.useEffect)((()=>{"Sightline\xae"!==Ce&&ke(G.find((e=>e.label===Ce)).api)}),[Ce]);const ke=e=>{Pe(!0);try{E.A.get("user/all_shared/by_user/".concat(e,"/").concat(Be)).then((e=>{Pe(!1);const t=e.data;console.log(t,"Data"),200===e.status?(qe(t.filePath),he(t.orders)):$(t.message)}))}catch(t){if(Pe(!1),t.errors){Object.keys(t.errors).map((e=>$(t.errors[e][0],{variant:"error"})))}}},_e=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:s,filterService:o,filterStartDate:l,filterEndDate:n}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==s&&(t=t.filter((e=>e.status===s)));"new"!==o&&(t=t.filter((e=>e.status===o)));l&&n&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=n.getTime())));return t}({tableData:pe,comparator:(0,B.hz)(re,ae),filterName:fe,filterService:xe,filterStatus:je,filterStartDate:be,filterEndDate:Se}),Le=ee?56:76,Ve=!_e.length&&!!fe||!_e.length&&!!je||!_e.length&&!!xe||!_e.length&&!!Se||!_e.length&&!!be,Ee=e=>pe.filter((t=>t.status===e)).length,Ne=(pe.length,Ee("active"),Ee("new"),Ee("placed"),Ee("completed"),Ee("on hold"),Ee("draft"),Ee("cancelled"),s.Ik().shape({request:s.Yj().required("Request Description is required")})),Ie=(0,a.useMemo)((()=>({request:""})),[]),Me=(0,v.mN)({resolver:(0,O.t)(Ne),defaultValues:Ie}),{reset:Fe,watch:ze,setValue:Ge,handleSubmit:We,formState:{isSubmitting:Ue,errors:Ye}}=Me;ze();return(0,M.jsxs)(T.A,{title:"Order: Shared Orders",children:[Oe&&(0,M.jsx)(N.A,{}),(0,M.jsxs)(o.A,{maxWidth:!Q&&"xl",children:[(0,M.jsx)(l.A,{sx:{borderRadius:"0px"},children:(0,M.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Ce,onChange:(e,t)=>ve(t),sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:G.map((e=>(0,M.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,M.jsx)(d.A,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))})}),(0,M.jsxs)(l.A,{children:[(0,M.jsx)(_.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:R.nB.root},{name:"Shared Orders"}]}),(0,M.jsx)(k.A,{children:(0,M.jsx)(c.A,{sx:{minWidth:800,position:"relative"},children:(0,M.jsxs)(u.A,{size:ee?"small":"medium",children:[(0,M.jsx)(L.er,{order:re,orderBy:ae,headLabel:z,rowCount:pe.length,numSelected:le.length,onSort:ie}),(0,M.jsxs)(p.A,{children:[_e.slice(te*se,te*se+se).map((e=>(0,M.jsx)(V.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===Ce&&X(R.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===Ce&&X(R.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===Ce&&X(R.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===Ce&&X(R.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===Ce&&X(R.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===Ce&&X(R.nB.viewOrders.otherSearchesOrderView,{state:e})})(e)},e.id))),(0,M.jsx)(L.dO,{height:Le,emptyRows:(0,B.xl)(te,se,pe.length)}),(0,M.jsx)(L.Sm,{isNotFound:Ve})]})]})})}),(0,M.jsxs)(h.A,{sx:{position:"relative"},children:[(0,M.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:_e.length,rowsPerPage:se,page:te,onPageChange:ce,onRowsPerPageChange:ue}),(0,M.jsx)(g.A,{control:(0,M.jsx)(x.A,{checked:ee,onChange:de}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,M.jsx)(m.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:()=>t(!1),closeAfterTransition:!0,slots:{backdrop:b.A},slotProps:{backdrop:{timeout:500}},children:(0,M.jsx)(w.A,{in:e,children:(0,M.jsx)(h.A,{sx:F,children:(0,M.jsx)(I.Op,{methods:Me,onSubmit:We((async e=>{console.log(e.request,"request"),Y(!0);try{const t=new FormData;t.append("descriptions",e.request),await E.A.post("user/requests/create/".concat(r),t).then((e=>{if(Y(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"sent request"),$(t.message),X(R.nB.root)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>$(t.errors[e][0],{variant:"error"})))}}finally{Y(!1)}})),children:(0,M.jsxs)(S.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(A.A,{variant:"h5",sx:{mb:2},children:"Sent Request for edit your order"}),(0,M.jsx)(h.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,M.jsx)(I.o3,{name:"request",label:"Please enter Desciption",multiline:!0,rows:3})}),(0,M.jsx)(d.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,M.jsx)(P.A,{type:"submit",variant:"contained",loading:U,children:"Send Request"})})]})})})})})]})]})}},48089:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(58168),s=r(98587),o=r(9950),l=r(2803),n=r(5747),i=r(7951),d=r(79859),c=r(70693),u=r(37665);function p(e){return(0,u.A)("MuiCard",e)}(0,r(44245).A)("MuiCard",["root"]);var h=r(44414);const f=["className","raised"],g=(0,i.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),x=o.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=r,c=(0,s.A)(r,f),u=(0,a.A)({},r,{raised:i}),x=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},p,t)})(u);return(0,h.jsx)(g,(0,a.A)({className:(0,l.A)(x.root,o),elevation:i?8:void 0,ref:t,ownerState:u},c))}))}}]);