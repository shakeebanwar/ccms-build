(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{4607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var a=r(9950),o=r(13564),s=r(79537),i=r(12257),l=r(48089),n=r(68367),c=r(84142),d=r(1320),u=r(15769),p=r(34075),h=r(6368),f=r(91434),g=r(16497),m=r(37324),w=r(53984),x=r(73447),v=r(57191),b=r(60899),O=r(82053),y=r(29031),S=r(9449),A=r(55858),C=r(48711),_=r(90260),j=r(46765),P=r(86608),k=r(38861),R=r(8279),V=(r(22704),r(66075),r(44185)),T=r(63358),D=r(72870),I=r(12480),E=r(32741),L=r(95074),F=(r(95358),r(52401)),N=r(33507),q=r(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},B=[{id:"status",label:"Order Status",align:"left",width:700},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:600},{id:"county",label:"County",align:"left",width:600},{id:"file_pdf",label:"Contract Pdf",align:"left",width:500},{id:"status_change",label:"Change Status",align:"left",width:300},{id:"",label:(0,q.jsx)(A.A,{color:"#e9eff4"}),align:"center",width:50}],z=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function U(){var e;const{user:t}=(0,N.A)(),{themeStretch:r}=(0,P.A)(),{enqueueSnackbar:A}=(0,y.dh)(),U=(0,o.Zp)(),{state:G}=(0,o.zy)();null===G||void 0===G||G.orderType;console.log(t,"user");const{dense:W,page:Y,order:H,orderBy:Z,rowsPerPage:J,setPage:K,selected:Q,onSort:X,onChangeDense:$,onChangePage:ee,onChangeRowsPerPage:te}=(0,k.Ay)({defaultOrderBy:"createDate"}),re=(null===t||void 0===t?void 0:t.user_permissions)||{},ae=z.find((e=>!0===(null===re||void 0===re?void 0:re[e.permission])));console.log(ae,"filteredTabs");const[oe,se]=(0,a.useState)([]),[ie,le]=(0,a.useState)(""),[ne,ce]=(0,a.useState)("new"),[de,ue]=(0,a.useState)(null),[pe,he]=(0,a.useState)(null),{currentTab:fe,onChangeTab:ge}=(0,j.A)("all"),[me,we]=(0,a.useState)((null===ae||void 0===ae?void 0:ae.length)>0?null===(e=ae[0])||void 0===e?void 0:e.label:null),[xe,ve]=(0,a.useState)(!1),be=(0,a.useRef)(null),[Oe,ye]=(0,a.useState)(!1),[Se,Ae]=(0,a.useState)(""),[Ce,_e]=(0,a.useState)(!1),[je,Pe]=(0,a.useState)([]),[ke,Re]=(0,a.useState)(),[Ve,Te]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{ve(!0);try{var e;const t=await E.A.get("employee/users/list");console.log(t,"all user"),Pe(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.files),console.log(t,"autofill")}catch(t){console.log(t,"autofill")}finally{ve(!1)}})()}),[]);const De=e=>{ve(!0);try{E.A.get("employee/".concat(null===ae||void 0===ae?void 0:ae.api,"?userId=").concat(e)).then((e=>{ve(!1);const t=e.data;console.log(t,"Dataemployee"),200===e.status?se(t.orders):A(t.message)}))}catch(t){if(ve(!1),t.errors){Object.keys(t.errors).map((e=>A(t.errors[e][0],{variant:"error"})))}}},Ie=(e,t)=>{_e(!0),ye(e),Ae(t)},Ee=e=>{ve(!0),console.log(e,"files");const t=new FormData;t.append("file",e[0]);try{E.A.post("employee/complete/".concat(Se,"/").concat(Oe),t).then((e=>{if(console.log(e,"status api"),ve(!1),200===e.status||201===e.status){const t=e.data,r=oe.map((e=>e.id===Oe?{...e,status:Se}:e));_e(!1),console.log(r,"UpdatedOrders"),se(r),A(t.message)}})).catch((()=>{ve(!1)}))}catch(r){if(ve(!1),r.errors){Object.keys(r.errors).map((e=>A(r.errors[e][0],{variant:"error"})))}}},Le=(0,S.mN)(),{control:Fe}=Le,Ne=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:o,filterService:s,filterStartDate:i,filterEndDate:l}=e;const n=t.map(((e,t)=>[e,t]));n.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=n.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==s&&(t=t.filter((e=>e.status===s)));i&&l&&(t=t.filter((e=>e.updated_at.getTime()>=i.getTime()&&e.updated_at.getTime()<=l.getTime())));return t}({tableData:oe,comparator:(0,k.hz)(H,Z),filterName:ie,filterService:ne,filterStatus:fe,filterStartDate:de,filterEndDate:pe}),qe=W?56:76,Me=!Ne.length&&!!ie||!Ne.length&&!!fe||!Ne.length&&!!ne||!Ne.length&&!!pe||!Ne.length&&!!de,[Be,ze]=(0,a.useState)(oe),[Ue,Ge]=(0,a.useState)(oe);return(0,a.useEffect)((()=>{ze(oe),Ge(oe)}),[oe]),(0,a.useEffect)((()=>{if("default"===Z)Ge(Be);else{const e=[...Be].sort((0,k.hz)(H,Z));Ge(e)}}),[H,Z]),(0,q.jsxs)(R.A,{title:"Order: Your Orders",children:[xe&&(0,q.jsx)(L.A,{}),(0,q.jsx)("input",{type:"file",ref:be,onChange:Ee,hidden:!0}),(0,q.jsxs)(s.A,{maxWidth:!r&&"xl",children:[(0,q.jsx)(i.A,{gap:1,sx:{width:"25%",marginBottom:"10px"},children:(0,q.jsx)(C.Ay,{options:null===je||void 0===je?void 0:je.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:Ve,onChange:e=>{console.log(e,"newFileId"),De(e.value),Re(e.value),Te(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3 ",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,t)=>({...e,backgroundColor:t.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})}),(0,q.jsxs)(l.A,{sx:{borderRadius:"0px"},children:[(0,q.jsx)(n.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:me,onChange:(e,t)=>{console.log(t,"value"),we(t)},sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:(0,q.jsx)(c.A,{disableRipple:!0,value:ae.label,label:(0,q.jsx)(i.A,{spacing:1,direction:"row",alignItems:"center",children:(0,q.jsx)("div",{children:ae.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},ae.label)}),(0,q.jsx)(T.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Orders",href:_.i8.root},{name:"All Orders"}]}),(0,q.jsx)(V.A,{children:(0,q.jsx)(d.A,{sx:{position:"relative"},children:(0,q.jsxs)(u.A,{size:W?"small":"medium",children:[(0,q.jsx)(D.er,{order:H,orderBy:Z,headLabel:B,rowCount:oe.length,numSelected:Q.length,onSort:X}),(0,q.jsxs)(p.A,{children:[Ue.slice(Y*J,Y*J+J).map((e=>(0,q.jsx)(I.oR,{row:e,onViewRow:()=>(e=>{var t;"Title Insurance"===me&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===me&&(null!==e&&void 0!==e&&e.updated_by_pdf?U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):U(_.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===me&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===me&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&(null===e||void 0===e||null===(t=e.files)||void 0===t||t.file_pdf,U(_.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===me&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===me&&U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===me&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===me&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&U(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===me&&U(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===me&&U(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===me&&U(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===me&&U(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===me&&U(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===me&&U(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Ie(e.id,"file_completed"),onContainDocumentUpload:()=>Ie(e.id,"contin_completed"),onStatusChange:t=>((e,t)=>{ve(!0);try{const r=new FormData;r.append("status",t),r.append("id",e),E.A.post("/employee/changeorderStatus",r).then((r=>{if(console.log(r,"status api"),ve(!1),200===r.status||201===r.status){const a=r.data,o=oe.map((r=>r.id===e?{...r,status:t}:r));se(o),A(a.message)}})).catch((e=>{ve(!1),console.log(e,"catch errror")}))}catch(r){ve(!1),r.errors&&Object.keys(r.errors).map((e=>A(r.errors[e][0],{variant:"error"})))}})(e.id,t)},e.id))),(0,q.jsx)(D.dO,{height:qe,emptyRows:(0,k.xl)(Y,J,oe.length)}),(0,q.jsx)(D.Sm,{isNotFound:Me})]})]})})}),(0,q.jsxs)(h.A,{sx:{position:"relative"},children:[(0,q.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ne.length,rowsPerPage:J,page:Y,onPageChange:ee,onRowsPerPageChange:te}),(0,q.jsx)(g.A,{control:(0,q.jsx)(m.A,{checked:W,onChange:$}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,q.jsx)(w.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Ce,onClose:()=>_e(!1),closeAfterTransition:!0,slots:{backdrop:x.A},slotProps:{backdrop:{timeout:500}},children:(0,q.jsx)(v.A,{in:Ce,children:(0,q.jsx)(h.A,{sx:M,children:(0,q.jsx)(F.Op,{methods:Le,children:(0,q.jsxs)(b.Ay,{item:!0,xs:12,md:12,children:[(0,q.jsx)(O.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,q.jsxs)(h.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,q.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,q.jsx)(O.A,{variant:"h6",onClick:()=>{var e;return null===be||void 0===be||null===(e=be.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,q.jsx)(F.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:Ee})]}),(0,q.jsx)(i.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},55858:(e,t,r)=>{"use strict";var a=r(24994);t.A=void 0;var o=a(r(79526)),s=r(44414);t.A=(0,o.default)((0,s.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},79526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=r(92079)},92079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{capitalize:()=>o.A,createChainedFunction:()=>s.A,createSvgIcon:()=>i.A,debounce:()=>l.A,deprecatedPropType:()=>n,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>O,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>w.A,useEventCallback:()=>x.A,useForkRef:()=>v.A,useIsFocusVisible:()=>b.A});var a=r(66236),o=r(61676),s=r(25920),i=r(65471),l=r(21209);const n=function(e,t){return()=>null};var c=r(60096),d=r(27402),u=r(70827);r(58168);const p=function(e,t){return()=>null};const h=r(25679).A;var f=r(79044),g=r(31014);const m=function(e,t,r,a,o){return null};var w=r(48733),x=r(1976),v=r(31506),b=r(41573);const O={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.A.configure(e)}}},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);