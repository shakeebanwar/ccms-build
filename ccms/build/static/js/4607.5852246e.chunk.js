"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{16099:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var a=r(90706),l=r(79947),n=r(28339),o=r(6978),i=r(60820),s=r(36404),c=r(9950),d=r(79537),u=r(48089),h=r(40033),p=r(42686),g=r(62740),f=r(30744),w=r(90260),x=r(98091),m=r(86608),b=r(63358),v=r(20131),O=r(44414);const y=e=>{const{events:t,selectedEventId:r}=e.calendar;return r?t.find((e=>Number(e.id)===Number(r))):null};function A(){const{themeStretch:e}=(0,m.A)(),t=(0,f.wA)(),r=(0,x.A)("up","sm"),A=(0,c.useRef)(null),[S,j]=(0,c.useState)(new Date),[C,D]=(0,c.useState)(r?"dayGridMonth":"listWeek"),P=(0,f.d4)(y),{events:k,isOpenModal:V,selectedRange:R}=(0,f.d4)((e=>e.calendar));(0,c.useEffect)((()=>{t((0,p.Wb)())}),[t]),(0,c.useEffect)((()=>{const e=A.current;if(e){const t=e.getApi(),a=r?"dayGridMonth":"listWeek";t.changeView(a),D(a)}}),[r]);const _=()=>{t((0,p.Oo)())};return(0,O.jsxs)(d.A,{maxWidth:!e&&"xl",children:[(0,O.jsx)(b.A,{heading:"Order Continuation",links:[{name:"Dashboard",href:w.i8.root},{name:"Order Continuation"}]}),(0,O.jsx)(u.A,{children:(0,O.jsxs)(g.mg,{children:[(0,O.jsx)(g.a7,{date:S,view:C,onNextDate:()=>{const e=A.current;if(e){const t=e.getApi();t.next(),j(t.getDate())}},onPrevDate:()=>{const e=A.current;if(e){const t=e.getApi();t.prev(),j(t.getDate())}},onToday:()=>{const e=A.current;if(e){const t=e.getApi();t.today(),j(t.getDate())}},onChangeView:e=>{const t=A.current;if(t){t.getApi().changeView(e),D(e)}}}),(0,O.jsx)(a.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:k,ref:A,rerenderDelay:10,initialDate:S,initialView:C,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{t((0,p.PY)(e.event.id))},height:r?720:"auto",plugins:[l.A,n.Ay,i.Ay,o.Ay,s.Ay]})]})}),(0,O.jsxs)(v.ys,{open:V,onClose:_,children:[(0,O.jsx)(h.A,{children:P?"Edit Order Contin":"Add Order Contin"}),(0,O.jsx)(g.lM,{event:P||{},range:R,onCancel:_})]})]})}},4607:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(9950),l=r(13564),n=r(79537),o=r(48089),i=r(68367),s=r(84142),c=r(12257),d=r(6368),u=r(82053),h=r(74745),p=r(1320),g=r(15769),f=r(34075),w=r(91434),x=r(16497),m=r(37324),b=r(53984),v=r(73447),O=r(57191),y=r(60899),A=r(29031),S=r(9449),j=r(90260),C=r(46765),D=r(86608),P=r(38861),k=r(8279),V=r(22704),R=(r(66075),r(44185)),_=r(63358),E=r(72870),T=r(12480),I=r(32741),L=r(95074),F=(r(16099),r(73561)),N=r(44414);const B={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},M=["new","old"],q=[{id:"status",label:"Order Status",align:"left",width:500},{id:"user",label:"ordered by",align:"left",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],U=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function W(){const{themeStretch:e}=(0,D.A)(),{enqueueSnackbar:t}=(0,A.dh)(),r=(0,l.Zp)(),{dense:W,page:z,order:G,orderBy:Y,rowsPerPage:H,setPage:Z,selected:$,onSort:J,onChangeDense:K,onChangePage:Q,onChangeRowsPerPage:X}=(0,P.Ay)({defaultOrderBy:"createDate"}),[ee,te]=(0,a.useState)([]),[re,ae]=(0,a.useState)(""),[le,ne]=(0,a.useState)("new"),[oe,ie]=(0,a.useState)(null),[se,ce]=(0,a.useState)(null),{currentTab:de,onChangeTab:ue}=(0,C.A)("all"),[he,pe]=(0,a.useState)("Title Insurance"),[ge,fe]=(0,a.useState)(!1),we=(0,a.useRef)(null),[xe,me]=(0,a.useState)(!1),[be,ve]=(0,a.useState)(""),[Oe,ye]=(0,a.useState)(!1);(0,a.useEffect)((()=>{"Sightline\xae"!==he&&"UCC"!==he&&Ae(U.find((e=>e.label===he)).api)}),[he]);const Ae=e=>{fe(!0);try{I.A.get("employee/".concat(e)).then((e=>{fe(!1);const r=e.data;console.log(r,"Dataemployee"),200===e.status?te(r.orders):t(r.message)}))}catch(r){if(fe(!1),r.errors){Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}}},Se=(e,t)=>{ye(!0),me(e),ve(t)},je=e=>{fe(!0),console.log(e,"files");const r=new FormData;r.append("file",e[0]);try{I.A.post("employee/complete/".concat(be,"/").concat(xe),r).then((e=>{if(console.log(e,"status api"),fe(!1),200===e.status||201===e.status){const r=e.data,a=ee.map((e=>e.id===xe?{...e,status:be}:e));ye(!1),console.log(a,"UpdatedOrders"),te(a),t(r.message)}})).catch((()=>{fe(!1)}))}catch(a){if(fe(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},Ce=(0,S.mN)(),{control:De}=Ce,Pe=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:l,filterService:n,filterStartDate:o,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=s.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==n&&(t=t.filter((e=>e.status===n)));o&&i&&(t=t.filter((e=>e.updated_at.getTime()>=o.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:ee,comparator:(0,P.hz)(G,Y),filterName:re,filterService:le,filterStatus:de,filterStartDate:oe,filterEndDate:se}),ke=W?56:76,Ve=!Pe.length&&!!re||!Pe.length&&!!de||!Pe.length&&!!le||!Pe.length&&!!se||!Pe.length&&!!oe,Re=e=>ee.filter((t=>t.status===e)).length,_e=[{value:"all",label:"All",color:"info",count:ee.length},{value:"active",label:"Active",color:"info",count:Re("active")},{value:"new",label:"New",color:"info",count:Re("new")},{value:"placed",label:"Placed",color:"info",count:Re("placed")},{value:"completed",label:"Completed",color:"success",count:Re("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Re("on hold")},{value:"draft",label:"Draft",color:"default",count:Re("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Re("cancelled")}];return(0,N.jsxs)(k.A,{title:"Order: Your Orders",children:[ge&&(0,N.jsx)(L.A,{}),(0,N.jsx)("input",{type:"file",ref:we,onChange:je,hidden:!0}),(0,N.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,N.jsx)(_.A,{heading:"Your Orders",links:[{name:"Dashboard",href:j.i8.root},{name:"Orders"}]}),(0,N.jsx)(o.A,{sx:{mb:5},children:(0,N.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:he,onChange:(e,t)=>pe(t),sx:{px:2,bgcolor:"#403390",color:"#fff"},children:U.map((e=>(0,N.jsx)(s.A,{disableRipple:!0,value:e.label,label:(0,N.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,N.jsx)("div",{children:e.label})}),sx:{color:he===e.label?"black":"white","&.Mui-selected":{color:"black"}}},e.label)))})}),(0,N.jsx)(d.A,{sx:{p:2},children:(0,N.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:he.label})}),(0,N.jsxs)(o.A,{children:[(0,N.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:de,onChange:ue,sx:{px:2,bgcolor:"background.neutral"},children:_e.map((e=>(0,N.jsx)(s.A,{disableRipple:!0,value:e.value,label:(0,N.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,N.jsx)("div",{children:e.label})," ",(0,N.jsxs)(V.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,N.jsx)(h.A,{}),(0,N.jsx)(T.F5,{filterName:re,filterService:le,filterStartDate:oe,filterEndDate:se,onFilterName:e=>{ae(e),Z(0)},onFilterService:e=>{ne(e.target.value)},onFilterStartDate:e=>{ie(e)},onFilterEndDate:e=>{ce(e)},optionsService:M}),(0,N.jsx)(R.A,{children:(0,N.jsx)(p.A,{sx:{minWidth:800,position:"relative"},children:(0,N.jsxs)(g.A,{size:W?"small":"medium",children:[(0,N.jsx)(E.er,{order:G,orderBy:Y,headLabel:q,rowCount:ee.length,numSelected:$.length,onSort:J}),(0,N.jsxs)(f.A,{children:[Pe.slice(z*H,z*H+H).map((e=>(0,N.jsx)(T.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===he&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===he&&r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}),"Eagle 9 Policy"===he&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===he&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===he&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===he&&r(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===he&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===he&&r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===he&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===he&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===he&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===he&&r(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===he&&r(j.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===he&&r(j.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===he&&r(j.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===he&&r(j.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===he&&r(j.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===he&&r(j.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Se(e.id,"file_completed"),onContainDocumentUpload:()=>Se(e.id,"contin_completed"),onStatusChange:r=>((e,r)=>{fe(!0);try{const a=new FormData;a.append("status",r),a.append("id",e),I.A.post("/employee/changeorderStatus",a).then((a=>{if(console.log(a,"status api"),fe(!1),200===a.status||201===a.status){const l=a.data,n=ee.map((t=>t.id===e?{...t,status:r}:t));te(n),t(l.message)}})).catch((e=>{fe(!1),console.log(e,"catch errror")}))}catch(a){fe(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,N.jsx)(E.dO,{height:ke,emptyRows:(0,P.xl)(z,H,ee.length)}),(0,N.jsx)(E.Sm,{isNotFound:Ve})]})]})})}),(0,N.jsxs)(d.A,{sx:{position:"relative"},children:[(0,N.jsx)(w.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Pe.length,rowsPerPage:H,page:z,onPageChange:Q,onRowsPerPageChange:X}),(0,N.jsx)(x.A,{control:(0,N.jsx)(m.A,{checked:W,onChange:K}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,N.jsx)(b.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Oe,onClose:()=>ye(!1),closeAfterTransition:!0,slots:{backdrop:v.A},slotProps:{backdrop:{timeout:500}},children:(0,N.jsx)(O.A,{in:Oe,children:(0,N.jsx)(d.A,{sx:B,children:(0,N.jsx)(F.Op,{methods:Ce,children:(0,N.jsxs)(y.Ay,{item:!0,xs:12,md:12,children:[(0,N.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,N.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,N.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,N.jsx)(u.A,{variant:"h6",onClick:()=>{var e;return null===we||void 0===we||null===(e=we.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,N.jsx)(F.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:je})]}),(0,N.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}}}]);