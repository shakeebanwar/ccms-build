"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3591],{83752:(e,l,o)=>{o.d(l,{A:()=>R});var n=o(37088),t=o(60228),a=o(9950),i=o(7951),r=o(19657),d=o(73447),s=o(12257),c=o(82053),u=o(74745),p=o(86608),v=o(61770),m=o(16243),x=o(66075),h=o(44185),g=o(20131),f=o(53065),b=o(44414);const A=(0,i.Ay)("span")((e=>{let{theme:l}=e;return{...(0,v.A)(l).bgBlur({opacity:.64}),right:0,top:"50%",position:"fixed",marginTop:l.spacing(-3),padding:l.spacing(.5),zIndex:l.zIndex.drawer+2,borderRadius:"24px 0 20px 24px",boxShadow:"-12px 12px 32px -4px ".concat((0,r.X4)("light"===l.palette.mode?l.palette.grey[600]:l.palette.common.black,.36))}})),j=(0,i.Ay)("span")((e=>{let{theme:l}=e;return{top:8,width:8,height:8,right:10,borderRadius:"50%",position:"absolute",backgroundColor:l.palette.error.main}}));function y(e){let{notDefault:l,open:o,onToggle:n}=e;return(0,b.jsxs)(A,{children:[l&&!o&&(0,b.jsx)(j,{}),(0,b.jsx)(f.A,{title:"Filter",placement:"left",children:(0,b.jsx)(g.ji,{color:"inherit",onClick:n,sx:{p:1.25,transition:e=>e.transitions.create("all"),"&:hover":{color:"primary.main",bgcolor:e=>(0,r.X4)(e.palette.primary.main,e.palette.action.hoverOpacity)}},children:(0,b.jsx)(x.A,{icon:"material-symbols:filter-alt",width:20,height:20})})})]})}var _=o(60899),w=o(6368),S=o(8145),C=o(25979),D=o(3788),T=o(93523),F=o(23266),B=o(41205),k=o(43974),L=o(34117),P=o(30818),E=o(24642),I=o(32741);function N(e){let{files:l}=e;const o=(0,L.wA)();console.log(l,"files");const[n,t]=(0,a.useState)([]),[i,r]=(0,a.useState)([]),[d,s]=(0,a.useState)([]),[c,u]=(0,a.useState)({file_no:"",file_name:"",address:"",date:"",lender:"",transaction_type:"",buyers:"",sellers:""});(0,a.useEffect)((()=>{(async()=>{var e;const l=await I.A.get("user/file_buyers");console.log(l,"buyers"),t(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.buyers)})()}),[]);(0,a.useEffect)((()=>{(async()=>{var e;const l=await I.A.get("user/file_sellers");console.log(l,"sellers"),r(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.sellers)})()}),[]);const p=(e,l)=>{u((o=>({...o,[e]:l})))};return(0,a.useEffect)((()=>{const e=l.filter((e=>{var l,o,n,t,a,i;const r=null!==e&&void 0!==e&&e.updated_at?(0,k.A)(new Date(e.updated_at),"yyyy-MM-dd"):"",d=c.date?c.date:"",s=null!==e&&void 0!==e&&null!==(l=e.DummyData)&&void 0!==l&&l.buyers?e.DummyData.buyers.map((e=>"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||""))).join(" ").toLowerCase():"",u=null!==e&&void 0!==e&&null!==(o=e.DummyData)&&void 0!==o&&o.sellers?e.DummyData.sellers.map((e=>"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||""))).join(" ").toLowerCase():"";return(!c.file_no||e.file_no.toLowerCase().includes(c.file_no))&&(!c.file_name||e.file_name.toLowerCase().includes(c.file_name))&&(!c.address||(null===(n=e.DummyData)||void 0===n||null===(t=n.subject_premise)||void 0===t?void 0:t.property_location.toLowerCase().includes(c.address)))&&(!c.date||r===d)&&(!c.lender||(null===(a=e.DummyData)||void 0===a||null===(i=a.lender)||void 0===i?void 0:i.organization.toLowerCase().includes(c.lender)))&&(!c.transaction_type||e.transaction_type.toLowerCase().includes(c.transaction_type))&&(!c.buyers||s.includes(c.buyers.toLowerCase()))&&(!c.sellers||u.includes(c.sellers.toLowerCase()))}));s(e),console.log("Filtered Data:",e),o((0,P.AB)(e))}),[c,l]),console.log(c,"Filter"),(0,b.jsx)(_.Ay,{item:!0,xs:12,md:12,children:(0,b.jsxs)(w.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,b.jsx)(S.A,{name:"file_no",label:"File No #",value:c.file_no||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(S.A,{name:"file_name",label:"File Name",value:c.file_name||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(S.A,{name:"address",label:"Address",value:c.address||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsx)(S.A,{name:"date",label:"Date",type:"date",value:c.date||"",onChange:e=>p(e.target.name,e.target.value),InputLabelProps:{shrink:!0}}),(0,b.jsx)(S.A,{name:"lender",label:"Lender",value:c.lender||"",onChange:e=>p(e.target.name,e.target.value)}),(0,b.jsxs)(C.A,{fullWidth:!0,children:[(0,b.jsx)(D.A,{id:"transaction-type-label",children:"Transaction Type"}),(0,b.jsx)(T.A,{name:"transaction_type",label:"Transaction Type",value:c.transaction_type||"",onChange:e=>p(e.target.name,e.target.value),labelId:"transaction-type-label",children:E.xW.map((e=>(0,b.jsx)(F.A,{value:e.value,children:e.label},e.value)))})]}),(0,b.jsx)(C.A,{fullWidth:!0,children:(0,b.jsx)(B.A,{name:"buyers",options:n,getOptionLabel:e=>"".concat(e.first_name," ").concat(e.last_name),renderInput:e=>(0,b.jsx)(S.A,{...e,label:"Search Buyer",variant:"outlined"}),value:n.find((e=>"".concat(e.first_name," ").concat(e.last_name)===c.buyers))||null,onChange:(e,l)=>{p("buyers","".concat(l.first_name," ").concat(l.last_name))},isOptionEqualToValue:(e,l)=>e.first_name===(null===l||void 0===l?void 0:l.first_name)&&e.last_name===(null===l||void 0===l?void 0:l.last_name)})}),(0,b.jsx)(C.A,{fullWidth:!0,children:(0,b.jsx)(B.A,{name:"sellers",options:i,getOptionLabel:e=>"".concat(e.first_name," ").concat(e.last_name),renderInput:e=>(0,b.jsx)(S.A,{...e,label:"Search Seller",variant:"outlined"}),value:i.find((e=>"".concat(e.first_name," ").concat(e.last_name)===c.sellers))||null,onChange:(e,l)=>{p("sellers","".concat(l.first_name," ").concat(l.last_name))},isOptionEqualToValue:(e,l)=>e.first_name===(null===l||void 0===l?void 0:l.first_name)&&e.last_name===(null===l||void 0===l?void 0:l.last_name)})})]})})}const O=(0,i.Ay)(n.m.div)((e=>{let{theme:l}=e;return{...(0,v.A)(l).bgBlur({color:l.palette.background.paper,opacity:.92}),top:0,right:0,bottom:0,display:"flex",position:"fixed",overflow:"hidden",width:m.LM.BASE_WIDTH,flexDirection:"column",margin:l.spacing(2),paddingBottom:l.spacing(3),zIndex:l.zIndex.drawer+3,borderRadius:1.5*Number(l.shape.borderRadius),boxShadow:"-24px 12px 32px -4px ".concat((0,r.X4)("light"===l.palette.mode?l.palette.grey[500]:l.palette.common.black,.16))}}));function R(e){let{files:l}=e;const{themeMode:o,themeDirection:n,themeColorPresets:i,themeStretch:r,themeLayout:v,onResetSetting:f}=(0,p.A)(),[A,j]=(0,a.useState)(!1),_=o!==m.L6.themeMode||n!==m.L6.themeDirection||i!==m.L6.themeColorPresets||v!==m.L6.themeLayout||r!==m.L6.themeStretch,w="rtl"!==n?(0,g.Sk)({distance:m.LM.BASE_WIDTH,durationIn:.32,durationOut:.32}).inRight:(0,g.Sk)({distance:m.LM.BASE_WIDTH,durationIn:.32,durationOut:.32}).inLeft;(0,a.useEffect)((()=>{document.body.style.overflow=A?"hidden":"unset"}),[A]);const S=()=>{j(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.A,{open:A,onClick:S,sx:{background:"transparent",zIndex:e=>e.zIndex.drawer+1}}),!A&&(0,b.jsx)(y,{open:A,notDefault:_,onToggle:()=>{j((e=>!e))}}),(0,b.jsx)(t.N,{children:A&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(O,{...w,children:[(0,b.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:2,pr:1,pl:2.5},children:[(0,b.jsx)(c.A,{variant:"subtitle1",children:"Filters"}),(0,b.jsx)("div",{children:(0,b.jsx)(g.ji,{onClick:S,children:(0,b.jsx)(x.A,{icon:"eva:close-fill",width:20,height:20})})})]}),(0,b.jsx)(u.A,{sx:{borderStyle:"dashed"}}),(0,b.jsx)(h.A,{sx:{flexGrow:1},children:(0,b.jsx)(s.A,{spacing:3,sx:{p:3},children:(0,b.jsx)(N,{files:l})})})]})})})]})}},93591:(e,l,o)=>{o.r(l),o.d(l,{default:()=>pe});var n=o(9950),t=o(60666),a=o(48089),i=o(14857),r=o(12257),d=o(6368),s=o(68367),c=o(84142),u=o(1320),p=o(15769),v=o(34075),m=o(91434),x=o(53984),h=o(73447),g=o(57191),f=o(82053),b=o(60899),A=o(8145),j=o(74745),y=o(75165),_=o(29031),w=o(13564),S=o(28095),C=o(7951),D=o(68654),T=o(9449),F=o(73878),B=o(14650),k=(o(61310),o(99425),o(1041),o(48711)),L=o(90260),P=o(46765),E=o(86608),I=o(38861),N=o(34117),O=o(8279),R=o(66075),W=o(44185),z=o(63358),M=o(72870),q=o(12480),V=o(32741),G=o(95074),Y=o(30818),U=o(52401),$=(o(83752),o(22988),o(94906),o(24642),o(46631),o(64267),o(44414));L.nB.legalForms.acknowledgments,L.nB.legalForms.affidavitforCreditAgainst,L.nB.legalForms.affidavitinLieuofRegistration,L.nB.legalForms.affidavitinLieuofRegistration2009,L.nB.legalForms.carbonMonoxideDetectorAffidavit,L.nB.legalForms.certificationonNonForeignStatus,L.nB.legalForms.contractofSaleCondo,L.nB.legalForms.contractofSaleCoop,L.nB.legalForms.contractofSaleResidential,L.nB.legalForms.deedAdministrators,L.nB.legalForms.deedBargainandSalewithCovenants,L.nB.legalForms.deedBargainandSalewithoutCovenants,L.nB.legalForms.deedExecutors,L.nB.legalForms.deedQuitclaim,L.nB.legalForms.deedWarrantywithFullCovenants,L.nB.legalForms.it2663,L.nB.legalForms.it2664,L.nB.legalForms.nYStatutoryShortFormPOA,L.nB.legalForms.peconicBayRegionCommunityPreservationFund,L.nB.legalForms.RP5217,L.nB.legalForms.TP584;o(48812),o(29113);var H=o(33507),X=o(9213),Z=o(21671),J=o(93038),Q=o(23266),K=o(34437);o(22704),o(33949);function ee(e){var l,o,t,a,r,d,s,c,u,p,v,m,x,h,g,f,b,A,j,y,_,S,C,D,T,F,B,k,L,P,E,I,N,O;let{row:W,selected:z,onSelectRow:q,onAssign:V,onViewRow:G,onDocumentUpload:Y,onDownloadDocument:U,onDeleteRow:H,onShareRow:ee,onEditRow:le,onOrderContin:oe,onStatusChange:ne,CreateOrderByPdf:te,onPaymentRow:ae}=e;(0,i.A)();const{pathname:ie}=(0,w.zy)();ie.includes("admin"),(0,w.Zp)();console.log(W,"row");const{file_no:re,id:de,User:se,file_pdf:ce}=W,ue=null===ce||void 0===ce?void 0:ce.split("/");console.log(ue,"pdfName");const[pe,ve]=(0,n.useState)(null),[me,xe]=(Boolean(pe),(0,n.useState)(null)),he=()=>{xe(null)};return(0,$.jsxs)(X.A,{hover:!0,selected:z,children:[(q||z)&&(0,$.jsx)(Z.A,{padding:"checkbox",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(0,$.jsx)(J.A,{checked:z,onClick:q})}),(0,$.jsx)(Z.A,{sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},align:"left",children:null!==re?re:"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(l=W.orders)||void 0===l?void 0:l.length)>0&&(null!==(null===W||void 0===W||null===(o=W.orders[0])||void 0===o?void 0:o.subject_premise)||""!==(null===W||void 0===W||null===(t=W.orders[0])||void 0===t||null===(a=t.subject_premise)||void 0===a?void 0:a.property_location))?null===W||void 0===W||null===(r=W.orders[0])||void 0===r||null===(d=r.subject_premise)||void 0===d||null===(s=d.property_location)||void 0===s?void 0:s.slice(0,50):"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(c=W.orders)||void 0===c?void 0:c.length)>0&&(null!==(null===W||void 0===W||null===(u=W.orders[0])||void 0===u?void 0:u.subject_premise)||""!==(null===W||void 0===W||null===(p=W.orders[0])||void 0===p||null===(v=p.subject_premise)||void 0===v?void 0:v.county))?null===W||void 0===W||null===(m=W.orders[0])||void 0===m||null===(x=m.subject_premise)||void 0===x?void 0:x.county:"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(h=W.orders)||void 0===h?void 0:h.length)>0&&null!==(null===W||void 0===W||null===(g=W.orders[0])||void 0===g?void 0:g.CONTIN_COMPLETED_DATE)?(0,K.ts)(null===W||void 0===W||null===(f=W.orders[0])||void 0===f?void 0:f.CONTIN_COMPLETED_DATE):"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(b=W.orders)||void 0===b?void 0:b.length)>0&&null!==(null===W||void 0===W||null===(A=W.orders[0])||void 0===A?void 0:A.COMPLETED_DATE)?(0,K.ts)(null===W||void 0===W||null===(j=W.orders[0])||void 0===j?void 0:j.COMPLETED_DATE):"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(y=W.orders)||void 0===y?void 0:y.length)>0&&null!==(null===W||void 0===W||null===(_=W.orders[0])||void 0===_?void 0:_.order_payment)?(0,K.ts)(null===W||void 0===W||null===(S=W.orders[0])||void 0===S||null===(C=S.order_payment)||void 0===C?void 0:C.payment_date):"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(D=W.orders)||void 0===D?void 0:D.length)>0&&null!==(null===W||void 0===W||null===(T=W.orders[0])||void 0===T?void 0:T.order_payment)?null===W||void 0===W||null===(F=W.orders[0])||void 0===F||null===(B=F.order_payment)||void 0===B?void 0:B.payment_note:"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{color:"#DD9A19",textWrap:"nowrap",border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(k=W.orders)||void 0===k?void 0:k.length)>0&&null!==(null===W||void 0===W||null===(L=W.orders[0])||void 0===L?void 0:L.order_payment)?null!==W&&void 0!==W&&null!==(P=W.orders[0])&&void 0!==P&&null!==(E=P.order_payment)&&void 0!==E&&E.is_paid?"Paid":"false":"N/A"}),(0,$.jsx)(Z.A,{align:"left",sx:{border:"1px solid #e9eff4",paddingTop:"10px",paddingBottom:"10px",fontSize:"12px",fontWeight:"400"},children:(null===W||void 0===W||null===(I=W.orders)||void 0===I?void 0:I.length)>0&&null!==(null===W||void 0===W||null===(N=W.orders[0])||void 0===N?void 0:N.Total_Price)?null===W||void 0===W||null===(O=W.orders[0])||void 0===O?void 0:O.Total_Price:"N/A"}),(0,$.jsx)(Z.A,{align:"right",sx:{padding:"14px 2px"},children:(0,$.jsx)(M.ZE,{open:me,onOpen:e=>{xe(e.currentTarget)},onClose:he,actions:(0,$.jsxs)($.Fragment,{children:[G&&(0,$.jsxs)(Q.A,{onClick:()=>{G(),he()},children:[(0,$.jsx)(R.A,{icon:"tabler:eye-filled"}),"View"]}),ee&&(0,$.jsxs)(Q.A,{onClick:()=>{ee(),he()},children:[(0,$.jsx)(R.A,{icon:"material-symbols:share"}),"Share"]}),ae&&(0,$.jsxs)(Q.A,{onClick:()=>{ae(),he()},children:[(0,$.jsx)(R.A,{icon:"material-symbols:share"}),"Add Payment"]})]})})})]})}var le=o(45180),oe=o(24516),ne=o(25979),te=o(3788),ae=o(93523),ie=o(41397);const re={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},de=e=>{var l,o;let{Open:i,setOpen:s,OrderId:c,OrderData:u}=e;const p=(0,F.wA)(),v=()=>{s(!1)},{enqueueSnackbar:m}=(0,_.dh)(),{file:A,UserId:j}=(0,F.d4)((e=>e.File)),[y,w]=(0,n.useState)(),[C,B]=(0,n.useState)(null);console.log(null===u||void 0===u?void 0:u.is_paid,"file details"),(0,n.useEffect)((()=>{p((0,Y.fl)())}),[]),(0,n.useEffect)((()=>{if(c&&(null===A||void 0===A?void 0:A.length)>0){const n=A.find((e=>{var l,o;return(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)==c}));if(n){var e,l,o;const t={label:"".concat(null===n||void 0===n?void 0:n.file_name," (").concat(null===n||void 0===n?void 0:n.file_no,")"),value:null===n||void 0===n||null===(e=n.orders[0])||void 0===e?void 0:e.id};B(t),W("order",t.value);const a=null===n||void 0===n||null===(l=n.orders[0])||void 0===l||null===(o=l.Total_Price)||void 0===o?void 0:o.split(".");W("price",(null===a||void 0===a?void 0:a.length)>0?a[0]:"")}}}),[c,A]);const L=(0,ie.debounce)((e=>{w(e)}),300),P=(0,n.useMemo)((()=>{if(null===y||void 0===y||!y.trim())return A.map((e=>{var l,o;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)}}));const e=y.toLowerCase();return A.filter((l=>{var o,n,t,a;return null!==(o=null===l||void 0===l||null===(n=l.file_name)||void 0===n?void 0:n.toLowerCase().includes(e))&&void 0!==o&&o||null!==(t=null===l||void 0===l||null===(a=l.file_no)||void 0===a?void 0:a.toLowerCase().includes(e))&&void 0!==t&&t})).map((e=>{var l,o;return{label:"".concat(null===e||void 0===e?void 0:e.file_name," (").concat(null===e||void 0===e?void 0:e.file_no,")"),value:(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)}}))}),[y,A]),E=t.Ik().shape({order:t.Yj().required("Select Order"),date:t.Yj().required("Date is required"),notes:t.Yj(),is_active:t.zM().oneOf([!0],"Status is required")}),I=(0,n.useMemo)((()=>({order:"",date:"",notes:"",is_active:!(null===u||void 0===u||!u.is_paid),price:""})),[u]),N=(0,T.mN)({resolver:(0,D.t)(E),defaultValues:I}),{reset:O,watch:R,setValue:W,handleSubmit:z,formState:{isSubmitting:M,errors:q}}=N,G=R();(0,n.useEffect)((()=>{u&&O(I)}),[u]),console.log(G,"error");return(0,$.jsx)(x.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:v,closeAfterTransition:!0,slots:{backdrop:h.A},slotProps:{backdrop:{timeout:500}},children:(0,$.jsx)(g.A,{in:i,children:(0,$.jsx)(d.A,{sx:re,children:(0,$.jsx)(U.Op,{methods:N,onSubmit:z((async e=>{console.log(e,"data");try{const l=new FormData;l.append("payment_date",(null===e||void 0===e?void 0:e.date)+" 00:00:00"),l.append("payment_note",null===e||void 0===e?void 0:e.notes),l.append("is_paid",null!==e&&void 0!==e&&e.is_active?1:0),l.append("Total_Price",null===e||void 0===e?void 0:e.price),await V.A.post("/admin/change/payment_status/".concat(null===e||void 0===e?void 0:e.order),l).then((()=>{m("Status Paid Success"),W("order",""),O(),v(),p((0,Y.xg)("all",j))}))}catch(l){if(console.error(l,"error"),l.errors){Object.keys(l.errors).map((e=>m(l.errors[e][0],{variant:"error"})))}}})),children:(0,$.jsx)(b.Ay,{container:!0,spacing:3,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,$.jsx)(b.Ay,{item:!0,xs:12,md:12,children:(0,$.jsxs)(a.A,{sx:{p:3},children:[(0,$.jsx)(le.A,{title:"Add Payment Status"}),(0,$.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},mt:2},children:[(0,$.jsxs)(r.A,{children:[(0,$.jsx)(k.Ay,{options:P,value:C,onInputChange:L,onChange:e=>{var l,o;B(e);const n=e.value;W("order",n);const t=null===A||void 0===A?void 0:A.find((e=>{var l,o;return(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id)==n})),a=null===t||void 0===t||null===(l=t.orders[0])||void 0===l||null===(o=l.Total_Price)||void 0===o?void 0:o.split(".");W("price",(null===a||void 0===a?void 0:a.length)>0&&a[0]),console.log(a,"getPrice")},isSearchable:"true",placeholder:"Select a File",className:"w-100 py-5",styles:{control:(e,l)=>({...e,backgroundColor:"white",borderRadius:"8px",border:l.isFocused?"2px solid #1976d2":"1px solid #ced4da",boxShadow:l.isFocused?"0 0 5px rgba(25, 118, 210, 0.5)":"none","&:hover":{borderColor:"#1976d2"},minHeight:"48px"}),menu:e=>({...e,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",zIndex:9999}),option:(e,l)=>({...e,backgroundColor:l.isFocused?"#f5f5f5":"white",color:"black",padding:"10px 15px","&:active":{backgroundColor:"#e0e0e0"}}),placeholder:e=>({...e,color:"#6c757d",fontSize:"16px"}),singleValue:e=>({...e,color:"#495057",fontSize:"16px"}),dropdownIndicator:(e,l)=>({...e,color:l.isFocused?"#1976d2":"#6c757d","&:hover":{color:"#1976d2"}}),indicatorSeparator:e=>({...e,display:"none"})}}),""===(null===G||void 0===G?void 0:G.order)&&(0,$.jsx)(oe.A,{sx:{color:"red"},children:null===q||void 0===q||null===(l=q.order)||void 0===l?void 0:l.message})]}),(0,$.jsxs)(ne.A,{fullWidth:!0,children:[(0,$.jsx)(te.A,{id:"demo-simple-select-label",children:"Select price"}),(0,$.jsxs)(ae.A,{labelId:"demo-simple-select-label",name:"price",id:"demo-simple-select",value:null===G||void 0===G?void 0:G.price,onChange:e=>{const{value:l}=e.target;W("price",l),console.log(l,"values")},label:"Select a price",children:[(0,$.jsx)(Q.A,{value:"300",children:"$ 300.00"}),(0,$.jsx)(Q.A,{value:"350",children:"$ 350.00"}),(0,$.jsx)(Q.A,{value:"395",children:"$ 395.00"}),(0,$.jsx)(Q.A,{value:"400",children:"$ 400.00"}),(0,$.jsx)(Q.A,{value:"450",children:"$ 450.00"}),(0,$.jsx)(Q.A,{value:"500",children:"$ 500.00"})]})]}),(0,$.jsx)(U.o3,{name:"date",type:"date"}),(0,$.jsx)(U.o3,{name:"notes",label:"Notes",multi:!0}),(0,$.jsx)(U.b8,{name:"is_active",labelPlacement:"start",label:(0,$.jsx)($.Fragment,{children:(0,$.jsx)(f.A,{variant:"h6",sx:{mb:.5},children:"Paid"})}),sx:{mx:0,width:1,justifyContent:"space-between"}}),(null===q||void 0===q?void 0:q.is_active)&&(0,$.jsx)(oe.A,{sx:{color:"red"},children:null===q||void 0===q||null===(o=q.is_active)||void 0===o?void 0:o.message})]}),(0,$.jsxs)(r.A,{justifyContent:"space-between",alignItems:"flex-end",sx:{mt:3},children:[(0,$.jsx)(S.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"submit",variant:"contained",loading:M,children:"Save Changes"}),(0,$.jsx)(S.A,{sx:{color:"#fff",bgcolor:"#00AB55",boxShadow:"none",borderRadius:"0px",margin:"4px","&:hover":{bgcolor:"#00AB55"}},type:"button",variant:"contained",onClick:v,children:"Close"})]})]})})})})})})})},se=[{id:"file_no",label:"File No",align:"left",width:200},{id:"address",label:"Address",align:"left",width:100},{id:"county",label:"County",align:"left",width:100},{id:"CONTIN_COMPLETED_DATE",label:"Contin Completed",align:"left",width:800},{id:"COMPLETED_DATE",label:"Completed Date",align:"left",width:800},{id:"payment_date",label:"Payment Date",align:"left",width:500},{id:"notes",label:"Notes",align:"left",width:500},{id:"is_paid",label:"Status",align:"left",width:500},{id:"Total_Price",label:"Invoice Price",align:"left",width:500}],ce=[{api:"all",label:"All"},{api:"title_insurance",label:"Title Insurance"},{api:"coop_lien_search",label:"Coop Lien Searches"},{api:"eagle_9_policy",label:"Eagle 9 Policy"},{api:"coop_condo_offering_plans",label:"Coop/Condo offering plans"},{api:"ucc_create_file",label:"UCC"},{api:"exchange",label:"1031 Exchanges"},{api:"acris_e_tax_form",label:"Acris E-Tax forms"},{api:"other_searches",label:"Other Search / Request"},{api:"Sightline_Report",label:"Sightline\xae"}],ue={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4};(0,C.Ay)(a.A)((e=>{let{theme:l}=e;return{boxShadow:"none",textAlign:"center",backgroundColor:l.palette.primary.lighter,[l.breakpoints.up("md")]:{display:"flex",textAlign:"left",alignItems:"center",justifyContent:"space-between",height:"100%"}}}));function pe(e){var l,o;let{viewTabsRef:C}=e;(0,i.A)();const{user:X}=(0,H.A)(),{themeStretch:Z}=(0,E.A)(),J=(0,F.wA)(),{enqueueSnackbar:Q}=((0,w.Zp)(),(0,_.dh)()),{dense:K,page:le,order:oe,orderBy:ne,rowsPerPage:te,setPage:ae,selected:ie,setSelected:re,onSort:pe,onChangeDense:ve,onChangePage:me,onChangeRowsPerPage:xe}=(0,I.Ay)({defaultOrderBy:"createDate"}),[he,ge]=(0,n.useState)([]),[fe,be]=(0,n.useState)(""),[Ae,je]=(0,n.useState)("new"),[ye,_e]=(0,n.useState)(null),[we,Se]=(0,n.useState)([]),[Ce,De]=(0,n.useState)(null),{currentTab:Te,onChangeTab:Fe}=(0,P.A)("all"),[Be,ke]=(0,n.useState)(),[Le,Pe]=(0,n.useState)(!1),[Ee,Ie]=(0,n.useState)(""),[Ne,Oe]=(0,n.useState)(!1),[Re,We]=(0,n.useState)(!1),[ze,Me]=(0,n.useState)(!1),[qe,Ve]=(0,n.useState)(),[Ge,Ye]=(0,n.useState)(),[Ue,$e]=(0,n.useState)(),[He,Xe]=(0,n.useState)(),[Ze,Je]=(0,n.useState)(),[Qe,Ke]=(0,n.useState)([]),[el,ll]=(0,n.useState)([]),[ol,nl]=(0,n.useState)(!1),[tl,al]=(0,n.useState)(null),{file:il,filterData:rl}=(Boolean(tl),(0,N.d4)((e=>e.File)));console.log(il,"file details");(0,n.useEffect)((()=>{var e;"Sightline\xae"!==Be&&J((0,Y.xg)(null===(e=ce.find((e=>e.label===Be)))||void 0===e?void 0:e.api,He))}),[Be]),(0,n.useEffect)((()=>{if((null===il||void 0===il?void 0:il.length)>0){const e=il.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.User)||void 0===l?void 0:l.id)===He}));ge(e)}else ge([])}),[il,He]);(0,n.useEffect)((()=>{(async()=>{Pe(!0);try{var e;const l=await V.A.get("admin/users");console.log(l,"all user"),Ke(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user),console.log(l,"autofill")}catch(l){console.log(l,"autofill")}finally{Pe(!1)}})()}),[]);const dl=function(e){var l;let{tableData:o,comparator:n,filterName:t,filterStatus:a,filterService:i,filterStartDate:r,filterEndDate:d}=e;const s=null===(l=o)||void 0===l?void 0:l.map(((e,l)=>[e,l]));s.sort(((e,l)=>{const o=n(e[0],l[0]);return 0!==o?o:e[1]-l[1]})),o=s.map((e=>e[0])),t&&(o=o.filter((e=>{var l,o,n;return-1!==e.file_no.toLowerCase().indexOf(t.toLowerCase())||-1!==(null===e||void 0===e||null===(l=e.orders[0])||void 0===l||null===(o=l.subject_premise)||void 0===o||null===(n=o.property_location)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))})));"all"!==a&&(o=o.filter((e=>e.status===a)));"new"!==i&&(o=o.filter((e=>e.status===i)));r&&d&&(o=o.filter((e=>e.updated_at.getTime()>=r.getTime()&&e.updated_at.getTime()<=d.getTime())));return o}({tableData:he,comparator:(0,I.hz)(oe,ne),filterName:fe,filterService:Ae,filterStatus:Te,filterStartDate:ye,filterEndDate:Ce}),sl=K?56:76,cl=!dl.length&&!!fe||!dl.length&&!!Te||!dl.length&&!!Ae||!dl.length&&!!Ce||!dl.length&&!!ye,ul=async e=>{nl(!0);try{await V.A.post("user/share/".concat(e,"/").concat(qe)).then((e=>{if(nl(!1),200===e.status||201===e.status){const l=e.data;console.log(l,"share file"),Q(l.message),Oe(!1),Se()}}))}catch(l){if(console.error(l),l.errors){Object.keys(l.errors).map((e=>Q(l.errors[e][0],{variant:"error"})))}}finally{nl(!1)}},pl=(0,n.useRef)(""),vl=t.Ik().shape({fname:t.Yj().required("First Name is required"),lname:t.Yj().required("Last Name is required"),email:t.Yj().required("Email is required")}),ml=(0,n.useMemo)((()=>({fname:"",lname:"",email:"",phone:"",address:"",company:"",job:""})),[]),xl=(0,T.mN)({resolver:(0,D.t)(vl),defaultValues:ml}),{reset:hl,watch:gl,setValue:fl,handleSubmit:bl,formState:{isSubmitting:Al,errors:jl}}=xl,yl=(gl(),async(e,l,o)=>{try{var n;const i=new FormData;i.append("name","".concat(l," ").concat(o));const r=await V.A.post("user/contact/add/".concat(e),i);var t,a;if(console.log(r,"add user in list api"),null!==r&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.status)Q("User Add In Your List",{variant:"success"}),ul(null===r||void 0===r||null===(t=r.data)||void 0===t||null===(a=t.contact)||void 0===a?void 0:a.id);else console.log("Status False in API")}catch(i){console.log(i,"add user in list api error")}});return(0,$.jsxs)(O.A,{title:"All Files",children:[Le&&(0,$.jsx)(G.A,{}),(0,$.jsxs)(a.A,{sx:{borderRadius:"0px"},children:[(0,$.jsx)(r.A,{gap:1,sx:{width:"25%",float:"right"},children:(0,$.jsx)(k.Ay,{options:null===Qe||void 0===Qe?void 0:Qe.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:Ze,onChange:e=>{console.log(e,"newFileId"),J((0,Y.xg)("all",e.value)),Xe(e.value),Je(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,l)=>({...e,backgroundColor:l.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})}),(0,$.jsxs)(d.A,{sx:{width:"100%"},children:[(0,$.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Be,onChange:(e,l)=>ke(l),sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px"},children:ce.map((e=>(0,$.jsx)(c.A,{disableRipple:!0,value:e.label,label:(0,$.jsx)(r.A,{spacing:1,direction:"row",alignItems:"center",children:(0,$.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,$.jsx)(q.F5,{filterName:fe,filterService:Ae,filterStartDate:ye,filterEndDate:Ce,onFilterName:e=>{be(e),ae(0)},onFilterService:e=>{je(e.target.value)},onFilterStartDate:e=>{_e(e)},onFilterEndDate:e=>{De(e)}})]}),(0,$.jsx)(z.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Dashboard",href:L.nB.root},{name:"All Files"}]}),(0,$.jsx)(W.A,{children:(0,$.jsx)(u.A,{sx:{minWidth:400,position:"relative"},children:(0,$.jsxs)(p.A,{size:K?"small":"medium",sx:{overflowX:"hidden"},children:[(0,$.jsx)(M.er,{order:oe,orderBy:ne,headLabel:se,rowCount:he.length,numSelected:ie.length,onSort:pe}),(0,$.jsxs)(v.A,{children:[dl.slice(le*te,le*te+te).map((e=>(0,$.jsx)(ee,{row:e,onPaymentRow:()=>(e=>{var l,o;We(!0);const n=(null===e||void 0===e||null===(l=e.orders)||void 0===l?void 0:l.length)>0&&(null===e||void 0===e||null===(o=e.orders[0])||void 0===o?void 0:o.id);Ye(n),$e(e)})(e)},e.id))),(0,$.jsx)(M.dO,{height:sl,emptyRows:(0,I.xl)(le,te,he.length)}),(0,$.jsx)(M.Sm,{isNotFound:cl})]})]})})}),(0,$.jsx)(d.A,{sx:{position:"relative"},children:(0,$.jsx)(m.A,{rowsPerPageOptions:[5,10,25],component:"div",count:dl.length,rowsPerPage:te,page:le,onPageChange:me,onRowsPerPageChange:xe})})]}),(0,$.jsx)(x.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Ne,onClose:()=>Oe(!1),closeAfterTransition:!0,slots:{backdrop:h.A},slotProps:{backdrop:{timeout:500}},children:(0,$.jsx)(g.A,{in:Ne,children:(0,$.jsxs)(d.A,{sx:ue,children:[(0,$.jsx)(f.A,{variant:"h5",sx:{mb:2},onClick:()=>Me(!1),children:ze&&(0,$.jsx)(B.In,{icon:"material-symbols:arrow-left-alt",width:"1.2em",height:"1.2em"})}),(0,$.jsxs)(b.Ay,{item:!0,xs:12,md:12,children:[(0,$.jsx)(f.A,{variant:"h5",sx:{mb:2},children:ze?"Add Contact":"Select User Into Your List"}),ze?(0,$.jsxs)(U.Op,{methods:xl,onSubmit:bl((async e=>{console.log(e.request,"request"),nl(!0);try{const l=new FormData;l.append("first_name",e.fname),l.append("last_name",e.lname),l.append("email",e.email),l.append("phone",e.phone),l.append("address",e.address),l.append("company_name",e.company),l.append("job_title",e.job),l.append("is_file_shared",!0),await V.A.post("user/contact/user/add",l).then((e=>{if(nl(!1),200===e.status||201===e.status){var l,o,n;const t=e.data;console.log(t,"add user new"),Q("successfully add new user"),Oe(!1),hl(),yl(null===t||void 0===t||null===(l=t.user)||void 0===l?void 0:l.id,null===t||void 0===t||null===(o=t.user)||void 0===o?void 0:o.first_name,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.last_name)}}))}catch(l){if(console.error(l),l.errors){Object.keys(l.errors).map((e=>Q(l.errors[e][0],{variant:"error"})))}}finally{nl(!1)}})),children:[(0,$.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,$.jsx)(U.o3,{name:"fname",label:"First Name"}),(0,$.jsx)(U.o3,{name:"lname",label:"Last Name"}),(0,$.jsx)(U.o3,{name:"email",label:"Email"}),(0,$.jsx)(U.o3,{name:"phone",label:"Phone Nunber"}),(0,$.jsx)(U.o3,{name:"address",label:"Address"}),(0,$.jsx)(U.o3,{name:"company",label:"Company Name"}),(0,$.jsx)(U.o3,{name:"job",label:"Job title"})]}),(0,$.jsx)(r.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,$.jsx)(S.A,{type:"submit",variant:"contained",loading:ol,children:"Add Contact"})})]}):(0,$.jsxs)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,$.jsx)(r.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,$.jsx)(A.A,{sx:{my:1,width:1},ref:pl,label:"Search by first Name, Last Name & Email",value:(null===pl||void 0===pl||null===(l=pl.current)||void 0===l?void 0:l.value)||"",onChange:e=>{const l=e.target.value.toLowerCase();if(pl.current.value=l,""===pl.current.value)Se([]);else{const e=el.filter((e=>{var o,n,t;return(null===e||void 0===e||null===(o=e.Contact)||void 0===o?void 0:o.first_name.toLowerCase().includes(l))||(null===e||void 0===e||null===(n=e.Contact)||void 0===n?void 0:n.last_name.toLowerCase().includes(l))||(null===e||void 0===e||null===(t=e.Contact)||void 0===t?void 0:t.email.toLowerCase().includes(l))}));console.log(e,"filteredData"),Se(e)}},size:"small"})}),(0,$.jsx)(j.A,{}),(null===we||void 0===we?void 0:we.length)>0?we.map(((e,l)=>{var o,n;return(0,$.jsxs)(r.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,$.jsxs)(f.A,{variant:"subtitle1",sx:{my:1,color:"black"},children:[(0,$.jsx)(R.A,{icon:"material-symbols:user-attributes-rounded",color:"green"})," ","".concat(null===(o=e.Contact)||void 0===o?void 0:o.first_name," ").concat(null===e||void 0===e||null===(n=e.Contact)||void 0===n?void 0:n.last_name)]}),(0,$.jsx)(r.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,$.jsx)(S.A,{type:"submit",variant:"contained",loading:ol,onClick:()=>ul(null===e||void 0===e?void 0:e.id),children:"Share"})})]},l)})):(0,$.jsx)(r.A,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{p:5},children:(0,$.jsx)(y.A,{variant:"contained",onClick:()=>Me(!0),startIcon:(0,$.jsx)(R.A,{icon:"material-symbols:contact-page-rounded"}),sx:{backgroundColor:"#403390","&:hover":{backgroundColor:"#fff",color:"#403390"}},children:"Add Contact"})})]})]})]})})}),(0,$.jsx)(de,{Open:Re,setOpen:We,OrderId:Ge,OrderData:null===Ue||void 0===Ue||null===(o=Ue.orders[0])||void 0===o?void 0:o.order_payment})]})}}}]);