(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3643],{63358:(e,n,o)=>{"use strict";o.d(n,{A:()=>h});var t=o(56801),a=o.n(t),l=o(6368),i=o(82053),r=o(22707),s=o(26689),d=o(52432),c=o(44414);function p(e){let{links:n,activeLast:o=!1,...t}=e;const a=n[n.length-1].name,r=n.map((e=>(0,c.jsx)(x,{link:e},e.name))),s=n.map((e=>(0,c.jsx)("div",{children:e.name!==a?(0,c.jsx)(x,{link:e}):(0,c.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:a})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...t,children:o?r:s})}function x(e){let{link:n}=e;const{href:o,name:t,icon:a}=n;return(0,c.jsxs)(r.A,{variant:"body2",component:s.N_,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,c.jsx)(l.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),t]},t)}function h(e){let{links:n,action:o,heading:t,moreLink:s=[],sx:d,...x}=e;return(0,c.jsxs)(l.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(l.A,{sx:{flexGrow:1},children:[(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:t}),(0,c.jsx)(p,{links:n,...x})]}),o&&(0,c.jsx)(l.A,{sx:{flexShrink:0},children:o})]}),(0,c.jsx)(l.A,{sx:{mt:2},children:a()(s)?(0,c.jsx)(r.A,{href:s,target:"_blank",rel:"noopener",variant:"body2",children:s}):null===s||void 0===s?void 0:s.map((e=>(0,c.jsx)(r.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},42373:(e,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>G});var t=o(9950),a=o(25277),l=o(79537),i=o(6368),r=o(12257),s=o(75165),d=o(60899),c=o(82053),p=o(48089),x=o(50704),h=o(53984),u=o(73447),g=o(57191),m=o(28095),f=o(7951),b=o(19657),v=o(9449),j=o(29031),A=o(13564),y=o(26689),w=o(87307),k=o.n(w),S=o(73114),C=o(66677),_=o(8279),D=o(30744),E=o(86608),F=o(63358),I=o(90260),P=o(66075),R=o(52401),B=o(30818),L=o(32741),W=(o(12490),o(44414));S.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(S.version,"/pdf.worker.js");const T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},G=()=>{var e;(0,f.Ay)(a.A)((e=>{let{theme:n}=e;const o=(n.palette.mode,"#00AB55");return{backgroundColor:"#00AB55",height:n.spacing(3),color:"white",padding:"15px",fontWeight:n.typography.fontWeightBold,"&:hover, &:focus":{backgroundColor:(0,b.tL)(o,.06)},"&:active":{boxShadow:n.shadows[1],backgroundColor:(0,b.tL)(o,.12)}}}));const n=(0,A.Zp)(),o=(0,A.zy)().pathname,{enqueueSnackbar:w}=(0,j.dh)(),{themeStretch:S}=(0,E.A)(),[G,z]=(0,t.useState)([]),[q,H]=(0,t.useState)(),[N,O]=(0,t.useState)(null),[U,M]=(0,t.useState)(!1),[V,$]=(0,t.useState)([]),[J,Z]=(0,t.useState)(!1),[K,Q]=(0,t.useState)(!1),[X,Y]=(0,t.useState)(),[ee,ne]=(0,t.useState)(),[oe,te]=(0,t.useState)(""),ae=(0,t.useRef)(""),[le,ie]=(0,t.useState)(""),{file:re}=(0,D.d4)((e=>e.File));console.log(re,"file details"),(0,t.useEffect)((()=>{(0,D.JD)((0,B.oc)())}),[]);const se=(0,v.mN)(),{setValue:de,getValues:ce}=se,pe=(0,t.useCallback)((e=>{if(e&&e.length>0){const n=e[0];console.log(n,"acceptedFile"),ne(n),Y(n.name),de("file",n)}}),[de]),xe=async()=>{M(!0);try{var e;const n=await L.A.get("/user/doc/user_pdf");console.log(n,"personal doc show"),z(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.files)}catch(n){console.log(n,"personal doc error")}finally{M(!1)}};(0,t.useEffect)((()=>{xe()}),[]);const he=(e,n,o)=>{console.log("addclass");const t=new RegExp("(<".concat(n,"(?![^>]*class=)[^>]*)(>)"),"gi"),a=(new RegExp("(<".concat(n,"[^>]*class=[\"'][^\"']*)[\"']"),"gi"),e.replace(t,'$1 class="'.concat(o,'"$2')));return console.log(a,"updatedHtml"),a},ue=(e,n)=>{Q(!0);let o=(e=>{let n=e;return n=n.replace(/}}/g,""),n=n.replace(/contenteditable="\\&quot;false\\&quot;"/g,'contenteditable="false"'),n})(e);o=(e=>{let n=e;return n=n.replace(/<h1>/g,'<h1 class="page-break">'),n=n.replace(/<h2>/g,'<h2 class="page-break">'),n=n.replace(/<p>/g,'<p class="no-break">'),n})(o),o=(e=>{let n=e;return n=n.replace(/<h1>/g,'<h1 class="underline text-center">'),n=n.replace(/<h2>/g,'<h2 class="underline text-left">'),n})(o);const t=document.createElement("div");t.innerHTML='<div class="pdf-container">'.concat(o,"</div>");const a=document.createElement("style");a.innerHTML="\n  /* Ensure proper page margins */\n  @page {\n    margin: 1in;\n  }\n\n  /* Set overall document styles */\n  body {\n    font-family: Arial, sans-serif;\n    font-size: 12px;\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n  }\n\n  /* Wrap PDF content inside a container */\n  .pdf-container {\n    width: 100%;\n    max-width: 800px; /* Prevent right-side cut-off */\n    box-sizing: border-box;\n    padding: 15px;\n    overflow: hidden; /* Avoid text cut */\n  }\n\n  /* Page Break Control */\n  .page-break {\n    page-break-before: always;\n  }\n\n  .no-break {\n    page-break-inside: avoid;\n  }\n\n  /* Headings Underline Fix */\n  h1, h2, h3, h4, h5, h6 {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding-bottom: 2px;\n    border-bottom: 2px solid #000;\n  }\n\n  /* Text alignment fixes */\n  .text-center {\n    text-align: center;\n  }\n\n  .text-left {\n    text-align: left;\n  }\n\n  .text-right {\n    text-align: right;\n  }\n\n  /* Ensure inline elements display properly */\n  span {\n    display: inline-block;\n  }\n",t.prepend(a);const l={margin:[1,.5,1,.5],filename:n,image:{type:"jpeg",quality:.98},html2canvas:{scale:3,useCORS:!0,allowTaint:!1},jsPDF:{unit:"mm",format:[660,1e3],orientation:"portrait"}};k()().set(l).from(t).save().then((()=>{Q(!1),w("PDF generated successfully!",{variant:"success"})})).catch((e=>{Q(!1),w("Error generating PDF",{variant:"error"}),console.error("Error generating PDF:",e)}))},ge=[{label:"Personal Documents",value:"/dashboard/personal-documents",path:I.nB.personaldocument},{label:"Documents",value:"/dashboard/legal-forms",path:I.nB.legalForm}];return(0,W.jsx)(_.A,{title:"Personal Documents",children:(0,W.jsxs)(l.A,{maxWidth:!S&&"xl",children:[(0,W.jsxs)(i.A,{sx:{bgcolor:"#2e3c56",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,W.jsx)(r.A,{sx:{width:"25%"},children:(0,W.jsx)("input",{type:"text",placeholder:"Search",ref:ae,value:(null===ae||void 0===ae||null===(e=ae.current)||void 0===e?void 0:e.value)||"",onChange:e=>{const n=e.target.value.toLowerCase();ae.current.value=n;const o=G.filter((e=>e.name.toLowerCase().includes(n)));z(o)},style:{width:"350px",backgroundColor:"#4e596f",color:"white",border:"none",padding:"10px",borderRadius:"4px",outline:"none",fontSize:"14px"}})}),(0,W.jsxs)(r.A,{direction:"row",spacing:2,children:[(0,W.jsx)(s.A,{sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,W.jsx)(P.A,{icon:"clarity:form-line"}),children:"Generate"}),(0,W.jsx)(s.A,{sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,W.jsx)(P.A,{icon:"material-symbols:scan"}),children:"Scan"}),(0,W.jsx)(s.A,{onClick:()=>{Z(!0)},sx:{color:"#fff",bgcolor:"#2e3c56",boxShadow:"none","&:hover":{bgcolor:"#2e3c56"}},variant:"contained",startIcon:(0,W.jsx)(P.A,{icon:"material-symbols:cloud-upload"}),children:"Upload"})]})]}),(0,W.jsxs)(i.A,{sx:{p:2},children:[(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,px:2},children:[(0,W.jsx)(r.A,{sx:{pt:2},children:(0,W.jsx)(F.A,{links:[{name:"Dashboard",href:I.nB.root},{name:"Documents"}]})}),(0,W.jsx)(r.A,{sx:{width:"25%"},children:(0,W.jsxs)("select",{className:"form-select",name:"file",onChange:e=>{const n=e.target.value;H(n),$([])},style:{marginTop:"0px",backgroundColor:"#4E596F",color:"white",border:"1px solid gray",padding:"10px",borderRadius:"4px"},children:[(0,W.jsx)("option",{value:"",children:"Select File"}),null===re||void 0===re?void 0:re.map(((e,n)=>(0,W.jsx)("option",{value:null===e||void 0===e?void 0:e.id,style:{backgroundColor:"#4E596F",color:"white"},children:null===e||void 0===e?void 0:e.file_name},n)))]})})]}),(0,W.jsxs)(d.Ay,{container:!0,spacing:1,children:[(0,W.jsx)(d.Ay,{item:!0,xs:12,sm:12,md:2,children:(0,W.jsx)(d.Ay,{container:!0,spacing:2,children:null===ge||void 0===ge?void 0:ge.map(((e,n)=>{const t=o===e.value;return(0,W.jsx)(d.Ay,{item:!0,xs:12,children:(0,W.jsxs)(i.A,{display:"flex",alignItems:"center",children:[t&&(0,W.jsx)(C.A,{sx:{color:"green",mr:1}}),(0,W.jsx)(y.N_,{to:null===e||void 0===e?void 0:e.path,style:{textDecoration:"none"},children:(0,W.jsx)(c.A,{variant:t?"subtitle1":"subtitle2",sx:{fontWeight:"bold",color:t?"#191919":"#7A7A7A",paddingLeft:t?"0px":"30px",...t&&{borderBottom:"1px solid gray"},mt:.5,cursor:"pointer"},children:e.label})})]})},n)}))})}),(0,W.jsx)(d.Ay,{item:!0,xs:12,sm:12,md:10,margin:"auto",children:(0,W.jsx)(d.Ay,{container:!0,spacing:2,margin:"auto",children:null===G||void 0===G?void 0:G.map(((e,o)=>{var t;return(0,W.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,sx:{my:1},children:[(0,W.jsx)(p.A,{sx:{bgcolor:"#E9E9E9",padding:"0px",display:"flex",width:"300px",alignItems:"center",borderRadius:"1px"},children:(0,W.jsx)(x.A,{sx:{display:"flex",alignItems:"center",width:"100%",paddingBottom:"0px",paddingTop:"5px",paddingRight:"5px",paddingLeft:"5px"},children:(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[(0,W.jsx)("img",{src:"/images/red_icon.png",alt:"Red icon",style:{width:60,height:70,marginRight:8}}),(0,W.jsx)(c.A,{variant:"subtitle2",sx:{color:"#3c3c3c",maxWidth:"150px",fontWeight:"400"},children:"".concat(e.title_name||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.slice(0,20)),".pdf")})]})})}),(0,W.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[null!==(null===e||void 0===e?void 0:e.updated_doc)&&(0,W.jsx)(s.A,{variant:"contained",sx:{bgcolor:"#00ab55",color:"#fff",bottom:"74px",width:"30%",position:"relative",left:"30%","&:hover":{bgcolor:"#0aaa57"}},onClick:()=>(async(e,n,o)=>{if(q){O(o),M(!0);try{var t;const o=await L.A.get("user/download/filled_text/user_pdf/".concat(n,"/").concat(q));console.log(o,"autofill");const a=await he(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.pdf_text,"div","html2pdf__page-break");ue(a,e),w("AutoFill and download successfully")}catch(a){w("Something went wrong",{variant:"error"}),console.log(a,"autofill")}finally{M(!1),O(null)}}else w("Please Select File First",{variant:"error"}),O(!1),M(!1)})(null===e||void 0===e?void 0:e.name,null===e||void 0===e?void 0:e.id,o),disabled:N===o,children:N===o&&U?(0,W.jsx)("div",{className:"loader"}):"Auto fill"}),(0,W.jsx)(s.A,{variant:"contained",sx:{bgcolor:"#00ab55",color:"#fff",bottom:null!==(null===e||void 0===e?void 0:e.updated_doc)?"64px":"50px",width:"30%",position:"relative",left:"30%","&:hover":{bgcolor:"#0aaa57"}},onClick:()=>n("/dashboard/edit-documents/".concat(null===e||void 0===e?void 0:e.id),{state:ee}),children:"Edit"})]})]},o)}))})})]})]}),(0,W.jsx)(h.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:J,onClose:()=>Z(!1),closeAfterTransition:!0,slots:{backdrop:u.A},slotProps:{backdrop:{timeout:500}},children:(0,W.jsx)(g.A,{in:J,children:(0,W.jsx)(i.A,{sx:T,children:(0,W.jsx)(R.Op,{methods:se,children:(0,W.jsxs)(d.Ay,{item:!0,xs:12,md:12,children:[(0,W.jsx)(c.A,{variant:"h5",sx:{mb:2},children:"Upload"}),(0,W.jsxs)(i.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,W.jsx)(R.Oq,{showPreview:!0,accept:".pdf,.doc,.docx,.xml,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",maxSize:3145728,onDrop:pe}),(0,W.jsx)(c.A,{variant:"h4",children:X})]}),(0,W.jsx)(r.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,W.jsx)(m.A,{type:"button",variant:"contained",loading:K,onClick:async()=>{const e=ce("file");console.log(e,oe,"file");try{Q(!0);const n=new FormData;n.append("title_name",oe),n.append("file",e),await L.A.post("/user/upload/user_pdf",n).then((e=>{if(console.log(e,"file upload"),Q(!1),e.data.upload.status){const n=e.data.upload;w(n.message),Z(!1),Y(""),xe()}}))}catch(n){Q(!1),console.log(n,"file Upload error")}},children:"Upload"})})]})})})})})]})})}},12490:()=>{},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{}}]);