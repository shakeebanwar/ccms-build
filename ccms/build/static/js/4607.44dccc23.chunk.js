(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4607],{4607:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>H});var a=t(9950),o=t(13564),i=t(79537),s=t(12257),l=t(75165),n=t(48089),c=t(68367),d=t(84142),u=t(1320),p=t(15769),h=t(34075),f=t(6368),g=t(91434),m=t(16497),w=t(37324),x=t(53984),v=t(73447),b=t(57191),O=t(60899),y=t(82053),S=t(29031),C=t(9449),A=t(55858),j=t(48711),_=t(90260),P=t(46765),V=t(86608),k=t(38861),R=t(8279),I=(t(22704),t(66075)),D=t(44185),E=t(63358),T=t(72870),L=t(12480),F=t(32741),N=t(95074),q=(t(96004),t(52401)),M=t(33507),B=t(44414);const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},U=[{id:"status",label:"Order Status",align:"left",width:700},{id:"user",label:"ordered by",align:"left",width:600},{id:"requests",label:"Request",align:"center",width:600},{id:"updated_at",label:"Date",align:"left",width:600},{id:"order_no",label:"Order No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:600},{id:"county",label:"County",align:"left",width:600},{id:"file_pdf",label:"Contract Pdf",align:"left",width:500},{id:"status_change",label:"Change Status",align:"left",width:300},{id:"",label:(0,B.jsx)(A.A,{color:"#e9eff4"}),align:"center",width:50}],G=[{api:"titleInsurance",label:"Title Insurance",permission:"title_insurance"},{api:"corpLienSearch",label:"Coop Lien Searches",permission:"coop_lien_search"},{api:"acricetax",label:"ACRIS E-Tax Forms",permission:"acris_e_tax_form"},{api:"eaglepolicy",label:"Eagle 9 Policy",permission:"eagle_nine_policy"},{api:"uccform",label:"UCC",permission:"ucc"},{api:"othersearch",label:"Other Search / Request",permission:"other_search_request"},{api:"offeringPlan",label:"Offering Plans",permission:"offering_plan"},{api:"exchanger",label:"1031 Exchanges",permission:"exchanges"},{api:"",label:"Sightline\xae",permission:"sightline"}];function H(){var e;const{user:r}=(0,M.A)(),{themeStretch:t}=(0,V.A)(),{enqueueSnackbar:A}=(0,S.dh)(),H=(0,o.Zp)(),{state:W}=(0,o.zy)(),Y=null===W||void 0===W?void 0:W.orderType;console.log(r,"user");const{dense:Z,page:J,order:K,orderBy:Q,rowsPerPage:X,setPage:$,selected:ee,onSort:re,onChangeDense:te,onChangePage:ae,onChangeRowsPerPage:oe}=(0,k.Ay)({defaultOrderBy:"createDate"}),ie=(null===r||void 0===r?void 0:r.user_permissions)||{},se=G.filter((e=>!0===(null===ie||void 0===ie?void 0:ie[e.permission])));console.log(se,"filteredTabs");const[le,ne]=(0,a.useState)([]),[ce,de]=(0,a.useState)(""),[ue,pe]=(0,a.useState)("new"),[he,fe]=(0,a.useState)(null),[ge,me]=(0,a.useState)(null),{currentTab:we,onChangeTab:xe}=(0,P.A)("all"),[ve,be]=(0,a.useState)((null===se||void 0===se?void 0:se.length)>0?null===(e=se[0])||void 0===e?void 0:e.label:null),[Oe,ye]=(0,a.useState)(!1),Se=(0,a.useRef)(null),[Ce,Ae]=(0,a.useState)(!1),[je,_e]=(0,a.useState)(""),[Pe,Ve]=(0,a.useState)(!1),[ke,Re]=(0,a.useState)([]),[Ie,De]=(0,a.useState)(),[Ee,Te]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{ye(!0);try{var e;const r=await F.A.get("employee/users/list");console.log(r,"all user"),Re(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.files),console.log(r,"autofill")}catch(r){console.log(r,"autofill")}finally{ye(!1)}})()}),[]);(0,a.useEffect)((()=>{var e;"Sightline\xae"!==ve&&"UCC"!==ve&&Le(null===se||void 0===se||null===(e=se.find((e=>e.label===ve)))||void 0===e?void 0:e.api,"")}),[ve]),(0,a.useEffect)((()=>{var e;Y&&(Le(null===(e=G.find((e=>e.label===Y)))||void 0===e?void 0:e.api,""),be(Y))}),[Y]);const Le=(e,r)=>{ye(!0);try{F.A.get("employee/".concat(e,"?user_id=").concat(r)).then((e=>{ye(!1);const r=e.data;console.log(r,"Dataemployee"),200===e.status?ne(r.orders):A(r.message)}))}catch(t){if(ye(!1),t.errors){Object.keys(t.errors).map((e=>A(t.errors[e][0],{variant:"error"})))}}},Fe=(e,r)=>{Ve(!0),Ae(e),_e(r)},Ne=e=>{ye(!0),console.log(e,"files");const r=new FormData;r.append("file",e[0]);try{F.A.post("employee/complete/".concat(je,"/").concat(Ce),r).then((e=>{if(console.log(e,"status api"),ye(!1),200===e.status||201===e.status){const r=e.data,t=le.map((e=>e.id===Ce?{...e,status:je}:e));Ve(!1),console.log(t,"UpdatedOrders"),ne(t),A(r.message)}})).catch((()=>{ye(!1)}))}catch(t){if(ye(!1),t.errors){Object.keys(t.errors).map((e=>A(t.errors[e][0],{variant:"error"})))}}},qe=(0,C.mN)(),{control:Me}=qe,Be=function(e){let{tableData:r,comparator:t,filterName:a,filterStatus:o,filterService:i,filterStartDate:s,filterEndDate:l}=e;const n=r.map(((e,r)=>[e,r]));n.sort(((e,r)=>{const a=t(e[0],r[0]);return 0!==a?a:e[1]-r[1]})),r=n.map((e=>e[0])),a&&(r=r.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==o&&(r=r.filter((e=>e.status===o)));"new"!==i&&(r=r.filter((e=>e.status===i)));s&&l&&(r=r.filter((e=>e.updated_at.getTime()>=s.getTime()&&e.updated_at.getTime()<=l.getTime())));return r}({tableData:le,comparator:(0,k.hz)(K,Q),filterName:ce,filterService:ue,filterStatus:we,filterStartDate:he,filterEndDate:ge}),ze=Z?56:76,Ue=!Be.length&&!!ce||!Be.length&&!!we||!Be.length&&!!ue||!Be.length&&!!ge||!Be.length&&!!he,[Ge,He]=(0,a.useState)(le),[We,Ye]=(0,a.useState)(le);(0,a.useEffect)((()=>{He(le),Ye(le)}),[le]),(0,a.useEffect)((()=>{if("default"===Q)Ye(Ge);else{const e=[...Ge].sort((0,k.hz)(K,Q));Ye(e)}}),[K,Q]);return(0,B.jsxs)(R.A,{title:"Order: Your Orders",children:[Oe&&(0,B.jsx)(N.A,{}),(0,B.jsx)("input",{type:"file",ref:Se,onChange:Ne,hidden:!0}),(0,B.jsxs)(i.A,{maxWidth:!t&&"xl",children:[(0,B.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"},children:(0,B.jsx)(l.A,{variant:"contained",onClick:()=>{"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView),"Coop Lien Searches"===ve&&H(_.i8.createorders.coopLienSearch),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView),"Other Search / Request"===ve&&H(_.i8.viewOrders.otherSearchesOrderView)},startIcon:(0,B.jsx)(I.A,{icon:"clarity:form-line"}),sx:{backgroundColor:"#313131","&:hover":{backgroundColor:"#313131"},borderRadious:"0px",marginBottom:"10px"},children:"New Order"})}),(0,B.jsxs)(n.A,{sx:{borderRadius:"0px"},children:[(0,B.jsxs)(s.A,{sx:{bgcolor:"#2e3c56",paddingLeft:"20px",paddingRight:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",minHeight:"50px"},children:[(0,B.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ve,onChange:(e,r)=>{console.log(r,"value"),be(r)},children:se.map((e=>(0,B.jsx)(d.A,{disableRipple:!0,value:e.label,label:(0,B.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,B.jsx)("div",{children:e.label})}),sx:{color:"#fff","&.Mui-selected":{color:"#fff",borderBottom:"4px solid #4CAF50"}}},e.label)))}),(0,B.jsx)(s.A,{gap:1,sx:{width:"25%"},children:(0,B.jsx)(j.Ay,{options:null===ke||void 0===ke?void 0:ke.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))),value:Ee,onChange:e=>{var r;console.log(e,"newFileId"),Le(null===se||void 0===se||null===(r=se.find((e=>e.label===ve)))||void 0===r?void 0:r.api,e.value),De(e.value),Te(e)},isSearchable:"true",placeholder:"Search user",className:"w-100 py-3 ",styles:{control:e=>({...e,backgroundColor:"#4e596f",color:"white",border:"none",borderRadius:"0px",minHeight:"48px"}),menu:e=>({...e,backgroundColor:"#4e596f",color:"white",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),option:(e,r)=>({...e,backgroundColor:r.isFocused?"#333":"#4e596f",color:"white",padding:"10px 15px","&:active":{backgroundColor:"#444"}}),singleValue:e=>({...e,color:"white"}),placeholder:e=>({...e,color:"#aaa"}),dropdownIndicator:e=>({...e,color:"#aaa","&:hover":{color:"#fff"}}),indicatorSeparator:e=>({...e,display:"none"})}})})]}),(0,B.jsx)(E.A,{sx:{paddingTop:"10px",paddingLeft:"20px"},links:[{name:"Orders",href:_.i8.root},{name:"All Orders"}]}),(0,B.jsx)(D.A,{children:(0,B.jsx)(u.A,{sx:{position:"relative"},children:(0,B.jsxs)(p.A,{size:Z?"small":"medium",children:[(0,B.jsx)(T.er,{order:K,orderBy:Q,headLabel:U,rowCount:le.length,numSelected:ee.length,onSort:re}),(0,B.jsxs)(h.A,{children:[We.slice(J*X,J*X+X).map((e=>(0,B.jsx)(L.oR,{row:e,onViewRow:()=>(e=>{var r;"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"view"}}),"Coop Lien Searches"===ve&&(null!==e&&void 0!==e&&e.updated_by_pdf?H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"view"}}):H(_.i8.viewOrders.CoopLienSearchOrderPDFView,{state:e})),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"view"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&(null===e||void 0===e||null===(r=e.files)||void 0===r||r.file_pdf,H(_.i8.viewOrders.otherSearchesOrderView,{state:e}))})(e),onStartOrderRow:()=>(e=>{"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_order"}}),"Coop Lien Searches"===ve&&H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_order"}}),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_order"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&H(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onStartContinRow:()=>(e=>{"Title Insurance"===ve&&H(_.i8.viewOrders.titleInsuranceOrderView,{state:{row:e,type:"start_contin"}}),"Coop Lien Searches"===ve&&H(_.i8.viewOrders.CoopLienSearchOrderView,{state:{row:e,type:"start_contin"}}),"Eagle 9 Policy"===ve&&H(_.i8.viewOrders.eagle9PolicyOrderView,{state:{row:e,type:"start_contin"}}),"Offering Plans"===ve&&H(_.i8.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ve&&H(_.i8.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ve&&H(_.i8.viewOrders.otherSearchesOrderView,{state:e})})(e),onDocumentUpload:()=>Fe(e.id,"file_completed"),onContainDocumentUpload:()=>Fe(e.id,"contin_completed"),onStatusChange:r=>((e,r)=>{ye(!0);try{const t=new FormData;t.append("status",r),t.append("id",e),F.A.post("/employee/changeorderStatus",t).then((t=>{if(console.log(t,"status api"),ye(!1),200===t.status||201===t.status){const a=t.data,o=le.map((t=>t.id===e?{...t,status:r}:t));ne(o),A(a.message)}})).catch((e=>{ye(!1),console.log(e,"catch errror")}))}catch(t){ye(!1),t.errors&&Object.keys(t.errors).map((e=>A(t.errors[e][0],{variant:"error"})))}})(e.id,r)},e.id))),(0,B.jsx)(T.dO,{height:ze,emptyRows:(0,k.xl)(J,X,le.length)}),(0,B.jsx)(T.Sm,{isNotFound:Ue})]})]})})}),(0,B.jsxs)(f.A,{sx:{position:"relative"},children:[(0,B.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Be.length,rowsPerPage:X,page:J,onPageChange:ae,onRowsPerPageChange:oe}),(0,B.jsx)(m.A,{control:(0,B.jsx)(w.A,{checked:Z,onChange:te}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,B.jsx)(x.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Pe,onClose:()=>Ve(!1),closeAfterTransition:!0,slots:{backdrop:v.A},slotProps:{backdrop:{timeout:500}},children:(0,B.jsx)(b.A,{in:Pe,children:(0,B.jsx)(f.A,{sx:z,children:(0,B.jsx)(q.Op,{methods:qe,children:(0,B.jsxs)(O.Ay,{item:!0,xs:12,md:12,children:[(0,B.jsx)(y.A,{variant:"h5",sx:{mb:2},children:"Document Upload"}),(0,B.jsxs)(f.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,B.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed black"},children:(0,B.jsx)(y.A,{variant:"h6",onClick:()=>{var e;return null===Se||void 0===Se||null===(e=Se.current)||void 0===e?void 0:e.click()},children:"Browse from Computer"})}),(0,B.jsx)(q.Oq,{name:"file",showPreview:!0,accept:".docx,.docs,.doc/*",maxSize:3145728,onDrop:Ne})]}),(0,B.jsx)(s.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3}})]})})})})})]})]})}},55858:(e,r,t)=>{"use strict";var a=t(24994);r.A=void 0;var o=a(t(79526)),i=t(44414);r.A=(0,o.default)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},79526:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=t(92079)},92079:(e,r,t)=>{"use strict";t.r(r),t.d(r,{capitalize:()=>o.A,createChainedFunction:()=>i.A,createSvgIcon:()=>s.A,debounce:()=>l.A,deprecatedPropType:()=>n,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>O,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>w.A,useEventCallback:()=>x.A,useForkRef:()=>v.A,useIsFocusVisible:()=>b.A});var a=t(66236),o=t(61676),i=t(25920),s=t(65471),l=t(21209);const n=function(e,r){return()=>null};var c=t(60096),d=t(27402),u=t(70827);t(58168);const p=function(e,r){return()=>null};const h=t(25679).A;var f=t(79044),g=t(31014);const m=function(e,r,t,a,o){return null};var w=t(48733),x=t(1976),v=t(31506),b=t(41573);const O={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.A.configure(e)}}},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);