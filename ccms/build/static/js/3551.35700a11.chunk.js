"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3551],{18597:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(70693),i=n(82053),r=n(12257),l=n(75165),a=(n(9950),n(66075)),s=n(44414);const d=e=>{let{handleAddEvent:t,handleAddReminder:n,handleCloseButtonTooltip:d}=e;return(0,s.jsxs)(o.A,{elevation:2,style:{padding:"10px",width:"150px",height:"140px",position:"absolute",left:"-130px",top:"-10px",backgroundColor:"lightgray"},children:[(0,s.jsx)(i.A,{variant:"p",sx:{float:"right",cursor:"pointer",position:"absolute",top:"10px"},onClick:d,children:"x"}),(0,s.jsxs)(r.A,{sx:{position:"absolute",top:"20px"},children:[(0,s.jsx)(l.A,{variant:"contained",startIcon:(0,s.jsx)(a.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:t,sx:{fontSize:"10px",position:"absolute",top:"60px",width:"120px"},children:"Order Contin"}),(0,s.jsx)(l.A,{variant:"contained",startIcon:(0,s.jsx)(a.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:n,sx:{fontSize:"10px",position:"absolute",top:"20px",width:"120px"},children:"Add Reminder"})]})]})}},87955:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(70693),i=n(82053),r=(n(9950),n(44414));const l=e=>{var t;let{event:n,data:l,handleCloseTooltip:a}=e;const s=null===l||void 0===l?void 0:l.find((e=>(null===e||void 0===e?void 0:e.id)===Number(null===n||void 0===n?void 0:n.title)));return console.log(n,"event"),console.log(l,"dataFilter"),(0,r.jsxs)(o.A,{elevation:2,style:{padding:"10px",width:"300px",height:"auto",position:"relative",zIndex:1e3,borderRadius:"0px",transform:"translateX(-3%)"},children:[(0,r.jsx)(i.A,{variant:"p",sx:{float:"right",cursor:"pointer"},onClick:a,children:"x"}),(0,r.jsx)(i.A,{variant:"h5",children:s.title}),(0,r.jsxs)(i.A,{variant:"p",sx:{my:5,fontSize:12},children:["date: ",null===(t=s.start)||void 0===t?void 0:t.split("T")[0]]}),(0,r.jsx)(i.A,{sx:{my:2,fontSize:12},children:s.description})]})}},3551:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var o=n(90706),i=n(79947),r=n(28339),l=n(6978),a=n(60820),s=n(36404),d=n(9950),c=n(53065),p=n(64697),u=n(79537),x=n(6368),h=n(75165),v=n(40033),A=n(7951),m=n(14857),g=n(18597),f=n(32741),j=n(87955),y=n(34117),C=n(42686),b=n(90260),S=n(86608),w=n(98091),D=n(66075),k=n(20131),T=n(63358),E=n(62740),I=n(58723),R=n(44414);const M=e=>{const{events:t,selectedEventId:n}=e.calendar;return n?t.find((e=>Number(e.id)===Number(n))):null},O=(0,A.Ay)((e=>{let{className:t,...n}=e;return(0,R.jsx)(c.A,{...n,classes:{popper:t}})}))((e=>{let{theme:t}=e;return{["& .".concat(p.A.tooltip)]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:"300px",fontSize:t.typography.pxToRem(12),border:"none"}}}));function z(){const{themeStretch:e}=(0,S.A)(),t=((0,m.A)(),(0,y.wA)()),n=(0,w.A)("up","sm"),c=(0,d.useRef)(null),[p,A]=(0,d.useState)(null),[z,N]=(0,d.useState)(),[F,W]=(0,d.useState)(null),[q,H]=(0,d.useState)(null),[V,Y]=(0,d.useState)(""),[P,B]=(0,d.useState)([]),[X,_]=(0,d.useState)([]),[G,Q]=(0,d.useState)(new Date),[J,L]=(0,d.useState)(n?"dayGridMonth":"listWeek"),$=(0,y.d4)(M),{events:K,isOpenModal:U,selectedRange:Z,isOpenReminderModal:ee}=(0,y.d4)((e=>e.calendar));console.log($,"events");(0,d.useEffect)((()=>{(async()=>{try{var e;const t=await f.A.get("todos"),n=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.todos)||[];B(n),console.log(t,"reminder")}catch(t){console.log(t,"error")}})()}),[K]),(0,d.useEffect)((()=>{t((0,C.kQ)())}),[t]),(0,d.useEffect)((()=>{const e=K.map((e=>({id:e.id,title:e.title,start:e.start,end:e.end,textColor:e.textColor||"#000",description:e.description}))),t=P.map((e=>({type:"reminder",id:e.id,title:e.note||e.title,start:new Date(e.date).toISOString().split("T")[0]+"T"+e.start,end:new Date(e.date).toISOString().split("T")[0]+"T"+e.end,textColor:e.textColor||"#000",description:e.note})));_([...e,...t])}),[K,P]),console.log(X,"mergedTasks"),(0,d.useEffect)((()=>{const e=c.current;if(e){const t=e.getApi(),o=n?"dayGridMonth":"listWeek";t.changeView(o),L(o)}}),[n]);const te=()=>{t((0,C.qf)())},ne=()=>{t((0,C.Oo)())},oe=()=>{t((0,C.kd)())},ie=()=>{t((0,C.yJ)())},re=()=>{W(null)},le=()=>{H(null)};return(0,R.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,R.jsx)(x.A,{sx:{display:"flex",justifyContent:"flex-end",bgcolor:"#2E3C56",p:1},children:(0,R.jsxs)(x.A,{children:[(0,R.jsx)(h.A,{variant:"contained",startIcon:(0,R.jsx)(D.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:te,sx:{fontSize:"12px",mr:2,backgroundColor:"#2E3C56","&:hover":{backgroundColor:"#2E3C56"}},children:"Order Contin"}),(0,R.jsx)(h.A,{variant:"contained",startIcon:(0,R.jsx)(D.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:oe,sx:{fontSize:"12px",backgroundColor:"#2E3C56","&:hover":{backgroundColor:"#2E3C56",color:"#fff"}},children:"Add Reminder"})]})}),(0,R.jsx)(T.A,{links:[{name:"Dashboard",href:b.nB.root},{name:"Calendar"}]}),(0,R.jsxs)(E.mg,{children:[(0,R.jsx)(E.a7,{date:G,view:J,onNextDate:()=>{const e=c.current;if(e){const t=e.getApi();t.next(),Q(t.getDate())}},onPrevDate:()=>{const e=c.current;if(e){const t=e.getApi();t.prev(),Q(t.getDate())}},onToday:()=>{const e=c.current;if(e){const t=e.getApi();t.today(),Q(t.getDate())}},onChangeView:e=>{const t=c.current;if(t){t.getApi().changeView(e),L(e)}}}),(0,R.jsx)(o.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:X,ref:c,rerenderDelay:10,initialDate:G,initialView:J,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventDrop:async e=>{let{event:n}=e;try{t((0,C.qM)(n.id,{allDay:n.allDay,start:n.start,end:n.end}))}catch(o){console.error(o)}},eventClick:e=>{var n,o;(console.log(e.el.fcSeg.eventRange.def.extendedProps.type,"info"),Y(e.event.startStr),W({title:null===(n=e.event._def)||void 0===n?void 0:n.publicId,start:e.event.startStr,end:e.event.endStr,top:e.jsEvent.clientY,left:e.jsEvent.clientX}),"reminder"!==e.el.fcSeg.eventRange.def.extendedProps.type)&&t((0,C.PY)(null===(o=e.event)||void 0===o?void 0:o.id))},dateClick:e=>{console.log(e,"arg"),N(e.dateStr),A(e.date.toISOString().split("T")[0]),H({top:e.jsEvent.clientY,left:e.jsEvent.clientX})},dayCellContent:e=>{const t=e.date.toISOString().split("T")[0],n=e.date.toLocaleDateString("en-CA"),o=null===V||void 0===V?void 0:V.split("T")[0];return console.log(p===t,"dateStr"),(0,R.jsxs)(R.Fragment,{children:[F&&o===n&&(0,R.jsx)(O,{arrow:!0,open:!!F,onClose:re,title:(0,R.jsx)(j.A,{event:F,data:X,handleCloseTooltip:re}),placement:"top",children:(0,R.jsx)("span",{})}),(0,R.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,R.jsx)("div",{children:e.dayNumberText}),p===t&&(0,R.jsx)(O,{arrow:!0,open:!!q,onClose:le,title:(0,R.jsx)(g.A,{handleAddEvent:te,handleAddReminder:oe,handleCloseButtonTooltip:le}),placement:"top",children:(0,R.jsx)("span",{})})]})]})},eventResize:async e=>{let{event:n}=e;try{t((0,C.qM)(n.id,{allDay:n.allDay,start:n.start,end:n.end}))}catch(o){console.error(o)}},height:n?720:"auto",plugins:[i.A,r.Ay,a.Ay,l.Ay,s.Ay]})]}),(0,R.jsxs)(k.ys,{open:U,onClose:ne,children:[(0,R.jsx)(v.A,{children:$?"Edit Order Contin":"Add Order Contin"}),(0,R.jsx)(E.lM,{event:$||{},range:Z,onCancel:ne,getDate:z})]}),(0,R.jsxs)(k.ys,{open:ee,onClose:ie,children:[(0,R.jsx)(v.A,{children:$?"Edit Reminder":"Add Reminder"}),(0,R.jsx)(I.A,{event:$||{},range:Z,onCancel:ie,getDate:z})]})]})}},58723:(e,t,n)=>{n.d(t,{A:()=>y});n(9950);var o=n(60666),i=n(23334),r=n.n(i),l=n(43974),a=n(29031),s=n(9449),d=n(68654),c=n(12257),p=n(8145),u=n(79739),x=n(75165),h=n(21410),v=n(28095),A=n(34117),m=n(42686),g=(n(66075),n(91745),n(52401)),f=n(32741),j=n(44414);function y(e){let{event:t,range:n,onCancel:i,getDate:y}=e;const{enqueueSnackbar:C}=(0,a.dh)(),b=(0,A.wA)(),S=o.Ik().shape({title:o.Yj().max(255).required("Title is required"),description:o.Yj().max(5e3)}),w=(0,s.mN)({resolver:(0,d.t)(S),defaultValues:((e,t)=>{const n={title:"",order_id:e.order_id||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:t?new Date(t.end):new Date,date:y?new Date(y):new Date};return e||t?r()({},n,e):n})(t,n)}),{reset:D,control:k,setValue:T,handleSubmit:E,formState:{isSubmitting:I}}=w;return(0,j.jsxs)(g.Op,{methods:w,onSubmit:E((async e=>{try{const t={title:e.title,note:e.description,start:(0,l.A)(e.start,"HH:mm:ss"),end:(0,l.A)(e.end,"HH:mm:ss"),date:(0,l.A)(e.date,"yyyy-MM-dd HH:mm:ss")},n=await f.A.post("todo",t);console.log(n,"reminder"),b((0,m.kQ)()),i(),D()}catch(t){console.error(t)}})),children:[(0,j.jsxs)(c.A,{spacing:3,sx:{p:3},children:[(0,j.jsx)(g.o3,{name:"title",label:"title"}),(0,j.jsx)(g.o3,{name:"description",label:"Description",multiline:!0,rows:4}),(0,j.jsx)(s.xI,{name:"date",control:k,render:e=>{let{field:t}=e;return(0,j.jsx)(h.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy",renderInput:e=>(0,j.jsx)(p.A,{...e,fullWidth:!0,value:y})})}}),(0,j.jsx)(s.xI,{name:"start",control:k,render:e=>{let{field:t}=e;return(0,j.jsx)(h.A,{...t,label:"Start Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,j.jsx)(p.A,{...e,fullWidth:!0})})}}),(0,j.jsx)(s.xI,{name:"end",control:k,render:e=>{let{field:t}=e;return(0,j.jsx)(h.A,{...t,label:"End Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,j.jsx)(p.A,{...e,fullWidth:!0,value:y})})}})]}),(0,j.jsxs)(u.A,{children:[(0,j.jsx)(x.A,{variant:"outlined",color:"inherit",onClick:i,children:"Cancel"}),(0,j.jsx)(v.A,{sx:{bgcolor:"#00ab55","&:hover":{bgcolor:"#0aaa57"}},type:"submit",variant:"contained",loading:I,children:"Add"})]})]})}},40033:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(58168),i=n(98587),r=n(9950),l=n(2803),a=n(5747),s=n(82053),d=n(7951),c=n(79859),p=n(23025),u=n(5536),x=n(44414);const h=["className","id"],v=(0,d.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),A=r.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:d}=n,A=(0,i.A)(n,h),m=n,g=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},p.t,t)})(m),{titleId:f=d}=r.useContext(u.A);return(0,x.jsx)(v,(0,o.A)({component:"h2",className:(0,l.A)(g.root,s),ownerState:m,ref:t,variant:"h6",id:f},A))}))}}]);