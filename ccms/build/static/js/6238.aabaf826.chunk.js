"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[6238],{46765:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(9950);function l(e){const[t,r]=(0,a.useState)(e||"");return{currentTab:t,onChangeTab:(e,t)=>{r(t)},setCurrentTab:r}}},16238:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var a=r(9950),l=r(60666),o=r(79537),n=r(48089),s=r(68367),i=r(84142),c=r(12257),d=r(6368),u=r(82053),p=r(74745),h=r(1320),m=r(15769),g=r(34075),b=r(91434),f=r(16497),x=r(37324),v=r(53984),w=r(73447),S=r(57191),j=r(60899),A=r(29031),y=r(73878),C=r(13564),O=r(9449),D=r(68654),P=r(28095),k=r(90260),T=r(46765),R=r(86608),q=r(38861),B=r(22704),I=(r(66075),r(44185)),E=r(63358),_=r(72870),F=r(12480),L=r(32741),N=r(95074),V=r(42686),U=r(73561),G=r(44414);const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},z=e=>{let{setShareOpen:t,open:r,FileId:o}=e;const{enqueueSnackbar:n}=(0,A.dh)(),[s,i]=(0,a.useState)(),[p,h]=(0,a.useState)([]),[m,g]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{var e;const r=await L.A.get("user/added/contacts");var t;console.log(r,"all your user api"),null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e.status?h(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.currentUser):console.log("Status False in API")}catch(r){console.log(r,"all your user api error")}})()}),[]);const b=l.Ik().shape({}),f=(0,a.useMemo)((()=>({users:""})),[]),x=(0,O.mN)({resolver:(0,D.t)(b),defaultValues:f}),{handleSubmit:y,formState:{errors:C}}=x;console.log(C,"errors");return(0,G.jsx)(v.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:r,onClose:()=>t(!1),closeAfterTransition:!0,slots:{backdrop:w.A},slotProps:{backdrop:{timeout:500}},children:(0,G.jsx)(S.A,{in:r,children:(0,G.jsx)(d.A,{sx:M,children:(0,G.jsx)(U.Op,{methods:x,onSubmit:y((async()=>{g(!0);try{await L.A.post("user/share/".concat(s,"/").concat(o)).then((e=>{if(g(!1),200===e.status||201===e.status){const r=e.data;console.log(r,"order file"),n(r.message),t(!1)}}))}catch(e){if(console.error(e),e.errors){Object.keys(e.errors).map((t=>n(e.errors[t][0],{variant:"error"})))}}finally{g(!1)}})),children:(0,G.jsxs)(j.Ay,{item:!0,xs:12,md:12,children:[(0,G.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Select User Into Your List"}),(0,G.jsx)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,G.jsx)(c.A,{gap:1,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3,width:"100%"},children:(0,G.jsxs)("select",{className:"form-select w-100",name:"users",onChange:e=>{const t=e.target.value;i(t)},children:[(0,G.jsx)("option",{value:"",children:"Select User"}),null===p||void 0===p?void 0:p.map(((e,t)=>{var r,a;return(0,G.jsx)("option",{value:null===e||void 0===e||null===(r=e.Contact)||void 0===r?void 0:r.id,children:null===e||void 0===e||null===(a=e.Contact)||void 0===a?void 0:a.first_name},t)}))]})})}),(0,G.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,G.jsx)(P.A,{type:"submit",variant:"contained",loading:m,children:"Share"})})]})})})})})},W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadious:"10px",boxShadow:24,p:4},Y=["new","old"],H=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],Z=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function J(){const[e,t]=(0,a.useState)(!1),[r,M]=(0,a.useState)(),[J,K]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(),[$,ee]=(0,a.useState)(!1),{themeStretch:te}=(0,R.A)(),re=(0,y.wA)(),ae=(0,C.Zp)(),{enqueueSnackbar:le}=(0,A.dh)(),{dense:oe,page:ne,order:se,orderBy:ie,rowsPerPage:ce,setPage:de,selected:ue,setSelected:pe,onSort:he,onChangeDense:me,onChangePage:ge,onChangeRowsPerPage:be}=(0,q.Ay)({defaultOrderBy:"createDate"}),[fe,xe]=(0,a.useState)([]),[ve,we]=(0,a.useState)(""),[Se,je]=(0,a.useState)("new"),[Ae,ye]=(0,a.useState)(null),[Ce,Oe]=(0,a.useState)(null),{currentTab:De,onChangeTab:Pe}=(0,T.A)("all"),[ke,Te]=(0,a.useState)("Title Insurance"),[Re,qe]=(0,a.useState)(!1),[Be,Ie]=(0,a.useState)(""),[Ee,_e]=(0,a.useState)(null),{id:Fe}=(0,C.g)();(0,a.useEffect)((()=>{"Sightline\xae"!==ke&&Le(Z.find((e=>e.label===ke)).api)}),[ke]);const Le=e=>{qe(!0);try{L.A.get("user/all/".concat(e)).then((e=>{qe(!1);const t=e.data;console.log(t,"Data"),200===e.status?(Ie(t.filePath),xe(t.orders)):le(t.message)}))}catch(t){if(qe(!1),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}},Ne=function(e){let{tableData:t,comparator:r,filterName:a,filterStatus:l,filterService:o,filterStartDate:n,filterEndDate:s}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));n&&s&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=s.getTime())));return t}({tableData:fe,comparator:(0,q.hz)(se,ie),filterName:ve,filterService:Se,filterStatus:De,filterStartDate:Ae,filterEndDate:Ce}),Ve=oe?56:76,Ue=!Ne.length&&!!ve||!Ne.length&&!!De||!Ne.length&&!!Se||!Ne.length&&!!Ce||!Ne.length&&!!Ae,Ge=e=>fe.filter((t=>t.status===e)).length,Me=[{value:"all",label:"All",color:"info",count:fe.length},{value:"active",label:"Active",color:"info",count:Ge("active")},{value:"new",label:"New",color:"info",count:Ge("new")},{value:"placed",label:"Placed",color:"info",count:Ge("placed")},{value:"completed",label:"Completed",color:"success",count:Ge("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ge("on hold")},{value:"draft",label:"Draft",color:"default",count:Ge("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ge("cancelled")}],ze=l.Ik().shape({request:l.Yj().required("Request Description is required")}),We=(0,a.useMemo)((()=>({request:""})),[]),Ye=(0,O.mN)({resolver:(0,D.t)(ze),defaultValues:We}),{reset:He,watch:Ze,setValue:Je,handleSubmit:Ke,formState:{isSubmitting:Qe,errors:Xe}}=Ye;Ze();return(0,G.jsxs)(o.A,{maxWidth:!te&&"lg",children:[Re&&(0,G.jsx)(N.A,{}),(0,G.jsx)(E.A,{heading:"All Orders",links:[{name:"Dashboard",href:k.nB.root},{name:"All Orders"}]}),(0,G.jsx)(n.A,{sx:{mb:5},children:(0,G.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ke,onChange:(e,t)=>Te(t),sx:{px:2,bgcolor:"background.neutral"},children:Z.map((e=>(0,G.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,G.jsx)(c.A,{spacing:1,direction:"row",alignItems:"center",children:(0,G.jsx)("div",{children:e.label})})},e.label)))})}),(0,G.jsx)(d.A,{sx:{p:2},children:(0,G.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:ke.label})}),(0,G.jsxs)(n.A,{children:[(0,G.jsx)(s.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:De,onChange:Pe,sx:{px:2,bgcolor:"background.neutral"},children:Me.map((e=>(0,G.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,G.jsxs)(c.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,G.jsx)("div",{children:e.label})," ",(0,G.jsxs)(B.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,G.jsx)(p.A,{}),(0,G.jsx)(F.F5,{filterName:ve,filterService:Se,filterStartDate:Ae,filterEndDate:Ce,onFilterName:e=>{we(e),de(0)},onFilterService:e=>{je(e.target.value)},onFilterStartDate:e=>{ye(e)},onFilterEndDate:e=>{Oe(e)},optionsService:Y}),(0,G.jsx)(I.A,{children:(0,G.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,G.jsxs)(m.A,{size:oe?"small":"medium",children:[(0,G.jsx)(_.er,{order:se,orderBy:ie,headLabel:H,rowCount:fe.length,numSelected:ue.length,onSort:he}),(0,G.jsxs)(g.A,{children:[Ne.slice(ne*ce,ne*ce+ce).map((e=>(0,G.jsx)(F.oR,{row:e,onEditRow:()=>(e=>{t(!0),M(e)})(e.id),onShareRow:()=>(e=>{ee(!0),X(e)})(null===e||void 0===e?void 0:e.id),onViewRow:()=>(e=>{"Title Insurance"===ke&&ae(k.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ke&&ae(k.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ke&&ae(k.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===ke&&ae(k.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ke&&ae(k.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ke&&ae(k.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=Be+e.name;L.A.get(t,{responseType:"blob"}).then((t=>{const r=URL.createObjectURL(t.data),a=document.createElement("a");a.download=e.name,a.href=r,a.click()})).catch((e=>le(e,{variant:"error"})))}else le("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return t=e.file_no,void re((0,V.qO)(t));var t},onDeleteRow:()=>(e=>{qe(!0);const t=Z.find((e=>e.label===ke)).api;L.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),qe(!1),200===t.status||201===t.status){const t=fe.filter((t=>t.id!==e));pe([]),xe(t),le("Delete Successfully")}})).catch((e=>{qe(!1),e.errors&&Object.keys(e.errors).map((t=>le(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,G.jsx)(_.dO,{height:Ve,emptyRows:(0,q.xl)(ne,ce,fe.length)}),(0,G.jsx)(_.Sm,{isNotFound:Ue})]})]})})}),(0,G.jsxs)(d.A,{sx:{position:"relative"},children:[(0,G.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ne.length,rowsPerPage:ce,page:ne,onPageChange:ge,onRowsPerPageChange:be}),(0,G.jsx)(f.A,{control:(0,G.jsx)(x.A,{checked:oe,onChange:me}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,G.jsx)(v.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:()=>t(!1),closeAfterTransition:!0,slots:{backdrop:w.A},slotProps:{backdrop:{timeout:500}},children:(0,G.jsx)(S.A,{in:e,children:(0,G.jsx)(d.A,{sx:W,children:(0,G.jsx)(U.Op,{methods:Ye,onSubmit:Ke((async e=>{console.log(e.request,"request"),K(!0);try{const t=new FormData;t.append("descriptions",e.request),await L.A.post("user/requests/create/".concat(r),t).then((e=>{if(K(!1),200===e.status||201===e.status){const t=e.data;console.log(t,"sent request"),le(t.message),ae(k.nB.root)}}))}catch(t){if(console.error(t),t.errors){Object.keys(t.errors).map((e=>le(t.errors[e][0],{variant:"error"})))}}finally{K(!1)}})),children:(0,G.jsxs)(j.Ay,{item:!0,xs:12,md:12,children:[(0,G.jsx)(u.A,{variant:"h5",sx:{mb:2},children:"Sent Request for edit your order"}),(0,G.jsx)(d.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:(0,G.jsx)(U.o3,{name:"request",label:"Please enter Desciption",multiline:!0,rows:3})}),(0,G.jsx)(c.A,{justifyContent:"flex-end",flexDirection:"row",gap:1,sx:{mt:3},children:(0,G.jsx)(P.A,{type:"submit",variant:"contained",loading:J,children:"Send Request"})})]})})})})}),(0,G.jsx)(z,{setShareOpen:ee,open:$,FileId:Q})]})}}}]);