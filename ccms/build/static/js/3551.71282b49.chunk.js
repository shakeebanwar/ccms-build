"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3551],{18597:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(70693),i=n(82053),r=n(12257),l=n(75165),a=(n(9950),n(66075)),s=n(44414);const d=e=>{let{handleAddEvent:t,handleAddReminder:n,handleCloseButtonTooltip:d}=e;return(0,s.jsxs)(o.A,{elevation:2,style:{padding:"10px",width:"150px",height:"140px",position:"absolute",left:"-130px",top:"-10px",backgroundColor:"lightgray"},children:[(0,s.jsx)(i.A,{variant:"p",sx:{float:"right",cursor:"pointer",position:"absolute",top:"10px"},onClick:d,children:"x"}),(0,s.jsxs)(r.A,{sx:{position:"absolute",top:"20px"},children:[(0,s.jsx)(l.A,{variant:"contained",startIcon:(0,s.jsx)(a.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:t,sx:{fontSize:"10px",position:"absolute",top:"60px",width:"120px"},children:"Order Contin"}),(0,s.jsx)(l.A,{variant:"contained",startIcon:(0,s.jsx)(a.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:n,sx:{fontSize:"10px",position:"absolute",top:"20px",width:"120px"},children:"Add Reminder"})]})]})}},87955:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(70693),i=n(82053),r=(n(9950),n(44414));const l=e=>{var t;let{event:n,data:l,handleCloseTooltip:a}=e;const s=null===l||void 0===l?void 0:l.find((e=>(null===e||void 0===e?void 0:e.id)===Number(null===n||void 0===n?void 0:n.title)));return console.log(n,"event"),console.log(l,"dataFilter"),(0,r.jsxs)(o.A,{elevation:2,style:{padding:"10px",width:"300px",height:"auto",position:"relative",zIndex:1e3,borderRadius:"0px",transform:"translateX(-3%)"},children:[(0,r.jsx)(i.A,{variant:"p",sx:{float:"right",cursor:"pointer"},onClick:a,children:"x"}),(0,r.jsx)(i.A,{variant:"h5",children:s.title}),(0,r.jsxs)(i.A,{variant:"p",sx:{my:5,fontSize:12},children:["date: ",null===(t=s.start)||void 0===t?void 0:t.split("T")[0]]}),(0,r.jsx)(i.A,{sx:{my:2,fontSize:12},children:s.description})]})}},3551:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var o=n(90706),i=n(79947),r=n(28339),l=n(6978),a=n(60820),s=n(36404),d=n(9950),c=n(53065),p=n(64697),u=n(79537),x=n(48089),h=n(6368),v=n(82053),A=n(75165),m=n(40033),g=n(7951),f=n(14857),j=n(18597),y=n(32741),C=n(87955),S=n(30744),b=n(42686),w=(n(90260),n(86608)),D=n(98091),k=n(66075),T=n(20131),R=(n(63358),n(62740)),E=n(58723),I=n(44414);const M=e=>{const{events:t,selectedEventId:n}=e.calendar;return n?t.find((e=>Number(e.id)===Number(n))):null},O=(0,g.Ay)((e=>{let{className:t,...n}=e;return(0,I.jsx)(c.A,{...n,classes:{popper:t}})}))((e=>{let{theme:t}=e;return{["& .".concat(p.A.tooltip)]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:"300px",fontSize:t.typography.pxToRem(12),border:"none"}}}));function z(){const{themeStretch:e}=(0,w.A)(),t=(0,f.A)(),n=(0,S.wA)(),c=(0,D.A)("up","sm"),p=(0,d.useRef)(null),[g,z]=(0,d.useState)(null),[N,F]=(0,d.useState)(),[W,q]=(0,d.useState)(null),[B,H]=(0,d.useState)(null),[V,Y]=(0,d.useState)(""),[P,X]=(0,d.useState)([]),[_,G]=(0,d.useState)([]),[J,L]=(0,d.useState)(new Date),[Q,$]=(0,d.useState)(c?"dayGridMonth":"listWeek"),K=(0,S.d4)(M),{events:U,isOpenModal:Z,selectedRange:ee,isOpenReminderModal:te}=(0,S.d4)((e=>e.calendar));console.log(K,"events");(0,d.useEffect)((()=>{(async()=>{try{var e;const t=await y.A.get("todos"),n=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.todos)||[];X(n),console.log(t,"reminder")}catch(t){console.log(t,"error")}})()}),[U]),(0,d.useEffect)((()=>{n((0,b.kQ)())}),[n]),(0,d.useEffect)((()=>{const e=U.map((e=>({id:e.id,title:e.title,start:e.start,end:e.end,textColor:e.textColor||"#000",description:e.description}))),t=P.map((e=>({type:"reminder",id:e.id,title:e.note||e.title,start:new Date(e.date).toISOString().split("T")[0]+"T"+e.start,end:new Date(e.date).toISOString().split("T")[0]+"T"+e.end,textColor:e.textColor||"#000",description:e.note})));G([...e,...t])}),[U,P]),console.log(_,"mergedTasks"),(0,d.useEffect)((()=>{const e=p.current;if(e){const t=e.getApi(),n=c?"dayGridMonth":"listWeek";t.changeView(n),$(n)}}),[c]);const ne=()=>{n((0,b.qf)())},oe=()=>{n((0,b.Oo)())},ie=()=>{n((0,b.kd)())},re=()=>{n((0,b.yJ)())},le=()=>{q(null)},ae=()=>{H(null)};return(0,I.jsxs)(u.A,{maxWidth:!e&&"xl",children:[(0,I.jsxs)(x.A,{children:[(0,I.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between",bgcolor:t.palette.primary.main,m:3,p:3,borderRadius:"12px"},children:[(0,I.jsx)(h.A,{children:(0,I.jsx)(v.A,{variant:"h4",color:"white",children:"Calendar"})}),(0,I.jsxs)(h.A,{children:[(0,I.jsx)(A.A,{variant:"contained",startIcon:(0,I.jsx)(k.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:ne,sx:{fontSize:"12px",mr:2,backgroundColor:"#5BE584","&:hover":{backgroundColor:"#fff",color:"#5BE584"}},children:"Order Contin"}),(0,I.jsx)(A.A,{variant:"contained",startIcon:(0,I.jsx)(k.A,{icon:"eva:plus-fill",width:10,height:10}),onClick:ie,sx:{fontSize:"12px",backgroundColor:"#5BE584","&:hover":{backgroundColor:"#fff",color:"#5BE584"}},children:"Add Reminder"})]})]}),(0,I.jsxs)(R.mg,{children:[(0,I.jsx)(R.a7,{date:J,view:Q,onNextDate:()=>{const e=p.current;if(e){const t=e.getApi();t.next(),L(t.getDate())}},onPrevDate:()=>{const e=p.current;if(e){const t=e.getApi();t.prev(),L(t.getDate())}},onToday:()=>{const e=p.current;if(e){const t=e.getApi();t.today(),L(t.getDate())}},onChangeView:e=>{const t=p.current;if(t){t.getApi().changeView(e),$(e)}}}),(0,I.jsx)(o.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:_,ref:p,rerenderDelay:10,initialDate:J,initialView:Q,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventDrop:async e=>{let{event:t}=e;try{n((0,b.qM)(t.id,{allDay:t.allDay,start:t.start,end:t.end}))}catch(o){console.error(o)}},eventClick:e=>{var t,o;(console.log(e.el.fcSeg.eventRange.def.extendedProps.type,"info"),Y(e.event.startStr),q({title:null===(t=e.event._def)||void 0===t?void 0:t.publicId,start:e.event.startStr,end:e.event.endStr,top:e.jsEvent.clientY,left:e.jsEvent.clientX}),"reminder"!==e.el.fcSeg.eventRange.def.extendedProps.type)&&n((0,b.PY)(null===(o=e.event)||void 0===o?void 0:o.id))},dateClick:e=>{console.log(e,"arg"),F(e.dateStr),z(e.date.toISOString().split("T")[0]),H({top:e.jsEvent.clientY,left:e.jsEvent.clientX})},dayCellContent:e=>{const t=e.date.toISOString().split("T")[0],n=e.date.toLocaleDateString("en-CA"),o=null===V||void 0===V?void 0:V.split("T")[0];return console.log(g===t,"dateStr"),(0,I.jsxs)(I.Fragment,{children:[W&&o===n&&(0,I.jsx)(O,{arrow:!0,open:!!W,onClose:le,title:(0,I.jsx)(C.A,{event:W,data:_,handleCloseTooltip:le}),placement:"top",children:(0,I.jsx)("span",{})}),(0,I.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,I.jsx)("div",{children:e.dayNumberText}),g===t&&(0,I.jsx)(O,{arrow:!0,open:!!B,onClose:ae,title:(0,I.jsx)(j.A,{handleAddEvent:ne,handleAddReminder:ie,handleCloseButtonTooltip:ae}),placement:"top",children:(0,I.jsx)("span",{})})]})]})},eventResize:async e=>{let{event:t}=e;try{n((0,b.qM)(t.id,{allDay:t.allDay,start:t.start,end:t.end}))}catch(o){console.error(o)}},height:c?720:"auto",plugins:[i.A,r.Ay,a.Ay,l.Ay,s.Ay]})]})]}),(0,I.jsxs)(T.ys,{open:Z,onClose:oe,children:[(0,I.jsx)(m.A,{children:K?"Edit Order Contin":"Add Order Contin"}),(0,I.jsx)(R.lM,{event:K||{},range:ee,onCancel:oe,getDate:N})]}),(0,I.jsxs)(T.ys,{open:te,onClose:re,children:[(0,I.jsx)(m.A,{children:K?"Edit Reminder":"Add Reminder"}),(0,I.jsx)(E.A,{event:K||{},range:ee,onCancel:re,getDate:N})]})]})}},58723:(e,t,n)=>{n.d(t,{A:()=>j});n(9950);var o=n(60666),i=n(23334),r=n.n(i),l=n(43974),a=n(29031),s=n(9449),d=n(68654),c=n(12257),p=n(8145),u=n(79739),x=n(75165),h=n(21410),v=n(28095),A=n(30744),m=(n(42686),n(66075),n(91745),n(73561)),g=n(32741),f=n(44414);function j(e){let{event:t,range:n,onCancel:i,getDate:j}=e;const{enqueueSnackbar:y}=(0,a.dh)(),C=((0,A.wA)(),o.Ik().shape({title:o.Yj().max(255).required("Title is required"),description:o.Yj().max(5e3)})),S=(0,s.mN)({resolver:(0,d.t)(C),defaultValues:((e,t)=>{const n={title:"",order_id:e.order_id||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:t?new Date(t.end):new Date,date:j?new Date(j):new Date};return e||t?r()({},n,e):n})(t,n)}),{reset:b,control:w,setValue:D,handleSubmit:k,formState:{isSubmitting:T}}=S;return(0,f.jsxs)(m.Op,{methods:S,onSubmit:k((async e=>{try{const t={title:e.title,note:e.description,start:(0,l.A)(e.start,"HH:mm:ss"),end:(0,l.A)(e.end,"HH:mm:ss"),date:(0,l.A)(e.date,"yyyy-MM-dd HH:mm:ss")},n=await g.A.post("todo",t);console.log(n,"reminder"),i(),b()}catch(t){console.error(t)}})),children:[(0,f.jsxs)(c.A,{spacing:3,sx:{p:3},children:[(0,f.jsx)(m.o3,{name:"title",label:"title"}),(0,f.jsx)(m.o3,{name:"description",label:"Description",multiline:!0,rows:4}),(0,f.jsx)(s.xI,{name:"date",control:w,render:e=>{let{field:t}=e;return(0,f.jsx)(h.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy",renderInput:e=>(0,f.jsx)(p.A,{...e,fullWidth:!0,value:j})})}}),(0,f.jsx)(s.xI,{name:"start",control:w,render:e=>{let{field:t}=e;return(0,f.jsx)(h.A,{...t,label:"Start Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,f.jsx)(p.A,{...e,fullWidth:!0})})}}),(0,f.jsx)(s.xI,{name:"end",control:w,render:e=>{let{field:t}=e;return(0,f.jsx)(h.A,{...t,label:"End Time",ampm:!0,inputFormat:"hh:mm a",renderInput:e=>(0,f.jsx)(p.A,{...e,fullWidth:!0,value:j})})}})]}),(0,f.jsxs)(u.A,{children:[(0,f.jsx)(x.A,{variant:"outlined",color:"inherit",onClick:i,children:"Cancel"}),(0,f.jsx)(v.A,{type:"submit",variant:"contained",loading:T,children:"Add"})]})]})}},40033:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(58168),i=n(98587),r=n(9950),l=n(2803),a=n(5747),s=n(82053),d=n(7951),c=n(79859),p=n(23025),u=n(5536),x=n(44414);const h=["className","id"],v=(0,d.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),A=r.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:d}=n,A=(0,i.A)(n,h),m=n,g=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},p.t,t)})(m),{titleId:f=d}=r.useContext(u.A);return(0,x.jsx)(v,(0,o.A)({component:"h2",className:(0,l.A)(g.root,s),ownerState:m,ref:t,variant:"h6",id:f},A))}))}}]);