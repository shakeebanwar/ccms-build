"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3078,430],{13078:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(79537),o=a(60899),n=a(86608),l=a(8279),c=a(50430),s=a(3551),i=a(44414);function d(){const{themeStretch:e}=(0,n.A)();return(0,i.jsx)(l.A,{title:"Dashboard",children:(0,i.jsx)(r.A,{maxWidth:!e&&"xl",children:(0,i.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(o.Ay,{item:!0,xs:12,md:12,children:(0,i.jsx)(c.default,{})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,md:12,children:(0,i.jsx)(s.default,{})})]})})})}},50430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});a(60666);var r=a(9950),o=a(79537),n=a(12257),l=a(75165),c=a(97591),s=a(23266),i=a(48089),d=a(68367),u=a(84142),h=a(6368),p=a(82053),g=a(74745),x=a(1320),f=a(15769),m=a(34075),b=a(91434),A=a(16497),v=a(37324),j=a(29031),w=a(73878),S=a(13564),C=a(26689),O=(a(9449),a(68654),a(90260)),y=a(46765),P=a(86608),B=a(38861),D=a(22704),N=a(66075),_=a(44185),T=a(63358),E=a(72870),L=a(12480),R=a(32741),k=a(95074),F=a(42686),I=(a(52401),a(44414));const M=["new","old"],V=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transaction Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],q=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function U(){const{themeStretch:e}=(0,P.A)(),t=(0,w.wA)(),a=(0,S.Zp)(),{enqueueSnackbar:U}=(0,j.dh)(),{dense:W,page:z,order:H,orderBy:Y,rowsPerPage:Z,setPage:G,selected:J,setSelected:K,onSort:Q,onChangeDense:X,onChangePage:$,onChangeRowsPerPage:ee}=(0,B.Ay)({defaultOrderBy:"createDate"}),[te,ae]=(0,r.useState)([]),[re,oe]=(0,r.useState)(""),[ne,le]=(0,r.useState)("new"),[ce,se]=(0,r.useState)(null),[ie,de]=(0,r.useState)(null),{currentTab:ue,onChangeTab:he}=(0,y.A)("all"),[pe,ge]=(0,r.useState)("Title Insurance"),[xe,fe]=(0,r.useState)(!1),[me,be]=(0,r.useState)(""),[Ae,ve]=(0,r.useState)(null),{id:je}=(0,S.g)(),we=Boolean(Ae);(0,r.useEffect)((()=>{"Sightline\xae"!==pe&&Se(q.find((e=>e.label===pe)).api)}),[pe]);const Se=e=>{fe(!0);try{R.A.get("user/all/".concat(e,"/").concat(je)).then((e=>{fe(!1);const t=e.data;console.log(t,"Data"),200===e.status?(be(t.filePath),ae(t.orders)):U(t.message)}))}catch(t){if(fe(!1),t.errors){Object.keys(t.errors).map((e=>U(t.errors[e][0],{variant:"error"})))}}},Ce=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:o,filterService:n,filterStartDate:l,filterEndDate:c}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==o&&(t=t.filter((e=>e.status===o)));"new"!==n&&(t=t.filter((e=>e.status===n)));l&&c&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=c.getTime())));return t}({tableData:te,comparator:(0,B.hz)(H,Y),filterName:re,filterService:ne,filterStatus:ue,filterStartDate:ce,filterEndDate:ie}),Oe=W?56:76,ye=!Ce.length&&!!re||!Ce.length&&!!ue||!Ce.length&&!!ne||!Ce.length&&!!ie||!Ce.length&&!!ce,Pe=e=>te.filter((t=>t.status===e)).length,Be=[{value:"all",label:"All",color:"info",count:te.length},{value:"active",label:"Active",color:"info",count:Pe("active")},{value:"new",label:"New",color:"info",count:Pe("new")},{value:"placed",label:"Placed",color:"info",count:Pe("placed")},{value:"completed",label:"Completed",color:"success",count:Pe("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Pe("on hold")},{value:"draft",label:"Draft",color:"default",count:Pe("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Pe("cancelled")}];return(0,I.jsxs)(o.A,{maxWidth:!e&&"lg",children:[xe&&(0,I.jsx)(k.A,{}),(0,I.jsx)(T.A,{heading:"Your Orders",links:[{name:"Dashboard",href:O.nB.root},{name:"Orders"}],action:(0,I.jsxs)(n.A,{gap:1,direction:"row",children:[(0,I.jsx)(l.A,{variant:"contained","aria-controls":we?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":we?"true":void 0,onClick:e=>{ve(e.currentTarget)},startIcon:(0,I.jsx)(N.A,{icon:"lets-icons:order"}),children:"New Order"}),(0,I.jsxs)(c.A,{id:"basic-menu",anchorEl:Ae,open:we,onClose:()=>{ve(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.titleInsurance,"/").concat(je),children:"Title Insurance"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.coopLienSearch,"/").concat(je),children:"Coop Lien Search"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.eagle9Policy,"/").concat(je),children:"Eagle 9 Policy"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.coopCondoOfferinPlans,"/").concat(je),children:"Coop/Condo Offering Plans"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.uccCreateFile,"/").concat(je),children:"UCC - Create/File"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.exchange1031,"/").concat(je),children:"1031 Exchange"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.acrisETax,"/").concat(je),children:"Acris E-Tax Forms"}),(0,I.jsx)(s.A,{component:C.N_,to:"".concat(O.nB.orders.otherSearches,"/").concat(je),children:"Other Searches"})]}),(0,I.jsx)(l.A,{variant:"contained",component:C.N_,to:O.nB.legalForm,startIcon:(0,I.jsx)(N.A,{icon:"clarity:form-line"}),children:"Legal Forms"})]})}),(0,I.jsx)(i.A,{sx:{mb:5},children:(0,I.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:pe,onChange:(e,t)=>ge(t),sx:{px:2,bgcolor:"background.neutral"},children:q.map((e=>(0,I.jsx)(u.A,{disableRipple:!0,value:e.label,label:(0,I.jsx)(n.A,{spacing:1,direction:"row",alignItems:"center",children:(0,I.jsx)("div",{children:e.label})})},e.label)))})}),(0,I.jsx)(h.A,{sx:{p:2},children:(0,I.jsx)(p.A,{variant:"h4",gutterBottom:!0,children:pe.label})}),(0,I.jsxs)(i.A,{children:[(0,I.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ue,onChange:he,sx:{px:2,bgcolor:"background.neutral"},children:Be.map((e=>(0,I.jsx)(u.A,{disableRipple:!0,value:e.value,label:(0,I.jsxs)(n.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,I.jsx)("div",{children:e.label})," ",(0,I.jsxs)(D.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,I.jsx)(g.A,{}),(0,I.jsx)(L.F5,{filterName:re,filterService:ne,filterStartDate:ce,filterEndDate:ie,onFilterName:e=>{oe(e),G(0)},onFilterService:e=>{le(e.target.value)},onFilterStartDate:e=>{se(e)},onFilterEndDate:e=>{de(e)},optionsService:M}),(0,I.jsx)(_.A,{children:(0,I.jsx)(x.A,{sx:{minWidth:800,position:"relative"},children:(0,I.jsxs)(f.A,{size:W?"small":"medium",children:[(0,I.jsx)(E.er,{order:H,orderBy:Y,headLabel:V,rowCount:te.length,numSelected:J.length,onSort:Q}),(0,I.jsxs)(m.A,{children:[Ce.slice(z*Z,z*Z+Z).map((e=>(0,I.jsx)(L.oR,{row:e,onViewRow:()=>(e=>{"Title Insurance"===pe&&a(O.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===pe&&a(O.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===pe&&a(O.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===pe&&a(O.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===pe&&a(O.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===pe&&a(O.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=me+e.name;R.A.get(t,{responseType:"blob"}).then((t=>{const a=URL.createObjectURL(t.data),r=document.createElement("a");r.download=e.name,r.href=a,r.click()})).catch((e=>U(e,{variant:"error"})))}else U("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return a=e.file_no,void t((0,F.qO)(a));var a},onDeleteRow:()=>(e=>{fe(!0);const t=q.find((e=>e.label===pe)).api;R.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),fe(!1),200===t.status||201===t.status){const t=te.filter((t=>t.id!==e));K([]),ae(t),U("Delete Successfully")}})).catch((e=>{fe(!1),e.errors&&Object.keys(e.errors).map((t=>U(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,I.jsx)(E.dO,{height:Oe,emptyRows:(0,B.xl)(z,Z,te.length)}),(0,I.jsx)(E.Sm,{isNotFound:ye})]})]})})}),(0,I.jsxs)(h.A,{sx:{position:"relative"},children:[(0,I.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ce.length,rowsPerPage:Z,page:z,onPageChange:$,onRowsPerPageChange:ee}),(0,I.jsx)(A.A,{control:(0,I.jsx)(v.A,{checked:W,onChange:X}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}},48089:(e,t,a)=>{a.d(t,{A:()=>f});var r=a(58168),o=a(98587),n=a(9950),l=a(2803),c=a(5747),s=a(7951),i=a(79859),d=a(70693),u=a(37665);function h(e){return(0,u.A)("MuiCard",e)}(0,a(44245).A)("MuiCard",["root"]);var p=a(44414);const g=["className","raised"],x=(0,s.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=n.forwardRef((function(e,t){const a=(0,i.A)({props:e,name:"MuiCard"}),{className:n,raised:s=!1}=a,d=(0,o.A)(a,g),u=(0,r.A)({},a,{raised:s}),f=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"]},h,t)})(u);return(0,p.jsx)(x,(0,r.A)({className:(0,l.A)(f.root,n),elevation:s?8:void 0,ref:t,ownerState:u},d))}))}}]);