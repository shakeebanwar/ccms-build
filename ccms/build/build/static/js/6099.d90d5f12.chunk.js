"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[6099],{91745:(e,t,r)=>{r.d(t,{b9:()=>u,qU:()=>s,yR:()=>v});var o=r(7951),n=r(19657),i=r(6368),a=r(82053),l=r(44414);const c=(0,o.Ay)(i.A)((()=>({display:"flex",alignItems:"center",justifyContent:"flex-end"}))),d=(0,o.Ay)("div")((e=>{let{theme:t}=e;return{marginLeft:-4,borderRadius:"50%",width:t.spacing(2),height:t.spacing(2),border:"solid 2px ".concat(t.palette.background.paper),boxShadow:"inset -1px 1px 2px ".concat((0,n.X4)(t.palette.common.black,.24))}}));function s(e){let{colors:t,limit:r=3,sx:o}=e;const n=t.slice(0,r),i=t.length-r;return(0,l.jsxs)(c,{component:"span",sx:o,children:[n.map(((e,t)=>(0,l.jsx)(d,{sx:{bgcolor:e}},e+t))),t.length>r&&(0,l.jsx)(a.A,{variant:"subtitle2",children:"+".concat(i)})]})}var p=r(93038),h=r(66075);function u(e){let{colors:t,onChangeColor:r,sx:o,...n}=e;return(0,l.jsx)(i.A,{sx:o,children:t.map((e=>{const t="#FFFFFF"===e||"white"===e;return(0,l.jsx)(p.A,{size:"small",value:e,color:"default",onChange:()=>r(e),icon:(0,l.jsx)(f,{sx:{...t&&{border:e=>"solid 1px ".concat(e.palette.divider)}}}),checkedIcon:(0,l.jsx)(f,{sx:{transform:"scale(1.4)","&:before":{opacity:.48,width:"100%",content:"''",height:"100%",borderRadius:"50%",position:"absolute",boxShadow:"4px 4px 8px 0 currentColor"},"& svg":{width:12,height:12,color:"common.white"},...t&&{border:e=>"solid 1px ".concat(e.palette.divider),boxShadow:e=>"4px 4px 8px 0 ".concat(e.palette.grey[50024]),"& svg":{width:12,height:12,color:"common.black"}}}}),sx:{color:e,"&:hover":{opacity:.72}},...n},e)}))})}function f(e){let{sx:t,...r}=e;return(0,l.jsx)(i.A,{sx:{width:20,height:20,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",bgcolor:"currentColor",transition:e=>e.transitions.create("all",{duration:e.transitions.duration.shortest}),...t},...r,children:(0,l.jsx)(h.A,{icon:"eva:checkmark-fill"})})}var x=r(49535),g=r(77966);function v(e){let{colors:t,...r}=e;return(0,l.jsx)(x.A,{row:!0,...r,children:t.map((e=>{const t="#FFFFFF"===e||"white"===e;return(0,l.jsx)(g.A,{value:e,color:"default",icon:(0,l.jsx)(b,{sx:{...t&&{border:e=>"solid 1px ".concat(e.palette.divider)}}}),checkedIcon:(0,l.jsx)(b,{sx:{transform:"scale(1.4)","&:before":{opacity:.48,width:"100%",content:"''",height:"100%",borderRadius:"50%",position:"absolute",boxShadow:"4px 4px 8px 0 currentColor"},"& svg":{width:12,height:12,color:"common.white"},...t&&{border:e=>"solid 1px ".concat(e.palette.divider),boxShadow:e=>"4px 4px 8px 0 ".concat(e.palette.grey[50024]),"& svg":{width:12,height:12,color:"common.black"}}}}),sx:{color:e,"&:hover":{opacity:.72}}},e)}))})}function b(e){let{sx:t}=e;return(0,l.jsx)(i.A,{sx:{width:20,height:20,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",bgcolor:"currentColor",transition:e=>e.transitions.create("all",{duration:e.transitions.duration.shortest}),...t},children:(0,l.jsx)(h.A,{icon:"eva:checkmark-fill"})})}},16099:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var o=r(90706),n=r(79947),i=r(28339),a=r(6978),l=r(60820),c=r(36404),d=r(9950),s=r(79537),p=r(48089),h=r(40033),u=r(42686),f=r(62740),x=r(30744),g=r(90260),v=r(98091),b=r(86608),y=r(63358),m=r(20131),j=r(44414);const w=e=>{const{events:t,selectedEventId:r}=e.calendar;return r?t.find((e=>Number(e.id)===Number(r))):null};function A(){const{themeStretch:e}=(0,b.A)(),t=(0,x.wA)(),r=(0,v.A)("up","sm"),A=(0,d.useRef)(null),[C,k]=(0,d.useState)(new Date),[D,S]=(0,d.useState)(r?"dayGridMonth":"listWeek"),F=(0,x.d4)(w),{events:I,isOpenModal:R,selectedRange:M}=(0,x.d4)((e=>e.calendar));(0,d.useEffect)((()=>{t((0,u.Wb)())}),[t]),(0,d.useEffect)((()=>{const e=A.current;if(e){const t=e.getApi(),o=r?"dayGridMonth":"listWeek";t.changeView(o),S(o)}}),[r]);const O=()=>{t((0,u.Oo)())};return(0,j.jsxs)(s.A,{maxWidth:!e&&"xl",children:[(0,j.jsx)(y.A,{heading:"Order Continuation",links:[{name:"Dashboard",href:g.i8.root},{name:"Order Continuation"}]}),(0,j.jsx)(p.A,{children:(0,j.jsxs)(f.mg,{children:[(0,j.jsx)(f.a7,{date:C,view:D,onNextDate:()=>{const e=A.current;if(e){const t=e.getApi();t.next(),k(t.getDate())}},onPrevDate:()=>{const e=A.current;if(e){const t=e.getApi();t.prev(),k(t.getDate())}},onToday:()=>{const e=A.current;if(e){const t=e.getApi();t.today(),k(t.getDate())}},onChangeView:e=>{const t=A.current;if(t){t.getApi().changeView(e),S(e)}}}),(0,j.jsx)(o.Ay$,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:I,ref:A,rerenderDelay:10,initialDate:C,initialView:D,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:e=>{t((0,u.PY)(e.event.id))},height:r?720:"auto",plugins:[n.A,i.Ay,l.Ay,a.Ay,c.Ay]})]})}),(0,j.jsxs)(m.ys,{open:R,onClose:O,children:[(0,j.jsx)(h.A,{children:F?"Edit Order Contin":"Add Order Contin"}),(0,j.jsx)(f.lM,{event:F||{},range:M,onCancel:O})]})]})}},62740:(e,t,r)=>{r.d(t,{lM:()=>O,mg:()=>W,a7:()=>P});var o=r(9950),n=r(13564),i=r(60666),a=r(23334),l=r.n(a),c=r(43974),d=r(29031),s=r(9449),p=r(68654),h=r(12257),u=r(41205),f=r(8145),x=r(23266),g=r(79739),v=r(53065),b=r(25333),y=r(6368),m=r(75165),j=r(21410),w=r(28095),A=r(30744),C=r(42686),k=r(66075),D=r(91745),S=r(73561),F=r(32741),I=r(10608),R=r(44414);const M=["#00AB55","#1890FF","#54D62C","#FFC107","#FF4842","#04297A","#7A0C2E"];function O(e){let{event:t,range:r,onCancel:a,getDate:O}=e;const{enqueueSnackbar:_}=(0,d.dh)(),z=(0,A.wA)(),{pathname:W}=(0,n.zy)(),{selectedFileNumber:T}=(0,A.d4)((e=>e.calendar)),[E,q]=(0,o.useState)([]),[N,V]=(0,o.useState)([]),[G,P]=(0,o.useState)([]),B=0===Object.keys(t).length,H=W.includes("employee"),L=i.Ik().shape({title:i.Yj().max(255).required("Title is required"),description:i.Yj().max(5e3),order_id:i.Yj().max(5e3).required("File is Required")}),X=(0,s.mN)({resolver:(0,p.t)(L),defaultValues:((e,t)=>{const r={address:(null===e||void 0===e?void 0:e.address)||"",title:"",order_id:e.order_id||"",description:"",textColor:"#1890FF",start:t?new Date(t.start):new Date,end:O?new Date(O):new Date};return e||t?l()({},r,e):r})(t,r)}),{reset:Y,watch:U,control:$,setValue:J,handleSubmit:K,formState:{isSubmitting:Q,errors:Z}}=X;U();console.log("error",Z),(0,o.useEffect)((()=>{T&&J("title",T),H||ee()}),[]);const ee=()=>{try{F.A.get("user/orders").then((e=>{const t=e.data;if(console.log(t,"Data"),200===e.status){var r,o;q(t.orders);const e=null===t||void 0===t||null===(r=t.orders)||void 0===r?void 0:r.map((e=>"O2024-"+(null===e||void 0===e?void 0:e.id))),n=null===t||void 0===t||null===(o=t.orders)||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.files.file_name));V(e),P(n)}else _(t.message)}))}catch(e){if(e.errors){Object.keys(e.errors).map((t=>_(e.errors[t][0],{variant:"error"})))}}};return(0,R.jsxs)(S.Op,{methods:X,onSubmit:K((async e=>{try{const r=!H&&{order_id:E.find((t=>"O2024-"+t.id===e.order_id)).id,title:e.title,description:e.description,textColor:e.textColor,end:(0,c.A)(e.end,"yyyy-MM-dd HH:mm:ss")},o=H&&{status:e.status};t.id?(z(H?(0,C.wL)(t.id,o):(0,C.qM)(t.id,r)),setTimeout((()=>{_("Update success!")}),2e3)):(z((0,C.lh)(r)),setTimeout((()=>{_("Create success!")}),2e3)),a(),Y()}catch(r){console.error(r)}})),children:[(0,R.jsxs)(h.A,{spacing:3,sx:{p:3},children:[(0,R.jsx)(S.o3,{name:"title",label:"title",disabled:H}),(0,R.jsx)(s.xI,{name:"address",control:$,render:e=>{let{field:t}=e;return(0,R.jsx)(u.A,{value:t.value||"",options:E.map((e=>({label:e.subject_premise.property_location,id:e.id}))),onChange:(e,r)=>{t.onChange(r.label||null);const o=E.find((e=>e.subject_premise.property_location===(null===r||void 0===r?void 0:r.label)));o&&J("order_id","O2024-".concat(o.id))},renderInput:e=>(0,R.jsx)(f.A,{...e,label:"Address",placeholder:"Search Address"})})}}),(0,R.jsx)(s.xI,{name:"order_id",control:$,render:e=>{let{field:t}=e;return(0,R.jsx)(u.A,{value:t.value,freeSolo:!0,disabled:H,onChange:(e,r)=>t.onChange(r),options:N,renderInput:e=>(0,R.jsx)(f.A,{label:"Order NO",...e})})}}),(0,R.jsx)(S.o3,{name:"description",label:"Description",multiline:!0,rows:4,disabled:H}),H&&(0,R.jsx)(s.xI,{name:"status",control:$,render:e=>{let{field:t}=e;return(0,R.jsx)(f.A,{...t,fullWidth:!0,select:!0,label:"Status",SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{textTransform:"capitalize"},children:I.X.map((e=>(0,R.jsx)(x.A,{value:e,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e},e)))})}}),(0,R.jsx)(s.xI,{name:"end",control:$,render:e=>{let{field:t}=e;return(0,R.jsx)(j.A,{...t,label:"Date",inputFormat:"dd/MM/yyyy hh:mm a",renderInput:e=>(0,R.jsx)(f.A,{...e,fullWidth:!0,disabled:H,value:O})})}}),!H&&(0,R.jsx)(s.xI,{name:"textColor",control:$,render:e=>{let{field:t}=e;return(0,R.jsx)(D.yR,{value:t.value,onChange:t.onChange,colors:M})}})]}),(0,R.jsxs)(g.A,{children:[!B&&(0,R.jsx)(v.A,{title:"Delete Event",children:(0,R.jsx)(b.A,{onClick:async()=>{if(t.id)try{a(),z((0,C.SX)(t.id)),_("Delete success!")}catch(e){console.error(e)}},children:(0,R.jsx)(k.A,{icon:"eva:trash-2-outline",width:20,height:20})})}),(0,R.jsx)(y.A,{sx:{flexGrow:1}}),(0,R.jsx)(m.A,{variant:"outlined",color:"inherit",onClick:a,children:"Cancel"}),(0,R.jsx)(w.A,{type:"submit",variant:"contained",loading:Q,children:B?"Add":"Update"})]})]})}var _=r(7951),z=r(19657);const W=(0,_.Ay)("div")((e=>{let{theme:t}=e;return{width:"calc(100% + 2px)",marginLeft:-1,marginBottom:-1,"& .fc":{"--fc-list-event-dot-width":"8px","--fc-border-color":t.palette.divider,"--fc-event-border-color":t.palette.info.light,"--fc-now-indicator-color":t.palette.error.main,"--fc-today-bg-color":t.palette.action.selected,"--fc-page-bg-color":t.palette.background.default,"--fc-neutral-bg-color":t.palette.background.neutral,"--fc-list-event-hover-bg-color":t.palette.action.hover,"--fc-highlight-color":(0,z.X4)(t.palette.primary.main,.08)},"& .fc .fc-license-message":{display:"none"},"& .fc a":{color:t.palette.text.primary},"& .fc .fc-col-header ":{boxShadow:"inset 0 -1px 0 ".concat(t.palette.divider),"& th":{borderColor:"transparent"},"& .fc-col-header-cell-cushion":{...t.typography.subtitle2,padding:"13px 0"}},"& .fc .fc-event":{borderColor:"transparent",backgroundColor:"transparent"},"& .fc .fc-event .fc-event-main":{padding:"2px 4px",borderRadius:4,backgroundColor:t.palette.common.white,transition:t.transitions.create("filter"),"&:hover":{filter:"brightness(0.92)"},"&:before,&:after":{top:0,left:0,width:"100%",height:"100%",content:"''",borderRadius:4,position:"absolute",boxSizing:"border-box"},"&:before":{zIndex:8,opacity:.32,border:"solid 1px currentColor"},"&:after":{zIndex:7,opacity:.24,backgroundColor:"currentColor"}},"& .fc .fc-event .fc-event-main-frame":{fontSize:13,lineHeight:"20px",filter:"brightness(0.24)"},"& .fc .fc-daygrid-event .fc-event-title":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& .fc .fc-event .fc-event-time":{padding:0,overflow:"unset",fontWeight:t.typography.fontWeightBold},"& .fc .fc-popover":{border:0,overflow:"hidden",boxShadow:t.customShadows.z20,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper},"& .fc .fc-popover-header":{...t.typography.subtitle2,padding:t.spacing(1),backgroundColor:t.palette.grey[50012],borderBottom:"solid 1px ".concat(t.palette.divider)},"& .fc .fc-popover-close":{opacity:.48,transition:t.transitions.create("opacity"),"&:hover":{opacity:1}},"& .fc .fc-more-popover .fc-popover-body":{padding:t.spacing(1.5)},"& .fc .fc-popover-body":{"& .fc-daygrid-event.fc-event-start, & .fc-daygrid-event.fc-event-end":{margin:"2px 0"}},"& .fc .fc-day-other .fc-daygrid-day-top":{opacity:1,"& .fc-daygrid-day-number":{color:t.palette.text.disabled}},"& .fc .fc-daygrid-day-number":{...t.typography.body2,padding:t.spacing(1,1,0)},"& .fc .fc-daygrid-event":{marginTop:4},"& .fc .fc-daygrid-event.fc-event-start, & .fc .fc-daygrid-event.fc-event-end":{marginLeft:4,marginRight:4},"& .fc .fc-daygrid-more-link":{...t.typography.caption,color:t.palette.text.secondary},"& .fc .fc-timegrid-axis-cushion":{...t.typography.body2,color:t.palette.text.secondary},"& .fc .fc-timegrid-slot-label-cushion":{...t.typography.body2},"& .fc-direction-ltr .fc-list-day-text, .fc-direction-rtl .fc-list-day-side-text, .fc-direction-ltr .fc-list-day-side-text, .fc-direction-rtl .fc-list-day-text":{...t.typography.subtitle2},"& .fc .fc-list-event":{...t.typography.body2,"& .fc-list-event-time":{color:t.palette.text.secondary}},"& .fc .fc-list-table":{"& th, td":{borderColor:"transparent"}}}}));var T=r(53924),E=r(82053),q=r(34437),N=r(98091);const V=[{value:"dayGridMonth",label:"Month",icon:"ic:round-view-module"},{value:"timeGridWeek",label:"Week",icon:"ic:round-view-week"},{value:"timeGridDay",label:"Day",icon:"ic:round-view-day"},{value:"listWeek",label:"Agenda",icon:"ic:round-view-agenda"}],G=(0,_.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",flexDirection:"column",padding:t.spacing(2.5),[t.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between"}}}));function P(e){let{date:t,view:r,onToday:o,onNextDate:n,onPrevDate:i,onChangeView:a}=e;const l=(0,N.A)("up","sm");return(0,R.jsxs)(G,{children:[l&&(0,R.jsx)(h.A,{direction:"row",spacing:.5,children:V.map((e=>(0,R.jsx)(v.A,{title:e.label,children:(0,R.jsx)(T.A,{value:r,selected:e.value===r,onChange:()=>a(e.value),sx:{width:32,height:32,padding:0,border:0},children:(0,R.jsx)(k.A,{icon:e.icon,width:20,height:20})})},e.value)))}),(0,R.jsxs)(h.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,R.jsx)(b.A,{onClick:i,children:(0,R.jsx)(k.A,{icon:"eva:arrow-ios-back-fill",width:20,height:20})}),(0,R.jsx)(E.A,{variant:"h5",children:(0,q.ts)(t)}),(0,R.jsx)(b.A,{onClick:n,children:(0,R.jsx)(k.A,{icon:"eva:arrow-ios-forward-fill",width:20,height:20})})]}),l&&(0,R.jsx)(m.A,{size:"small",color:"error",variant:"contained",onClick:o,children:"Today"})]})}}}]);