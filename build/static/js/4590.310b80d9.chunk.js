"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[4590],{24590:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var r=a(9950),l=a(13564),o=a(26689),n=a(79537),i=a(75165),s=a(48089),c=a(68367),d=a(84142),u=a(12257),p=a(6368),h=a(82053),g=a(74745),m=a(1320),f=a(15769),x=a(34075),A=a(91434),v=a(16497),b=a(37324),w=a(40033),j=a(28170),S=a(29031),y=a(20131),C=a(90260),O=a(46765),D=a(86608),P=a(38861),R=a(8279),T=a(22704),k=a(66075),_=a(44185),N=a(63358),E=a(72870),F=a(93455),I=a(32741),L=a(95074),M=a(44414);const B=["new","old"],V=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"employee",label:"Assign Employee",align:"left",width:1e3},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],W=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function q(){const{themeStretch:e}=(0,D.A)(),{enqueueSnackbar:t}=(0,S.dh)(),a=(0,l.Zp)(),{dense:q,page:Y,order:z,orderBy:U,rowsPerPage:H,setPage:Z,selected:G,onSort:J,onChangeDense:K,onChangePage:Q,onChangeRowsPerPage:X}=(0,P.Ay)({defaultOrderBy:"createDate"}),[$,ee]=(0,r.useState)([]),[te,ae]=(0,r.useState)(""),[re,le]=(0,r.useState)("new"),[oe,ne]=(0,r.useState)(null),[ie,se]=(0,r.useState)(null),{currentTab:ce,onChangeTab:de}=(0,O.A)("all"),[ue,pe]=(0,r.useState)("Title Insurance"),[he,ge]=(0,r.useState)(!1),[me,fe]=(0,r.useState)(!1),[xe,Ae]=(0,r.useState)([]),[ve,be]=(0,r.useState)([]);(0,r.useEffect)((()=>{"Sightline\xae"!==ue&&"UCC"!==ue&&we(W.find((e=>e.label===ue)).api)}),[ue]);const we=e=>{ge(!0);try{I.A.get("admin/".concat(e)).then((e=>{ge(!1);const a=e.data;200===e.status?ee(a.orders):t(a.message)}))}catch(a){if(ge(!1),a.errors){Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}},je=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:l,filterService:o,filterStartDate:n,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==o&&(t=t.filter((e=>e.status===o)));n&&i&&(t=t.filter((e=>e.updated_at.getTime()>=n.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:$,comparator:(0,P.hz)(z,U),filterName:te,filterService:re,filterStatus:ce,filterStartDate:oe,filterEndDate:ie}),Se=q?56:76,ye=!je.length&&!!te||!je.length&&!!ce||!je.length&&!!re||!je.length&&!!ie||!je.length&&!!oe,Ce=e=>$.filter((t=>t.status===e)).length,Oe=[{value:"all",label:"All",color:"info",count:$.length},{value:"active",label:"Active",color:"info",count:Ce("active")},{value:"new",label:"New",color:"info",count:Ce("new")},{value:"placed",label:"Placed",color:"info",count:Ce("placed")},{value:"completed",label:"Completed",color:"success",count:Ce("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ce("on hold")},{value:"draft",label:"Draft",color:"default",count:Ce("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ce("cancelled")}];return(0,M.jsxs)(R.A,{title:"Order: Your Orders",children:[he&&(0,M.jsx)(L.A,{}),(0,M.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,M.jsx)(N.A,{heading:"Your Orders",links:[{name:"Dashboard",href:C.RO.root},{name:"Orders"}],action:(0,M.jsx)(i.A,{variant:"contained",component:o.N_,to:C.RO.legalForm,startIcon:(0,M.jsx)(k.A,{icon:"clarity:form-line"}),children:"Legal Forms"})}),(0,M.jsx)(s.A,{sx:{mb:5},children:(0,M.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ue,onChange:(e,t)=>pe(t),sx:{px:2,bgcolor:"background.neutral"},children:W.map((e=>(0,M.jsx)(d.A,{disableRipple:!0,value:e.label,label:(0,M.jsx)(u.A,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:e.label})})},e.label)))})}),(0,M.jsx)(p.A,{sx:{p:2},children:(0,M.jsx)(h.A,{variant:"h4",gutterBottom:!0,children:ue.label})}),(0,M.jsxs)(s.A,{children:[(0,M.jsx)(c.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ce,onChange:de,sx:{px:2,bgcolor:"background.neutral"},children:Oe.map((e=>(0,M.jsx)(d.A,{disableRipple:!0,value:e.value,label:(0,M.jsxs)(u.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,M.jsx)("div",{children:e.label})," ",(0,M.jsxs)(T.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,M.jsx)(g.A,{}),(0,M.jsx)(F.F,{filterName:te,filterService:re,filterStartDate:oe,filterEndDate:ie,onFilterName:e=>{ae(e),Z(0)},onFilterService:e=>{le(e.target.value)},onFilterStartDate:e=>{ne(e)},onFilterEndDate:e=>{se(e)},optionsService:B}),(0,M.jsx)(_.A,{children:(0,M.jsx)(m.A,{sx:{minWidth:800,position:"relative"},children:(0,M.jsxs)(f.A,{size:q?"small":"medium",children:[(0,M.jsx)(E.er,{order:z,orderBy:U,headLabel:V,rowCount:$.length,numSelected:G.length,onSort:J}),(0,M.jsxs)(x.A,{children:[je.slice(Y*H,Y*H+H).map((e=>(0,M.jsx)(F.o,{row:e,onViewRow:()=>(e=>{"Title Insurance"===ue&&a(C.RO.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ue&&a(C.RO.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ue&&a(C.RO.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===ue&&a(C.RO.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ue&&a(C.RO.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ue&&a(C.RO.viewOrders.otherSearchesOrderView,{state:e})})(e),onAssign:()=>(async e=>{if(be(e),!xe.length>0){ge(!0);try{await I.A.get("/admin/employees").then((e=>{ge(!1);const t=e.data;Ae(t.user)}))}catch(a){ge(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}}fe(!0)})(e.id),onStatusChange:a=>((e,a)=>{ge(!0);try{const r=new FormData;r.append("status",a),r.append("id",e),I.A.post("/admin/changeorderStatus",r).then((r=>{if(ge(!1),200===r.status||201===r.status){const l=r.data,o=$.map((t=>t.id===e?{...t,status:a}:t));ee(o),t(l.message)}}))}catch(r){ge(!1),r.errors&&Object.keys(r.errors).map((e=>t(r.errors[e][0],{variant:"error"})))}})(e.id,a)},e.id))),(0,M.jsx)(E.dO,{height:Se,emptyRows:(0,P.xl)(Y,H,$.length)}),(0,M.jsx)(E.Sm,{isNotFound:ye})]})]})})}),(0,M.jsxs)(p.A,{sx:{position:"relative"},children:[(0,M.jsx)(A.A,{rowsPerPageOptions:[5,10,25],component:"div",count:je.length,rowsPerPage:H,page:Y,onPageChange:Q,onRowsPerPageChange:X}),(0,M.jsx)(v.A,{control:(0,M.jsx)(b.A,{checked:q,onChange:K}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,M.jsxs)(y.ys,{fullWidth:!0,maxWidth:"sm",open:me,onClose:()=>{fe(!1)},children:[(0,M.jsx)(w.A,{children:"Employees"}),(0,M.jsxs)(j.A,{sx:{pb:3,mt:2,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[xe.map(((e,a)=>(0,M.jsxs)(u.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsxs)(h.A,{variant:"subtitle1",children:[(0,M.jsx)(k.A,{icon:"raphael:employee"})," ",e.first_name]}),(0,M.jsx)(i.A,{variant:"text",onClick:()=>(async e=>{ge(!0);try{const a=new FormData;a.append("user_id",e.id),a.append("order_id",ve),await I.A.post("/admin/assignOrder",a).then((a=>{if(ge(!1),200===a.status||201===a.status){const r=a.data,l=$.map((t=>t.id===ve?{...t,employee:[e]}:t));ee(l),t(r.message)}}))}catch(a){ge(!1),a.errors&&Object.keys(a.errors).map((e=>t(a.errors[e][0],{variant:"error"})))}fe(!1)})(e),children:"Assign"})]},a))),(0,M.jsx)(u.A,{flexDirection:"row",justifyContent:"end",gap:1,children:(0,M.jsx)(i.A,{variant:"outlined",color:"inherit",onClick:()=>{fe(!1)},children:"Close"})})]})]})]})]})}},28170:(e,t,a)=>{a.d(t,{A:()=>f});var r=a(98587),l=a(58168),o=a(9950),n=a(2803),i=a(5747),s=a(7951),c=a(79859),d=a(37665);function u(e){return(0,d.A)("MuiDialogContent",e)}(0,a(44245).A)("MuiDialogContent",["root","dividers"]);var p=a(23025),h=a(44414);const g=["className","dividers"],m=(0,s.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:a}=e;return(0,l.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},a.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(p.A.root," + &")]:{paddingTop:0}})})),f=o.forwardRef((function(e,t){const a=(0,c.A)({props:e,name:"MuiDialogContent"}),{className:o,dividers:s=!1}=a,d=(0,r.A)(a,g),p=(0,l.A)({},a,{dividers:s}),f=(e=>{const{classes:t,dividers:a}=e,r={root:["root",a&&"dividers"]};return(0,i.A)(r,u,t)})(p);return(0,h.jsx)(m,(0,l.A)({className:(0,n.A)(f.root,o),ownerState:p,ref:t},d))}))},40033:(e,t,a)=>{a.d(t,{A:()=>f});var r=a(58168),l=a(98587),o=a(9950),n=a(2803),i=a(5747),s=a(82053),c=a(7951),d=a(79859),u=a(23025),p=a(5536),h=a(44414);const g=["className","id"],m=(0,c.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),f=o.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:s,id:c}=a,f=(0,l.A)(a,g),x=a,A=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},u.t,t)})(x),{titleId:v=c}=o.useContext(p.A);return(0,h.jsx)(m,(0,r.A)({component:"h2",className:(0,n.A)(A.root,s),ownerState:x,ref:t,variant:"h6",id:v},f))}))},23025:(e,t,a)=>{a.d(t,{A:()=>o,t:()=>l});var r=a(37665);function l(e){return(0,r.A)("MuiDialogTitle",e)}const o=(0,a(44245).A)("MuiDialogTitle",["root"])}}]);