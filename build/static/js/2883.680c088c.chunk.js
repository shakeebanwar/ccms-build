"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[2883],{42883:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var r=n(1413),a=n(29439),l=n(47313),i=n(29466),o=n(97890),s=n(43265),c=n(69099),u=n(73428),d=n(5297),f=n(65280),h=n(35898),p=n(57829),g=n(61113),v=n(19536),x=n(51629),b=n(66835),m=n(57861),w=n(91034),Z=n(83929),j=n(70024),S=n(58908),C=n(48175),y=n(80648),O=n(11338),D=n(66429),P=n(71361),k=n(86853),T=n(12025),E=n(62677),R=n(67871),F=n(55844),U=n(27657),_=n(85077),I=n(72563),V=n(81485),L=n(18405),N=n(18397),A=n(95004),B=n(62822),M=n(68105),W=n(33604),q=n(88705),z=n(25234),K=n(5239),G=n(66281),H=n(57597),Q=n(46417),Y=function(e){var t=e.calendar,n=t.events,r=t.selectedEventId;return r?n.find((function(e){return Number(e.id)===Number(r)})):null};function $(){var e=(0,O.Z)().themeStretch,t=(0,K.I0)(),n=(0,G.Z)("up","sm"),r=(0,l.useRef)(null),i=(0,l.useState)(new Date),o=(0,a.Z)(i,2),c=o[0],d=o[1],f=(0,l.useState)(n?"dayGridMonth":"listWeek"),h=(0,a.Z)(f,2),p=h[0],g=h[1],v=(0,K.v9)(Y),x=(0,K.v9)((function(e){return e.calendar})),b=x.events,m=x.isOpenModal,w=x.selectedRange;(0,l.useEffect)((function(){t((0,q.rF)())}),[t]),(0,l.useEffect)((function(){var e=r.current;if(e){var t=e.getApi(),a=n?"dayGridMonth":"listWeek";t.changeView(a),g(a)}}),[n]);var Z=function(){t((0,q.Mr)())};return(0,Q.jsxs)(s.Z,{maxWidth:!e&&"xl",children:[(0,Q.jsx)(R.Z,{heading:"Order Continuation",links:[{name:"Dashboard",href:C.wU.root},{name:"Order Continuation"}]}),(0,Q.jsx)(u.Z,{children:(0,Q.jsxs)(z.TH,{children:[(0,Q.jsx)(z.g,{date:c,view:p,onNextDate:function(){var e=r.current;if(e){var t=e.getApi();t.next(),d(t.getDate())}},onPrevDate:function(){var e=r.current;if(e){var t=e.getApi();t.prev(),d(t.getDate())}},onToday:function(){var e=r.current;if(e){var t=e.getApi();t.today(),d(t.getDate())}},onChangeView:function(e){var t=r.current;t&&(t.getApi().changeView(e),g(e))}}),(0,Q.jsx)(V.ZPm,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:b,ref:r,rerenderDelay:10,initialDate:c,initialView:p,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,eventClick:function(e){t((0,q.lz)(e.event.id))},height:n?720:"auto",plugins:[L.Z,N.ZP,B.ZP,A.ZP,M.ZP]})]})}),(0,Q.jsxs)(H.Kl,{open:m,onClose:Z,children:[(0,Q.jsx)(W.Z,{children:v?"Edit Order Contin":"Add Order Contin"}),(0,Q.jsx)(z.$K,{event:v||{},range:w,onCancel:Z})]})]})}var J=["new","old"],X=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:"status_change",label:"Change Status",align:"left",width:800},{id:""}],ee=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"acricetax",label:"ACRIS E-Tax Forms"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"uccform",label:"UCC"},{api:"othersearch",label:"Other Search / Request"},{api:"offeringPlan",label:"Offering Plans"},{api:"exchanger",label:"1031 Exchanges"},{api:"",label:"Sightline\xae"}];function te(){var e=(0,O.Z)().themeStretch,t=(0,S.Ds)().enqueueSnackbar,n=(0,o.s0)(),V=(0,D.ZP)({defaultOrderBy:"createDate"}),L=V.dense,N=V.page,A=V.order,B=V.orderBy,M=V.rowsPerPage,W=V.setPage,q=V.selected,z=V.onSort,K=V.onChangeDense,G=V.onChangePage,H=V.onChangeRowsPerPage,Y=(0,l.useState)([]),te=(0,a.Z)(Y,2),ne=te[0],re=te[1],ae=(0,l.useState)(""),le=(0,a.Z)(ae,2),ie=le[0],oe=le[1],se=(0,l.useState)("new"),ce=(0,a.Z)(se,2),ue=ce[0],de=ce[1],fe=(0,l.useState)(null),he=(0,a.Z)(fe,2),pe=he[0],ge=he[1],ve=(0,l.useState)(null),xe=(0,a.Z)(ve,2),be=xe[0],me=xe[1],we=(0,y.Z)("all"),Ze=we.currentTab,je=we.onChangeTab,Se=(0,l.useState)("Title Insurance"),Ce=(0,a.Z)(Se,2),ye=Ce[0],Oe=Ce[1],De=(0,l.useState)(!1),Pe=(0,a.Z)(De,2),ke=Pe[0],Te=Pe[1],Ee=(0,l.useRef)(null),Re=(0,l.useState)(!1),Fe=(0,a.Z)(Re,2),Ue=Fe[0],_e=Fe[1];(0,l.useEffect)((function(){"Sightline\xae"!==ye&&"UCC"!==ye&&Ie(ee.find((function(e){return e.label===ye})).api)}),[ye]);var Ie=function(e){Te(!0);try{_.Z.get("employee/".concat(e)).then((function(e){Te(!1);var n=e.data;200===e.status?re(n.orders):t(n.message)}))}catch(n){if(Te(!1),n.errors)Object.keys(n.errors).map((function(e){return t(n.errors[e][0],{variant:"error"})}))}},Ve=function(e){var t=e.tableData,n=e.comparator,r=e.filterName,a=e.filterStatus,l=e.filterService,i=e.filterStartDate,o=e.filterEndDate,s=t.map((function(e,t){return[e,t]}));s.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((function(e){return e[0]})),r&&(t=t.filter((function(e){return-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase())})));"all"!==a&&(t=t.filter((function(e){return e.status===a})));"new"!==l&&(t=t.filter((function(e){return e.status===l})));i&&o&&(t=t.filter((function(e){return e.updated_at.getTime()>=i.getTime()&&e.updated_at.getTime()<=o.getTime()})));return t}({tableData:ne,comparator:(0,D.sQ)(A,B),filterName:ie,filterService:ue,filterStatus:Ze,filterStartDate:pe,filterEndDate:be}),Le=L?56:76,Ne=!Ve.length&&!!ie||!Ve.length&&!!Ze||!Ve.length&&!!ue||!Ve.length&&!!be||!Ve.length&&!!pe,Ae=function(e){return ne.filter((function(t){return t.status===e})).length},Be=[{value:"all",label:"All",color:"info",count:ne.length},{value:"active",label:"Active",color:"info",count:Ae("active")},{value:"new",label:"New",color:"info",count:Ae("new")},{value:"placed",label:"Placed",color:"info",count:Ae("placed")},{value:"completed",label:"Completed",color:"success",count:Ae("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ae("on hold")},{value:"draft",label:"Draft",color:"default",count:Ae("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ae("cancelled")}];return(0,Q.jsxs)(P.Z,{title:"Order: Your Orders",children:[ke&&(0,Q.jsx)(I.Z,{}),(0,Q.jsx)("input",{type:"file",ref:Ee,onChange:function(e){Te(!0);var n=new FormData;n.append("file",e.target.files[0]),n.append("order_id",Ue);try{_.Z.post("employee/document",n).then((function(e){Te(!1);var n=e.data;200===e.status&&e.status,t(n.message)})).catch((function(){Te(!1)}))}catch(r){if(Te(!1),r.errors)Object.keys(r.errors).map((function(e){return t(r.errors[e][0],{variant:"error"})}))}},hidden:!0}),(0,Q.jsxs)(s.Z,{maxWidth:!e&&"lg",children:[(0,Q.jsx)(R.Z,{heading:"Your Orders",links:[{name:"Dashboard",href:C.wU.root},{name:"Orders"}],action:(0,Q.jsx)(c.Z,{variant:"contained",component:i.rU,to:C.wU.legalForm,startIcon:(0,Q.jsx)(T.Z,{icon:"clarity:form-line"}),children:"Legal Forms"})}),(0,Q.jsx)(u.Z,{sx:{mb:5},children:(0,Q.jsx)(d.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ye,onChange:function(e,t){return Oe(t)},sx:{px:2,bgcolor:"background.neutral"},children:ee.map((function(e){return(0,Q.jsx)(f.Z,{disableRipple:!0,value:e.label,label:(0,Q.jsx)(h.Z,{spacing:1,direction:"row",alignItems:"center",children:(0,Q.jsx)("div",{children:e.label})})},e.label)}))})}),(0,Q.jsx)(p.Z,{sx:{p:2},children:(0,Q.jsx)(g.Z,{variant:"h4",gutterBottom:!0,children:ye.label})}),(0,Q.jsxs)(u.Z,{children:[(0,Q.jsx)(d.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Ze,onChange:je,sx:{px:2,bgcolor:"background.neutral"},children:Be.map((function(e){return(0,Q.jsx)(f.Z,{disableRipple:!0,value:e.value,label:(0,Q.jsxs)(h.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,Q.jsx)("div",{children:e.label})," ",(0,Q.jsxs)(k.Z,{color:e.color,children:[" ",e.count," "]})]})},e.value)}))}),(0,Q.jsx)(v.Z,{}),(0,Q.jsx)(U.o,{filterName:ie,filterService:ue,filterStartDate:pe,filterEndDate:be,onFilterName:function(e){oe(e),W(0)},onFilterService:function(e){de(e.target.value)},onFilterStartDate:function(e){ge(e)},onFilterEndDate:function(e){me(e)},optionsService:J}),(0,Q.jsx)(E.Z,{children:(0,Q.jsx)(x.Z,{sx:{minWidth:800,position:"relative"},children:(0,Q.jsxs)(b.Z,{size:L?"small":"medium",children:[(0,Q.jsx)(F.K,{order:A,orderBy:B,headLabel:X,rowCount:ne.length,numSelected:q.length,onSort:z}),(0,Q.jsxs)(m.Z,{children:[Ve.slice(N*M,N*M+M).map((function(e){return(0,Q.jsx)(U.B,{row:e,onViewRow:function(){return function(e){"Title Insurance"===ye&&n(C.wU.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ye&&n(C.wU.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ye&&n(C.wU.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===ye&&n(C.wU.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ye&&n(C.wU.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ye&&n(C.wU.viewOrders.otherSearchesOrderView,{state:e})}(e)},onDocumentUpload:function(){return t=e.id,_e(t),void Ee.current.click();var t},onStatusChange:function(n){return function(e,n){Te(!0);try{var a=new FormData;a.append("status",n),a.append("id",e),_.Z.post("/employee/changeorderStatus",a).then((function(a){if(Te(!1),200===a.status||201===a.status){var l=a.data,i=ne.map((function(t){return t.id===e?(0,r.Z)((0,r.Z)({},t),{},{status:n}):t}));re(i),t(l.message)}}))}catch(l){Te(!1),l.errors&&Object.keys(l.errors).map((function(e){return t(l.errors[e][0],{variant:"error"})}))}}(e.id,n)}},e.id)})),(0,Q.jsx)(F.$W,{height:Le,emptyRows:(0,D.fQ)(N,M,ne.length)}),(0,Q.jsx)(F.et,{isNotFound:Ne})]})]})})}),(0,Q.jsxs)(p.Z,{sx:{position:"relative"},children:[(0,Q.jsx)(w.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:Ve.length,rowsPerPage:M,page:N,onPageChange:G,onRowsPerPageChange:H}),(0,Q.jsx)(Z.Z,{control:(0,Q.jsx)(j.Z,{checked:L,onChange:K}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]}),(0,Q.jsx)(p.Z,{sx:{mt:5},children:(0,Q.jsx)($,{})})]})]})}}}]);