"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[8292],{33118:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(29439),a=r(47313),o=r(43265),i=r(35898),l=r(69099),c=r(82047),s=r(51405),u=r(73428),d=r(5297),f=r(65280),h=r(57829),p=r(61113),v=r(19536),m=r(51629),g=r(66835),x=r(57861),b=r(91034),Z=r(83929),w=r(70024),S=r(58908),j=r(1084),D=r(97890),C=r(29466),O=r(48175),y=r(80648),P=r(11338),B=r(66429),T=r(86853),E=r(12025),M=r(62677),L=r(67871),k=r(55844),I=r(27657),R=r(85077),U=r(72563),F=r(88705),_=r(46417),N=["new","old"],X=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],V=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function A(){var e=(0,P.Z)().themeStretch,t=(0,j.I0)(),r=(0,D.s0)(),A=(0,S.Ds)().enqueueSnackbar,Y=(0,B.ZP)({defaultOrderBy:"createDate"}),q=Y.dense,H=Y.page,W=Y.order,Q=Y.orderBy,z=Y.rowsPerPage,K=Y.setPage,$=Y.selected,G=Y.setSelected,J=Y.onSort,ee=Y.onChangeDense,te=Y.onChangePage,re=Y.onChangeRowsPerPage,ne=(0,a.useState)([]),ae=(0,n.Z)(ne,2),oe=ae[0],ie=ae[1],le=(0,a.useState)(""),ce=(0,n.Z)(le,2),se=ce[0],ue=ce[1],de=(0,a.useState)("new"),fe=(0,n.Z)(de,2),he=fe[0],pe=fe[1],ve=(0,a.useState)(null),me=(0,n.Z)(ve,2),ge=me[0],xe=me[1],be=(0,a.useState)(null),Ze=(0,n.Z)(be,2),we=Ze[0],Se=Ze[1],je=(0,y.Z)("all"),De=je.currentTab,Ce=je.onChangeTab,Oe=(0,a.useState)("Title Insurance"),ye=(0,n.Z)(Oe,2),Pe=ye[0],Be=ye[1],Te=(0,a.useState)(!1),Ee=(0,n.Z)(Te,2),Me=Ee[0],Le=Ee[1],ke=(0,a.useState)(""),Ie=(0,n.Z)(ke,2),Re=Ie[0],Ue=Ie[1],Fe=(0,a.useState)(null),_e=(0,n.Z)(Fe,2),Ne=_e[0],Xe=_e[1],Ve=Boolean(Ne);(0,a.useEffect)((function(){"Sightline\xae"!==Pe&&Ae(V.find((function(e){return e.label===Pe})).api)}),[Pe]);var Ae=function(e){Le(!0);try{R.Z.get("user/".concat(e)).then((function(e){Le(!1);var t=e.data;200===e.status?(Ue(t.filePath),ie(t.orders)):A(t.message)}))}catch(t){if(Le(!1),t.errors)Object.keys(t.errors).map((function(e){return A(t.errors[e][0],{variant:"error"})}))}},Ye=function(e){var t=e.tableData,r=e.comparator,n=e.filterName,a=e.filterStatus,o=e.filterService,i=e.filterStartDate,l=e.filterEndDate,c=t.map((function(e,t){return[e,t]}));c.sort((function(e,t){var n=r(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t=c.map((function(e){return e[0]})),n&&(t=t.filter((function(e){return-1!==e.order_title.transaction_type.toLowerCase().indexOf(n.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(n.toLowerCase())})));"all"!==a&&(t=t.filter((function(e){return e.status===a})));"new"!==o&&(t=t.filter((function(e){return e.status===o})));i&&l&&(t=t.filter((function(e){return e.updated_at.getTime()>=i.getTime()&&e.updated_at.getTime()<=l.getTime()})));return t}({tableData:oe,comparator:(0,B.sQ)(W,Q),filterName:se,filterService:he,filterStatus:De,filterStartDate:ge,filterEndDate:we}),qe=q?56:76,He=!Ye.length&&!!se||!Ye.length&&!!De||!Ye.length&&!!he||!Ye.length&&!!we||!Ye.length&&!!ge,We=function(e){return oe.filter((function(t){return t.status===e})).length},Qe=[{value:"all",label:"All",color:"info",count:oe.length},{value:"active",label:"Active",color:"info",count:We("active")},{value:"new",label:"New",color:"info",count:We("new")},{value:"placed",label:"Placed",color:"info",count:We("placed")},{value:"completed",label:"Completed",color:"success",count:We("completed")},{value:"on hold",label:"On Hold",color:"warning",count:We("on hold")},{value:"draft",label:"Draft",color:"default",count:We("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:We("cancelled")}];return(0,_.jsxs)(o.Z,{maxWidth:!e&&"lg",children:[Me&&(0,_.jsx)(U.Z,{}),(0,_.jsx)(L.Z,{heading:"Your Orders",links:[{name:"Dashboard",href:O.vB.root},{name:"Orders"}],action:(0,_.jsxs)(i.Z,{gap:1,direction:"row",children:[(0,_.jsx)(l.Z,{variant:"contained","aria-controls":Ve?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Ve?"true":void 0,onClick:function(e){Xe(e.currentTarget)},startIcon:(0,_.jsx)(E.Z,{icon:"lets-icons:order"}),children:"New Order"}),(0,_.jsxs)(c.Z,{id:"basic-menu",anchorEl:Ne,open:Ve,onClose:function(){Xe(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.titleInsurance,children:"Title Insurance"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.coopLienSearch,children:"Coop Lien Search"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.eagle9Policy,children:"Eagle 9 Policy"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.coopCondoOfferinPlans,children:"Coop/Condo Offering Plans"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.uccCreateFile,children:"UCC - Create/File"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.exchange1031,children:"1031 Exchange"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.acrisETax,children:"Acris E-Tax Forms"}),(0,_.jsx)(s.Z,{component:C.rU,to:O.vB.orders.otherSearches,children:"Other Searches"})]}),(0,_.jsx)(l.Z,{variant:"contained",component:C.rU,to:O.vB.legalForm,startIcon:(0,_.jsx)(E.Z,{icon:"clarity:form-line"}),children:"Legal Forms"})]})}),(0,_.jsx)(u.Z,{sx:{mb:5},children:(0,_.jsx)(d.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:Pe,onChange:function(e,t){return Be(t)},sx:{px:2,bgcolor:"background.neutral"},children:V.map((function(e){return(0,_.jsx)(f.Z,{disableRipple:!0,value:e.label,label:(0,_.jsx)(i.Z,{spacing:1,direction:"row",alignItems:"center",children:(0,_.jsx)("div",{children:e.label})})},e.label)}))})}),(0,_.jsx)(h.Z,{sx:{p:2},children:(0,_.jsx)(p.Z,{variant:"h4",gutterBottom:!0,children:Pe.label})}),(0,_.jsxs)(u.Z,{children:[(0,_.jsx)(d.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:De,onChange:Ce,sx:{px:2,bgcolor:"background.neutral"},children:Qe.map((function(e){return(0,_.jsx)(f.Z,{disableRipple:!0,value:e.value,label:(0,_.jsxs)(i.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,_.jsx)("div",{children:e.label})," ",(0,_.jsxs)(T.Z,{color:e.color,children:[" ",e.count," "]})]})},e.value)}))}),(0,_.jsx)(v.Z,{}),(0,_.jsx)(I.o,{filterName:se,filterService:he,filterStartDate:ge,filterEndDate:we,onFilterName:function(e){ue(e),K(0)},onFilterService:function(e){pe(e.target.value)},onFilterStartDate:function(e){xe(e)},onFilterEndDate:function(e){Se(e)},optionsService:N}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(m.Z,{sx:{minWidth:800,position:"relative"},children:(0,_.jsxs)(g.Z,{size:q?"small":"medium",children:[(0,_.jsx)(k.K,{order:W,orderBy:Q,headLabel:X,rowCount:oe.length,numSelected:$.length,onSort:J}),(0,_.jsxs)(x.Z,{children:[Ye.slice(H*z,H*z+z).map((function(e){return(0,_.jsx)(I.B,{row:e,onViewRow:function(){return function(e){"Title Insurance"===Pe&&r(O.vB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===Pe&&r(O.vB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===Pe&&r(O.vB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===Pe&&r(O.vB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===Pe&&r(O.vB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===Pe&&r(O.vB.viewOrders.otherSearchesOrderView,{state:e})}(e)},onDownloadDocument:function(){return function(e){if(e){var t=Re+e.name;R.Z.get(t,{responseType:"blob"}).then((function(t){var r=URL.createObjectURL(t.data),n=document.createElement("a");n.download=e.name,n.href=r,n.click()})).catch((function(e){return A(e,{variant:"error"})}))}else A("Document Not Found!",{variant:"error"})}(null===e||void 0===e?void 0:e.document)},onOrderContin:function(){return r=e.file_no,void t((0,F.V7)(r));var r},onDeleteRow:function(){return function(e){Le(!0);var t=V.find((function(e){return e.label===Pe})).api;R.Z.delete("user/".concat(t,"/").concat(e)).then((function(t){if(console.log("response",t),Le(!1),200===t.status||201===t.status){var r=oe.filter((function(t){return t.id!==e}));G([]),ie(r),A("Delete Successfully")}})).catch((function(e){Le(!1),e.errors&&Object.keys(e.errors).map((function(t){return A(e.errors[t][0],{variant:"error"})}))}))}(e.id)}},e.id)})),(0,_.jsx)(k.$W,{height:qe,emptyRows:(0,B.fQ)(H,z,oe.length)}),(0,_.jsx)(k.et,{isNotFound:He})]})]})})}),(0,_.jsxs)(h.Z,{sx:{position:"relative"},children:[(0,_.jsx)(b.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:Ye.length,rowsPerPage:z,page:H,onPageChange:te,onRowsPerPageChange:re}),(0,_.jsx)(Z.Z,{control:(0,_.jsx)(w.Z,{checked:q,onChange:ee}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}},51166:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(49294);function a(e){return(0,n.Z)({},e)}},98495:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(7781),a=r(409),o=r(75377),i=r(55456),l=r(93601),c=r(51166),s=r(5025),u=r(34800),d=1440,f=43200;function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,u.Z)(2,arguments);var h=r.locale||i.Z;if(!h.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=(0,n.Z)(e,t);if(isNaN(p))throw new RangeError("Invalid time value");var v,m,g=(0,c.Z)(r);g.addSuffix=Boolean(r.addSuffix),g.comparison=p,p>0?(v=(0,l.Z)(t),m=(0,l.Z)(e)):(v=(0,l.Z)(e),m=(0,l.Z)(t));var x,b=(0,o.Z)(m,v),Z=((0,s.Z)(m)-(0,s.Z)(v))/1e3,w=Math.round((b-Z)/60);if(w<2)return r.includeSeconds?b<5?h.formatDistance("lessThanXSeconds",5,g):b<10?h.formatDistance("lessThanXSeconds",10,g):b<20?h.formatDistance("lessThanXSeconds",20,g):b<40?h.formatDistance("halfAMinute",null,g):b<60?h.formatDistance("lessThanXMinutes",1,g):h.formatDistance("xMinutes",1,g):0===w?h.formatDistance("lessThanXMinutes",1,g):h.formatDistance("xMinutes",w,g);if(w<45)return h.formatDistance("xMinutes",w,g);if(w<90)return h.formatDistance("aboutXHours",1,g);if(w<d){var S=Math.round(w/60);return h.formatDistance("aboutXHours",S,g)}if(w<2520)return h.formatDistance("xDays",1,g);if(w<f){var j=Math.round(w/d);return h.formatDistance("xDays",j,g)}if(w<86400)return x=Math.round(w/f),h.formatDistance("aboutXMonths",x,g);if((x=(0,a.Z)(m,v))<12){var D=Math.round(w/f);return h.formatDistance("xMonths",D,g)}var C=x%12,O=Math.floor(x/12);return C<3?h.formatDistance("aboutXYears",O,g):C<9?h.formatDistance("overXYears",O,g):h.formatDistance("almostXYears",O+1,g)}function p(e,t){return(0,u.Z)(1,arguments),h(e,Date.now(),t)}}}]);