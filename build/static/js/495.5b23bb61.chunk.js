(self.webpackChunkccms=self.webpackChunkccms||[]).push([[495],{84966:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});n(32415);var i=n(62773),r=n(9950),a=n(7951),s=n(14857),o=n(6368),l=n(47177),c=n(25333),d=n(61770),h=n(66075),x=n(44414);const p=(0,a.Ay)(o.A)({position:"relative"}),u=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{bottom:40,overflow:"hidden",position:"absolute",left:t.spacing(-2),boxShadow:t.customShadows.z20,borderRadius:2*Number(t.shape.borderRadius),"& .emoji-mart":{border:"none",backgroundColor:t.palette.background.paper},"& .emoji-mart-anchor":{color:t.palette.text.disabled,"&:hover, &:focus, &.emoji-mart-anchor-selected":{color:t.palette.text.primary}},"& .emoji-mart-bar":{borderColor:t.palette.divider},"& .emoji-mart-search input":{backgroundColor:"transparent",color:t.palette.text.primary,borderColor:t.palette.grey[50032],"&::placeholder":{...t.typography.body2,color:t.palette.text.disabled}},"& .emoji-mart-search-icon svg":{opacity:1,fill:t.palette.text.disabled},"& .emoji-mart-category-label span":{...t.typography.subtitle2,...(0,d.A)().bgBlur({color:t.palette.background.paper}),color:t.palette.text.primary},"& .emoji-mart-title-label":{color:t.palette.text.primary},"& .emoji-mart-category .emoji-mart-emoji:hover:before":{backgroundColor:t.palette.action.selected},"& .emoji-mart-emoji":{outline:"none"},"& .emoji-mart-preview-name":{color:t.palette.text.primary},"& .emoji-mart-preview-shortname, .emoji-mart-preview-emoticon":{color:t.palette.text.secondary}}}));function m(e){let{disabled:t,value:n,setValue:a,alignRight:o=!1,...d}=e;const m=(0,s.A)(),[g,f]=(0,r.useState)(!1);let A;g&&(A=(0,x.jsx)(i.LC,{color:m.palette.primary.main,title:"Pick your emoji\u2026",emoji:"point_up",onSelect:e=>a(n+(null===e||void 0===e?void 0:e.native))}));return(0,x.jsx)(l.A,{onClickAway:()=>{f(!1)},children:(0,x.jsxs)(p,{...d,children:[(0,x.jsx)(u,{sx:{...o&&{right:-2,left:"auto !important"}},children:A}),(0,x.jsx)(c.A,{disabled:t,size:"small",onClick:e=>{e.preventDefault(),f(!g)},children:(0,x.jsx)(h.A,{icon:"eva:smiling-face-fill",width:20,height:20})})]})})}},63358:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(56801),r=n.n(i),a=n(6368),s=n(82053),o=n(22707),l=n(26689),c=n(52432),d=n(44414);function h(e){let{links:t,activeLast:n=!1,...i}=e;const r=t[t.length-1].name,o=t.map((e=>(0,d.jsx)(x,{link:e},e.name))),l=t.map((e=>(0,d.jsx)("div",{children:e.name!==r?(0,d.jsx)(x,{link:e}):(0,d.jsx)(s.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:r})},e.name)));return(0,d.jsx)(c.A,{separator:(0,d.jsx)(a.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...i,children:n?o:l})}function x(e){let{link:t}=e;const{href:n,name:i,icon:r}=t;return(0,d.jsxs)(o.A,{variant:"body2",component:l.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,d.jsx)(a.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),i]},i)}function p(e){let{links:t,action:n,heading:i,moreLink:l=[],sx:c,...x}=e;return(0,d.jsxs)(a.A,{sx:{mb:5,...c},children:[(0,d.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,d.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:i}),(0,d.jsx)(h,{links:t,...x})]}),n&&(0,d.jsx)(a.A,{sx:{flexShrink:0},children:n})]}),(0,d.jsx)(a.A,{sx:{mt:2},children:r()(l)?(0,d.jsx)(o.A,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,d.jsx)(o.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},97842:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(7951),r=n(63916);const a=(0,i.Ay)(r.A,{shouldForwardProp:e=>"stretchStart"!==e})((e=>{let{stretchStart:t,theme:n}=e;return{"& .MuiOutlinedInput-root":{transition:n.transitions.create(["box-shadow","width"],{easing:n.transitions.easing.easeInOut,duration:n.transitions.duration.shorter}),"&.Mui-focused":{boxShadow:n.customShadows.z12},...t&&{width:t,"&.Mui-focused":{boxShadow:n.customShadows.z12,[n.breakpoints.up("sm")]:{width:t+60}}}},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(n.palette.grey[50032]," !important")}}}))},94416:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(9950),r=n(571),a=n(14857),s=n(19657),o=n(71030),l=n(82053),c=n(44414);function d(){const e=(0,a.A)(),t="rtl"===e.direction,n=e.palette.grey[600].replace("#",""),i=e=>"url(https://api.iconify.design/carbon/".concat(e,".svg?color=%23").concat(n,"&width=").concat(32,"&height=").concat(32,")"),r=t=>({opacity:1,alignItems:"center",display:"inline-flex",justifyContent:"center",backgroundImage:"unset",backgroundColor:"transparent",transition:e.transitions.create("opacity"),"&:before":{display:"block",width:32,height:32,content:i(t)},"&:hover":{opacity:.72}});return(0,c.jsx)(o.A,{styles:{"& .ReactModalPortal":{"& .ril__outer":{backgroundColor:(0,s.X4)(e.palette.grey[900],.96)},"& .ril__toolbar":{height:"auto !important",padding:e.spacing(2,3),backgroundColor:"transparent"},"& .ril__toolbarLeftSide":{display:"none"},"& .ril__toolbarRightSide":{height:"auto !important",padding:0,flexGrow:1,display:"flex",alignItems:"center","& li":{display:"flex",alignItems:"center"},"& li:first-of-type":{flexGrow:1},"& li:not(:first-of-type)":{width:40,height:40,justifyContent:"center",marginLeft:e.spacing(2)}},"& button:focus":{outline:"none"},"& .ril__toolbarRightSide button":{width:"100%",height:"100%","&.ril__zoomInButton":r("zoom-in"),"&.ril__zoomOutButton":r("zoom-out"),"&.ril__closeButton":r("close")},"& .ril__navButtons":{padding:e.spacing(3),"&.ril__navButtonPrev":{right:"auto",left:e.spacing(2),...r(t?"arrow-right":"arrow-left")},"&.ril__navButtonNext":{left:"auto",right:e.spacing(2),...r(t?"arrow-left":"arrow-right")}}}}})}function h(e){let{images:t,photoIndex:n,setPhotoIndex:a,isOpen:s,...o}=e;(0,i.useEffect)((()=>{document.body.style.overflow=s?"hidden":"unset"}),[s]);const h=[(0,c.jsx)(l.A,{variant:"subtitle2",children:"".concat(n+1," / ").concat(t.length)})];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{}),s&&(0,c.jsx)(r.A,{animationDuration:160,nextSrc:t[(n+1)%t.length],prevSrc:t[(n+t.length-1)%t.length],onMovePrevRequest:()=>a((n+t.length-1)%t.length),onMoveNextRequest:()=>a((n+1)%t.length),toolbarButtons:h,reactModalStyle:{overlay:{zIndex:9999}},...o})]})}},97751:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(70693),r=n(82053),a=n(44414);function s(e){let{searchQuery:t="",...n}=e;return t?(0,a.jsxs)(i.A,{...n,children:[(0,a.jsx)(r.A,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,a.jsxs)(r.A,{variant:"body2",align:"center",children:["No results found for \xa0",(0,a.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]}):(0,a.jsx)(r.A,{variant:"body2",children:" Please enter keywords"})}},2995:(e,t,n)=>{"use strict";n.d(t,{E2:()=>g,Xc:()=>u,GC:()=>m,Ab:()=>s,D4:()=>c,X9:()=>l,yF:()=>x});var i=n(44414);var r=n(82917),a=n(6368);function s(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{width:"100%",height:560,variant:"rectangular",sx:{borderRadius:2}}),(0,i.jsxs)(a.A,{sx:{mt:3,display:"flex",alignItems:"center"},children:[(0,i.jsx)(r.A,{variant:"circular",width:64,height:64}),(0,i.jsxs)(a.A,{sx:{flexGrow:1,ml:2},children:[(0,i.jsx)(r.A,{variant:"text",height:20}),(0,i.jsx)(r.A,{variant:"text",height:20}),(0,i.jsx)(r.A,{variant:"text",height:20})]})]})]})}var o=n(60899);function l(){return(0,i.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(o.Ay,{item:!0,xs:12,md:6,lg:7,children:(0,i.jsx)(r.A,{variant:"rectangular",width:"100%",sx:{paddingTop:"100%",borderRadius:2}})}),(0,i.jsxs)(o.Ay,{item:!0,xs:12,md:6,lg:5,children:[(0,i.jsx)(r.A,{variant:"circular",width:80,height:80}),(0,i.jsx)(r.A,{variant:"text",height:240}),(0,i.jsx)(r.A,{variant:"text",height:40}),(0,i.jsx)(r.A,{variant:"text",height:40}),(0,i.jsx)(r.A,{variant:"text",height:40})]})]})}function c(){return(0,i.jsxs)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,i.jsx)(r.A,{variant:"rectangular",width:"100%",sx:{height:200,borderRadius:2}}),(0,i.jsxs)(a.A,{sx:{display:"flex",mt:1.5},children:[(0,i.jsx)(r.A,{variant:"circular",sx:{width:40,height:40}}),(0,i.jsx)(r.A,{variant:"text",sx:{mx:1,flexGrow:1}})]})]})}var d=n(48089),h=n(12257);function x(){return(0,i.jsxs)(d.A,{children:[(0,i.jsx)(r.A,{variant:"rectangular",sx:{paddingTop:"100%"}}),(0,i.jsxs)(h.A,{spacing:2,sx:{p:3},children:[(0,i.jsx)(r.A,{variant:"text",sx:{width:.5}}),(0,i.jsxs)(h.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(h.A,{direction:"row",children:[(0,i.jsx)(r.A,{variant:"circular",sx:{width:16,height:16}}),(0,i.jsx)(r.A,{variant:"circular",sx:{width:16,height:16}}),(0,i.jsx)(r.A,{variant:"circular",sx:{width:16,height:16}})]}),(0,i.jsx)(r.A,{variant:"text",sx:{width:40}})]})]})]})}var p=n(70693);function u(){return(0,i.jsx)(a.A,{sx:{display:"grid",gap:3,gridTemplateColumns:"repeat(4, 1fr)"},children:[...Array(3)].map(((e,t)=>(0,i.jsx)(p.A,{variant:"outlined",sx:{p:2.5,width:310},children:(0,i.jsxs)(h.A,{spacing:2,children:[(0,i.jsx)(r.A,{variant:"rectangular",sx:{paddingTop:"75%",borderRadius:1.5}}),0===t&&(0,i.jsx)(r.A,{variant:"rectangular",sx:{paddingTop:"25%",borderRadius:1.5}}),2!==t&&(0,i.jsx)(r.A,{variant:"rectangular",sx:{paddingTop:"25%",borderRadius:1.5}})]})},t)))})}function m(){return(0,i.jsxs)(h.A,{spacing:1,direction:"row",alignItems:"center",sx:{px:3,py:1},children:[(0,i.jsx)(r.A,{variant:"circular",width:32,height:32}),(0,i.jsx)(r.A,{variant:"text",sx:{width:.25,height:16}})]})}function g(){return(0,i.jsxs)(h.A,{spacing:1,direction:"row",alignItems:"center",sx:{px:3,py:1.5},children:[(0,i.jsx)(r.A,{variant:"circular",width:48,height:48}),(0,i.jsxs)(h.A,{spacing:.5,sx:{flexGrow:1},children:[(0,i.jsx)(r.A,{variant:"text",sx:{width:.5,height:16}}),(0,i.jsx)(r.A,{variant:"text",sx:{width:.25,height:12}})]})]})}},29449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ct});var i=n(9950),r=n(79537),a=n(48089),s=n(58738),o=n(83090),l=n(90260),c=n(86608),d=n(8279),h=n(63358),x=n(7951),p=n(14857),u=n(25333),m=n(74745),g=n(6368),f=n(71525),A=n(98091),v=n(66075),j=n(80561),y=n.n(j),b=n(32964),w=n.n(b),C=n(75165),k=n(33738),S=n(82053),I=n(34437),R=n(50570),M=n(44185),D=n(44414);const T=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{flexGrow:1,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column",paddingBottom:t.spacing(2)}})),P=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",marginTop:t.spacing(2),padding:t.spacing(0,2.5)}})),_=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{width:40,height:40,flexShrink:0,display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.grey[50016]}})),W=(0,x.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,flexShrink:0,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}}));function z(e){let{conversation:t,isCollapse:n,onCollapse:i}=e;const r=y()(w()(t.messages.map((e=>e.attachments)))).length;return(0,D.jsxs)(T,{children:[(0,D.jsxs)(W,{fullWidth:!0,color:"inherit",onClick:i,endIcon:(0,D.jsx)(v.A,{icon:n?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["attachment (",r,")"]}),!n&&(0,D.jsx)(m.A,{}),(0,D.jsx)(M.A,{children:(0,D.jsx)(k.A,{in:n,children:t.messages.map((e=>(0,D.jsx)("div",{children:e.attachments.map((t=>(0,D.jsx)(O,{file:e,fileUrl:t},t)))},e.id)))})})]})}function O(e){let{file:t,fileUrl:n}=e;return(0,D.jsxs)(P,{children:[(0,D.jsx)(_,{children:(0,R.ZR)(n)}),(0,D.jsxs)(g.A,{sx:{ml:1.5,maxWidth:150},children:[(0,D.jsx)(S.A,{variant:"body2",noWrap:!0,children:(0,R.Nl)(n)}),(0,D.jsx)(S.A,{noWrap:!0,variant:"caption",sx:{color:"text.secondary",display:"block"},children:(0,I.uK)(t.createdAt)})]})]},n)}var B=n(62854);const F=(0,x.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}})),N=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",margin:t.spacing(1.5,0)}})),E=(0,x.Ay)(v.A)((e=>{let{theme:t}=e;return{width:16,height:16,marginTop:4,marginRight:t.spacing(1),color:t.palette.text.secondary}})),L=(0,x.Ay)(S.A)((e=>{let{theme:t}=e;return{flexGrow:1,maxWidth:160,wordWrap:"break-word",...t.typography.body2}}));function G(e){let{participants:t,isCollapse:n,onCollapse:i}=e;const r=[...t][0];return void 0===r?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{pt:4,pb:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,D.jsx)(B.A,{alt:r.name,src:r.avatar,sx:{width:96,height:96}}),(0,D.jsxs)(g.A,{sx:{mt:2,textAlign:"center"},children:[(0,D.jsx)(S.A,{variant:"subtitle1",children:r.name}),(0,D.jsx)(S.A,{variant:"body2",sx:{color:"text.secondary"},children:r.position})]})]}),(0,D.jsx)(m.A,{}),(0,D.jsx)(F,{fullWidth:!0,color:"inherit",onClick:i,endIcon:(0,D.jsx)(v.A,{icon:n?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:"information"}),(0,D.jsx)(k.A,{in:n,children:(0,D.jsxs)(g.A,{sx:{px:2.5,pb:1},children:[(0,D.jsxs)(N,{children:[(0,D.jsx)(E,{icon:"eva:pin-fill"}),(0,D.jsx)(L,{children:r.address})]}),(0,D.jsxs)(N,{children:[(0,D.jsx)(E,{icon:"eva:phone-fill"}),(0,D.jsx)(L,{children:r.phone})]}),(0,D.jsxs)(N,{children:[(0,D.jsx)(E,{icon:"eva:email-fill"}),(0,D.jsx)(L,{children:r.email})]})]})})]})}var H=n(249),X=n(57357),U=n(16233),q=n(83563);const Y=(0,x.Ay)("span")((e=>{let{theme:t,ownerState:n}=e;const{status:i,size:r}=n;return{width:10,height:10,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center","&:before, &:after":{content:"''",borderRadius:1,backgroundColor:t.palette.common.white},..."small"===r&&{width:8,height:8},..."large"===r&&{width:12,height:12},..."offline"===i&&{backgroundColor:"transparent"},..."away"===i&&{backgroundColor:t.palette.warning.main,"&:before":{width:2,height:4,transform:"translateX(1px) translateY(-1px)"},"&:after":{width:2,height:4,transform:"translateY(1px) rotate(125deg)"}},..."busy"===i&&{backgroundColor:t.palette.error.main,"&:before":{width:6,height:2}},..."online"===i&&{backgroundColor:t.palette.success.main},..."invisible"===i&&{backgroundColor:t.palette.text.disabled,"&:before":{width:6,height:6,borderRadius:"50%"}},..."unread"===i&&{backgroundColor:t.palette.info.main}}}));function K(e){let{size:t="medium",status:n="offline",...i}=e;return(0,D.jsx)(Y,{ownerState:{status:n,size:t},...i})}var Z=n(28170),Q=n(20131);const V=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",marginTop:t.spacing(1.5)}}));function $(e){let{participant:t,isOpen:n,onClose:i}=e;const{name:r,avatar:a,position:s,address:o,phone:l,email:c}=t;return(0,D.jsx)(Q.ys,{fullWidth:!0,maxWidth:"xs",open:n,onClose:i,children:(0,D.jsxs)(Z.A,{sx:{pb:5,textAlign:"center"},children:[(0,D.jsx)(B.A,{alt:r,src:a,sx:{mt:5,mb:2,mx:"auto",width:96,height:96}}),(0,D.jsx)(S.A,{variant:"h6",children:r}),(0,D.jsx)(S.A,{variant:"body2",paragraph:!0,sx:{color:"text.secondary"},children:s}),(0,D.jsxs)(V,{children:[(0,D.jsx)(v.A,{icon:"eva:pin-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:o})]}),(0,D.jsxs)(V,{children:[(0,D.jsx)(v.A,{icon:"eva:phone-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:l})]}),(0,D.jsxs)(V,{children:[(0,D.jsx)(v.A,{icon:"eva:email-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,D.jsx)(S.A,{variant:"body2",children:c})]})]})})}const J=64,ee=(0,x.Ay)(C.A)((e=>{let{theme:t}=e;return{...t.typography.overline,height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled}}));function te(e){let{participants:t,selectUserId:n,onShowPopupUserInfo:i,isCollapse:r,onCollapse:a}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(ee,{fullWidth:!0,disableRipple:!0,color:"inherit",onClick:a,endIcon:(0,D.jsx)(v.A,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["In room (",t.length,")"]}),(0,D.jsx)(g.A,{sx:{height:r?4*J:0},children:(0,D.jsx)(M.A,{children:(0,D.jsx)(k.A,{in:r,sx:{height:r?4*J:0},children:(0,D.jsx)(H.A,{disablePadding:!0,children:t.map((e=>(0,D.jsx)(ne,{participant:e,isOpen:n===e.id,onShowPopup:()=>i(e.id),onClosePopup:()=>i(null)},e.id)))})})})})]})}function ne(e){let{participant:t,isOpen:n,onClosePopup:i,onShowPopup:r}=e;const{name:a,avatar:s,status:o,position:l}=t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(X.A,{onClick:r,sx:{height:J,px:2.5},children:[(0,D.jsx)(U.A,{children:(0,D.jsxs)(g.A,{sx:{position:"relative",width:40,height:40},children:[(0,D.jsx)(B.A,{alt:a,src:s}),(0,D.jsx)(K,{status:o,sx:{right:0,bottom:0,position:"absolute"}})]})}),(0,D.jsx)(q.A,{primary:a,secondary:l,primaryTypographyProps:{variant:"subtitle2",noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}),(0,D.jsx)($,{participant:t,isOpen:n,onClose:i})]})}const ie=(0,x.Ay)((e=>(0,D.jsx)(u.A,{disableRipple:!0,...e})))((e=>{let{theme:t}=e;return{right:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(1),boxShadow:t.customShadows.z8,backgroundColor:t.palette.background.paper,border:"solid 1px ".concat(t.palette.divider),borderRight:0,borderRadius:"12px 0 0 12px",transition:t.transitions.create("all"),"&:hover":{backgroundColor:t.palette.background.neutral}}})),re=240;function ae(e){let{conversation:t,participants:n}=e;const r=(0,p.A)(),[a,s]=(0,i.useState)(!0),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[h,x]=(0,i.useState)(!0),[u,j]=(0,i.useState)(!0),y=(0,A.A)("up","lg"),b=n.length>1;(0,i.useEffect)((()=>y?w():C()),[y]);const w=()=>{s(!0)},C=()=>{s(!1)},k=(0,D.jsxs)(D.Fragment,{children:[b?(0,D.jsx)(te,{selectUserId:c,participants:n,isCollapse:u,onShowPopupUserInfo:e=>d(e),onCollapse:()=>j((e=>!e))}):(0,D.jsx)("div",{children:(0,D.jsx)(G,{participants:n,isCollapse:o,onCollapse:()=>l((e=>!e))})}),(0,D.jsx)(m.A,{}),(0,D.jsx)(z,{conversation:t,isCollapse:h,onCollapse:()=>x((e=>!e))})]});return(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(ie,{onClick:()=>{s((e=>!e))},sx:{...a&&y&&{right:re}},children:(0,D.jsx)(v.A,{width:16,height:16,icon:a?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),y?(0,D.jsx)(f.Ay,{open:a,anchor:"right",variant:"persistent",sx:{height:1,width:re,transition:r.transitions.create("width"),...!a&&{width:"0px"},"& .MuiDrawer-paper":{position:"static",width:re}},children:k}):(0,D.jsx)(f.Ay,{anchor:"right",ModalProps:{keepMounted:!0},open:a,onClose:C,sx:{"& .MuiDrawer-paper":{width:re}},children:k})]})}var se=n(13564),oe=n(12257),le=n(94416),ce=n(20053),de=n(27476),he=n(98889),xe=n(12521),pe=n(43298),ue=n(78397),me=6e4,ge=1440,fe=30*ge,Ae=365*ge;function ve(e,t){return(0,ue.A)(1,arguments),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,ue.A)(2,arguments);var i=n.locale||pe.A;if(!i.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=(0,de.A)(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var a,s,o=(0,xe.A)(n);o.addSuffix=Boolean(n.addSuffix),o.comparison=r,r>0?(a=(0,he.A)(t),s=(0,he.A)(e)):(a=(0,he.A)(e),s=(0,he.A)(t));var l,c=null==n.roundingMethod?"round":String(n.roundingMethod);if("floor"===c)l=Math.floor;else if("ceil"===c)l=Math.ceil;else{if("round"!==c)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var d,h=s.getTime()-a.getTime(),x=h/me,p=(h-((0,ce.A)(s)-(0,ce.A)(a)))/me;if("second"===(d=null==n.unit?x<1?"second":x<60?"minute":x<ge?"hour":p<fe?"day":p<Ae?"month":"year":String(n.unit))){var u=l(h/1e3);return i.formatDistance("xSeconds",u,o)}if("minute"===d){var m=l(x);return i.formatDistance("xMinutes",m,o)}if("hour"===d){var g=l(x/60);return i.formatDistance("xHours",g,o)}if("day"===d){var f=l(p/ge);return i.formatDistance("xDays",f,o)}if("month"===d){var A=l(p/fe);return 12===A&&"month"!==n.unit?i.formatDistance("xYears",1,o):i.formatDistance("xMonths",A,o)}if("year"===d){var v=l(p/Ae);return i.formatDistance("xYears",v,o)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),t)}var je=n(63575);const ye=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",marginBottom:t.spacing(3)}})),be=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{maxWidth:320,padding:t.spacing(1.5),marginTop:t.spacing(.5),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral}})),we=(0,x.Ay)(S.A)((e=>{let{theme:t}=e;return{display:"flex",marginBottom:t.spacing(.75),color:t.palette.text.secondary}}));function Ce(e){let{message:t,conversation:n,onOpenLightbox:i}=e;const r=n.participants.find((e=>e.id===t.senderId)),a="8864c717-587d-472a-929a-8e5f298024da-0"===t.senderId?{type:"me"}:{avatar:null===r||void 0===r?void 0:r.avatar,name:null===r||void 0===r?void 0:r.name},s="me"===a.type,o="image"===t.contentType,l=a.name&&a.name.split(" ")[0];return(0,D.jsx)(ye,{children:(0,D.jsxs)(g.A,{sx:{display:"flex",...s&&{ml:"auto"}},children:["me"!==a.type&&(0,D.jsx)(B.A,{alt:a.name,src:a.avatar,sx:{width:32,height:32,mr:2}}),(0,D.jsxs)("div",{children:[(0,D.jsxs)(we,{variant:"caption",sx:{...s&&{justifyContent:"flex-end"}},children:[!s&&"".concat(l,","),"\xa0",ve(new Date(t.createdAt),{addSuffix:!0})]}),(0,D.jsx)(be,{sx:{...s&&{color:"grey.800",bgcolor:"primary.lighter"},...o&&{p:0}},children:o?(0,D.jsx)(je.A,{alt:"attachment",src:t.body,onClick:()=>i(t.body),sx:{borderRadius:1,cursor:"pointer","&:hover":{opacity:.8}}}):(0,D.jsx)(S.A,{variant:"body2",children:t.body})})]})]})})}function ke(e){let{conversation:t}=e;const n=(0,i.useRef)(null),[r,a]=(0,i.useState)(!1),[s,o]=(0,i.useState)(0);(0,i.useEffect)((()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t.messages]);const l=t.messages.filter((e=>"image"===e.contentType)).map((e=>e.body)),c=e=>{const t=l.findIndex((t=>t===e));a(!0),o(t)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.A,{scrollableNodeProps:{ref:n},sx:{p:3,height:1},children:t.messages.map((e=>(0,D.jsx)(Ce,{message:e,conversation:t,onOpenLightbox:c},e.id)))}),(0,D.jsx)(le.A,{images:l,mainSrc:l[s],photoIndex:s,setPhotoIndex:o,isOpen:r,onCloseRequest:()=>a(!1)})]})}var Se=n(9693),Ie=n(34339),Re=n(22707);const Me=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{flexShrink:0,minHeight:92,display:"flex",alignItems:"center",padding:t.spacing(0,3)}}));function De(e){let{participants:t}=e;const n=t.length>1;return(0,D.jsxs)(Me,{children:[n?(0,D.jsx)(Pe,{participants:t}):(0,D.jsx)(Te,{participants:t}),(0,D.jsx)(g.A,{sx:{flexGrow:1}}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:phone-fill",width:20,height:20})}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:video-fill",width:20,height:20})}),(0,D.jsx)(u.A,{children:(0,D.jsx)(v.A,{icon:"eva:more-vertical-fill",width:20,height:20})})]})}function Te(e){let{participants:t}=e;const n=[...t][0];return void 0!==n&&n.status?(0,D.jsxs)(g.A,{sx:{display:"flex",alignItems:"center"},children:[(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(B.A,{src:n.avatar,alt:n.name}),(0,D.jsx)(K,{status:n.status,sx:{position:"absolute",right:2,bottom:2}})]}),(0,D.jsxs)(g.A,{sx:{ml:2},children:[(0,D.jsx)(S.A,{variant:"subtitle2",children:n.name}),(0,D.jsx)(S.A,{variant:"body2",sx:{color:"text.secondary"},children:"offline"!==n.status?(0,Se.D)(n.status):(0,I.kH)(n.lastActivity||"")})]})]}):null}function Pe(e){let{participants:t}=e;return(0,D.jsxs)("div",{children:[(0,D.jsx)(Ie.A,{max:3,sx:{mb:.5,"& .MuiAvatar-root":{width:32,height:32}},children:t.map((e=>(0,D.jsx)(B.A,{alt:e.name,src:e.avatar},e.id)))}),(0,D.jsx)(Re.A,{variant:"body2",underline:"none",component:"button",color:"text.secondary",onClick:()=>{},children:(0,D.jsxs)(g.A,{sx:{display:"flex",alignItems:"center"},children:[t.length," persons",(0,D.jsx)(v.A,{icon:"eva:arrow-ios-forward-fill"})]})})]})}var _e=n(82321),We=n(2046),ze=n(76738),Oe=n(84966);const Be=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{minHeight:56,display:"flex",position:"relative",alignItems:"center",paddingLeft:t.spacing(2)}}));function Fe(e){let{disabled:t,conversationId:n,onSend:r}=e;const a=(0,i.useRef)(null),[s,o]=(0,i.useState)(""),l=()=>{var e;null===(e=a.current)||void 0===e||e.click()},c=()=>s?(r&&n&&r({conversationId:n,messageId:(0,ze.A)(),message:s,contentType:"text",attachments:[],createdAt:new Date,senderId:"8864c717-587d-472a-929a-8e5f298024da-0"}),o("")):"";return(0,D.jsxs)(Be,{children:[(0,D.jsx)(_e.A,{disabled:t,fullWidth:!0,value:s,disableUnderline:!0,onKeyUp:e=>{"Enter"===e.key&&c()},onChange:e=>o(e.target.value),placeholder:"Type a message",startAdornment:(0,D.jsx)(We.A,{position:"start",children:(0,D.jsx)(Oe.A,{disabled:t,value:s,setValue:o})}),endAdornment:(0,D.jsxs)(oe.A,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:[(0,D.jsx)(u.A,{disabled:t,size:"small",onClick:l,children:(0,D.jsx)(v.A,{icon:"ic:round-add-photo-alternate",width:22,height:22})}),(0,D.jsx)(u.A,{disabled:t,size:"small",onClick:l,children:(0,D.jsx)(v.A,{icon:"eva:attach-2-fill",width:22,height:22})}),(0,D.jsx)(u.A,{disabled:t,size:"small",children:(0,D.jsx)(v.A,{icon:"eva:mic-fill",width:22,height:22})})]})}),(0,D.jsx)(m.A,{orientation:"vertical",flexItem:!0}),(0,D.jsx)(u.A,{color:"primary",disabled:!s,onClick:c,sx:{mx:1},children:(0,D.jsx)(v.A,{icon:"ic:round-send",width:22,height:22})}),(0,D.jsx)("input",{type:"file",ref:a,style:{display:"none"}})]})}var Ne=n(55471),Ee=n.n(Ne),Le=n(99573),Ge=n.n(Le),He=n(19657),Xe=n(41205),Ue=n(25277),qe=n(63916),Ye=n(97751);const Ke=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(2,3)}})),Ze=(0,x.Ay)("div")((e=>{let{theme:t}=e;return{"& .MuiAutocomplete-root":{minWidth:280,marginLeft:t.spacing(2),"&.Mui-focused .MuiAutocomplete-inputRoot":{boxShadow:t.customShadows.z8}},"& .MuiAutocomplete-inputRoot":{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}}));function Qe(e){let{contacts:t,recipients:n,onAddRecipients:r}=e;const[a,s]=(0,i.useState)("");return(0,D.jsxs)(Ke,{children:[(0,D.jsx)(S.A,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),(0,D.jsx)(Ze,{children:(0,D.jsx)(Xe.A,{multiple:!0,size:"small",disablePortal:!0,popupIcon:null,noOptionsText:(0,D.jsx)(Ye.A,{searchQuery:a}),onChange:(e,t)=>(e=>{s(""),r(e)})(t),onInputChange:(e,t)=>s(t),options:t,getOptionLabel:e=>e.name,renderOption:(e,t,n)=>{let{inputValue:i,selected:r}=n;const{name:a,avatar:s}=t,o=Ge()(a,i),l=Ee()(a,o);return(0,D.jsxs)(g.A,{component:"li",sx:{p:"12px !important"},...e,children:[(0,D.jsxs)(g.A,{sx:{mr:1.5,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,D.jsx)(B.A,{alt:a,src:s}),(0,D.jsx)(g.A,{sx:{top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:e=>(0,He.X4)(e.palette.grey[900],.8),transition:e=>e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter}),...r&&{opacity:1,color:"primary.main"}},children:(0,D.jsx)(v.A,{icon:"eva:checkmark-fill",width:20,height:20})})]}),l.map(((e,t)=>(0,D.jsx)(S.A,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},t)))]})},renderTags:(e,t)=>e.map(((e,n)=>{const{id:r,name:a,avatar:s}=e;return(0,i.createElement)(Ue.A,{...t({index:n}),key:r,size:"small",label:a,color:"info",avatar:(0,D.jsx)(B.A,{alt:a,src:s})})})),renderInput:e=>(0,D.jsx)(qe.A,{...e,placeholder:0===n.length?"Recipients":""})})})]})}const Ve=e=>{const{conversations:t,activeConversationId:n}=e.chat,i=n?t.byId[n]:null;if(i)return i;return{id:"",messages:[],participants:[],unreadCount:0,type:""}};function $e(){const e=(0,s.wA)(),t=(0,se.Zp)(),{pathname:n}=(0,se.zy)(),{conversationKey:r}=(0,se.g)(),{contacts:a,recipients:c,participants:d,activeConversationId:h}=(0,s.d4)((e=>e.chat)),x=(0,s.d4)((e=>Ve(e))),p=r?"DETAIL":"COMPOSE",u=d.filter((e=>"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id));(0,i.useEffect)((()=>{r?(async()=>{e((0,o.Ln)(r));try{await e((0,o.xo)(r))}catch(n){console.error(n),t(l.nB.chat.new)}})():h&&e((0,o.lO)())}),[r]),(0,i.useEffect)((()=>{h&&e((0,o.$G)(h))}),[e,h]);return(0,D.jsxs)(oe.A,{sx:{flexGrow:1,minWidth:"1px"},children:["DETAIL"===p?(0,D.jsx)(De,{participants:u}):(0,D.jsx)(Qe,{recipients:c,contacts:Object.values(a.byId),onAddRecipients:t=>{e((0,o.QL)(t))}}),(0,D.jsx)(m.A,{}),(0,D.jsxs)(g.A,{sx:{flexGrow:1,display:"flex",overflow:"hidden"},children:[(0,D.jsxs)(oe.A,{sx:{flexGrow:1},children:[(0,D.jsx)(ke,{conversation:x}),(0,D.jsx)(m.A,{}),(0,D.jsx)(Fe,{conversationId:h,onSend:async t=>{try{e((0,o.t2)(t))}catch(n){console.error(n)}},disabled:n===l.nB.chat.new})]}),"DETAIL"===p&&(0,D.jsx)(ae,{conversation:x,participants:u})]})]})}var Je=n(83274),et=n(23266),tt=n(93523),nt=n(33507),it=n(45359),rt=n(70458);const at=["online","invisible","away"];function st(){const{user:e}=(0,nt.A)(),[t,n]=(0,i.useState)("online"),[r,a]=(0,i.useState)(null),s={mr:2,width:20,height:20};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{position:"relative"},children:[(0,D.jsx)(it.A,{onClick:e=>{a(e.currentTarget)},sx:{cursor:"pointer",width:48,height:48}}),(0,D.jsx)(K,{status:t,sx:{position:"absolute",bottom:2,right:2}})]}),(0,D.jsxs)(rt.A,{open:Boolean(r),anchorEl:r,onClose:()=>{a(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},arrow:"left-top",sx:{p:0,ml:.5,width:"auto"},children:[(0,D.jsxs)(oe.A,{direction:"row",alignItems:"center",spacing:2,sx:{py:2,pr:1,pl:2.5},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(S.A,{noWrap:!0,variant:"subtitle1",children:null===e||void 0===e?void 0:e.first_name}),(0,D.jsx)(S.A,{noWrap:!0,variant:"body2",sx:{color:"text.secondary"},children:null===e||void 0===e?void 0:e.email})]}),(0,D.jsx)(Je.A,{title:"Log out",children:(0,D.jsx)(u.A,{color:"error",children:(0,D.jsx)(v.A,{icon:"ic:round-power-settings-new",width:20,height:20})})})]}),(0,D.jsx)(m.A,{}),(0,D.jsxs)(H.A,{sx:{px:1,"& .MuiMenuItem-root":{py:1,px:2,typography:"body2",borderRadius:.75}},children:[(0,D.jsxs)(et.A,{children:[(0,D.jsx)(K,{size:"large",status:t,sx:{m:.5,flexShrink:0}}),(0,D.jsx)(tt.A,{native:!0,fullWidth:!0,value:t,onChange:e=>n(e.target.value),sx:{ml:2,"& svg":{display:"none"},"& select":{p:0,typography:"body2"},"& fieldset":{display:"none"}},children:at.map((e=>(0,D.jsx)("option",{value:e,children:(0,Se.D)(e)},e)))})]}),(0,D.jsxs)(et.A,{children:[(0,D.jsx)(v.A,{icon:"ic:round-account-box",sx:{...s}}),"Profile"]}),(0,D.jsxs)(et.A,{children:[(0,D.jsx)(v.A,{icon:"eva:settings-2-fill",sx:{...s}}),"Settings"]})]})]})]})}var ot=n(32741);function lt(e){let{query:t,results:n,onSelectContact:i}=e;const r=n.length>0;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(S.A,{paragraph:!0,variant:"subtitle1",sx:{px:3,color:"text.secondary"},children:"Contacts"}),(0,D.jsx)(H.A,{disablePadding:!0,children:n.map((e=>(0,D.jsxs)(X.A,{onClick:()=>i(e),sx:{py:1.5,px:3},children:[(0,D.jsx)(U.A,{children:(0,D.jsx)(B.A,{alt:e.name,src:e.avatar})}),(0,D.jsx)(q.A,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)))}),!r&&(0,D.jsx)(Ye.A,{searchQuery:t,sx:{p:3,mx:"auto",width:"calc(100% - 48px)",bgcolor:"background.neutral"}})]})}var ct=n(47177),dt=n(97842);function ht(e){let{query:t,onChange:n,onFocus:i,onClickAway:r}=e;return(0,D.jsx)(ct.A,{onClickAway:r,children:(0,D.jsx)(dt.A,{fullWidth:!0,size:"small",value:t,onFocus:i,onChange:n,placeholder:"Search contacts...",InputProps:{startAdornment:(0,D.jsx)(We.A,{position:"start",children:(0,D.jsx)(v.A,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})},sx:{mt:2}})})}var xt=n(2995);const pt=48,ut=32,mt=(0,x.Ay)(X.A)((e=>{let{theme:t}=e;return{padding:t.spacing(1.5,3),transition:t.transitions.create("all")}})),gt=(0,x.Ay)("div")({position:"relative",width:pt,height:pt,"& .MuiAvatar-img":{borderRadius:"50%"},"& .MuiAvatar-root":{width:"100%",height:"100%"}}),ft=(e,t)=>{const n=e.participants.filter((e=>e.id!==t)),i=n.reduce(((e,t)=>[...e,t.name]),[]).join(", ");let r="";const a=e.messages[e.messages.length-1];if(a){const e=a.senderId===t?"You: ":"",n="image"===a.contentType?"Sent a photo":a.body;r="".concat(e).concat(n)}return{otherParticipants:n,displayNames:i,displayText:r}};function At(e){let{isSelected:t,conversation:n,isOpenSidebar:i,onSelectConversation:r}=e;const a=ft(n,"8864c717-587d-472a-929a-8e5f298024da-0"),s=n.messages[n.messages.length-1].createdAt,o=a.otherParticipants.length>1,l=n.unreadCount>0,c=o&&a.otherParticipants.map((e=>e.status)).includes("online");return(0,D.jsxs)(mt,{onClick:r,sx:{...t&&{bgcolor:"action.selected"}},children:[(0,D.jsx)(U.A,{children:(0,D.jsxs)(g.A,{sx:{...o&&{position:"relative",width:pt,height:pt,"& .avatarWrapper":{position:"absolute",width:ut,height:ut,"&:nth-of-type(1)":{left:0,zIndex:9,bottom:2,"& .MuiAvatar-root":{border:e=>"solid 2px ".concat(e.palette.background.paper)}},"&:nth-of-type(2)":{top:2,right:0}}}},children:[a.otherParticipants.slice(0,2).map((e=>(0,D.jsxs)(gt,{className:"avatarWrapper",children:[(0,D.jsx)(B.A,{alt:e.name,src:e.avatar}),!o&&(0,D.jsx)(K,{status:e.status,sx:{right:2,bottom:2,position:"absolute"}})]},e.id))),c&&(0,D.jsx)(K,{status:"online",sx:{right:2,bottom:2,position:"absolute"}})]})}),i&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(q.A,{primary:a.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:a.displayText,secondaryTypographyProps:{noWrap:!0,variant:l?"subtitle2":"body2",color:l?"textPrimary":"textSecondary"}}),(0,D.jsxs)(g.A,{sx:{ml:2,height:44,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[(0,D.jsx)(g.A,{sx:{mb:1.25,fontSize:12,lineHeight:"22px",whiteSpace:"nowrap",color:"text.disabled"},children:ve(new Date(s),{addSuffix:!1})}),l&&(0,D.jsx)(K,{status:"unread",size:"small"})]})]})]})}function vt(e){let{conversations:t,isOpenSidebar:n,activeConversationId:i,sx:r,...a}=e;const s=(0,se.Zp)(),o=!t.allIds.length;return(0,D.jsx)(H.A,{disablePadding:!0,sx:r,...a,children:(o?[...Array(12)]:t.allIds).map(((e,r)=>e?(0,D.jsx)(At,{isOpenSidebar:n,conversation:t.byId[e],isSelected:i===e,onSelectConversation:()=>(e=>{let n="";const i=t.byId[e];if("GROUP"===i.type)n=i.id;else{const e=i.participants.find((e=>"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id));null!==e&&void 0!==e&&e.username&&(n=null===e||void 0===e?void 0:e.username)}s(l.nB.chat.view(n))})(e)},e):(0,D.jsx)(xt.E2,{},r)))})}const jt=(0,x.Ay)((e=>(0,D.jsx)(u.A,{disableRipple:!0,...e})))((e=>{let{theme:t}=e;return{left:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(13),borderRadius:"0 12px 12px 0",color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,boxShadow:t.customShadows.primary,"&:hover":{backgroundColor:t.palette.primary.darker}}})),yt=320,bt=96;function wt(){const e=(0,p.A)(),t=(0,se.Zp)(),{pathname:n}=(0,se.zy)(),[r,a]=(0,i.useState)(!0),[o,c]=(0,i.useState)(""),[d,h]=(0,i.useState)([]),[x,m]=(0,i.useState)(!1),{conversations:j,activeConversationId:y}=(0,s.d4)((e=>e.chat)),b=(0,A.A)("up","md"),w=o&&x,C=b&&!r;(0,i.useEffect)((()=>b?k():S()),[b,n]),(0,i.useEffect)((()=>{if(!r)return m(!1)}),[r]);const k=()=>{a(!0)},S=()=>{a(!1)},I=()=>{a((e=>!e))},R=e=>{m(!1),c(""),t(l.nB.chat.view(e))},T=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g.A,{sx:{py:2,px:3},children:[(0,D.jsxs)(oe.A,{direction:"row",alignItems:"center",justifyContent:"center",children:[!C&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(st,{}),(0,D.jsx)(g.A,{sx:{flexGrow:1}})]}),(0,D.jsx)(u.A,{onClick:I,children:(0,D.jsx)(v.A,{width:20,height:20,icon:r?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"})}),!C&&(0,D.jsx)(u.A,{onClick:()=>t(l.nB.chat.new),children:(0,D.jsx)(v.A,{icon:"eva:edit-fill",width:20,height:20})})]}),!C&&(0,D.jsx)(ht,{query:o,onFocus:()=>{m(!0)},onChange:async e=>{try{const{value:t}=e.target;if(c(t),t){const e=await ot.A.get("/api/chat/search",{params:{query:t}});h(e.data.results)}else h([])}catch(t){console.error(t)}},onClickAway:()=>{m(!1),c("")}})]}),(0,D.jsx)(M.A,{children:w?(0,D.jsx)(lt,{query:o,results:d,onSelectContact:e=>{R&&R(e.username)}}):(0,D.jsx)(vt,{conversations:j,isOpenSidebar:r,activeConversationId:y,sx:{...x&&{display:"none"}}})})]});return(0,D.jsxs)(D.Fragment,{children:[!b&&(0,D.jsx)(jt,{onClick:I,children:(0,D.jsx)(v.A,{width:16,height:16,icon:"eva:people-fill"})}),b?(0,D.jsx)(f.Ay,{open:r,variant:"persistent",sx:{width:yt,transition:e.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",width:yt},...C&&{width:bt,"& .MuiDrawer-paper":{width:bt,position:"static",transform:"none !important",visibility:"visible !important"}}},children:T}):(0,D.jsx)(f.Ay,{ModalProps:{keepMounted:!0},open:r,onClose:S,sx:{"& .MuiDrawer-paper":{width:yt}},children:T})]})}function Ct(){const{themeStretch:e}=(0,c.A)(),t=(0,s.wA)();return(0,i.useEffect)((()=>{t((0,o.lS)()),t((0,o.kK)())}),[t]),(0,D.jsx)(d.A,{title:"Chat",children:(0,D.jsxs)(r.A,{maxWidth:!e&&"xl",children:[(0,D.jsx)(h.A,{heading:"Chat",links:[{name:"Dashboard",href:l.nB.root},{name:"Chat"}]}),(0,D.jsxs)(a.A,{sx:{height:"72vh",display:"flex"},children:[(0,D.jsx)(wt,{}),(0,D.jsx)($e,{})]})]})})}},34437:(e,t,n)=>{"use strict";n.d(t,{j5:()=>o,kH:()=>l,ts:()=>a,uK:()=>s});var i=n(43974),r=n(1369);function a(e){return(0,i.A)(new Date(e),"dd MMMM yyyy")}function s(e){return(0,i.A)(new Date(e),"dd MMM yyyy HH:mm")}function o(e){return(0,i.A)(new Date(e),"dd/MM/yyyy hh:mm p")}function l(e){return(0,r.A)(new Date(e),{addSuffix:!0})}},50570:(e,t,n)=>{"use strict";n.d(t,{Nl:()=>g,WP:()=>m,ZR:()=>A,ti:()=>u});var i=n(63575),r=n(66075),a=n(44414);const s=["jpg","jpeg","gif","bmp","png"],o=["m4v","avi","mpg","mp4","webm"],l=["doc","docx"],c=["xls","xlsx"],d=["ppt","pptx"],h=["pdf"],x=["psd"],p=["ai","esp"];function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e.split(".").pop()||""}function m(e){return e.substring(e.lastIndexOf("/")+1).replace(/\.[^/.]+$/,"")}function g(e){return e.split("/").pop()}const f=e=>(0,a.jsx)(i.A,{src:"https://minimal-assets-api.vercel.app/assets/icons/file/".concat(e,".svg"),alt:e,sx:{width:28,height:28}});function A(e){let t;switch(function(e){let t;switch(e.includes(u(e))){case s.includes(u(e)):t="image";break;case o.includes(u(e)):t="video";break;case l.includes(u(e)):t="word";break;case c.includes(u(e)):t="excel";break;case d.includes(u(e)):t="powerpoint";break;case h.includes(u(e)):t="pdf";break;case x.includes(u(e)):t="photoshop";break;case p.includes(u(e)):t="illustrator";break;default:t=u(e)}return t}(e)){case"video":t=f("format_video");break;case"word":t=f("format_word");break;case"excel":t=f("format_excel");break;case"powerpoint":t=f("format_powerpoint");break;case"pdf":t=f("format_pdf");break;case"photoshop":t=f("format_photoshop");break;case"illustrator":t=f("format_ai");break;case"image":t=(0,a.jsx)(i.A,{src:e,alt:e,sx:{height:1}});break;default:t=(0,a.jsx)(r.A,{icon:"eva:file-fill",sx:{width:28,height:28}})}return t}},76738:(e,t,n)=>{"use strict";function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}n.d(t,{A:()=>i})},28170:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(98587),r=n(58168),a=n(9950),s=n(2803),o=n(5747),l=n(7951),c=n(79859),d=n(37665);function h(e){return(0,d.A)("MuiDialogContent",e)}(0,n(44245).A)("MuiDialogContent",["root","dividers"]);var x=n(23025),p=n(44414);const u=["className","dividers"],m=(0,l.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{[".".concat(x.A.root," + &")]:{paddingTop:0}})})),g=a.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiDialogContent"}),{className:a,dividers:l=!1}=n,d=(0,i.A)(n,u),x=(0,r.A)({},n,{dividers:l}),g=(e=>{const{classes:t,dividers:n}=e,i={root:["root",n&&"dividers"]};return(0,o.A)(i,h,t)})(x);return(0,p.jsx)(m,(0,r.A)({className:(0,s.A)(g.root,a),ownerState:x,ref:t},d))}))},23025:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,t:()=>r});var i=n(37665);function r(e){return(0,i.A)("MuiDialogTitle",e)}const a=(0,n(44245).A)("MuiDialogTitle",["root"])},16233:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(98587),r=n(58168),a=n(9950),s=n(2803),o=n(5747),l=n(13372),c=n(7951),d=n(79859),h=n(37665);function x(e){return(0,h.A)("MuiListItemAvatar",e)}(0,n(44245).A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var p=n(44414);const u=["className"],m=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,r.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),g=a.forwardRef((function(e,t){const n=(0,d.A)({props:e,name:"MuiListItemAvatar"}),{className:c}=n,h=(0,i.A)(n,u),g=a.useContext(l.A),f=(0,r.A)({},n,{alignItems:g.alignItems}),A=(e=>{const{alignItems:t,classes:n}=e,i={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,o.A)(i,x,n)})(f);return(0,p.jsx)(m,(0,r.A)({className:(0,s.A)(A.root,c),ownerState:f,ref:t},h))}))},82917:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(57528),r=n(98587),a=n(58168),s=n(9950),o=n(2803),l=n(88283),c=n(5747);function d(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function h(e){return parseFloat(e)}var x=n(19657),p=n(7951),u=n(79859),m=n(37665);function g(e){return(0,m.A)("MuiSkeleton",e)}(0,n(44245).A)("MuiSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var f,A,v,j,y=n(44414);const b=["animation","className","component","height","style","variant","width"];let w,C,k,S;const I=(0,l.i7)(w||(w=f||(f=(0,i.A)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),R=(0,l.i7)(C||(C=A||(A=(0,i.A)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),M=(0,p.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const i=d(t.shape.borderRadius)||"px",r=h(t.shape.borderRadius);return(0,a.A)({display:"block",backgroundColor:(0,x.X4)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(i,"/").concat(Math.round(r/.6*10)/10).concat(i),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,l.AH)(k||(k=v||(v=(0,i.A)(["\n      animation: "," 1.5s ease-in-out 0.5s infinite;\n    "]))),I)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,l.AH)(S||(S=j||(j=(0,i.A)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 1.6s linear 0.5s infinite;\n        background: linear-gradient(90deg, transparent, ",", transparent);\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),R,n.palette.action.hover)})),D=s.forwardRef((function(e,t){const n=(0,u.A)({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:l="span",height:d,style:h,variant:x="text",width:p}=n,m=(0,r.A)(n,b),f=(0,a.A)({},n,{animation:i,component:l,variant:x,hasChildren:Boolean(m.children)}),A=(e=>{const{classes:t,variant:n,animation:i,hasChildren:r,width:a,height:s}=e,o={root:["root",n,i,r&&"withChildren",r&&!a&&"fitContent",r&&!s&&"heightAuto"]};return(0,c.A)(o,g,t)})(f);return(0,y.jsx)(M,(0,a.A)({as:l,ref:t,className:(0,o.A)(A.root,s),ownerState:f},m,{style:(0,a.A)({width:p,height:d},h)}))}))},80561:(e,t,n)=>{var i=n(88183);e.exports=function(e){return e&&e.length?i(e):[]}}}]);