"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3654],{13654:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(9950),a=r(79537),i=r(12257),l=r(75165),s=r(6368),o=r(82053),d=r(48089),c=r(74745),h=r(1320),u=r(15769),g=r(34075),f=r(91434),p=r(29031),x=r(73878),w=r(13564),m=r(26689),j=r(90260),A=r(46765),S=r(86608),v=r(38861),C=(r(22704),r(66075)),O=r(44185),y=r(63358),b=r(72870),D=r(93455),_=r(14857),P=r(9213),k=r(21671),B=r(93038),T=r(23266),E=r(34437),F=(r(33949),r(44414));function R(e){let{row:t,selected:r,onSelectRow:a,onAssign:i,onViewRow:l,onDocumentUpload:s,onDownloadDocument:o,onDeleteRow:d,onEditRow:c,onOrderContin:h,onStatusChange:u}=e;(0,_.A)();const{pathname:g}=(0,w.zy)(),{updated_at:f,property_type:p,transaction_type:x,purchase_price:m,file_no:j,file_name:A}=(g.includes("admin"),t),[S,v]=(0,n.useState)(null),O=()=>{v(null)};return(0,F.jsxs)(P.A,{hover:!0,selected:r,children:[(a||r)&&(0,F.jsx)(k.A,{padding:"checkbox",children:(0,F.jsx)(B.A,{checked:r,onClick:a})}),(0,F.jsx)(k.A,{align:"left",children:j}),(0,F.jsx)(k.A,{align:"left",children:A}),(0,F.jsx)(k.A,{align:"left",children:f&&(0,E.ts)(f)}),(0,F.jsx)(k.A,{align:"left",children:p}),(0,F.jsx)(k.A,{align:"left",children:x}),(0,F.jsx)(k.A,{align:"left",children:m}),(0,F.jsx)(k.A,{align:"right",children:(0,F.jsx)(b.ZE,{open:S,onOpen:e=>{v(e.currentTarget)},onClose:O,actions:(0,F.jsxs)(F.Fragment,{children:[h&&(0,F.jsxs)(T.A,{onClick:()=>{h(),O()},children:[(0,F.jsx)(C.A,{icon:"akar-icons:schedule"}),"Order"]}),d&&(0,F.jsxs)(T.A,{onClick:()=>{d(),O()},sx:{color:"error.main"},children:[(0,F.jsx)(C.A,{icon:"eva:trash-2-outline"}),"Delete"]}),(0,F.jsxs)(T.A,{onClick:()=>{c(),O()},children:[(0,F.jsx)(C.A,{icon:"eva:edit-fill"}),"Edit"]})]})})})]})}var N=r(32741),V=r(95074);r(42686);const L=[{id:"file_no",label:"File No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"updated_at",label:"Date",align:"left",width:600},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}];function I(){const{themeStretch:e}=(0,S.A)(),t=((0,x.wA)(),(0,w.Zp)()),{enqueueSnackbar:r}=(0,p.dh)(),{dense:_,page:P,order:k,orderBy:B,rowsPerPage:T,setPage:E,selected:I,setSelected:z,onSort:q,onChangeDense:W,onChangePage:Z,onChangeRowsPerPage:U}=(0,v.Ay)({defaultOrderBy:"createDate"}),[Y,G]=(0,n.useState)([]),[H,J]=(0,n.useState)(""),[K,M]=(0,n.useState)("new"),[Q,X]=(0,n.useState)(null),[$,ee]=(0,n.useState)(null),{currentTab:te,onChangeTab:re}=(0,A.A)("all"),[ne,ae]=(0,n.useState)("Title Insurance"),[ie,le]=(0,n.useState)(!1),[se,oe]=(0,n.useState)(""),[de,ce]=(0,n.useState)(null);Boolean(de);(0,n.useEffect)((()=>{(()=>{le(!0);try{N.A.get("user/user_file").then((e=>{le(!1);const t=e.data;200===e.status?(console.log(e,"getfile"),G(t.files)):r(t.message)}))}catch(e){le(!1),e.errors&&Object.keys(e.errors).map((t=>r(e.errors[t][0],{variant:"error"})))}})()}),[]);const he=function(e){let{tableData:t,comparator:r,filterName:n,filterStatus:a,filterService:i,filterStartDate:l,filterEndDate:s}=e;const o=t.map(((e,t)=>[e,t]));o.sort(((e,t)=>{const n=r(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t=o.map((e=>e[0])),n&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(n.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(n.toLowerCase()))));"all"!==a&&(t=t.filter((e=>e.status===a)));"new"!==i&&(t=t.filter((e=>e.status===i)));l&&s&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=s.getTime())));return t}({tableData:Y,comparator:(0,v.hz)(k,B),filterName:H,filterService:K,filterStatus:te,filterStartDate:Q,filterEndDate:$}),ue=_?56:76,ge=!he.length&&!!H||!he.length&&!!te||!he.length&&!!K||!he.length&&!!$||!he.length&&!!Q;return(0,F.jsxs)(a.A,{maxWidth:!e&&"lg",children:[ie&&(0,F.jsx)(V.A,{}),(0,F.jsx)(y.A,{heading:"Your Files",links:[{name:"Dashboard",href:j.nB.root},{name:"Orders"}],action:(0,F.jsx)(i.A,{gap:1,direction:"row",children:(0,F.jsx)(l.A,{variant:"contained",component:m.N_,to:"/dashboard/addfile",startIcon:(0,F.jsx)(C.A,{icon:"clarity:form-line"}),children:"New File"})})}),(0,F.jsx)(s.A,{sx:{p:2},children:(0,F.jsx)(o.A,{variant:"h4",gutterBottom:!0,children:ne.label})}),(0,F.jsxs)(d.A,{children:[(0,F.jsx)(c.A,{}),(0,F.jsx)(D.F,{filterName:H,filterService:K,filterStartDate:Q,filterEndDate:$,onFilterName:e=>{J(e),E(0)},onFilterService:e=>{M(e.target.value)},onFilterStartDate:e=>{X(e)},onFilterEndDate:e=>{ee(e)}}),(0,F.jsx)(O.A,{children:(0,F.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,F.jsxs)(u.A,{size:_?"small":"medium",children:[(0,F.jsx)(b.er,{order:k,orderBy:B,headLabel:L,rowCount:Y.length,numSelected:I.length,onSort:q}),(0,F.jsxs)(g.A,{children:[he.slice(P*T,P*T+T).map((e=>(0,F.jsx)(R,{row:e,onEditRow:()=>(e=>{t("/dashboard/editfile/".concat(null===e||void 0===e?void 0:e.id),{state:e})})(e),onViewRow:()=>(e=>{"Title Insurance"===ne&&t(j.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===ne&&t(j.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===ne&&t(j.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===ne&&t(j.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===ne&&t(j.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===ne&&t(j.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onOrderContin:()=>{return r=e.id,void t("/dashboard/order/".concat(r));var r},onDeleteRow:()=>{return t=e.id,le(!0),void N.A.delete("user/user_file/".concat(t)).then((e=>{if(console.log("response",e),le(!1),200===e.status||201===e.status){const e=Y.filter((e=>e.id!==t));z([]),G(e),r("Delete Successfully")}})).catch((e=>{le(!1),e.errors&&Object.keys(e.errors).map((t=>r(e.errors[t][0],{variant:"error"})))}));var t}},e.id))),(0,F.jsx)(b.dO,{height:ue,emptyRows:(0,v.xl)(P,T,Y.length)}),(0,F.jsx)(b.Sm,{isNotFound:ge})]})]})})}),(0,F.jsx)(s.A,{sx:{position:"relative"},children:(0,F.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:he.length,rowsPerPage:T,page:P,onPageChange:Z,onRowsPerPageChange:U})})]})]})}}}]);