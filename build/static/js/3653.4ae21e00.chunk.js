"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3653],{83653:(e,t,l)=>{l.r(t),l.d(t,{default:()=>N});var a=l(9950),r=l(79537),n=l(48089),o=l(68367),i=l(84142),s=l(12257),c=l(6368),d=l(82053),u=l(74745),h=l(1320),p=l(15769),g=l(34075),f=l(91434),b=l(16497),x=l(37324),m=l(29031),w=l(73878),v=l(13564),S=l(90260),A=l(46765),j=l(86608),C=l(38861),O=l(22704),y=(l(66075),l(44185)),P=l(63358),D=l(72870),B=l(93455),T=l(32741),k=l(95074),_=l(42686),E=l(44414);const L=["new","old"],R=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],F=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function N(){const{themeStretch:e}=(0,j.A)(),t=(0,w.wA)(),l=(0,v.Zp)(),{enqueueSnackbar:N}=(0,m.dh)(),{dense:I,page:V,order:q,orderBy:U,rowsPerPage:z,setPage:M,selected:W,setSelected:H,onSort:Z,onChangeDense:G,onChangePage:J,onChangeRowsPerPage:K}=(0,C.Ay)({defaultOrderBy:"createDate"}),[Q,X]=(0,a.useState)([]),[Y,$]=(0,a.useState)(""),[ee,te]=(0,a.useState)("new"),[le,ae]=(0,a.useState)(null),[re,ne]=(0,a.useState)(null),{currentTab:oe,onChangeTab:ie}=(0,A.A)("all"),[se,ce]=(0,a.useState)("Title Insurance"),[de,ue]=(0,a.useState)(!1),[he,pe]=(0,a.useState)(""),[ge,fe]=(0,a.useState)(null),{id:be}=(0,v.g)();Boolean(ge);(0,a.useEffect)((()=>{"Sightline\xae"!==se&&xe(F.find((e=>e.label===se)).api)}),[se]);const xe=e=>{ue(!0);try{T.A.get("user/all/".concat(e)).then((e=>{ue(!1);const t=e.data;200===e.status?(pe(t.filePath),X(t.orders)):N(t.message)}))}catch(t){if(ue(!1),t.errors){Object.keys(t.errors).map((e=>N(t.errors[e][0],{variant:"error"})))}}},me=function(e){let{tableData:t,comparator:l,filterName:a,filterStatus:r,filterService:n,filterStartDate:o,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const a=l(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=s.map((e=>e[0])),a&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(a.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(a.toLowerCase()))));"all"!==r&&(t=t.filter((e=>e.status===r)));"new"!==n&&(t=t.filter((e=>e.status===n)));o&&i&&(t=t.filter((e=>e.updated_at.getTime()>=o.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:Q,comparator:(0,C.hz)(q,U),filterName:Y,filterService:ee,filterStatus:oe,filterStartDate:le,filterEndDate:re}),we=I?56:76,ve=!me.length&&!!Y||!me.length&&!!oe||!me.length&&!!ee||!me.length&&!!re||!me.length&&!!le,Se=e=>Q.filter((t=>t.status===e)).length,Ae=[{value:"all",label:"All",color:"info",count:Q.length},{value:"active",label:"Active",color:"info",count:Se("active")},{value:"new",label:"New",color:"info",count:Se("new")},{value:"placed",label:"Placed",color:"info",count:Se("placed")},{value:"completed",label:"Completed",color:"success",count:Se("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Se("on hold")},{value:"draft",label:"Draft",color:"default",count:Se("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Se("cancelled")}];return(0,E.jsxs)(r.A,{maxWidth:!e&&"lg",children:[de&&(0,E.jsx)(k.A,{}),(0,E.jsx)(P.A,{heading:"All Orders",links:[{name:"Dashboard",href:S.nB.root},{name:"All Orders"}]}),(0,E.jsx)(n.A,{sx:{mb:5},children:(0,E.jsx)(o.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:se,onChange:(e,t)=>ce(t),sx:{px:2,bgcolor:"background.neutral"},children:F.map((e=>(0,E.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,E.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,E.jsx)("div",{children:e.label})})},e.label)))})}),(0,E.jsx)(c.A,{sx:{p:2},children:(0,E.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:se.label})}),(0,E.jsxs)(n.A,{children:[(0,E.jsx)(o.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:oe,onChange:ie,sx:{px:2,bgcolor:"background.neutral"},children:Ae.map((e=>(0,E.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,E.jsxs)(s.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,E.jsx)("div",{children:e.label})," ",(0,E.jsxs)(O.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,E.jsx)(u.A,{}),(0,E.jsx)(B.F,{filterName:Y,filterService:ee,filterStartDate:le,filterEndDate:re,onFilterName:e=>{$(e),M(0)},onFilterService:e=>{te(e.target.value)},onFilterStartDate:e=>{ae(e)},onFilterEndDate:e=>{ne(e)},optionsService:L}),(0,E.jsx)(y.A,{children:(0,E.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,E.jsxs)(p.A,{size:I?"small":"medium",children:[(0,E.jsx)(D.er,{order:q,orderBy:U,headLabel:R,rowCount:Q.length,numSelected:W.length,onSort:Z}),(0,E.jsxs)(g.A,{children:[me.slice(V*z,V*z+z).map((e=>(0,E.jsx)(B.o,{row:e,onViewRow:()=>(e=>{"Title Insurance"===se&&l(S.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===se&&l(S.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===se&&l(S.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===se&&l(S.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===se&&l(S.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===se&&l(S.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=he+e.name;T.A.get(t,{responseType:"blob"}).then((t=>{const l=URL.createObjectURL(t.data),a=document.createElement("a");a.download=e.name,a.href=l,a.click()})).catch((e=>N(e,{variant:"error"})))}else N("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return l=e.file_no,void t((0,_.qO)(l));var l},onDeleteRow:()=>(e=>{ue(!0);const t=F.find((e=>e.label===se)).api;T.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),ue(!1),200===t.status||201===t.status){const t=Q.filter((t=>t.id!==e));H([]),X(t),N("Delete Successfully")}})).catch((e=>{ue(!1),e.errors&&Object.keys(e.errors).map((t=>N(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,E.jsx)(D.dO,{height:we,emptyRows:(0,C.xl)(V,z,Q.length)}),(0,E.jsx)(D.Sm,{isNotFound:ve})]})]})})}),(0,E.jsxs)(c.A,{sx:{position:"relative"},children:[(0,E.jsx)(f.A,{rowsPerPageOptions:[5,10,25],component:"div",count:me.length,rowsPerPage:z,page:V,onPageChange:J,onRowsPerPageChange:K}),(0,E.jsx)(b.A,{control:(0,E.jsx)(x.A,{checked:I,onChange:G}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}}}]);