"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3654],{13654:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(9950),l=n(79537),i=n(12257),a=n(75165),o=n(6368),s=n(82053),d=n(48089),c=n(74745),h=n(1320),u=n(15769),f=n(34075),g=n(91434),p=n(29031),x=(n(73878),n(13564)),j=n(26689),m=n(90260),A=n(46765),w=n(86608),S=n(38861),v=n(58738),b=(n(22704),n(66075)),y=n(44185),C=n(63358),D=n(72870),_=n(93455),P=n(14857),k=n(9213),F=n(21671),O=n(93038),T=n(23266),E=n(34437),R=(n(33949),n(44414));function N(e){let{row:t,selected:n,onSelectRow:l,onAssign:i,onViewRow:a,onDocumentUpload:o,onDownloadDocument:s,onDeleteRow:d,onEditRow:c,onOrderContin:h,onStatusChange:u}=e;(0,P.A)();const{pathname:f}=(0,x.zy)(),{updated_at:g,property_type:p,transaction_type:j,purchase_price:m,file_no:A,file_name:w,id:S}=(f.includes("admin"),(0,x.Zp)(),t),[v,y]=(0,r.useState)(null),C=()=>{y(null)};return(0,R.jsxs)(k.A,{hover:!0,selected:n,children:[(l||n)&&(0,R.jsx)(F.A,{padding:"checkbox",children:(0,R.jsx)(O.A,{checked:n,onClick:l})}),(0,R.jsx)(F.A,{align:"left",children:A}),(0,R.jsx)(F.A,{align:"left",children:w}),(0,R.jsx)(F.A,{align:"left",children:g&&(0,E.ts)(g)}),(0,R.jsx)(F.A,{align:"left",children:p}),(0,R.jsx)(F.A,{align:"left",children:j}),(0,R.jsx)(F.A,{align:"left",children:m}),(0,R.jsx)(F.A,{align:"left",children:(0,R.jsx)(b.A,{icon:"tabler:eye-filled",onClick:()=>a()})}),(0,R.jsx)(F.A,{align:"right",children:(0,R.jsx)(D.ZE,{open:v,onOpen:e=>{y(e.currentTarget)},onClose:C,actions:(0,R.jsxs)(R.Fragment,{children:[h&&(0,R.jsxs)(T.A,{onClick:()=>{h(),C()},children:[(0,R.jsx)(b.A,{icon:"akar-icons:schedule"}),"Order"]}),d&&(0,R.jsxs)(T.A,{onClick:()=>{d(),C()},sx:{color:"error.main"},children:[(0,R.jsx)(b.A,{icon:"eva:trash-2-outline"}),"Delete"]}),(0,R.jsxs)(T.A,{onClick:()=>{c(),C()},children:[(0,R.jsx)(b.A,{icon:"eva:edit-fill"}),"Edit"]})]})})})]})}var B=n(32741),L=n(95074),z=(n(42686),n(30818));const Z=[{id:"file_no",label:"File No",align:"left",width:800},{id:"file_name",label:"File Name",align:"left",width:800},{id:"updated_at",label:"Date",align:"left",width:600},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""},{id:""}];function I(){const{themeStretch:e}=(0,w.A)(),t=(0,x.Zp)(),{enqueueSnackbar:n}=(0,p.dh)(),{dense:P,page:k,order:F,orderBy:O,rowsPerPage:T,setPage:E,selected:I,setSelected:V,onSort:W,onChangeDense:q,onChangePage:J,onChangeRowsPerPage:U}=(0,S.Ay)({defaultOrderBy:"createDate"}),[Y,G]=(0,r.useState)([]),[H,K]=(0,r.useState)(""),[M,Q]=(0,r.useState)("new"),[X,$]=(0,r.useState)(null),[ee,te]=(0,r.useState)(null),{currentTab:ne,onChangeTab:re}=(0,A.A)("all"),[le,ie]=(0,r.useState)("Title Insurance"),[ae,oe]=(0,r.useState)(!1),[se,de]=(0,r.useState)(""),[ce,he]=(0,r.useState)(null),{file:ue}=(Boolean(ce),(0,v.d4)((e=>e.File)));console.log(ue,"file details"),(0,r.useEffect)((()=>{(0,v.JD)((0,z.oc)())}),[]),(0,r.useEffect)((()=>{null!==ue&&void 0!==ue&&ue.length&&G(ue)}),[ue]);const fe=function(e){let{tableData:t,comparator:n,filterName:r,filterStatus:l,filterService:i,filterStartDate:a,filterEndDate:o}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==l&&(t=t.filter((e=>e.status===l)));"new"!==i&&(t=t.filter((e=>e.status===i)));a&&o&&(t=t.filter((e=>e.updated_at.getTime()>=a.getTime()&&e.updated_at.getTime()<=o.getTime())));return t}({tableData:Y,comparator:(0,S.hz)(F,O),filterName:H,filterService:M,filterStatus:ne,filterStartDate:X,filterEndDate:ee}),ge=P?56:76,pe=!fe.length&&!!H||!fe.length&&!!ne||!fe.length&&!!M||!fe.length&&!!ee||!fe.length&&!!X;return(0,R.jsxs)(l.A,{maxWidth:!e&&"lg",children:[ae&&(0,R.jsx)(L.A,{}),(0,R.jsx)(C.A,{heading:"Your Files",links:[{name:"Dashboard",href:m.nB.root},{name:"Orders"}],action:(0,R.jsx)(i.A,{gap:1,direction:"row",children:(0,R.jsx)(a.A,{variant:"contained",component:j.N_,to:"/dashboard/addfile",startIcon:(0,R.jsx)(b.A,{icon:"clarity:form-line"}),children:"New File"})})}),(0,R.jsx)(o.A,{sx:{p:2},children:(0,R.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:le.label})}),(0,R.jsxs)(d.A,{children:[(0,R.jsx)(c.A,{}),(0,R.jsx)(_.F,{filterName:H,filterService:M,filterStartDate:X,filterEndDate:ee,onFilterName:e=>{K(e),E(0)},onFilterService:e=>{Q(e.target.value)},onFilterStartDate:e=>{$(e)},onFilterEndDate:e=>{te(e)}}),(0,R.jsx)(y.A,{children:(0,R.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,R.jsxs)(u.A,{size:P?"small":"medium",children:[(0,R.jsx)(D.er,{order:F,orderBy:O,headLabel:Z,rowCount:Y.length,numSelected:I.length,onSort:W}),(0,R.jsxs)(f.A,{children:[fe.slice(k*T,k*T+T).map((e=>(0,R.jsx)(N,{row:e,onEditRow:()=>(e=>{t("/dashboard/editfile/".concat(null===e||void 0===e?void 0:e.id),{state:e})})(e),onViewRow:()=>(e=>{t("/dashboard/filepreview/".concat(e.id),{state:e})})(e),onOrderContin:()=>{return n=e.id,void t("/dashboard/order/".concat(n));var n},onDeleteRow:()=>{return t=e.id,oe(!0),void B.A.delete("user/user_file/".concat(t)).then((e=>{if(console.log("response",e),oe(!1),200===e.status||201===e.status){const e=Y.filter((e=>e.id!==t));V([]),G(e),n("Delete Successfully")}})).catch((e=>{oe(!1),e.errors&&Object.keys(e.errors).map((t=>n(e.errors[t][0],{variant:"error"})))}));var t}},e.id))),(0,R.jsx)(D.dO,{height:ge,emptyRows:(0,S.xl)(k,T,Y.length)}),(0,R.jsx)(D.Sm,{isNotFound:pe})]})]})})}),(0,R.jsx)(o.A,{sx:{position:"relative"},children:(0,R.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:fe.length,rowsPerPage:T,page:k,onPageChange:J,onRowsPerPageChange:U})})]})]})}}}]);