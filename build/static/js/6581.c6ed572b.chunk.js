"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[6581],{83653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var r=a(9950),n=a(79537),l=a(48089),o=a(68367),i=a(84142),s=a(12257),c=a(6368),d=a(82053),u=a(74745),h=a(1320),f=a(15769),p=a(34075),g=a(91434),m=a(16497),b=a(37324),v=a(29031),x=a(73878),w=a(13564),A=a(90260),S=a(46765),D=a(86608),j=a(38861),C=a(22704),O=(a(66075),a(44185)),y=a(63358),P=a(72870),T=a(93455),B=a(32741),M=a(95074),E=a(42686),R=a(44414);const k=["new","old"],_=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],L=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function X(){const{themeStretch:e}=(0,D.A)(),t=(0,x.wA)(),a=(0,w.Zp)(),{enqueueSnackbar:X}=(0,v.dh)(),{dense:N,page:F,order:I,orderBy:V,rowsPerPage:q,setPage:H,selected:U,setSelected:Y,onSort:z,onChangeDense:W,onChangePage:Z,onChangeRowsPerPage:G}=(0,j.Ay)({defaultOrderBy:"createDate"}),[J,K]=(0,r.useState)([]),[Q,$]=(0,r.useState)(""),[ee,te]=(0,r.useState)("new"),[ae,re]=(0,r.useState)(null),[ne,le]=(0,r.useState)(null),{currentTab:oe,onChangeTab:ie}=(0,S.A)("all"),[se,ce]=(0,r.useState)("Title Insurance"),[de,ue]=(0,r.useState)(!1),[he,fe]=(0,r.useState)(""),[pe,ge]=(0,r.useState)(null),{id:me}=(0,w.g)();Boolean(pe);(0,r.useEffect)((()=>{"Sightline\xae"!==se&&be(L.find((e=>e.label===se)).api)}),[se]);const be=e=>{ue(!0);try{B.A.get("user/all/".concat(e)).then((e=>{ue(!1);const t=e.data;200===e.status?(fe(t.filePath),K(t.orders)):X(t.message)}))}catch(t){if(ue(!1),t.errors){Object.keys(t.errors).map((e=>X(t.errors[e][0],{variant:"error"})))}}},ve=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:n,filterService:l,filterStartDate:o,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==n&&(t=t.filter((e=>e.status===n)));"new"!==l&&(t=t.filter((e=>e.status===l)));o&&i&&(t=t.filter((e=>e.updated_at.getTime()>=o.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:J,comparator:(0,j.hz)(I,V),filterName:Q,filterService:ee,filterStatus:oe,filterStartDate:ae,filterEndDate:ne}),xe=N?56:76,we=!ve.length&&!!Q||!ve.length&&!!oe||!ve.length&&!!ee||!ve.length&&!!ne||!ve.length&&!!ae,Ae=e=>J.filter((t=>t.status===e)).length,Se=[{value:"all",label:"All",color:"info",count:J.length},{value:"active",label:"Active",color:"info",count:Ae("active")},{value:"new",label:"New",color:"info",count:Ae("new")},{value:"placed",label:"Placed",color:"info",count:Ae("placed")},{value:"completed",label:"Completed",color:"success",count:Ae("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Ae("on hold")},{value:"draft",label:"Draft",color:"default",count:Ae("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Ae("cancelled")}];return(0,R.jsxs)(n.A,{maxWidth:!e&&"lg",children:[de&&(0,R.jsx)(M.A,{}),(0,R.jsx)(y.A,{heading:"All Orders",links:[{name:"Dashboard",href:A.nB.root},{name:"All Orders"}]}),(0,R.jsx)(l.A,{sx:{mb:5},children:(0,R.jsx)(o.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:se,onChange:(e,t)=>ce(t),sx:{px:2,bgcolor:"background.neutral"},children:L.map((e=>(0,R.jsx)(i.A,{disableRipple:!0,value:e.label,label:(0,R.jsx)(s.A,{spacing:1,direction:"row",alignItems:"center",children:(0,R.jsx)("div",{children:e.label})})},e.label)))})}),(0,R.jsx)(c.A,{sx:{p:2},children:(0,R.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:se.label})}),(0,R.jsxs)(l.A,{children:[(0,R.jsx)(o.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:oe,onChange:ie,sx:{px:2,bgcolor:"background.neutral"},children:Se.map((e=>(0,R.jsx)(i.A,{disableRipple:!0,value:e.value,label:(0,R.jsxs)(s.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,R.jsx)("div",{children:e.label})," ",(0,R.jsxs)(C.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,R.jsx)(u.A,{}),(0,R.jsx)(T.F,{filterName:Q,filterService:ee,filterStartDate:ae,filterEndDate:ne,onFilterName:e=>{$(e),H(0)},onFilterService:e=>{te(e.target.value)},onFilterStartDate:e=>{re(e)},onFilterEndDate:e=>{le(e)},optionsService:k}),(0,R.jsx)(O.A,{children:(0,R.jsx)(h.A,{sx:{minWidth:800,position:"relative"},children:(0,R.jsxs)(f.A,{size:N?"small":"medium",children:[(0,R.jsx)(P.er,{order:I,orderBy:V,headLabel:_,rowCount:J.length,numSelected:U.length,onSort:z}),(0,R.jsxs)(p.A,{children:[ve.slice(F*q,F*q+q).map((e=>(0,R.jsx)(T.o,{row:e,onViewRow:()=>(e=>{"Title Insurance"===se&&a(A.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===se&&a(A.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===se&&a(A.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===se&&a(A.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===se&&a(A.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===se&&a(A.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=he+e.name;B.A.get(t,{responseType:"blob"}).then((t=>{const a=URL.createObjectURL(t.data),r=document.createElement("a");r.download=e.name,r.href=a,r.click()})).catch((e=>X(e,{variant:"error"})))}else X("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return a=e.file_no,void t((0,E.qO)(a));var a},onDeleteRow:()=>(e=>{ue(!0);const t=L.find((e=>e.label===se)).api;B.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),ue(!1),200===t.status||201===t.status){const t=J.filter((t=>t.id!==e));Y([]),K(t),X("Delete Successfully")}})).catch((e=>{ue(!1),e.errors&&Object.keys(e.errors).map((t=>X(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,R.jsx)(P.dO,{height:xe,emptyRows:(0,j.xl)(F,q,J.length)}),(0,R.jsx)(P.Sm,{isNotFound:we})]})]})})}),(0,R.jsxs)(c.A,{sx:{position:"relative"},children:[(0,R.jsx)(g.A,{rowsPerPageOptions:[5,10,25],component:"div",count:ve.length,rowsPerPage:q,page:F,onPageChange:Z,onRowsPerPageChange:G}),(0,R.jsx)(m.A,{control:(0,R.jsx)(b.A,{checked:N,onChange:W}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}},12521:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(64388);function n(e){return(0,r.A)({},e)}},1369:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(27476),n=a(62588),l=a(94369),o=a(43298),i=a(98889),s=a(12521),c=a(20053),d=a(78397),u=1440,h=2520,f=43200,p=86400;function g(e,t){return(0,d.A)(1,arguments),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.A)(2,arguments);var g=a.locale||o.A;if(!g.formatDistance)throw new RangeError("locale must contain formatDistance property");var m=(0,r.A)(e,t);if(isNaN(m))throw new RangeError("Invalid time value");var b,v,x=(0,s.A)(a);x.addSuffix=Boolean(a.addSuffix),x.comparison=m,m>0?(b=(0,i.A)(t),v=(0,i.A)(e)):(b=(0,i.A)(e),v=(0,i.A)(t));var w,A=(0,l.A)(v,b),S=((0,c.A)(v)-(0,c.A)(b))/1e3,D=Math.round((A-S)/60);if(D<2)return a.includeSeconds?A<5?g.formatDistance("lessThanXSeconds",5,x):A<10?g.formatDistance("lessThanXSeconds",10,x):A<20?g.formatDistance("lessThanXSeconds",20,x):A<40?g.formatDistance("halfAMinute",null,x):A<60?g.formatDistance("lessThanXMinutes",1,x):g.formatDistance("xMinutes",1,x):0===D?g.formatDistance("lessThanXMinutes",1,x):g.formatDistance("xMinutes",D,x);if(D<45)return g.formatDistance("xMinutes",D,x);if(D<90)return g.formatDistance("aboutXHours",1,x);if(D<u){var j=Math.round(D/60);return g.formatDistance("aboutXHours",j,x)}if(D<h)return g.formatDistance("xDays",1,x);if(D<f){var C=Math.round(D/u);return g.formatDistance("xDays",C,x)}if(D<p)return w=Math.round(D/f),g.formatDistance("aboutXMonths",w,x);if((w=(0,n.A)(v,b))<12){var O=Math.round(D/f);return g.formatDistance("xMonths",O,x)}var y=w%12,P=Math.floor(w/12);return y<3?g.formatDistance("aboutXYears",P,x):y<9?g.formatDistance("overXYears",P,x):g.formatDistance("almostXYears",P+1,x)}(e,Date.now(),t)}}}]);