"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[3078],{13078:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(79537),n=a(60899),o=a(86608),l=a(8279),c=a(50430),i=a(3551),s=a(44414);function d(){const{themeStretch:e}=(0,o.A)();return(0,s.jsx)(l.A,{title:"Dashboard",children:(0,s.jsx)(r.A,{maxWidth:!e&&"xl",children:(0,s.jsxs)(n.Ay,{container:!0,spacing:3,children:[(0,s.jsx)(n.Ay,{item:!0,xs:12,md:12,children:(0,s.jsx)(c.default,{})}),(0,s.jsx)(n.Ay,{item:!0,xs:12,md:12,children:(0,s.jsx)(i.default,{})})]})})})}},50430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var r=a(9950),n=a(79537),o=a(12257),l=a(75165),c=a(97591),i=a(23266),s=a(48089),d=a(68367),u=a(84142),h=a(6368),p=a(82053),g=a(74745),x=a(1320),f=a(15769),m=a(34075),b=a(91434),j=a(16497),A=a(37324),v=a(29031),w=a(73878),S=a(13564),C=a(26689),O=a(90260),y=a(46765),P=a(86608),B=a(38861),D=a(22704),_=a(66075),N=a(44185),T=a(63358),E=a(72870),L=a(93455),k=a(32741),F=a(95074),I=a(42686),R=a(44414);const V=["new","old"],q=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],U=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function M(){const{themeStretch:e}=(0,P.A)(),t=(0,w.wA)(),a=(0,S.Zp)(),{enqueueSnackbar:M}=(0,v.dh)(),{dense:W,page:z,order:H,orderBy:Y,rowsPerPage:Z,setPage:G,selected:J,setSelected:K,onSort:Q,onChangeDense:X,onChangePage:$,onChangeRowsPerPage:ee}=(0,B.Ay)({defaultOrderBy:"createDate"}),[te,ae]=(0,r.useState)([]),[re,ne]=(0,r.useState)(""),[oe,le]=(0,r.useState)("new"),[ce,ie]=(0,r.useState)(null),[se,de]=(0,r.useState)(null),{currentTab:ue,onChangeTab:he}=(0,y.A)("all"),[pe,ge]=(0,r.useState)("Title Insurance"),[xe,fe]=(0,r.useState)(!1),[me,be]=(0,r.useState)(""),[je,Ae]=(0,r.useState)(null),{id:ve}=(0,S.g)(),we=Boolean(je);(0,r.useEffect)((()=>{"Sightline\xae"!==pe&&Se(U.find((e=>e.label===pe)).api)}),[pe]);const Se=e=>{fe(!0);try{k.A.get("user/all/".concat(e,"/").concat(ve)).then((e=>{fe(!1);const t=e.data;200===e.status?(be(t.filePath),ae(t.orders)):M(t.message)}))}catch(t){if(fe(!1),t.errors){Object.keys(t.errors).map((e=>M(t.errors[e][0],{variant:"error"})))}}},Ce=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:n,filterService:o,filterStartDate:l,filterEndDate:c}=e;const i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=i.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==n&&(t=t.filter((e=>e.status===n)));"new"!==o&&(t=t.filter((e=>e.status===o)));l&&c&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=c.getTime())));return t}({tableData:te,comparator:(0,B.hz)(H,Y),filterName:re,filterService:oe,filterStatus:ue,filterStartDate:ce,filterEndDate:se}),Oe=W?56:76,ye=!Ce.length&&!!re||!Ce.length&&!!ue||!Ce.length&&!!oe||!Ce.length&&!!se||!Ce.length&&!!ce,Pe=e=>te.filter((t=>t.status===e)).length,Be=[{value:"all",label:"All",color:"info",count:te.length},{value:"active",label:"Active",color:"info",count:Pe("active")},{value:"new",label:"New",color:"info",count:Pe("new")},{value:"placed",label:"Placed",color:"info",count:Pe("placed")},{value:"completed",label:"Completed",color:"success",count:Pe("completed")},{value:"on hold",label:"On Hold",color:"warning",count:Pe("on hold")},{value:"draft",label:"Draft",color:"default",count:Pe("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:Pe("cancelled")}];return(0,R.jsxs)(n.A,{maxWidth:!e&&"lg",children:[xe&&(0,R.jsx)(F.A,{}),(0,R.jsx)(T.A,{heading:"Your Orders",links:[{name:"Dashboard",href:O.nB.root},{name:"Orders"}],action:(0,R.jsxs)(o.A,{gap:1,direction:"row",children:[(0,R.jsx)(l.A,{variant:"contained","aria-controls":we?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":we?"true":void 0,onClick:e=>{Ae(e.currentTarget)},startIcon:(0,R.jsx)(_.A,{icon:"lets-icons:order"}),children:"New Order"}),(0,R.jsxs)(c.A,{id:"basic-menu",anchorEl:je,open:we,onClose:()=>{Ae(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.titleInsurance,"/").concat(ve),children:"Title Insurance"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.coopLienSearch,"/").concat(ve),children:"Coop Lien Search"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.eagle9Policy,"/").concat(ve),children:"Eagle 9 Policy"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.coopCondoOfferinPlans,"/").concat(ve),children:"Coop/Condo Offering Plans"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.uccCreateFile,"/").concat(ve),children:"UCC - Create/File"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.exchange1031,"/").concat(ve),children:"1031 Exchange"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.acrisETax,"/").concat(ve),children:"Acris E-Tax Forms"}),(0,R.jsx)(i.A,{component:C.N_,to:"".concat(O.nB.orders.otherSearches,"/").concat(ve),children:"Other Searches"})]}),(0,R.jsx)(l.A,{variant:"contained",component:C.N_,to:O.nB.legalForm,startIcon:(0,R.jsx)(_.A,{icon:"clarity:form-line"}),children:"Legal Forms"})]})}),(0,R.jsx)(s.A,{sx:{mb:5},children:(0,R.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:pe,onChange:(e,t)=>ge(t),sx:{px:2,bgcolor:"background.neutral"},children:U.map((e=>(0,R.jsx)(u.A,{disableRipple:!0,value:e.label,label:(0,R.jsx)(o.A,{spacing:1,direction:"row",alignItems:"center",children:(0,R.jsx)("div",{children:e.label})})},e.label)))})}),(0,R.jsx)(h.A,{sx:{p:2},children:(0,R.jsx)(p.A,{variant:"h4",gutterBottom:!0,children:pe.label})}),(0,R.jsxs)(s.A,{children:[(0,R.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ue,onChange:he,sx:{px:2,bgcolor:"background.neutral"},children:Be.map((e=>(0,R.jsx)(u.A,{disableRipple:!0,value:e.value,label:(0,R.jsxs)(o.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,R.jsx)("div",{children:e.label})," ",(0,R.jsxs)(D.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,R.jsx)(g.A,{}),(0,R.jsx)(L.F,{filterName:re,filterService:oe,filterStartDate:ce,filterEndDate:se,onFilterName:e=>{ne(e),G(0)},onFilterService:e=>{le(e.target.value)},onFilterStartDate:e=>{ie(e)},onFilterEndDate:e=>{de(e)},optionsService:V}),(0,R.jsx)(N.A,{children:(0,R.jsx)(x.A,{sx:{minWidth:800,position:"relative"},children:(0,R.jsxs)(f.A,{size:W?"small":"medium",children:[(0,R.jsx)(E.er,{order:H,orderBy:Y,headLabel:q,rowCount:te.length,numSelected:J.length,onSort:Q}),(0,R.jsxs)(m.A,{children:[Ce.slice(z*Z,z*Z+Z).map((e=>(0,R.jsx)(L.o,{row:e,onViewRow:()=>(e=>{"Title Insurance"===pe&&a(O.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===pe&&a(O.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===pe&&a(O.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===pe&&a(O.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===pe&&a(O.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===pe&&a(O.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=me+e.name;k.A.get(t,{responseType:"blob"}).then((t=>{const a=URL.createObjectURL(t.data),r=document.createElement("a");r.download=e.name,r.href=a,r.click()})).catch((e=>M(e,{variant:"error"})))}else M("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return a=e.file_no,void t((0,I.qO)(a));var a},onDeleteRow:()=>(e=>{fe(!0);const t=U.find((e=>e.label===pe)).api;k.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),fe(!1),200===t.status||201===t.status){const t=te.filter((t=>t.id!==e));K([]),ae(t),M("Delete Successfully")}})).catch((e=>{fe(!1),e.errors&&Object.keys(e.errors).map((t=>M(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,R.jsx)(E.dO,{height:Oe,emptyRows:(0,B.xl)(z,Z,te.length)}),(0,R.jsx)(E.Sm,{isNotFound:ye})]})]})})}),(0,R.jsxs)(h.A,{sx:{position:"relative"},children:[(0,R.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:Ce.length,rowsPerPage:Z,page:z,onPageChange:$,onRowsPerPageChange:ee}),(0,R.jsx)(j.A,{control:(0,R.jsx)(A.A,{checked:W,onChange:X}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}}}]);