"use strict";(self.webpackChunkccms=self.webpackChunkccms||[]).push([[9728],{50430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var r=a(9950),n=a(79537),o=a(12257),l=a(75165),i=a(97591),s=a(23266),c=a(48089),d=a(68367),u=a(84142),h=a(6368),f=a(82053),p=a(74745),m=a(1320),g=a(15769),x=a(34075),b=a(91434),v=a(16497),A=a(37324),w=a(29031),S=a(73878),j=a(13564),D=a(26689),C=a(90260),O=a(46765),y=a(86608),P=a(38861),B=a(22704),T=a(66075),_=a(44185),N=a(63358),E=a(72870),M=a(93455),L=a(32741),k=a(95074),F=a(42686),R=a(44414);const I=["new","old"],X=[{id:"status",label:"Order Status",align:"left",width:500},{id:"updated_at",label:"Date",align:"left",width:600},{id:"file_no",label:"File No",align:"left",width:800},{id:"property_type",label:"Property Type",align:"left",width:800},{id:"transaction_type",label:"Transection Type",align:"left",width:500},{id:"purchase_price",label:"Purchase Price",align:"left",width:800},{id:""}],V=[{api:"titleInsurance",label:"Title Insurance"},{api:"corpLienSearch",label:"Coop Lien Searches"},{api:"eaglepolicy",label:"Eagle 9 Policy"},{api:"offeringPlan",label:"Coop/Condo offering plans"},{api:"uccform",label:"UCC"},{api:"exchanger",label:"1031 Exchanges"},{api:"acricetax",label:"Acris E-Tax forms"},{api:"othersearch",label:"Other Search / Request"},{api:"",label:"Sightline\xae"}];function q(){const{themeStretch:e}=(0,y.A)(),t=(0,S.wA)(),a=(0,j.Zp)(),{enqueueSnackbar:q}=(0,w.dh)(),{dense:U,page:Y,order:H,orderBy:z,rowsPerPage:W,setPage:Z,selected:G,setSelected:J,onSort:K,onChangeDense:Q,onChangePage:$,onChangeRowsPerPage:ee}=(0,P.Ay)({defaultOrderBy:"createDate"}),[te,ae]=(0,r.useState)([]),[re,ne]=(0,r.useState)(""),[oe,le]=(0,r.useState)("new"),[ie,se]=(0,r.useState)(null),[ce,de]=(0,r.useState)(null),{currentTab:ue,onChangeTab:he}=(0,O.A)("all"),[fe,pe]=(0,r.useState)("Title Insurance"),[me,ge]=(0,r.useState)(!1),[xe,be]=(0,r.useState)(""),[ve,Ae]=(0,r.useState)(null),{id:we}=(0,j.g)(),Se=Boolean(ve);(0,r.useEffect)((()=>{"Sightline\xae"!==fe&&je(V.find((e=>e.label===fe)).api)}),[fe]);const je=e=>{ge(!0);try{L.A.get("user/".concat(e,"/all/").concat(we)).then((e=>{ge(!1);const t=e.data;200===e.status?(be(t.filePath),ae(t.orders)):q(t.message)}))}catch(t){if(ge(!1),t.errors){Object.keys(t.errors).map((e=>q(t.errors[e][0],{variant:"error"})))}}},De=function(e){let{tableData:t,comparator:a,filterName:r,filterStatus:n,filterService:o,filterStartDate:l,filterEndDate:i}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const r=a(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.order_title.transaction_type.toLowerCase().indexOf(r.toLowerCase())||-1!==e.order_title.property_type.toLowerCase().indexOf(r.toLowerCase()))));"all"!==n&&(t=t.filter((e=>e.status===n)));"new"!==o&&(t=t.filter((e=>e.status===o)));l&&i&&(t=t.filter((e=>e.updated_at.getTime()>=l.getTime()&&e.updated_at.getTime()<=i.getTime())));return t}({tableData:te,comparator:(0,P.hz)(H,z),filterName:re,filterService:oe,filterStatus:ue,filterStartDate:ie,filterEndDate:ce}),Ce=U?56:76,Oe=!De.length&&!!re||!De.length&&!!ue||!De.length&&!!oe||!De.length&&!!ce||!De.length&&!!ie,ye=e=>te.filter((t=>t.status===e)).length,Pe=[{value:"all",label:"All",color:"info",count:te.length},{value:"active",label:"Active",color:"info",count:ye("active")},{value:"new",label:"New",color:"info",count:ye("new")},{value:"placed",label:"Placed",color:"info",count:ye("placed")},{value:"completed",label:"Completed",color:"success",count:ye("completed")},{value:"on hold",label:"On Hold",color:"warning",count:ye("on hold")},{value:"draft",label:"Draft",color:"default",count:ye("draft")},{value:"cancelled",label:"Cancelled",color:"error",count:ye("cancelled")}];return(0,R.jsxs)(n.A,{maxWidth:!e&&"lg",children:[me&&(0,R.jsx)(k.A,{}),(0,R.jsx)(N.A,{heading:"Your Orders",links:[{name:"Dashboard",href:C.nB.root},{name:"Orders"}],action:(0,R.jsxs)(o.A,{gap:1,direction:"row",children:[(0,R.jsx)(l.A,{variant:"contained","aria-controls":Se?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Se?"true":void 0,onClick:e=>{Ae(e.currentTarget)},startIcon:(0,R.jsx)(T.A,{icon:"lets-icons:order"}),children:"New Order"}),(0,R.jsxs)(i.A,{id:"basic-menu",anchorEl:ve,open:Se,onClose:()=>{Ae(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.titleInsurance,"/").concat(we),children:"Title Insurance"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.coopLienSearch,"/").concat(we),children:"Coop Lien Search"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.eagle9Policy,"/").concat(we),children:"Eagle 9 Policy"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.coopCondoOfferinPlans,"/").concat(we),children:"Coop/Condo Offering Plans"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.uccCreateFile,"/").concat(we),children:"UCC - Create/File"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.exchange1031,"/").concat(we),children:"1031 Exchange"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.acrisETax,"/").concat(we),children:"Acris E-Tax Forms"}),(0,R.jsx)(s.A,{component:D.N_,to:"".concat(C.nB.orders.otherSearches,"/").concat(we),children:"Other Searches"})]}),(0,R.jsx)(l.A,{variant:"contained",component:D.N_,to:C.nB.legalForm,startIcon:(0,R.jsx)(T.A,{icon:"clarity:form-line"}),children:"Legal Forms"})]})}),(0,R.jsx)(c.A,{sx:{mb:5},children:(0,R.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:fe,onChange:(e,t)=>pe(t),sx:{px:2,bgcolor:"background.neutral"},children:V.map((e=>(0,R.jsx)(u.A,{disableRipple:!0,value:e.label,label:(0,R.jsx)(o.A,{spacing:1,direction:"row",alignItems:"center",children:(0,R.jsx)("div",{children:e.label})})},e.label)))})}),(0,R.jsx)(h.A,{sx:{p:2},children:(0,R.jsx)(f.A,{variant:"h4",gutterBottom:!0,children:fe.label})}),(0,R.jsxs)(c.A,{children:[(0,R.jsx)(d.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:ue,onChange:he,sx:{px:2,bgcolor:"background.neutral"},children:Pe.map((e=>(0,R.jsx)(u.A,{disableRipple:!0,value:e.value,label:(0,R.jsxs)(o.A,{spacing:1,direction:"row",alignItems:"center",children:[(0,R.jsx)("div",{children:e.label})," ",(0,R.jsxs)(B.A,{color:e.color,children:[" ",e.count," "]})]})},e.value)))}),(0,R.jsx)(p.A,{}),(0,R.jsx)(M.F,{filterName:re,filterService:oe,filterStartDate:ie,filterEndDate:ce,onFilterName:e=>{ne(e),Z(0)},onFilterService:e=>{le(e.target.value)},onFilterStartDate:e=>{se(e)},onFilterEndDate:e=>{de(e)},optionsService:I}),(0,R.jsx)(_.A,{children:(0,R.jsx)(m.A,{sx:{minWidth:800,position:"relative"},children:(0,R.jsxs)(g.A,{size:U?"small":"medium",children:[(0,R.jsx)(E.er,{order:H,orderBy:z,headLabel:X,rowCount:te.length,numSelected:G.length,onSort:K}),(0,R.jsxs)(x.A,{children:[De.slice(Y*W,Y*W+W).map((e=>(0,R.jsx)(M.o,{row:e,onViewRow:()=>(e=>{"Title Insurance"===fe&&a(C.nB.viewOrders.titleInsuranceOrderView,{state:e}),"Coop Lien Searches"===fe&&a(C.nB.viewOrders.CoopLienSearchOrderView,{state:e}),"Eagle 9 Policy"===fe&&a(C.nB.viewOrders.eagle9PolicyOrderView,{state:e}),"Coop/Condo offering plans"===fe&&a(C.nB.viewOrders.coopCondoOfferinPlansOrderView,{state:e}),"1031 Exchanges"===fe&&a(C.nB.viewOrders.exchange1031OrderView,{state:e}),"Other Search / Request"===fe&&a(C.nB.viewOrders.otherSearchesOrderView,{state:e})})(e),onDownloadDocument:()=>(e=>{if(e){const t=xe+e.name;L.A.get(t,{responseType:"blob"}).then((t=>{const a=URL.createObjectURL(t.data),r=document.createElement("a");r.download=e.name,r.href=a,r.click()})).catch((e=>q(e,{variant:"error"})))}else q("Document Not Found!",{variant:"error"})})(null===e||void 0===e?void 0:e.document),onOrderContin:()=>{return a=e.file_no,void t((0,F.qO)(a));var a},onDeleteRow:()=>(e=>{ge(!0);const t=V.find((e=>e.label===fe)).api;L.A.delete("user/".concat(t,"/").concat(e)).then((t=>{if(console.log("response",t),ge(!1),200===t.status||201===t.status){const t=te.filter((t=>t.id!==e));J([]),ae(t),q("Delete Successfully")}})).catch((e=>{ge(!1),e.errors&&Object.keys(e.errors).map((t=>q(e.errors[t][0],{variant:"error"})))}))})(e.id)},e.id))),(0,R.jsx)(E.dO,{height:Ce,emptyRows:(0,P.xl)(Y,W,te.length)}),(0,R.jsx)(E.Sm,{isNotFound:Oe})]})]})})}),(0,R.jsxs)(h.A,{sx:{position:"relative"},children:[(0,R.jsx)(b.A,{rowsPerPageOptions:[5,10,25],component:"div",count:De.length,rowsPerPage:W,page:Y,onPageChange:$,onRowsPerPageChange:ee}),(0,R.jsx)(v.A,{control:(0,R.jsx)(A.A,{checked:U,onChange:Q}),label:"Dense",sx:{px:3,py:1.5,top:0,position:{md:"absolute"}}})]})]})]})}},12521:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(64388);function n(e){return(0,r.A)({},e)}},1369:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(27476),n=a(62588),o=a(94369),l=a(43298),i=a(98889),s=a(12521),c=a(20053),d=a(78397),u=1440,h=2520,f=43200,p=86400;function m(e,t){return(0,d.A)(1,arguments),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.A)(2,arguments);var m=a.locale||l.A;if(!m.formatDistance)throw new RangeError("locale must contain formatDistance property");var g=(0,r.A)(e,t);if(isNaN(g))throw new RangeError("Invalid time value");var x,b,v=(0,s.A)(a);v.addSuffix=Boolean(a.addSuffix),v.comparison=g,g>0?(x=(0,i.A)(t),b=(0,i.A)(e)):(x=(0,i.A)(e),b=(0,i.A)(t));var A,w=(0,o.A)(b,x),S=((0,c.A)(b)-(0,c.A)(x))/1e3,j=Math.round((w-S)/60);if(j<2)return a.includeSeconds?w<5?m.formatDistance("lessThanXSeconds",5,v):w<10?m.formatDistance("lessThanXSeconds",10,v):w<20?m.formatDistance("lessThanXSeconds",20,v):w<40?m.formatDistance("halfAMinute",null,v):w<60?m.formatDistance("lessThanXMinutes",1,v):m.formatDistance("xMinutes",1,v):0===j?m.formatDistance("lessThanXMinutes",1,v):m.formatDistance("xMinutes",j,v);if(j<45)return m.formatDistance("xMinutes",j,v);if(j<90)return m.formatDistance("aboutXHours",1,v);if(j<u){var D=Math.round(j/60);return m.formatDistance("aboutXHours",D,v)}if(j<h)return m.formatDistance("xDays",1,v);if(j<f){var C=Math.round(j/u);return m.formatDistance("xDays",C,v)}if(j<p)return A=Math.round(j/f),m.formatDistance("aboutXMonths",A,v);if((A=(0,n.A)(b,x))<12){var O=Math.round(j/f);return m.formatDistance("xMonths",O,v)}var y=A%12,P=Math.floor(A/12);return y<3?m.formatDistance("aboutXYears",P,v):y<9?m.formatDistance("overXYears",P,v):m.formatDistance("almostXYears",P+1,v)}(e,Date.now(),t)}}}]);